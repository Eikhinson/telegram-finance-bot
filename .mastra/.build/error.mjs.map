{"version":3,"file":"error.mjs","sources":["../../node_modules/@mastra/core/dist/chunk-PZUZNPFM.js"],"sourcesContent":["// src/error/utils.ts\nfunction safeParseErrorObject(obj) {\n  if (typeof obj !== \"object\" || obj === null) {\n    return String(obj);\n  }\n  try {\n    const stringified = JSON.stringify(obj);\n    if (stringified === \"{}\") {\n      return String(obj);\n    }\n    return stringified;\n  } catch {\n    return String(obj);\n  }\n}\nfunction getErrorFromUnknown(unknown, options = {}) {\n  const defaultOptions = {\n    fallbackMessage: \"Unknown error\",\n    maxDepth: 5,\n    supportSerialization: true,\n    includeStack: true\n  };\n  const mergedOptions = options ? { ...defaultOptions, ...options } : defaultOptions;\n  const { fallbackMessage, maxDepth, supportSerialization, includeStack } = mergedOptions;\n  if (unknown && unknown instanceof Error) {\n    if (includeStack === false) {\n      unknown.stack = void 0;\n    }\n    if (supportSerialization) {\n      addErrorToJSON(unknown);\n    }\n    return unknown;\n  }\n  let error;\n  if (unknown && typeof unknown === \"object\") {\n    const errorMessage = unknown && \"message\" in unknown && typeof unknown.message === \"string\" ? unknown.message : safeParseErrorObject(unknown);\n    const errorCause = \"cause\" in unknown && unknown.cause !== void 0 ? unknown.cause instanceof Error ? unknown.cause : maxDepth > 0 ? getErrorFromUnknown(unknown.cause, { ...mergedOptions, maxDepth: maxDepth - 1 }) : void 0 : void 0;\n    error = new Error(errorMessage, errorCause ? { cause: errorCause } : void 0);\n    const { stack: _, ...propsWithoutStack } = unknown;\n    Object.assign(error, propsWithoutStack);\n    if (includeStack) {\n      error.stack = \"stack\" in unknown && typeof unknown.stack === \"string\" ? unknown.stack : void 0;\n    }\n  } else if (unknown && typeof unknown === \"string\") {\n    error = new Error(unknown);\n    error.stack = void 0;\n  } else {\n    error = new Error(fallbackMessage);\n    error.stack = void 0;\n  }\n  if (supportSerialization) {\n    addErrorToJSON(error);\n  }\n  return error;\n}\nfunction addErrorToJSON(error) {\n  if (error.toJSON) {\n    return;\n  }\n  Object.defineProperty(error, \"toJSON\", {\n    value: function() {\n      const json = {\n        message: this.message,\n        name: this.name\n      };\n      if (this.stack !== void 0) {\n        json.stack = this.stack;\n      }\n      if (this.cause !== void 0) {\n        json.cause = this.cause;\n      }\n      const errorAsAny = this;\n      for (const key in errorAsAny) {\n        if (errorAsAny.hasOwnProperty(key) && !(key in json) && key !== \"toJSON\") {\n          json[key] = errorAsAny[key];\n        }\n      }\n      return json;\n    },\n    enumerable: false,\n    writable: true,\n    configurable: true\n  });\n}\n\n// src/error/index.ts\nvar ErrorDomain = /* @__PURE__ */ ((ErrorDomain2) => {\n  ErrorDomain2[\"TOOL\"] = \"TOOL\";\n  ErrorDomain2[\"AGENT\"] = \"AGENT\";\n  ErrorDomain2[\"MCP\"] = \"MCP\";\n  ErrorDomain2[\"AGENT_NETWORK\"] = \"AGENT_NETWORK\";\n  ErrorDomain2[\"MASTRA_SERVER\"] = \"MASTRA_SERVER\";\n  ErrorDomain2[\"MASTRA_TELEMETRY\"] = \"MASTRA_TELEMETRY\";\n  ErrorDomain2[\"MASTRA_OBSERVABILITY\"] = \"MASTRA_OBSERVABILITY\";\n  ErrorDomain2[\"MASTRA_WORKFLOW\"] = \"MASTRA_WORKFLOW\";\n  ErrorDomain2[\"MASTRA_VOICE\"] = \"MASTRA_VOICE\";\n  ErrorDomain2[\"MASTRA_VECTOR\"] = \"MASTRA_VECTOR\";\n  ErrorDomain2[\"LLM\"] = \"LLM\";\n  ErrorDomain2[\"EVAL\"] = \"EVAL\";\n  ErrorDomain2[\"SCORER\"] = \"SCORER\";\n  ErrorDomain2[\"A2A\"] = \"A2A\";\n  ErrorDomain2[\"MASTRA_INSTANCE\"] = \"MASTRA_INSTANCE\";\n  ErrorDomain2[\"MASTRA\"] = \"MASTRA\";\n  ErrorDomain2[\"DEPLOYER\"] = \"DEPLOYER\";\n  ErrorDomain2[\"STORAGE\"] = \"STORAGE\";\n  ErrorDomain2[\"MODEL_ROUTER\"] = \"MODEL_ROUTER\";\n  return ErrorDomain2;\n})(ErrorDomain || {});\nvar ErrorCategory = /* @__PURE__ */ ((ErrorCategory2) => {\n  ErrorCategory2[\"UNKNOWN\"] = \"UNKNOWN\";\n  ErrorCategory2[\"USER\"] = \"USER\";\n  ErrorCategory2[\"SYSTEM\"] = \"SYSTEM\";\n  ErrorCategory2[\"THIRD_PARTY\"] = \"THIRD_PARTY\";\n  return ErrorCategory2;\n})(ErrorCategory || {});\nvar MastraBaseError = class extends Error {\n  id;\n  domain;\n  category;\n  details = {};\n  message;\n  constructor(errorDefinition, originalError) {\n    let error;\n    if (originalError instanceof Error) {\n      error = originalError;\n    } else if (originalError) {\n      const errorMessage = safeParseErrorObject(originalError);\n      error = new Error(errorMessage);\n    }\n    const message = errorDefinition.text ?? error?.message ?? \"Unknown error\";\n    super(message, { cause: error });\n    this.id = errorDefinition.id;\n    this.domain = errorDefinition.domain;\n    this.category = errorDefinition.category;\n    this.details = errorDefinition.details ?? {};\n    this.message = message;\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n  /**\n   * Returns a structured representation of the error, useful for logging or API responses.\n   */\n  toJSONDetails() {\n    return {\n      message: this.message,\n      domain: this.domain,\n      category: this.category,\n      details: this.details\n    };\n  }\n  toJSON() {\n    return {\n      message: this.message,\n      details: this.toJSONDetails(),\n      code: this.id\n    };\n  }\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n};\nvar MastraError = class extends MastraBaseError {\n};\n\nexport { ErrorCategory, ErrorDomain, MastraBaseError, MastraError, getErrorFromUnknown, safeParseErrorObject };\n//# sourceMappingURL=chunk-PZUZNPFM.js.map\n//# sourceMappingURL=chunk-PZUZNPFM.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0]}