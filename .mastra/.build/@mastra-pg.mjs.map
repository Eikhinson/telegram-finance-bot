{"version":3,"file":"@mastra-pg.mjs","sources":["../../node_modules/@mastra/core/dist/chunk-BKBVQTOH.js","../../node_modules/@mastra/core/dist/storage/index.js","../../node_modules/assert-options/dist/src/types.js","../../node_modules/assert-options/dist/src/handler.js","../../node_modules/assert-options/dist/src/assert.js","../../node_modules/assert-options/dist/src/index.js","../../node_modules/pg-promise/lib/assert.js","../../node_modules/pg-promise/lib/promise-adapter.js","../../node_modules/pg-promise/lib/utils/color.js","../../node_modules/pg-promise/lib/patterns.js","../../node_modules/pg-promise/lib/utils/index.js","../../node_modules/pg-promise/lib/database-pool.js","../../node_modules/pg-promise/lib/inner-state.js","../../node_modules/pg-promise/lib/types/server-formatting.js","../../node_modules/pg-promise/lib/text.js","../../node_modules/pg-promise/lib/errors/query-result-error.js","../../node_modules/pg-minify/lib/utils.js","../../node_modules/pg-minify/lib/error.js","../../node_modules/pg-minify/lib/parser.js","../../node_modules/pg-minify/lib/index.js","../../node_modules/pg-promise/lib/errors/query-file-error.js","../../node_modules/pg-promise/lib/errors/prepared-statement-error.js","../../node_modules/pg-promise/lib/errors/parameterized-query-error.js","../../node_modules/pg-promise/lib/errors/index.js","../../node_modules/pg-promise/lib/formatting.js","../../node_modules/pg-promise/lib/query-file.js","../../node_modules/pg-promise/lib/types/prepared-statement.js","../../node_modules/pg-promise/lib/types/parameterized-query.js","../../node_modules/pg-promise/lib/types/index.js","../../node_modules/pg-promise/lib/query-result.js","../../node_modules/pg-promise/lib/promise-parser.js","../../node_modules/pg-promise/lib/helpers/column.js","../../node_modules/pg-promise/lib/helpers/table-name.js","../../node_modules/pg-promise/lib/helpers/column-set.js","../../node_modules/pg-promise/lib/helpers/methods/concat.js","../../node_modules/pg-promise/lib/helpers/methods/insert.js","../../node_modules/pg-promise/lib/helpers/methods/update.js","../../node_modules/pg-promise/lib/helpers/methods/values.js","../../node_modules/pg-promise/lib/helpers/methods/sets.js","../../node_modules/pg-promise/lib/helpers/methods/index.js","../../node_modules/pg-promise/lib/helpers/index.js","../../node_modules/pg-promise/lib/utils/public.js","../../node_modules/pg-promise/lib/tx-mode.js","../../node_modules/pg-promise/lib/events.js","../../node_modules/pg-promise/lib/special-query.js","../../node_modules/pg-promise/lib/context.js","../../node_modules/pg-promise/lib/connect.js","../../node_modules/pg-promise/lib/stream.js","../../node_modules/pg-promise/lib/query.js","../../node_modules/spex/lib/utils/static.js","../../node_modules/spex/lib/utils/index.js","../../node_modules/spex/lib/errors/batch.js","../../node_modules/spex/lib/ext/batch.js","../../node_modules/spex/lib/errors/page.js","../../node_modules/spex/lib/ext/page.js","../../node_modules/spex/lib/errors/sequence.js","../../node_modules/spex/lib/ext/sequence.js","../../node_modules/spex/lib/ext/stream/read.js","../../node_modules/spex/lib/ext/stream/index.js","../../node_modules/spex/lib/errors/index.js","../../node_modules/spex/lib/adapter.js","../../node_modules/spex/lib/index.js","../../node_modules/pg-promise/lib/task.js","../../node_modules/pg-promise/lib/database.js","../../node_modules/pg-promise/lib/main.js","../../node_modules/pg-promise/lib/index.js","../../node_modules/@mastra/pg/dist/index.js"],"sourcesContent":["import { TABLE_WORKFLOW_SNAPSHOT, TABLE_EVALS, TABLE_MESSAGES, TABLE_THREADS, TABLE_TRACES, TABLE_SCHEMAS, TABLE_SCORERS, TABLE_RESOURCES, TABLE_AI_SPANS } from './chunk-SJMKDSRF.js';\nimport { MastraError } from './chunk-PZUZNPFM.js';\nimport { MastraBase } from './chunk-VQASQG5D.js';\n\n// src/storage/base.ts\nfunction ensureDate(date) {\n  if (!date) return void 0;\n  return date instanceof Date ? date : new Date(date);\n}\nfunction serializeDate(date) {\n  if (!date) return void 0;\n  const dateObj = ensureDate(date);\n  return dateObj?.toISOString();\n}\nfunction resolveMessageLimit({\n  last,\n  defaultLimit\n}) {\n  if (typeof last === \"number\") return Math.max(0, last);\n  if (last === false) return 0;\n  return defaultLimit;\n}\nvar MastraStorage = class extends MastraBase {\n  /** @deprecated import from { TABLE_WORKFLOW_SNAPSHOT } '@mastra/core/storage' instead */\n  static TABLE_WORKFLOW_SNAPSHOT = TABLE_WORKFLOW_SNAPSHOT;\n  /** @deprecated import from { TABLE_EVALS } '@mastra/core/storage' instead */\n  static TABLE_EVALS = TABLE_EVALS;\n  /** @deprecated import from { TABLE_MESSAGES } '@mastra/core/storage' instead */\n  static TABLE_MESSAGES = TABLE_MESSAGES;\n  /** @deprecated import from { TABLE_THREADS } '@mastra/core/storage' instead */\n  static TABLE_THREADS = TABLE_THREADS;\n  /** @deprecated import { TABLE_TRACES } from '@mastra/core/storage' instead */\n  static TABLE_TRACES = TABLE_TRACES;\n  hasInitialized = null;\n  shouldCacheInit = true;\n  stores;\n  constructor({ name }) {\n    super({\n      component: \"STORAGE\",\n      name\n    });\n  }\n  get supports() {\n    return {\n      selectByIncludeResourceScope: false,\n      resourceWorkingMemory: false,\n      hasColumn: false,\n      createTable: false,\n      deleteMessages: false,\n      aiTracing: false,\n      indexManagement: false,\n      getScoresBySpan: false\n    };\n  }\n  ensureDate(date) {\n    return ensureDate(date);\n  }\n  serializeDate(date) {\n    return serializeDate(date);\n  }\n  /**\n   * Resolves limit for how many messages to fetch\n   *\n   * @param last The number of messages to fetch\n   * @param defaultLimit The default limit to use if last is not provided\n   * @returns The resolved limit\n   */\n  resolveMessageLimit({\n    last,\n    defaultLimit\n  }) {\n    return resolveMessageLimit({ last, defaultLimit });\n  }\n  getSqlType(type) {\n    switch (type) {\n      case \"text\":\n        return \"TEXT\";\n      case \"timestamp\":\n        return \"TIMESTAMP\";\n      case \"float\":\n        return \"FLOAT\";\n      case \"integer\":\n        return \"INTEGER\";\n      case \"bigint\":\n        return \"BIGINT\";\n      case \"jsonb\":\n        return \"JSONB\";\n      default:\n        return \"TEXT\";\n    }\n  }\n  getDefaultValue(type) {\n    switch (type) {\n      case \"text\":\n      case \"uuid\":\n        return \"DEFAULT ''\";\n      case \"timestamp\":\n        return \"DEFAULT '1970-01-01 00:00:00'\";\n      case \"integer\":\n      case \"float\":\n      case \"bigint\":\n        return \"DEFAULT 0\";\n      case \"jsonb\":\n        return \"DEFAULT '{}'\";\n      default:\n        return \"DEFAULT ''\";\n    }\n  }\n  batchTraceInsert({ records }) {\n    if (this.stores?.traces) {\n      return this.stores.traces.batchTraceInsert({ records });\n    }\n    return this.batchInsert({ tableName: TABLE_TRACES, records });\n  }\n  async getResourceById(_) {\n    throw new Error(\n      `Resource working memory is not supported by this storage adapter (${this.constructor.name}). Supported storage adapters: LibSQL (@mastra/libsql), PostgreSQL (@mastra/pg), Upstash (@mastra/upstash). To use per-resource working memory, switch to one of these supported storage adapters.`\n    );\n  }\n  async saveResource(_) {\n    throw new Error(\n      `Resource working memory is not supported by this storage adapter (${this.constructor.name}). Supported storage adapters: LibSQL (@mastra/libsql), PostgreSQL (@mastra/pg), Upstash (@mastra/upstash). To use per-resource working memory, switch to one of these supported storage adapters.`\n    );\n  }\n  async updateResource(_) {\n    throw new Error(\n      `Resource working memory is not supported by this storage adapter (${this.constructor.name}). Supported storage adapters: LibSQL (@mastra/libsql), PostgreSQL (@mastra/pg), Upstash (@mastra/upstash). To use per-resource working memory, switch to one of these supported storage adapters.`\n    );\n  }\n  async deleteMessages(_messageIds) {\n    throw new Error(\n      `Message deletion is not supported by this storage adapter (${this.constructor.name}). The deleteMessages method needs to be implemented in the storage adapter.`\n    );\n  }\n  async init() {\n    if (this.shouldCacheInit && await this.hasInitialized) {\n      return;\n    }\n    const tableCreationTasks = [\n      this.createTable({\n        tableName: TABLE_WORKFLOW_SNAPSHOT,\n        schema: TABLE_SCHEMAS[TABLE_WORKFLOW_SNAPSHOT]\n      }),\n      this.createTable({\n        tableName: TABLE_EVALS,\n        schema: TABLE_SCHEMAS[TABLE_EVALS]\n      }),\n      this.createTable({\n        tableName: TABLE_THREADS,\n        schema: TABLE_SCHEMAS[TABLE_THREADS]\n      }),\n      this.createTable({\n        tableName: TABLE_MESSAGES,\n        schema: TABLE_SCHEMAS[TABLE_MESSAGES]\n      }),\n      this.createTable({\n        tableName: TABLE_TRACES,\n        schema: TABLE_SCHEMAS[TABLE_TRACES]\n      }),\n      this.createTable({\n        tableName: TABLE_SCORERS,\n        schema: TABLE_SCHEMAS[TABLE_SCORERS]\n      })\n    ];\n    if (this.supports.resourceWorkingMemory) {\n      tableCreationTasks.push(\n        this.createTable({\n          tableName: TABLE_RESOURCES,\n          schema: TABLE_SCHEMAS[TABLE_RESOURCES]\n        })\n      );\n    }\n    if (this.supports.aiTracing) {\n      tableCreationTasks.push(\n        this.createTable({\n          tableName: TABLE_AI_SPANS,\n          schema: TABLE_SCHEMAS[TABLE_AI_SPANS]\n        })\n      );\n    }\n    this.hasInitialized = Promise.all(tableCreationTasks).then(() => true);\n    await this.hasInitialized;\n    await this?.alterTable?.({\n      tableName: TABLE_MESSAGES,\n      schema: TABLE_SCHEMAS[TABLE_MESSAGES],\n      ifNotExists: [\"resourceId\"]\n    });\n    await this?.alterTable?.({\n      tableName: TABLE_WORKFLOW_SNAPSHOT,\n      schema: TABLE_SCHEMAS[TABLE_WORKFLOW_SNAPSHOT],\n      ifNotExists: [\"resourceId\"]\n    });\n    await this?.alterTable?.({\n      tableName: TABLE_SCORERS,\n      schema: TABLE_SCHEMAS[TABLE_SCORERS],\n      ifNotExists: [\"spanId\"]\n    });\n  }\n  async persistWorkflowSnapshot({\n    workflowName,\n    runId,\n    resourceId,\n    snapshot\n  }) {\n    await this.init();\n    const data = {\n      workflow_name: workflowName,\n      run_id: runId,\n      resourceId,\n      snapshot,\n      createdAt: /* @__PURE__ */ new Date(),\n      updatedAt: /* @__PURE__ */ new Date()\n    };\n    this.logger.debug(\"Persisting workflow snapshot\", { workflowName, runId, data });\n    await this.insert({\n      tableName: TABLE_WORKFLOW_SNAPSHOT,\n      record: data\n    });\n  }\n  async loadWorkflowSnapshot({\n    workflowName,\n    runId\n  }) {\n    if (!this.hasInitialized) {\n      await this.init();\n    }\n    this.logger.debug(\"Loading workflow snapshot\", { workflowName, runId });\n    const d = await this.load({\n      tableName: TABLE_WORKFLOW_SNAPSHOT,\n      keys: { workflow_name: workflowName, run_id: runId }\n    });\n    return d ? d.snapshot : null;\n  }\n  async getScoresBySpan({\n    traceId,\n    spanId,\n    pagination: _pagination\n  }) {\n    throw new MastraError({\n      id: \"SCORES_STORAGE_GET_SCORES_BY_SPAN_NOT_IMPLEMENTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      details: { traceId, spanId }\n    });\n  }\n  /**\n   * OBSERVABILITY\n   */\n  /**\n   * Provides hints for AI tracing strategy selection by the DefaultExporter.\n   * Storage adapters can override this to specify their preferred and supported strategies.\n   */\n  get aiTracingStrategy() {\n    if (this.stores?.observability) {\n      return this.stores.observability.aiTracingStrategy;\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_TRACING_STRATEGY_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Creates a single AI span record in the storage provider.\n   */\n  async createAISpan(span) {\n    if (this.stores?.observability) {\n      return this.stores.observability.createAISpan(span);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_CREATE_AI_SPAN_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Updates a single AI span with partial data. Primarily used for realtime trace creation.\n   */\n  async updateAISpan(params) {\n    if (this.stores?.observability) {\n      return this.stores.observability.updateAISpan(params);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_UPDATE_AI_SPAN_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Retrieves a single AI trace with all its associated spans.\n   */\n  async getAITrace(traceId) {\n    if (this.stores?.observability) {\n      return this.stores.observability.getAITrace(traceId);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_GET_AI_TRACE_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Retrieves a paginated list of AI traces with optional filtering.\n   */\n  async getAITracesPaginated(args) {\n    if (this.stores?.observability) {\n      return this.stores.observability.getAITracesPaginated(args);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_GET_AI_TRACES_PAGINATED_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Creates multiple AI spans in a single batch.\n   */\n  async batchCreateAISpans(args) {\n    if (this.stores?.observability) {\n      return this.stores.observability.batchCreateAISpans(args);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_BATCH_CREATE_AI_SPANS_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Updates multiple AI spans in a single batch.\n   */\n  async batchUpdateAISpans(args) {\n    if (this.stores?.observability) {\n      return this.stores.observability.batchUpdateAISpans(args);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_BATCH_UPDATE_AI_SPANS_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Deletes multiple AI traces and all their associated spans in a single batch operation.\n   */\n  async batchDeleteAITraces(args) {\n    if (this.stores?.observability) {\n      return this.stores.observability.batchDeleteAITraces(args);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_BATCH_DELETE_AI_TRACES_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `AI tracing is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * DATABASE INDEX MANAGEMENT\n   * These methods delegate to the operations store for index management.\n   * Storage adapters that support indexes should implement these in their operations class.\n   */\n  /**\n   * Creates a database index on specified columns\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async createIndex(options) {\n    if (this.stores?.operations) {\n      return this.stores.operations.createIndex(options);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_CREATE_INDEX_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Drops a database index by name\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async dropIndex(indexName) {\n    if (this.stores?.operations) {\n      return this.stores.operations.dropIndex(indexName);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_DROP_INDEX_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Lists database indexes for a table or all tables\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async listIndexes(tableName) {\n    if (this.stores?.operations) {\n      return this.stores.operations.listIndexes(tableName);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_LIST_INDEXES_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n  /**\n   * Gets detailed statistics for a specific index\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async describeIndex(indexName) {\n    if (this.stores?.operations) {\n      return this.stores.operations.describeIndex(indexName);\n    }\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_DESCRIBE_INDEX_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter (${this.constructor.name})`\n    });\n  }\n};\n\nexport { MastraStorage, ensureDate, resolveMessageLimit, serializeDate };\n//# sourceMappingURL=chunk-BKBVQTOH.js.map\n//# sourceMappingURL=chunk-BKBVQTOH.js.map","import { MastraStorage } from '../chunk-BKBVQTOH.js';\nexport { MastraStorage, ensureDate, resolveMessageLimit, serializeDate } from '../chunk-BKBVQTOH.js';\nimport { TABLE_WORKFLOW_SNAPSHOT, TABLE_EVALS, TABLE_TRACES } from '../chunk-SJMKDSRF.js';\nexport { AI_SPAN_SCHEMA, SCORERS_SCHEMA, TABLE_AI_SPANS, TABLE_EVALS, TABLE_MESSAGES, TABLE_RESOURCES, TABLE_SCHEMAS, TABLE_SCORERS, TABLE_THREADS, TABLE_TRACES, TABLE_WORKFLOW_SNAPSHOT } from '../chunk-SJMKDSRF.js';\nimport { MessageList } from '../chunk-GIK7MM2K.js';\nimport { MastraError } from '../chunk-PZUZNPFM.js';\nimport { MastraBase } from '../chunk-VQASQG5D.js';\n\n// src/storage/domains/legacy-evals/base.ts\nvar LegacyEvalsStorage = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"LEGACY_EVALS\"\n    });\n  }\n};\n\n// src/storage/domains/legacy-evals/inmemory.ts\nvar InMemoryLegacyEvals = class extends LegacyEvalsStorage {\n  collection;\n  constructor({ collection }) {\n    super();\n    this.collection = collection;\n  }\n  async getEvals(options) {\n    this.logger.debug(`MockStore: getEvals called`, options);\n    let evals = Array.from(this.collection.values());\n    if (options.agentName) {\n      evals = evals.filter((evalR) => evalR.agent_name === options.agentName);\n    }\n    if (options.type === \"test\") {\n      evals = evals.filter((evalR) => evalR.test_info && evalR.test_info.testPath);\n    } else if (options.type === \"live\") {\n      evals = evals.filter((evalR) => !evalR.test_info || !evalR.test_info.testPath);\n    }\n    if (options.dateRange?.start) {\n      evals = evals.filter((evalR) => new Date(evalR.created_at) >= options.dateRange.start);\n    }\n    if (options.dateRange?.end) {\n      evals = evals.filter((evalR) => new Date(evalR.created_at) <= options.dateRange.end);\n    }\n    evals.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n    const total = evals.length;\n    const page = options.page || 0;\n    const perPage = options.perPage || 100;\n    const start = page * perPage;\n    const end = start + perPage;\n    return {\n      evals: evals.slice(start, end).map((e) => ({\n        agentName: e.agent_name,\n        input: e.input,\n        output: e.output,\n        instructions: e.instructions,\n        result: e.result,\n        createdAt: e.created_at.toISOString(),\n        testInfo: e.test_info,\n        metricName: e.metric_name,\n        runId: e.run_id,\n        globalRunId: e.global_run_id\n      })),\n      total,\n      page,\n      perPage,\n      hasMore: total > end\n    };\n  }\n  async getEvalsByAgentName(agentName, type) {\n    this.logger.debug(`MockStore: getEvalsByAgentName called for ${agentName}`);\n    let evals = Array.from(this.collection.values()).filter((e) => e.agent_name === agentName);\n    if (type === \"test\") {\n      evals = evals.filter((e) => e.test_info && e.test_info.testPath);\n    } else if (type === \"live\") {\n      evals = evals.filter((e) => !e.test_info || !e.test_info.testPath);\n    }\n    return evals.sort(\n      (a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\n    ).map((e) => ({\n      agentName: e.agent_name,\n      input: e.input,\n      output: e.output,\n      instructions: e.instructions,\n      result: e.result,\n      createdAt: e.created_at.toISOString(),\n      metricName: e.metric_name,\n      runId: e.run_id,\n      testInfo: e.test_info,\n      globalRunId: e.global_run_id\n    }));\n  }\n};\n\n// src/storage/domains/memory/base.ts\nvar MemoryStorage = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"MEMORY\"\n    });\n  }\n  async deleteMessages(_messageIds) {\n    throw new Error(\n      `Message deletion is not supported by this storage adapter (${this.constructor.name}). The deleteMessages method needs to be implemented in the storage adapter.`\n    );\n  }\n  async getResourceById(_) {\n    throw new Error(\n      `Resource working memory is not supported by this storage adapter (${this.constructor.name}). Supported storage adapters: LibSQL (@mastra/libsql), PostgreSQL (@mastra/pg), Upstash (@mastra/upstash). To use per-resource working memory, switch to one of these supported storage adapters.`\n    );\n  }\n  async saveResource(_) {\n    throw new Error(\n      `Resource working memory is not supported by this storage adapter (${this.constructor.name}). Supported storage adapters: LibSQL (@mastra/libsql), PostgreSQL (@mastra/pg), Upstash (@mastra/upstash). To use per-resource working memory, switch to one of these supported storage adapters.`\n    );\n  }\n  async updateResource(_) {\n    throw new Error(\n      `Resource working memory is not supported by this storage adapter (${this.constructor.name}). Supported storage adapters: LibSQL (@mastra/libsql), PostgreSQL (@mastra/pg), Upstash (@mastra/upstash). To use per-resource working memory, switch to one of these supported storage adapters.`\n    );\n  }\n  castThreadOrderBy(v) {\n    return v in THREAD_ORDER_BY_SET ? v : \"createdAt\";\n  }\n  castThreadSortDirection(v) {\n    return v in THREAD_THREAD_SORT_DIRECTION_SET ? v : \"DESC\";\n  }\n};\nvar THREAD_ORDER_BY_SET = {\n  createdAt: true,\n  updatedAt: true\n};\nvar THREAD_THREAD_SORT_DIRECTION_SET = {\n  ASC: true,\n  DESC: true\n};\n\n// src/storage/domains/memory/inmemory.ts\nvar InMemoryMemory = class extends MemoryStorage {\n  collection;\n  operations;\n  constructor({\n    collection,\n    operations\n  }) {\n    super();\n    this.collection = collection;\n    this.operations = operations;\n  }\n  async getThreadById({ threadId }) {\n    this.logger.debug(`MockStore: getThreadById called for ${threadId}`);\n    const thread = this.collection.threads.get(threadId);\n    return thread ? { ...thread, metadata: thread.metadata ? { ...thread.metadata } : thread.metadata } : null;\n  }\n  async getThreadsByResourceId({\n    resourceId,\n    orderBy,\n    sortDirection\n  }) {\n    this.logger.debug(`MockStore: getThreadsByResourceId called for ${resourceId}`);\n    const threads = Array.from(this.collection.threads.values()).filter((t) => t.resourceId === resourceId);\n    const sortedThreads = this.sortThreads(\n      threads,\n      this.castThreadOrderBy(orderBy),\n      this.castThreadSortDirection(sortDirection)\n    );\n    return sortedThreads.map((thread) => ({\n      ...thread,\n      metadata: thread.metadata ? { ...thread.metadata } : thread.metadata\n    }));\n  }\n  async saveThread({ thread }) {\n    this.logger.debug(`MockStore: saveThread called for ${thread.id}`);\n    const key = thread.id;\n    this.collection.threads.set(key, thread);\n    return thread;\n  }\n  async updateThread({\n    id,\n    title,\n    metadata\n  }) {\n    this.logger.debug(`MockStore: updateThread called for ${id}`);\n    const thread = this.collection.threads.get(id);\n    if (!thread) {\n      throw new Error(`Thread with id ${id} not found`);\n    }\n    if (thread) {\n      thread.title = title;\n      thread.metadata = { ...thread.metadata, ...metadata };\n      thread.updatedAt = /* @__PURE__ */ new Date();\n    }\n    return thread;\n  }\n  async deleteThread({ threadId }) {\n    this.logger.debug(`MockStore: deleteThread called for ${threadId}`);\n    this.collection.threads.delete(threadId);\n    this.collection.messages.forEach((msg, key) => {\n      if (msg.thread_id === threadId) {\n        this.collection.messages.delete(key);\n      }\n    });\n  }\n  async getMessages({ threadId, selectBy }) {\n    this.logger.debug(`MockStore: getMessages called for thread ${threadId}`);\n    if (!threadId.trim()) throw new Error(\"threadId must be a non-empty string\");\n    const messages = [];\n    if (selectBy?.include && selectBy.include.length > 0) {\n      for (const includeItem of selectBy.include) {\n        const targetMessage = this.collection.messages.get(includeItem.id);\n        if (targetMessage) {\n          const convertedMessage = {\n            id: targetMessage.id,\n            threadId: targetMessage.thread_id,\n            content: typeof targetMessage.content === \"string\" ? JSON.parse(targetMessage.content) : targetMessage.content,\n            role: targetMessage.role,\n            type: targetMessage.type,\n            createdAt: targetMessage.createdAt,\n            resourceId: targetMessage.resourceId\n          };\n          messages.push(convertedMessage);\n          if (includeItem.withPreviousMessages) {\n            const allThreadMessages = Array.from(this.collection.messages.values()).filter((msg) => msg.thread_id === includeItem.threadId).sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n            const targetIndex = allThreadMessages.findIndex((msg) => msg.id === includeItem.id);\n            if (targetIndex !== -1) {\n              const startIndex = Math.max(0, targetIndex - (includeItem.withPreviousMessages || 0));\n              for (let i = startIndex; i < targetIndex; i++) {\n                const message = allThreadMessages[i];\n                if (message && !messages.some((m) => m.id === message.id)) {\n                  const convertedPrevMessage = {\n                    id: message.id,\n                    threadId: message.thread_id,\n                    content: typeof message.content === \"string\" ? JSON.parse(message.content) : message.content,\n                    role: message.role,\n                    type: message.type,\n                    createdAt: message.createdAt,\n                    resourceId: message.resourceId\n                  };\n                  messages.push(convertedPrevMessage);\n                }\n              }\n            }\n          }\n          if (includeItem.withNextMessages) {\n            const allThreadMessages = Array.from(this.collection.messages.values()).filter((msg) => msg.thread_id === includeItem.threadId).sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n            const targetIndex = allThreadMessages.findIndex((msg) => msg.id === includeItem.id);\n            if (targetIndex !== -1) {\n              const endIndex = Math.min(\n                allThreadMessages.length,\n                targetIndex + (includeItem.withNextMessages || 0) + 1\n              );\n              for (let i = targetIndex + 1; i < endIndex; i++) {\n                const message = allThreadMessages[i];\n                if (message && !messages.some((m) => m.id === message.id)) {\n                  const convertedNextMessage = {\n                    id: message.id,\n                    threadId: message.thread_id,\n                    content: typeof message.content === \"string\" ? JSON.parse(message.content) : message.content,\n                    role: message.role,\n                    type: message.type,\n                    createdAt: message.createdAt,\n                    resourceId: message.resourceId\n                  };\n                  messages.push(convertedNextMessage);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (!selectBy?.include || selectBy.include.length === 0 || selectBy?.last) {\n      let threadMessages = Array.from(this.collection.messages.values()).filter((msg) => msg.thread_id === threadId).filter((msg) => !messages.some((m) => m.id === msg.id));\n      if (selectBy?.last) {\n        threadMessages.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n        const lastMessages = threadMessages.slice(-selectBy.last);\n        for (const msg of lastMessages) {\n          const convertedMessage = {\n            id: msg.id,\n            threadId: msg.thread_id,\n            content: typeof msg.content === \"string\" ? JSON.parse(msg.content) : msg.content,\n            role: msg.role,\n            type: msg.type,\n            createdAt: msg.createdAt,\n            resourceId: msg.resourceId\n          };\n          messages.push(convertedMessage);\n        }\n      } else if (!selectBy?.include || selectBy.include.length === 0) {\n        for (const msg of threadMessages) {\n          const convertedMessage = this.parseStoredMessage(msg);\n          messages.push(convertedMessage);\n        }\n      }\n    }\n    messages.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n    return messages;\n  }\n  parseStoredMessage(message) {\n    const { resourceId, content, role, thread_id, ...rest } = message;\n    return {\n      ...rest,\n      threadId: thread_id,\n      ...message.resourceId && { resourceId: message.resourceId },\n      content: typeof content === \"string\" ? content : JSON.parse(content),\n      role\n    };\n  }\n  async getMessagesById({\n    messageIds,\n    format\n  }) {\n    this.logger.debug(`MockStore: getMessagesById called`);\n    const rawMessages = messageIds.map((id) => this.collection.messages.get(id)).filter((message) => !!message);\n    const list = new MessageList().add(rawMessages.map(this.parseStoredMessage), \"memory\");\n    if (format === \"v1\") return list.get.all.v1();\n    return list.get.all.v2();\n  }\n  async saveMessages(args) {\n    const { messages, format = \"v1\" } = args;\n    this.logger.debug(`MockStore: saveMessages called with ${messages.length} messages`);\n    if (messages.some((msg) => msg.id === \"error-message\" || msg.resourceId === null)) {\n      throw new Error(\"Simulated error for testing\");\n    }\n    const threadIds = new Set(messages.map((msg) => msg.threadId).filter((id) => Boolean(id)));\n    for (const threadId of threadIds) {\n      const thread = this.collection.threads.get(threadId);\n      if (thread) {\n        thread.updatedAt = /* @__PURE__ */ new Date();\n      }\n    }\n    for (const message of messages) {\n      const key = message.id;\n      const storageMessage = {\n        id: message.id,\n        thread_id: message.threadId || \"\",\n        content: typeof message.content === \"string\" ? message.content : JSON.stringify(message.content),\n        role: message.role || \"user\",\n        type: message.type || \"text\",\n        createdAt: message.createdAt,\n        resourceId: message.resourceId || null\n      };\n      this.collection.messages.set(key, storageMessage);\n    }\n    const list = new MessageList().add(messages, \"memory\");\n    if (format === `v2`) return list.get.all.v2();\n    return list.get.all.v1();\n  }\n  async updateMessages(args) {\n    const updatedMessages = [];\n    for (const update of args.messages) {\n      const storageMsg = this.collection.messages.get(update.id);\n      if (!storageMsg) continue;\n      const oldThreadId = storageMsg.thread_id;\n      const newThreadId = update.threadId || oldThreadId;\n      let threadIdChanged = false;\n      if (update.threadId && update.threadId !== oldThreadId) {\n        threadIdChanged = true;\n      }\n      if (update.role !== void 0) storageMsg.role = update.role;\n      if (update.type !== void 0) storageMsg.type = update.type;\n      if (update.createdAt !== void 0) storageMsg.createdAt = update.createdAt;\n      if (update.resourceId !== void 0) storageMsg.resourceId = update.resourceId;\n      if (update.content !== void 0) {\n        let oldContent = typeof storageMsg.content === \"string\" ? JSON.parse(storageMsg.content) : storageMsg.content;\n        let newContent = update.content;\n        if (typeof newContent === \"object\" && typeof oldContent === \"object\") {\n          newContent = { ...oldContent, ...newContent };\n          if (oldContent.metadata && newContent.metadata) {\n            newContent.metadata = { ...oldContent.metadata, ...newContent.metadata };\n          }\n        }\n        storageMsg.content = JSON.stringify(newContent);\n      }\n      if (threadIdChanged) {\n        storageMsg.thread_id = newThreadId;\n        const base = Date.now();\n        let oldThreadNewTime;\n        const oldThread = this.collection.threads.get(oldThreadId);\n        if (oldThread) {\n          const prev = new Date(oldThread.updatedAt).getTime();\n          oldThreadNewTime = Math.max(base, prev + 1);\n          oldThread.updatedAt = new Date(oldThreadNewTime);\n        }\n        const newThread = this.collection.threads.get(newThreadId);\n        if (newThread) {\n          const prev = new Date(newThread.updatedAt).getTime();\n          let newThreadNewTime = Math.max(base + 1, prev + 1);\n          if (oldThreadNewTime !== void 0 && newThreadNewTime <= oldThreadNewTime) {\n            newThreadNewTime = oldThreadNewTime + 1;\n          }\n          newThread.updatedAt = new Date(newThreadNewTime);\n        }\n      } else {\n        const thread = this.collection.threads.get(oldThreadId);\n        if (thread) {\n          const prev = new Date(thread.updatedAt).getTime();\n          let newTime = Date.now();\n          if (newTime <= prev) newTime = prev + 1;\n          thread.updatedAt = new Date(newTime);\n        }\n      }\n      this.collection.messages.set(update.id, storageMsg);\n      updatedMessages.push({\n        id: storageMsg.id,\n        threadId: storageMsg.thread_id,\n        content: typeof storageMsg.content === \"string\" ? JSON.parse(storageMsg.content) : storageMsg.content,\n        role: storageMsg.role === \"user\" || storageMsg.role === \"assistant\" ? storageMsg.role : \"user\",\n        type: storageMsg.type,\n        createdAt: storageMsg.createdAt,\n        resourceId: storageMsg.resourceId === null ? void 0 : storageMsg.resourceId\n      });\n    }\n    return updatedMessages;\n  }\n  async deleteMessages(messageIds) {\n    if (!messageIds || messageIds.length === 0) {\n      return;\n    }\n    this.logger.debug(`MockStore: deleteMessages called for ${messageIds.length} messages`);\n    const threadIds = /* @__PURE__ */ new Set();\n    for (const messageId of messageIds) {\n      const message = this.collection.messages.get(messageId);\n      if (message && message.thread_id) {\n        threadIds.add(message.thread_id);\n      }\n      this.collection.messages.delete(messageId);\n    }\n    const now = /* @__PURE__ */ new Date();\n    for (const threadId of threadIds) {\n      const thread = this.collection.threads.get(threadId);\n      if (thread) {\n        thread.updatedAt = now;\n      }\n    }\n  }\n  async getThreadsByResourceIdPaginated(args) {\n    const { resourceId, page, perPage, orderBy, sortDirection } = args;\n    this.logger.debug(`MockStore: getThreadsByResourceIdPaginated called for ${resourceId}`);\n    const threads = Array.from(this.collection.threads.values()).filter((t) => t.resourceId === resourceId);\n    const sortedThreads = this.sortThreads(\n      threads,\n      this.castThreadOrderBy(orderBy),\n      this.castThreadSortDirection(sortDirection)\n    );\n    const clonedThreads = sortedThreads.map((thread) => ({\n      ...thread,\n      metadata: thread.metadata ? { ...thread.metadata } : thread.metadata\n    }));\n    return {\n      threads: clonedThreads.slice(page * perPage, (page + 1) * perPage),\n      total: clonedThreads.length,\n      page,\n      perPage,\n      hasMore: clonedThreads.length > (page + 1) * perPage\n    };\n  }\n  async getMessagesPaginated({\n    threadId,\n    selectBy\n  }) {\n    this.logger.debug(`MockStore: getMessagesPaginated called for thread ${threadId}`);\n    if (!threadId.trim()) throw new Error(\"threadId must be a non-empty string\");\n    const { page = 0, perPage = 40 } = selectBy?.pagination || {};\n    const messages = [];\n    if (selectBy?.include && selectBy.include.length > 0) {\n      for (const includeItem of selectBy.include) {\n        const targetMessage = this.collection.messages.get(includeItem.id);\n        if (targetMessage) {\n          const convertedMessage = {\n            id: targetMessage.id,\n            threadId: targetMessage.thread_id,\n            content: typeof targetMessage.content === \"string\" ? JSON.parse(targetMessage.content) : targetMessage.content,\n            role: targetMessage.role,\n            type: targetMessage.type,\n            createdAt: targetMessage.createdAt,\n            resourceId: targetMessage.resourceId\n          };\n          messages.push(convertedMessage);\n          if (includeItem.withPreviousMessages) {\n            const allThreadMessages = Array.from(this.collection.messages.values()).filter((msg) => msg.thread_id === includeItem.threadId).sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n            const targetIndex = allThreadMessages.findIndex((msg) => msg.id === includeItem.id);\n            if (targetIndex !== -1) {\n              const startIndex = Math.max(0, targetIndex - (includeItem.withPreviousMessages || 0));\n              for (let i = startIndex; i < targetIndex; i++) {\n                const message = allThreadMessages[i];\n                if (message && !messages.some((m) => m.id === message.id)) {\n                  const convertedPrevMessage = {\n                    id: message.id,\n                    threadId: message.thread_id,\n                    content: typeof message.content === \"string\" ? JSON.parse(message.content) : message.content,\n                    role: message.role,\n                    type: message.type,\n                    createdAt: message.createdAt,\n                    resourceId: message.resourceId\n                  };\n                  messages.push(convertedPrevMessage);\n                }\n              }\n            }\n          }\n          if (includeItem.withNextMessages) {\n            const allThreadMessages = Array.from(this.collection.messages.values()).filter((msg) => msg.thread_id === includeItem.threadId).sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n            const targetIndex = allThreadMessages.findIndex((msg) => msg.id === includeItem.id);\n            if (targetIndex !== -1) {\n              const endIndex = Math.min(\n                allThreadMessages.length,\n                targetIndex + (includeItem.withNextMessages || 0) + 1\n              );\n              for (let i = targetIndex + 1; i < endIndex; i++) {\n                const message = allThreadMessages[i];\n                if (message && !messages.some((m) => m.id === message.id)) {\n                  const convertedNextMessage = {\n                    id: message.id,\n                    threadId: message.thread_id,\n                    content: typeof message.content === \"string\" ? JSON.parse(message.content) : message.content,\n                    role: message.role,\n                    type: message.type,\n                    createdAt: message.createdAt,\n                    resourceId: message.resourceId\n                  };\n                  messages.push(convertedNextMessage);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (!selectBy?.include || selectBy.include.length === 0 || selectBy?.last) {\n      let threadMessages = Array.from(this.collection.messages.values()).filter((msg) => msg.thread_id === threadId).filter((msg) => !messages.some((m) => m.id === msg.id));\n      if (selectBy?.pagination?.dateRange) {\n        const { start: from, end: to } = selectBy.pagination.dateRange;\n        threadMessages = threadMessages.filter((msg) => {\n          const msgDate = new Date(msg.createdAt);\n          const fromDate = from ? new Date(from) : null;\n          const toDate = to ? new Date(to) : null;\n          if (fromDate && msgDate < fromDate) return false;\n          if (toDate && msgDate > toDate) return false;\n          return true;\n        });\n      }\n      if (selectBy?.last) {\n        threadMessages.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n        const lastMessages = threadMessages.slice(-selectBy.last);\n        for (const msg of lastMessages) {\n          const convertedMessage = {\n            id: msg.id,\n            threadId: msg.thread_id,\n            content: typeof msg.content === \"string\" ? JSON.parse(msg.content) : msg.content,\n            role: msg.role,\n            type: msg.type,\n            createdAt: msg.createdAt,\n            resourceId: msg.resourceId\n          };\n          messages.push(convertedMessage);\n        }\n      } else if (!selectBy?.include || selectBy.include.length === 0) {\n        for (const msg of threadMessages) {\n          const convertedMessage = {\n            id: msg.id,\n            threadId: msg.thread_id,\n            content: typeof msg.content === \"string\" ? JSON.parse(msg.content) : msg.content,\n            role: msg.role,\n            type: msg.type,\n            createdAt: msg.createdAt,\n            resourceId: msg.resourceId\n          };\n          messages.push(convertedMessage);\n        }\n      }\n    }\n    messages.sort((a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n    const start = page * perPage;\n    const end = start + perPage;\n    return {\n      messages: messages.slice(start, end),\n      total: messages.length,\n      page,\n      perPage,\n      hasMore: messages.length > end\n    };\n  }\n  async getResourceById({ resourceId }) {\n    this.logger.debug(`MockStore: getResourceById called for ${resourceId}`);\n    const resource = this.collection.resources.get(resourceId);\n    return resource ? { ...resource, metadata: resource.metadata ? { ...resource.metadata } : resource.metadata } : null;\n  }\n  async saveResource({ resource }) {\n    this.logger.debug(`MockStore: saveResource called for ${resource.id}`);\n    this.collection.resources.set(resource.id, resource);\n    return resource;\n  }\n  async updateResource({\n    resourceId,\n    workingMemory,\n    metadata\n  }) {\n    this.logger.debug(`MockStore: updateResource called for ${resourceId}`);\n    let resource = this.collection.resources.get(resourceId);\n    if (!resource) {\n      resource = {\n        id: resourceId,\n        workingMemory,\n        metadata: metadata || {},\n        createdAt: /* @__PURE__ */ new Date(),\n        updatedAt: /* @__PURE__ */ new Date()\n      };\n    } else {\n      resource = {\n        ...resource,\n        workingMemory: workingMemory !== void 0 ? workingMemory : resource.workingMemory,\n        metadata: {\n          ...resource.metadata,\n          ...metadata\n        },\n        updatedAt: /* @__PURE__ */ new Date()\n      };\n    }\n    this.collection.resources.set(resourceId, resource);\n    return resource;\n  }\n  sortThreads(threads, orderBy, sortDirection) {\n    return threads.sort((a, b) => {\n      const aValue = new Date(a[orderBy]).getTime();\n      const bValue = new Date(b[orderBy]).getTime();\n      if (sortDirection === \"ASC\") {\n        return aValue - bValue;\n      } else {\n        return bValue - aValue;\n      }\n    });\n  }\n};\n\n// src/storage/domains/observability/base.ts\nvar ObservabilityStorage = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"OBSERVABILITY\"\n    });\n  }\n  /**\n   * Provides hints for AI tracing strategy selection by the DefaultExporter.\n   * Storage adapters can override this to specify their preferred and supported strategies.\n   */\n  get aiTracingStrategy() {\n    return {\n      preferred: \"batch-with-updates\",\n      // Default for most SQL stores\n      supported: [\"realtime\", \"batch-with-updates\", \"insert-only\"]\n    };\n  }\n  /**\n   * Creates a single AI span record in the storage provider.\n   */\n  createAISpan(_span) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_CREATE_AI_SPAN_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support creating AI spans\"\n    });\n  }\n  /**\n   * Updates a single AI span with partial data. Primarily used for realtime trace creation.\n   */\n  updateAISpan(_params) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_STORAGE_UPDATE_AI_SPAN_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support updating AI spans\"\n    });\n  }\n  /**\n   * Retrieves a single AI trace with all its associated spans.\n   */\n  getAITrace(_traceId) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_STORAGE_GET_AI_TRACE_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support getting AI traces\"\n    });\n  }\n  /**\n   * Retrieves a paginated list of AI traces with optional filtering.\n   */\n  getAITracesPaginated(_args) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_STORAGE_GET_AI_TRACES_PAGINATED_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support getting AI traces paginated\"\n    });\n  }\n  /**\n   * Creates multiple AI spans in a single batch.\n   */\n  batchCreateAISpans(_args) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_STORAGE_BATCH_CREATE_AI_SPAN_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support batch creating AI spans\"\n    });\n  }\n  /**\n   * Updates multiple AI spans in a single batch.\n   */\n  batchUpdateAISpans(_args) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_STORAGE_BATCH_UPDATE_AI_SPAN_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support batch updating AI spans\"\n    });\n  }\n  /**\n   * Deletes multiple AI traces and all their associated spans in a single batch operation.\n   */\n  batchDeleteAITraces(_args) {\n    throw new MastraError({\n      id: \"OBSERVABILITY_STORAGE_BATCH_DELETE_AI_SPAN_NOT_IMPLEMENTED\",\n      domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: \"This storage provider does not support batch deleting AI traces\"\n    });\n  }\n};\n\n// src/storage/domains/observability/inmemory.ts\nvar ObservabilityInMemory = class extends ObservabilityStorage {\n  operations;\n  collection;\n  constructor({ collection, operations }) {\n    super();\n    this.collection = collection;\n    this.operations = operations;\n  }\n  get aiTracingStrategy() {\n    return {\n      preferred: \"realtime\",\n      supported: [\"realtime\", \"batch-with-updates\", \"insert-only\"]\n    };\n  }\n  async createAISpan(span) {\n    this.validateCreateAISpan(span);\n    const id = this.generateId(span);\n    const record = span;\n    record.createdAt = /* @__PURE__ */ new Date();\n    record.updatedAt = record.createdAt;\n    this.collection.set(id, record);\n  }\n  async batchCreateAISpans(args) {\n    for (const record of args.records) {\n      await this.createAISpan(record);\n    }\n  }\n  validateCreateAISpan(record) {\n    if (!record.spanId) {\n      throw new MastraError({\n        id: \"OBSERVABILITY_SPAN_ID_REQUIRED\",\n        domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n        category: \"SYSTEM\" /* SYSTEM */,\n        text: \"Span ID is required for creating a span\"\n      });\n    }\n    if (!record.traceId) {\n      throw new MastraError({\n        id: \"OBSERVABILITY_TRACE_ID_REQUIRED\",\n        domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n        category: \"SYSTEM\" /* SYSTEM */,\n        text: \"Trace ID is required for creating a span\"\n      });\n    }\n  }\n  generateId({ traceId, spanId }) {\n    return `${traceId}-${spanId}`;\n  }\n  async getAITrace(traceId) {\n    const spans = Array.from(this.collection.values()).filter((span) => span.traceId === traceId);\n    if (spans.length === 0) {\n      return null;\n    }\n    spans.sort((a, b) => a.startedAt.getTime() - b.startedAt.getTime());\n    return {\n      traceId,\n      spans\n    };\n  }\n  async getAITracesPaginated({\n    filters,\n    pagination\n  }) {\n    const allRootSpans = this.filterForRootSpans(Array.from(this.collection.values()));\n    const filteredRootSpans = this.filterSpansByFilter(allRootSpans, filters);\n    const startDate = pagination?.dateRange?.start;\n    const endDate = pagination?.dateRange?.end;\n    const filteredRootSpansByDate = this.filterSpansByDate(filteredRootSpans, startDate, endDate);\n    const total = filteredRootSpansByDate.length;\n    const page = pagination?.page ?? 0;\n    const perPage = pagination?.perPage ?? 10;\n    const start = page * perPage;\n    const end = start + perPage;\n    const paged = this.filterSpansByPagination(filteredRootSpansByDate, pagination);\n    return {\n      spans: paged,\n      pagination: { total, page, perPage, hasMore: end < total }\n    };\n  }\n  filterForRootSpans(spans) {\n    return spans.filter((span) => span.parentSpanId === null);\n  }\n  filterSpansByDate(spans, startDate, endDate) {\n    return spans.filter((span) => {\n      if (startDate && span.startedAt < startDate) return false;\n      if (endDate && span.startedAt > endDate) return false;\n      return true;\n    });\n  }\n  filterSpansByFilter(spans, filter) {\n    return spans.filter((span) => {\n      if (filter?.name && span.name !== filter.name) return false;\n      if (filter?.spanType && span.spanType !== filter.spanType) return false;\n      if (filter?.entityType === \"agent\" && filter.entityId !== span.attributes?.agentId) return false;\n      if (filter?.entityType === \"workflow\" && filter.entityId !== span.attributes?.workflowId) return false;\n      return true;\n    });\n  }\n  filterSpansByPagination(spans, pagination) {\n    const page = pagination?.page ?? 0;\n    const perPage = pagination?.perPage ?? 10;\n    const start = page * perPage;\n    const end = start + perPage;\n    return spans.slice(start, end);\n  }\n  async updateAISpan(params) {\n    const id = this.generateId(params);\n    const span = this.collection.get(id);\n    if (!span) {\n      throw new MastraError({\n        id: \"OBSERVABILITY_UPDATE_AI_SPAN_NOT_FOUND\",\n        domain: \"MASTRA_OBSERVABILITY\" /* MASTRA_OBSERVABILITY */,\n        category: \"SYSTEM\" /* SYSTEM */,\n        text: \"Span not found for update\"\n      });\n    }\n    this.collection.set(id, { ...span, ...params.updates, updatedAt: /* @__PURE__ */ new Date() });\n  }\n  async batchUpdateAISpans(args) {\n    for (const record of args.records) {\n      await this.updateAISpan(record);\n    }\n  }\n  async batchDeleteAITraces(args) {\n    for (const traceId of args.traceIds) {\n      const spans = Array.from(this.collection.values()).filter((span) => span.traceId === traceId);\n      for (const span of spans) {\n        this.collection.delete(this.generateId(span));\n      }\n    }\n  }\n};\n\n// src/storage/domains/operations/base.ts\nvar StoreOperations = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"OPERATIONS\"\n    });\n  }\n  getSqlType(type) {\n    switch (type) {\n      case \"text\":\n        return \"TEXT\";\n      case \"timestamp\":\n        return \"TIMESTAMP\";\n      case \"float\":\n        return \"FLOAT\";\n      case \"integer\":\n        return \"INTEGER\";\n      case \"bigint\":\n        return \"BIGINT\";\n      case \"jsonb\":\n        return \"JSONB\";\n      default:\n        return \"TEXT\";\n    }\n  }\n  getDefaultValue(type) {\n    switch (type) {\n      case \"text\":\n      case \"uuid\":\n        return \"DEFAULT ''\";\n      case \"timestamp\":\n        return \"DEFAULT '1970-01-01 00:00:00'\";\n      case \"integer\":\n      case \"bigint\":\n      case \"float\":\n        return \"DEFAULT 0\";\n      case \"jsonb\":\n        return \"DEFAULT '{}'\";\n      default:\n        return \"DEFAULT ''\";\n    }\n  }\n  /**\n   * DATABASE INDEX MANAGEMENT\n   * Optional methods for database index management.\n   * Storage adapters can override these to provide index management capabilities.\n   */\n  /**\n   * Creates a database index on specified columns\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async createIndex(_options) {\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_CREATE_INDEX_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter`\n    });\n  }\n  /**\n   * Drops a database index by name\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async dropIndex(_indexName) {\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_DROP_INDEX_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter`\n    });\n  }\n  /**\n   * Lists database indexes for a table or all tables\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async listIndexes(_tableName) {\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_LIST_INDEXES_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter`\n    });\n  }\n  /**\n   * Gets detailed statistics for a specific index\n   * @throws {MastraError} if not supported by the storage adapter\n   */\n  async describeIndex(_indexName) {\n    throw new MastraError({\n      id: \"MASTRA_STORAGE_DESCRIBE_INDEX_NOT_SUPPORTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      text: `Index management is not supported by this storage adapter`\n    });\n  }\n  /**\n   * Returns definitions for automatic performance indexes\n   * Storage adapters can override this to define indexes that should be created during initialization\n   * @returns Array of index definitions to create automatically\n   */\n  getAutomaticIndexDefinitions() {\n    return [];\n  }\n};\n\n// src/storage/domains/operations/inmemory.ts\nvar StoreOperationsInMemory = class extends StoreOperations {\n  data;\n  constructor() {\n    super();\n    this.data = {\n      mastra_workflow_snapshot: /* @__PURE__ */ new Map(),\n      mastra_evals: /* @__PURE__ */ new Map(),\n      mastra_messages: /* @__PURE__ */ new Map(),\n      mastra_threads: /* @__PURE__ */ new Map(),\n      mastra_traces: /* @__PURE__ */ new Map(),\n      mastra_resources: /* @__PURE__ */ new Map(),\n      mastra_scorers: /* @__PURE__ */ new Map(),\n      mastra_ai_spans: /* @__PURE__ */ new Map()\n    };\n  }\n  getDatabase() {\n    return this.data;\n  }\n  async insert({ tableName, record }) {\n    const table = this.data[tableName];\n    let key = record.id;\n    if ([TABLE_WORKFLOW_SNAPSHOT, TABLE_EVALS].includes(tableName) && !record.id && record.run_id) {\n      key = record.workflow_name ? `${record.workflow_name}-${record.run_id}` : record.run_id;\n      record.id = key;\n    } else if (!record.id) {\n      key = `auto-${Date.now()}-${Math.random()}`;\n      record.id = key;\n    }\n    table.set(key, record);\n  }\n  async batchInsert({ tableName, records }) {\n    const table = this.data[tableName];\n    for (const record of records) {\n      let key = record.id;\n      if ([TABLE_WORKFLOW_SNAPSHOT, TABLE_EVALS].includes(tableName) && !record.id && record.run_id) {\n        key = record.run_id;\n        record.id = key;\n      } else if (!record.id) {\n        key = `auto-${Date.now()}-${Math.random()}`;\n        record.id = key;\n      }\n      table.set(key, record);\n    }\n  }\n  async load({ tableName, keys }) {\n    this.logger.debug(`MockStore: load called for ${tableName} with keys`, keys);\n    const table = this.data[tableName];\n    const records = Array.from(table.values());\n    return records.filter((record) => Object.keys(keys).every((key) => record[key] === keys[key]))?.[0];\n  }\n  async createTable({\n    tableName,\n    schema\n  }) {\n    this.logger.debug(`MockStore: createTable called for ${tableName} with schema`, schema);\n    this.data[tableName] = /* @__PURE__ */ new Map();\n  }\n  async clearTable({ tableName }) {\n    this.logger.debug(`MockStore: clearTable called for ${tableName}`);\n    this.data[tableName].clear();\n  }\n  async dropTable({ tableName }) {\n    this.logger.debug(`MockStore: dropTable called for ${tableName}`);\n    this.data[tableName].clear();\n  }\n  async alterTable({\n    tableName,\n    schema\n  }) {\n    this.logger.debug(`MockStore: alterTable called for ${tableName} with schema`, schema);\n  }\n  async hasColumn(table, column) {\n    this.logger.debug(`MockStore: hasColumn called for ${table} with column ${column}`);\n    return true;\n  }\n};\n\n// src/storage/domains/scores/base.ts\nvar ScoresStorage = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"SCORES\"\n    });\n  }\n  async getScoresBySpan({\n    traceId,\n    spanId,\n    pagination: _pagination\n  }) {\n    throw new MastraError({\n      id: \"SCORES_STORAGE_GET_SCORES_BY_SPAN_NOT_IMPLEMENTED\",\n      domain: \"STORAGE\" /* STORAGE */,\n      category: \"SYSTEM\" /* SYSTEM */,\n      details: { traceId, spanId }\n    });\n  }\n};\n\n// src/storage/domains/scores/inmemory.ts\nvar ScoresInMemory = class extends ScoresStorage {\n  scores;\n  constructor({ collection }) {\n    super();\n    this.scores = collection;\n  }\n  async getScoreById({ id }) {\n    return this.scores.get(id) ?? null;\n  }\n  async saveScore(score) {\n    const newScore = { id: crypto.randomUUID(), createdAt: /* @__PURE__ */ new Date(), updatedAt: /* @__PURE__ */ new Date(), ...score };\n    this.scores.set(newScore.id, newScore);\n    return { score: newScore };\n  }\n  async getScoresByScorerId({\n    scorerId,\n    pagination,\n    entityId,\n    entityType,\n    source\n  }) {\n    const scores = Array.from(this.scores.values()).filter((score) => {\n      let baseFilter = score.scorerId === scorerId;\n      if (entityId) {\n        baseFilter = baseFilter && score.entityId === entityId;\n      }\n      if (entityType) {\n        baseFilter = baseFilter && score.entityType === entityType;\n      }\n      if (source) {\n        baseFilter = baseFilter && score.source === source;\n      }\n      return baseFilter;\n    });\n    return {\n      scores: scores.slice(pagination.page * pagination.perPage, (pagination.page + 1) * pagination.perPage),\n      pagination: {\n        total: scores.length,\n        page: pagination.page,\n        perPage: pagination.perPage,\n        hasMore: scores.length > (pagination.page + 1) * pagination.perPage\n      }\n    };\n  }\n  async getScoresByRunId({\n    runId,\n    pagination\n  }) {\n    const scores = Array.from(this.scores.values()).filter((score) => score.runId === runId);\n    return {\n      scores: scores.slice(pagination.page * pagination.perPage, (pagination.page + 1) * pagination.perPage),\n      pagination: {\n        total: scores.length,\n        page: pagination.page,\n        perPage: pagination.perPage,\n        hasMore: scores.length > (pagination.page + 1) * pagination.perPage\n      }\n    };\n  }\n  async getScoresByEntityId({\n    entityId,\n    entityType,\n    pagination\n  }) {\n    const scores = Array.from(this.scores.values()).filter((score) => {\n      const baseFilter = score.entityId === entityId && score.entityType === entityType;\n      return baseFilter;\n    });\n    return {\n      scores: scores.slice(pagination.page * pagination.perPage, (pagination.page + 1) * pagination.perPage),\n      pagination: {\n        total: scores.length,\n        page: pagination.page,\n        perPage: pagination.perPage,\n        hasMore: scores.length > (pagination.page + 1) * pagination.perPage\n      }\n    };\n  }\n  async getScoresBySpan({\n    traceId,\n    spanId,\n    pagination\n  }) {\n    const scores = Array.from(this.scores.values()).filter(\n      (score) => score.traceId === traceId && score.spanId === spanId\n    );\n    scores.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n    return {\n      scores: scores.slice(pagination.page * pagination.perPage, (pagination.page + 1) * pagination.perPage),\n      pagination: {\n        total: scores.length,\n        page: pagination.page,\n        perPage: pagination.perPage,\n        hasMore: scores.length > (pagination.page + 1) * pagination.perPage\n      }\n    };\n  }\n};\n\n// src/storage/domains/traces/base.ts\nvar TracesStorage = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"TRACES\"\n    });\n  }\n};\n\n// src/storage/domains/traces/inmemory.ts\nvar TracesInMemory = class extends TracesStorage {\n  traces;\n  operations;\n  collection;\n  constructor({ collection, operations }) {\n    super();\n    this.collection = collection;\n    this.traces = collection;\n    this.operations = operations;\n  }\n  async getTraces({\n    name,\n    scope,\n    page,\n    perPage,\n    attributes,\n    filters,\n    fromDate,\n    toDate\n  }) {\n    this.logger.debug(`MockStore: getTraces called`);\n    let traces = Array.from(this.collection.values());\n    if (name) traces = traces.filter((t) => t.name?.startsWith(name));\n    if (scope) traces = traces.filter((t) => t.scope === scope);\n    if (attributes) {\n      traces = traces.filter(\n        (t) => Object.entries(attributes).every(([key, value]) => t.attributes?.[key] === value)\n      );\n    }\n    if (filters) {\n      traces = traces.filter((t) => Object.entries(filters).every(([key, value]) => t[key] === value));\n    }\n    if (fromDate) traces = traces.filter((t) => new Date(t.createdAt) >= fromDate);\n    if (toDate) traces = traces.filter((t) => new Date(t.createdAt) <= toDate);\n    traces.sort((a, b) => new Date(b.startTime).getTime() - new Date(a.startTime).getTime());\n    const start = page * perPage;\n    const end = start + perPage;\n    return traces.slice(start, end);\n  }\n  async getTracesPaginated({\n    name,\n    scope,\n    attributes,\n    page = 0,\n    perPage = 10,\n    dateRange\n  }) {\n    this.logger.debug(`MockStore: getTracesPaginated called`);\n    let traces = Array.from(this.collection.values());\n    if (name) traces = traces.filter((t) => t.name?.startsWith(name));\n    if (scope) traces = traces.filter((t) => t.scope === scope);\n    if (attributes) {\n      traces = traces.filter(\n        (t) => Object.entries(attributes).every(([key, value]) => t.attributes?.[key] === value)\n      );\n    }\n    if (dateRange?.start) traces = traces.filter((t) => new Date(t.createdAt) >= dateRange.start);\n    if (dateRange?.end) traces = traces.filter((t) => new Date(t.createdAt) <= dateRange.end);\n    traces.sort((a, b) => new Date(b.startTime).getTime() - new Date(a.startTime).getTime());\n    const start = page * perPage;\n    const end = start + perPage;\n    return {\n      traces: traces.slice(start, end),\n      total: traces.length,\n      page,\n      perPage,\n      hasMore: traces.length > end\n    };\n  }\n  async batchTraceInsert({ records }) {\n    this.logger.debug(\"Batch inserting traces\", { count: records.length });\n    await this.operations.batchInsert({\n      tableName: TABLE_TRACES,\n      records\n    });\n  }\n};\n\n// src/storage/domains/workflows/base.ts\nvar WorkflowsStorage = class extends MastraBase {\n  constructor() {\n    super({\n      component: \"STORAGE\",\n      name: \"WORKFLOWS\"\n    });\n  }\n};\n\n// src/storage/domains/workflows/inmemory.ts\nvar WorkflowsInMemory = class extends WorkflowsStorage {\n  operations;\n  collection;\n  constructor({ collection, operations }) {\n    super();\n    this.collection = collection;\n    this.operations = operations;\n  }\n  async updateWorkflowResults({\n    workflowName,\n    runId,\n    stepId,\n    result,\n    runtimeContext\n  }) {\n    this.logger.debug(`MockStore: updateWorkflowResults called for ${workflowName} ${runId} ${stepId}`, result);\n    const run = this.collection.get(`${workflowName}-${runId}`);\n    if (!run) {\n      return {};\n    }\n    let snapshot;\n    if (!run.snapshot) {\n      snapshot = {\n        context: {},\n        activePaths: [],\n        activeStepsPath: {},\n        timestamp: Date.now(),\n        suspendedPaths: {},\n        resumeLabels: {},\n        serializedStepGraph: [],\n        value: {},\n        waitingPaths: {},\n        status: \"pending\",\n        runId: run.run_id\n      };\n      this.collection.set(`${workflowName}-${runId}`, {\n        ...run,\n        snapshot\n      });\n    }\n    snapshot = typeof run.snapshot === \"string\" ? JSON.parse(run.snapshot) : run.snapshot;\n    if (!snapshot || !snapshot?.context) {\n      throw new Error(`Snapshot not found for runId ${runId}`);\n    }\n    snapshot.context[stepId] = result;\n    snapshot.runtimeContext = { ...snapshot.runtimeContext, ...runtimeContext };\n    this.collection.set(`${workflowName}-${runId}`, {\n      ...run,\n      snapshot\n    });\n    return JSON.parse(JSON.stringify(snapshot.context));\n  }\n  async updateWorkflowState({\n    workflowName,\n    runId,\n    opts\n  }) {\n    const run = this.collection.get(`${workflowName}-${runId}`);\n    if (!run) {\n      return;\n    }\n    let snapshot;\n    if (!run.snapshot) {\n      snapshot = {\n        context: {},\n        activePaths: [],\n        activeStepsPath: {},\n        timestamp: Date.now(),\n        suspendedPaths: {},\n        resumeLabels: {},\n        serializedStepGraph: [],\n        value: {},\n        waitingPaths: {},\n        status: \"pending\",\n        runId: run.run_id\n      };\n      this.collection.set(`${workflowName}-${runId}`, {\n        ...run,\n        snapshot\n      });\n    } else {\n      snapshot = typeof run.snapshot === \"string\" ? JSON.parse(run.snapshot) : run.snapshot;\n    }\n    if (!snapshot || !snapshot?.context) {\n      throw new Error(`Snapshot not found for runId ${runId}`);\n    }\n    snapshot = { ...snapshot, ...opts };\n    this.collection.set(`${workflowName}-${runId}`, {\n      ...run,\n      snapshot\n    });\n    return snapshot;\n  }\n  async persistWorkflowSnapshot({\n    workflowName,\n    runId,\n    resourceId,\n    snapshot\n  }) {\n    const data = {\n      workflow_name: workflowName,\n      run_id: runId,\n      resourceId,\n      snapshot,\n      createdAt: /* @__PURE__ */ new Date(),\n      updatedAt: /* @__PURE__ */ new Date()\n    };\n    await this.operations.insert({\n      tableName: TABLE_WORKFLOW_SNAPSHOT,\n      record: data\n    });\n  }\n  async loadWorkflowSnapshot({\n    workflowName,\n    runId\n  }) {\n    this.logger.debug(\"Loading workflow snapshot\", { workflowName, runId });\n    const d = await this.operations.load({\n      tableName: TABLE_WORKFLOW_SNAPSHOT,\n      keys: { workflow_name: workflowName, run_id: runId }\n    });\n    return d ? JSON.parse(JSON.stringify(d.snapshot)) : null;\n  }\n  async getWorkflowRuns({\n    workflowName,\n    fromDate,\n    toDate,\n    limit,\n    offset,\n    resourceId,\n    status\n  } = {}) {\n    let runs = Array.from(this.collection.values());\n    if (workflowName) runs = runs.filter((run) => run.workflow_name === workflowName);\n    if (status) {\n      runs = runs.filter((run) => {\n        let snapshot = run?.snapshot;\n        if (!snapshot) {\n          return false;\n        }\n        if (typeof snapshot === \"string\") {\n          try {\n            snapshot = JSON.parse(snapshot);\n          } catch (error) {\n            return false;\n          }\n        } else {\n          snapshot = JSON.parse(JSON.stringify(snapshot));\n        }\n        return snapshot.status === status;\n      });\n    }\n    if (fromDate && toDate) {\n      runs = runs.filter(\n        (run) => new Date(run.createdAt).getTime() >= fromDate.getTime() && new Date(run.createdAt).getTime() <= toDate.getTime()\n      );\n    } else if (fromDate) {\n      runs = runs.filter((run) => new Date(run.createdAt).getTime() >= fromDate.getTime());\n    } else if (toDate) {\n      runs = runs.filter((run) => new Date(run.createdAt).getTime() <= toDate.getTime());\n    }\n    if (resourceId) runs = runs.filter((run) => run.resourceId === resourceId);\n    const total = runs.length;\n    runs.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n    if (limit !== void 0 && offset !== void 0) {\n      const start = offset;\n      const end = start + limit;\n      runs = runs.slice(start, end);\n    }\n    const parsedRuns = runs.map((run) => ({\n      ...run,\n      snapshot: typeof run.snapshot === \"string\" ? JSON.parse(run.snapshot) : JSON.parse(JSON.stringify(run.snapshot)),\n      createdAt: new Date(run.createdAt),\n      updatedAt: new Date(run.updatedAt),\n      runId: run.run_id,\n      workflowName: run.workflow_name,\n      resourceId: run.resourceId\n    }));\n    return { runs: parsedRuns, total };\n  }\n  async getWorkflowRunById({\n    runId,\n    workflowName\n  }) {\n    const runs = Array.from(this.collection.values()).filter((r) => r.run_id === runId);\n    let run = runs.find((r) => r.workflow_name === workflowName);\n    if (!run) return null;\n    const parsedRun = {\n      ...run,\n      snapshot: typeof run.snapshot === \"string\" ? JSON.parse(run.snapshot) : JSON.parse(JSON.stringify(run.snapshot)),\n      createdAt: new Date(run.createdAt),\n      updatedAt: new Date(run.updatedAt),\n      runId: run.run_id,\n      workflowName: run.workflow_name,\n      resourceId: run.resourceId\n    };\n    return parsedRun;\n  }\n};\n\n// src/storage/mock.ts\nvar InMemoryStore = class extends MastraStorage {\n  stores;\n  constructor() {\n    super({ name: \"InMemoryStorage\" });\n    this.hasInitialized = Promise.resolve(true);\n    const operationsStorage = new StoreOperationsInMemory();\n    const database = operationsStorage.getDatabase();\n    const scoresStorage = new ScoresInMemory({\n      collection: database.mastra_scorers\n    });\n    const workflowsStorage = new WorkflowsInMemory({\n      collection: database.mastra_workflow_snapshot,\n      operations: operationsStorage\n    });\n    const tracesStorage = new TracesInMemory({\n      collection: database.mastra_traces,\n      operations: operationsStorage\n    });\n    const memoryStorage = new InMemoryMemory({\n      collection: {\n        threads: database.mastra_threads,\n        resources: database.mastra_resources,\n        messages: database.mastra_messages\n      },\n      operations: operationsStorage\n    });\n    const legacyEvalsStorage = new InMemoryLegacyEvals({\n      collection: database.mastra_evals\n    });\n    const observabilityStorage = new ObservabilityInMemory({\n      collection: database.mastra_ai_spans,\n      operations: operationsStorage\n    });\n    this.stores = {\n      legacyEvals: legacyEvalsStorage,\n      operations: operationsStorage,\n      workflows: workflowsStorage,\n      traces: tracesStorage,\n      scores: scoresStorage,\n      memory: memoryStorage,\n      observability: observabilityStorage\n    };\n  }\n  get supports() {\n    return {\n      selectByIncludeResourceScope: false,\n      resourceWorkingMemory: false,\n      hasColumn: false,\n      createTable: false,\n      deleteMessages: true,\n      aiTracing: true,\n      indexManagement: false,\n      getScoresBySpan: true\n    };\n  }\n  async persistWorkflowSnapshot({\n    workflowName,\n    runId,\n    resourceId,\n    snapshot\n  }) {\n    await this.stores.workflows.persistWorkflowSnapshot({ workflowName, runId, resourceId, snapshot });\n  }\n  async loadWorkflowSnapshot({\n    workflowName,\n    runId\n  }) {\n    return this.stores.workflows.loadWorkflowSnapshot({ workflowName, runId });\n  }\n  async createTable({\n    tableName,\n    schema\n  }) {\n    await this.stores.operations.createTable({ tableName, schema });\n  }\n  async alterTable({\n    tableName,\n    schema,\n    ifNotExists\n  }) {\n    await this.stores.operations.alterTable({ tableName, schema, ifNotExists });\n  }\n  async clearTable({ tableName }) {\n    await this.stores.operations.clearTable({ tableName });\n  }\n  async dropTable({ tableName }) {\n    await this.stores.operations.dropTable({ tableName });\n  }\n  async insert({ tableName, record }) {\n    await this.stores.operations.insert({ tableName, record });\n  }\n  async updateWorkflowResults({\n    workflowName,\n    runId,\n    stepId,\n    result,\n    runtimeContext\n  }) {\n    return this.stores.workflows.updateWorkflowResults({ workflowName, runId, stepId, result, runtimeContext });\n  }\n  async updateWorkflowState({\n    workflowName,\n    runId,\n    opts\n  }) {\n    return this.stores.workflows.updateWorkflowState({ workflowName, runId, opts });\n  }\n  async batchInsert({ tableName, records }) {\n    await this.stores.operations.batchInsert({ tableName, records });\n  }\n  async load({ tableName, keys }) {\n    return this.stores.operations.load({ tableName, keys });\n  }\n  async getThreadById({ threadId }) {\n    return this.stores.memory.getThreadById({ threadId });\n  }\n  async getThreadsByResourceId({\n    resourceId,\n    orderBy,\n    sortDirection\n  }) {\n    return this.stores.memory.getThreadsByResourceId({ resourceId, orderBy, sortDirection });\n  }\n  async saveThread({ thread }) {\n    return this.stores.memory.saveThread({ thread });\n  }\n  async updateThread({\n    id,\n    title,\n    metadata\n  }) {\n    return this.stores.memory.updateThread({ id, title, metadata });\n  }\n  async deleteThread({ threadId }) {\n    return this.stores.memory.deleteThread({ threadId });\n  }\n  async getResourceById({ resourceId }) {\n    return this.stores.memory.getResourceById({ resourceId });\n  }\n  async saveResource({ resource }) {\n    return this.stores.memory.saveResource({ resource });\n  }\n  async updateResource({\n    resourceId,\n    workingMemory,\n    metadata\n  }) {\n    return this.stores.memory.updateResource({ resourceId, workingMemory, metadata });\n  }\n  async getMessages({\n    threadId,\n    resourceId,\n    selectBy,\n    format\n  }) {\n    return this.stores.memory.getMessages({ threadId, resourceId, selectBy, format });\n  }\n  async getMessagesById({\n    messageIds,\n    format\n  }) {\n    return this.stores.memory.getMessagesById({ messageIds, format });\n  }\n  async saveMessages(args) {\n    return this.stores.memory.saveMessages(args);\n  }\n  async updateMessages(args) {\n    return this.stores.memory.updateMessages(args);\n  }\n  async deleteMessages(messageIds) {\n    return this.stores.memory.deleteMessages(messageIds);\n  }\n  async getThreadsByResourceIdPaginated(args) {\n    return this.stores.memory.getThreadsByResourceIdPaginated(args);\n  }\n  async getMessagesPaginated({\n    threadId,\n    selectBy\n  }) {\n    return this.stores.memory.getMessagesPaginated({ threadId, selectBy });\n  }\n  async getTraces({\n    name,\n    scope,\n    page,\n    perPage,\n    attributes,\n    filters,\n    fromDate,\n    toDate\n  }) {\n    return this.stores.traces.getTraces({ name, scope, page, perPage, attributes, filters, fromDate, toDate });\n  }\n  async getTracesPaginated(args) {\n    return this.stores.traces.getTracesPaginated(args);\n  }\n  async batchTraceInsert(args) {\n    return this.stores.traces.batchTraceInsert(args);\n  }\n  async getScoreById({ id }) {\n    return this.stores.scores.getScoreById({ id });\n  }\n  async saveScore(score) {\n    return this.stores.scores.saveScore(score);\n  }\n  async getScoresByScorerId({\n    scorerId,\n    entityId,\n    entityType,\n    source,\n    pagination\n  }) {\n    return this.stores.scores.getScoresByScorerId({ scorerId, entityId, entityType, source, pagination });\n  }\n  async getScoresByRunId({\n    runId,\n    pagination\n  }) {\n    return this.stores.scores.getScoresByRunId({ runId, pagination });\n  }\n  async getScoresByEntityId({\n    entityId,\n    entityType,\n    pagination\n  }) {\n    return this.stores.scores.getScoresByEntityId({ entityId, entityType, pagination });\n  }\n  async getScoresBySpan({\n    traceId,\n    spanId,\n    pagination\n  }) {\n    return this.stores.scores.getScoresBySpan({ traceId, spanId, pagination });\n  }\n  async getEvals(options) {\n    return this.stores.legacyEvals.getEvals(options);\n  }\n  async getEvalsByAgentName(agentName, type) {\n    return this.stores.legacyEvals.getEvalsByAgentName(agentName, type);\n  }\n  async getWorkflowRuns({\n    workflowName,\n    fromDate,\n    toDate,\n    limit,\n    offset,\n    resourceId\n  } = {}) {\n    return this.stores.workflows.getWorkflowRuns({ workflowName, fromDate, toDate, limit, offset, resourceId });\n  }\n  async getWorkflowRunById({\n    runId,\n    workflowName\n  }) {\n    return this.stores.workflows.getWorkflowRunById({ runId, workflowName });\n  }\n  async createAISpan(span) {\n    return this.stores.observability.createAISpan(span);\n  }\n  async updateAISpan(params) {\n    return this.stores.observability.updateAISpan(params);\n  }\n  async getAITrace(traceId) {\n    return this.stores.observability.getAITrace(traceId);\n  }\n  async batchCreateAISpans(args) {\n    return this.stores.observability.batchCreateAISpans(args);\n  }\n  async batchUpdateAISpans(args) {\n    return this.stores.observability.batchUpdateAISpans(args);\n  }\n  async batchDeleteAITraces(args) {\n    return this.stores.observability.batchDeleteAITraces(args);\n  }\n};\nvar MockStore = InMemoryStore;\n\n// src/storage/utils.ts\nfunction safelyParseJSON(input) {\n  if (input && typeof input === \"object\") return input;\n  if (input == null) return {};\n  if (typeof input === \"string\") {\n    try {\n      return JSON.parse(input);\n    } catch {\n      return input;\n    }\n  }\n  return {};\n}\n\nexport { InMemoryMemory, InMemoryStore, LegacyEvalsStorage, MemoryStorage, MockStore, ObservabilityInMemory, ObservabilityStorage, ScoresInMemory, ScoresStorage, StoreOperations, StoreOperationsInMemory, TracesInMemory, TracesStorage, WorkflowsInMemory, WorkflowsStorage, safelyParseJSON };\n//# sourceMappingURL=index.js.map\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OptionsError = void 0;\n/**\n * All errors that can occur inside an assert function.\n */\nvar OptionsError;\n(function (OptionsError) {\n    OptionsError[OptionsError[\"invalidOptionsParam\"] = 0] = \"invalidOptionsParam\";\n    OptionsError[OptionsError[\"invalidDefaultsParam\"] = 1] = \"invalidDefaultsParam\";\n    OptionsError[OptionsError[\"optionNotRecognized\"] = 2] = \"optionNotRecognized\";\n})(OptionsError || (exports.OptionsError = OptionsError = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultErrorHandler = void 0;\n/**\n * Protocol for handling options-related issues.\n */\nconst types_1 = require(\"./types\");\n/**\n * Default handler for options-related issues.\n */\nclass DefaultErrorHandler {\n    handle(err, ctx) {\n        switch (err) {\n            case types_1.OptionsError.invalidOptionsParam:\n                throw new TypeError(`Invalid \"options\" parameter: ${JSON.stringify(ctx.options)}`);\n            case types_1.OptionsError.invalidDefaultsParam:\n                throw new TypeError(`Invalid \"defaults\" parameter: ${JSON.stringify(ctx.defaults)}`);\n            case types_1.OptionsError.optionNotRecognized:\n                throw new Error(`Option \"${ctx.key}\" is not recognized.`);\n            // istanbul ignore next:\n            default:\n                return ctx.options; // this will never happen\n        }\n    }\n}\nexports.DefaultErrorHandler = DefaultErrorHandler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assertOptions = void 0;\nexports.createAssert = createAssert;\nconst handler_1 = require(\"./handler\");\nconst types_1 = require(\"./types\");\n/**\n * Creates an options-assert function that uses specified error handler.\n */\nfunction createAssert(errHandler) {\n    return function (options, defaults) {\n        if (options !== null && options !== undefined && typeof options !== 'object') {\n            return errHandler.handle(types_1.OptionsError.invalidOptionsParam, { options, defaults });\n        }\n        const isArray = Array.isArray(defaults);\n        if (!isArray && (!defaults || typeof defaults !== 'object')) {\n            return errHandler.handle(types_1.OptionsError.invalidDefaultsParam, { options, defaults });\n        }\n        if (options) {\n            for (const key of Object.keys(options)) {\n                if ((isArray && defaults.indexOf(key) === -1) || (!isArray && !(key in defaults))) {\n                    return errHandler.handle(types_1.OptionsError.optionNotRecognized, { options, defaults, key });\n                }\n            }\n        }\n        else {\n            options = {};\n        }\n        if (!isArray) {\n            const defs = defaults;\n            for (const d of Object.keys(defs)) {\n                if (options[d] === undefined && defs[d] !== undefined) {\n                    options[d] = defs[d];\n                }\n            }\n        }\n        return options;\n    };\n}\n/**\n * Default options-assert function.\n */\nexports.assertOptions = createAssert(new handler_1.DefaultErrorHandler());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultErrorHandler = exports.OptionsError = exports.createAssert = exports.assertOptions = void 0;\nvar assert_1 = require(\"./assert\");\nObject.defineProperty(exports, \"assertOptions\", { enumerable: true, get: function () { return assert_1.assertOptions; } });\nObject.defineProperty(exports, \"createAssert\", { enumerable: true, get: function () { return assert_1.createAssert; } });\nvar types_1 = require(\"./types\");\nObject.defineProperty(exports, \"OptionsError\", { enumerable: true, get: function () { return types_1.OptionsError; } });\nvar handler_1 = require(\"./handler\");\nObject.defineProperty(exports, \"DefaultErrorHandler\", { enumerable: true, get: function () { return handler_1.DefaultErrorHandler; } });\n","const {assertOptions} = require('assert-options');\r\n\r\n// this to allow override options-related errors globally (for pg-promise)\r\nglobal.pgPromiseAssert = assertOptions;\r\n\r\nmodule.exports = {\r\n    assert() {\r\n        return global.pgPromiseAssert.apply(null, [...arguments]);\r\n    }\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {assert} = require('./assert');\r\n\r\n/**\r\n * @class PromiseAdapter\r\n * @summary Adapter for the primary promise operations.\r\n * @description\r\n * Provides compatibility with promise libraries that cannot be recognized automatically,\r\n * via functions that implement the primary operations with promises:\r\n *\r\n *  - construct a new promise with a callback function\r\n *  - resolve a promise with some result data\r\n *  - reject a promise with a reason\r\n *  - resolve an array of promises\r\n *\r\n * The type is available from the library's root: `pgp.PromiseAdapter`.\r\n *\r\n * @param {object} api\r\n * Promise API configuration object.\r\n *\r\n * Passing in anything other than an object will throw {@link external:TypeError TypeError} = `Adapter requires an api configuration object.`\r\n *\r\n * @param {function} api.create\r\n * A function that takes a callback parameter and returns a new promise object.\r\n * The callback parameter is expected to be `function(resolve, reject)`.\r\n *\r\n * Passing in anything other than a function will throw {@link external:TypeError TypeError} = `Function 'create' must be specified.`\r\n *\r\n * @param {function} api.resolve\r\n * A function that takes an optional data parameter and resolves a promise with it.\r\n *\r\n * Passing in anything other than a function will throw {@link external:TypeError TypeError} = `Function 'resolve' must be specified.`\r\n *\r\n * @param {function} api.reject\r\n * A function that takes an optional error parameter and rejects a promise with it.\r\n *\r\n * Passing in anything other than a function will throw {@link external:TypeError TypeError} = `Function 'reject' must be specified.`\r\n *\r\n * @param {function} api.all\r\n * A function that resolves an array of promises.\r\n *\r\n * Passing in anything other than a function will throw {@link external:TypeError TypeError} = `Function 'all' must be specified.`\r\n *\r\n * @returns {PromiseAdapter}\r\n */\r\nclass PromiseAdapter {\r\n    constructor(api) {\r\n\r\n        if (!api || typeof api !== 'object') {\r\n            throw new TypeError('Adapter requires an api configuration object.');\r\n        }\r\n\r\n        api = assert(api, ['create', 'resolve', 'reject', 'all']);\r\n\r\n        this.create = api.create;\r\n        this.resolve = api.resolve;\r\n        this.reject = api.reject;\r\n        this.all = api.all;\r\n\r\n        if (typeof this.create !== 'function') {\r\n            throw new TypeError('Function \\'create\\' must be specified.');\r\n        }\r\n\r\n        if (typeof this.resolve !== 'function') {\r\n            throw new TypeError('Function \\'resolve\\' must be specified.');\r\n        }\r\n\r\n        if (typeof this.reject !== 'function') {\r\n            throw new TypeError('Function \\'reject\\' must be specified.');\r\n        }\r\n\r\n        if (typeof this.all !== 'function') {\r\n            throw new TypeError('Function \\'all\\' must be specified.');\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = {PromiseAdapter};\r\n","const util = require('util');\r\n\r\nclass ColorConsole {\r\n\r\n    static log() {\r\n        ColorConsole.writeNormal([...arguments], 39); // white\r\n    }\r\n\r\n    static info() {\r\n        ColorConsole.writeNormal([...arguments], 36); // cyan\r\n    }\r\n\r\n    static success() {\r\n        ColorConsole.writeNormal([...arguments], 32); // green\r\n    }\r\n\r\n    static warn() {\r\n        ColorConsole.writeNormal([...arguments], 33); // yellow\r\n    }\r\n\r\n    static error() {\r\n        ColorConsole.writeError([...arguments], 31); // red\r\n    }\r\n\r\n    static writeNormal(params, color) {\r\n        // istanbul ignore else\r\n        if (process.stdout.isTTY) {\r\n            console.log.apply(null, ColorConsole.formatColor(params, color)); // eslint-disable-line no-console\r\n        } else {\r\n            console.log.apply(null, params); // eslint-disable-line no-console\r\n        }\r\n    }\r\n\r\n    static writeError(params, color) {\r\n        // istanbul ignore else\r\n        if (process.stderr.isTTY) {\r\n            console.error.apply(null, ColorConsole.formatColor(params, color)); // eslint-disable-line no-console\r\n        } else {\r\n            console.error.apply(null, params); // eslint-disable-line no-console\r\n        }\r\n    }\r\n\r\n    static formatColor(args, color) {\r\n        return args.map(a => `\\x1b[${color}m${util.format(a)}\\x1b[0m`);\r\n    }\r\n}\r\n\r\nColorConsole.log.bright = function () {\r\n    ColorConsole.writeNormal([...arguments], 97); // light white\r\n};\r\n\r\nColorConsole.info.bright = function () {\r\n    ColorConsole.writeNormal([...arguments], 93); // light cyan\r\n};\r\n\r\nColorConsole.success.bright = function () {\r\n    ColorConsole.writeNormal([...arguments], 92); // light green\r\n};\r\n\r\nColorConsole.warn.bright = function () {\r\n    ColorConsole.writeNormal([...arguments], 93); // light yellow\r\n};\r\n\r\nColorConsole.error.bright = function () {\r\n    ColorConsole.writeError([...arguments], 91); // light red\r\n};\r\n\r\nmodule.exports = {ColorConsole};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\n/*\r\n  The most important regular expressions and data as used by the library,\r\n  isolated here to help with possible edge cases during integration.\r\n*/\r\n\r\nmodule.exports = {\r\n    // Searches for all Named Parameters, supporting any of the following syntax:\r\n    // ${propName}, $(propName), $[propName], $/propName/, $<propName>\r\n    // Nested property names are also supported: ${propName.abc}\r\n    namedParameters: /\\$(?:({)|(\\()|(<)|(\\[)|(\\/))\\s*[a-zA-Z0-9$_.]+(\\^|~|#|:raw|:alias|:name|:json|:csv|:list|:value)?\\s*(?:(?=\\2)(?=\\3)(?=\\4)(?=\\5)}|(?=\\1)(?=\\3)(?=\\4)(?=\\5)\\)|(?=\\1)(?=\\2)(?=\\4)(?=\\5)>|(?=\\1)(?=\\2)(?=\\3)(?=\\5)]|(?=\\1)(?=\\2)(?=\\3)(?=\\4)\\/)/g,\r\n\r\n    // Searches for all variables $1, $2, ...$100000, and while it will find greater than $100000\r\n    // variables, the formatting engine is expected to throw an error for those.\r\n    multipleValues: /\\$([1-9][0-9]{0,16}(?![0-9])(\\^|~|#|:raw|:alias|:name|:json|:csv|:list|:value)?)/g,\r\n\r\n    // Searches for all occurrences of variable $1\r\n    singleValue: /\\$1(?![0-9])(\\^|~|#|:raw|:alias|:name|:json|:csv|:list|:value)?/g,\r\n\r\n    // Matches a valid column name for the Column type parser, according to the following rules:\r\n    // - can contain: any combination of a-z, A-Z, 0-9, $ or _\r\n    // - can contain ? at the start\r\n    // - can contain one of the supported filters/modifiers\r\n    validColumn: /\\??[a-zA-Z0-9$_]+(\\^|~|#|:raw|:alias|:name|:json|:csv|:list|:value)?/,\r\n\r\n    // Matches a valid open-name JavaScript variable, according to the following rules:\r\n    // - can contain: any combination of a-z, A-Z, 0-9, $ or _\r\n    validVariable: /[a-zA-Z0-9$_]+/,\r\n\r\n    // Matches a valid modifier in a column/property:\r\n    hasValidModifier: /\\^|~|#|:raw|:alias|:name|:json|:csv|:list|:value/,\r\n\r\n    // List of all supported formatting modifiers:\r\n    validModifiers: ['^', '~', '#', ':raw', ':alias', ':name', ':json', ':csv', ':list', ':value']\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst npm = {\r\n    path: require('path'),\r\n    util: require('util'),\r\n    patterns: require('../patterns')\r\n};\r\n\r\n////////////////////////////////////////////\r\n// Simpler check for null/undefined;\r\nfunction isNull(value) {\r\n    return value === null || value === undefined;\r\n}\r\n\r\n////////////////////////////////////////////////////////\r\n// Verifies parameter for being a non-empty text string;\r\nfunction isText(txt) {\r\n    return txt && typeof txt === 'string' && /\\S/.test(txt);\r\n}\r\n\r\n///////////////////////////////////////////////////////////\r\n// Approximates the environment as being for development.\r\n//\r\n// Proper configuration is having NODE_ENV = 'development', but this\r\n// method only checks for 'dev' being present, and regardless of the case.\r\nfunction isDev() {\r\n    const env = process.env.NODE_ENV || '';\r\n    return env.toLowerCase().indexOf('dev') !== -1;\r\n}\r\n\r\n/////////////////////////////////////////////\r\n// Adds properties from source to the target,\r\n// making them read-only and enumerable.\r\nfunction addReadProperties(target, source) {\r\n    for (const p in source) {\r\n        addReadProp(target, p, source[p]);\r\n    }\r\n}\r\n\r\n///////////////////////////////////////////////////////\r\n// Adds a read-only, non-deletable enumerable property.\r\nfunction addReadProp(obj, name, value, hidden) {\r\n    Object.defineProperty(obj, name, {\r\n        value,\r\n        configurable: false,\r\n        enumerable: !hidden,\r\n        writable: false\r\n    });\r\n}\r\n\r\n//////////////////////////////////////////////////////////////\r\n// Converts a connection string or object into its safe copy:\r\n// if password is present, it is masked with symbol '#'.\r\nfunction getSafeConnection(cn) {\r\n    const maskPassword = cs => cs.replace(/:(?![/])([^@]+)/, (_, m) => ':' + new Array(m.length + 1).join('#'));\r\n    if (typeof cn === 'object') {\r\n        const copy = Object.assign({}, cn);\r\n        if (typeof copy.password === 'string') {\r\n            copy.password = copy.password.replace(/./g, '#');\r\n        }\r\n        if (typeof copy.connectionString === 'string') {\r\n            copy.connectionString = maskPassword(copy.connectionString);\r\n        }\r\n        return copy;\r\n    }\r\n    return maskPassword(cn);\r\n}\r\n\r\n///////////////////////////////////////////\r\n// Returns a space gap for console output;\r\nfunction messageGap(level) {\r\n    return ' '.repeat(level * 4);\r\n}\r\n\r\n/////////////////////////////////////////\r\n// Provides platform-neutral inheritance;\r\nfunction inherits(child, parent) {\r\n    child.prototype.__proto__ = parent.prototype;\r\n}\r\n\r\n// istanbul ignore next\r\nfunction getLocalStack(startIdx, maxLines) {\r\n    // from the call stack, we take up to maximum lines,\r\n    // starting with specified line index:\r\n    startIdx = startIdx || 0;\r\n    const endIdx = maxLines > 0 ? startIdx + maxLines : undefined;\r\n    return new Error().stack\r\n        .split('\\n')\r\n        .filter(line => line.match(/\\(.+\\)/))\r\n        .slice(startIdx, endIdx)\r\n        .join('\\n');\r\n}\r\n\r\n//////////////////////////////\r\n// Internal error container;\r\nfunction InternalError(error) {\r\n    this.error = error;\r\n}\r\n\r\n/////////////////////////////////////////////////////////////////\r\n// Parses a property name, and gets its name from the object,\r\n// if the property exists. Returns object {valid, has, target, value}:\r\n//  - valid - true/false, whether the syntax is valid\r\n//  - has - a flag that property exists; set when 'valid' = true\r\n//  - target - the target object that contains the property; set when 'has' = true\r\n//  - value - the value; set when 'has' = true\r\nfunction getIfHas(obj, prop) {\r\n    const result = {valid: true};\r\n    if (prop.indexOf('.') === -1) {\r\n        result.has = prop in obj;\r\n        result.target = obj;\r\n        if (result.has) {\r\n            result.value = obj[prop];\r\n        }\r\n    } else {\r\n        const names = prop.split('.');\r\n        let missing, target;\r\n        for (let i = 0; i < names.length; i++) {\r\n            const n = names[i];\r\n            if (!n) {\r\n                result.valid = false;\r\n                return result;\r\n            }\r\n            if (!missing && hasProperty(obj, n)) {\r\n                target = obj;\r\n                obj = obj[n];\r\n            } else {\r\n                missing = true;\r\n            }\r\n        }\r\n        result.has = !missing;\r\n        if (result.has) {\r\n            result.target = target;\r\n            result.value = obj;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/////////////////////////////////////////////////////////////////////////\r\n// Checks if the property exists in the object or value or its prototype;\r\nfunction hasProperty(value, prop) {\r\n    return (value && typeof value === 'object' && prop in value) ||\r\n        value !== null && value !== undefined && value[prop] !== undefined;\r\n}\r\n\r\n////////////////////////////////////////////////////////\r\n// Adds prototype inspection\r\nfunction addInspection(type, cb) {\r\n    type.prototype[npm.util.inspect.custom] = cb;\r\n}\r\n\r\n/////////////////////////////////////////////////////////////////////////////////////////\r\n// Identifies a general connectivity error, after which no more queries can be executed.\r\n// This is for detecting when to skip executing ROLLBACK for a failed transaction.\r\nfunction isConnectivityError(err) {\r\n    const code = err && typeof err.code === 'string' && err.code;\r\n    const cls = code && code.substring(0, 2); // Error Class\r\n    // istanbul ignore next (we cannot test-cover all error cases):\r\n    return code === 'ECONNRESET' || (cls === '08' && code !== '08P01') || (cls === '57' && code !== '57014');\r\n    // Code 'ECONNRESET' - Connectivity issue handled by the driver.\r\n    // Class 08 - Connection Exception (except for 08P01, for protocol violation).\r\n    // Class 57 - Operator Intervention (except for 57014, for cancelled queries).\r\n    //\r\n    // ERROR CODES: https://www.postgresql.org/docs/9.6/static/errcodes-appendix.html\r\n}\r\n\r\n///////////////////////////////////////////////////////////////\r\n// Does JSON.stringify, with support for BigInt (irreversible)\r\nfunction toJson(data) {\r\n    if (data !== undefined) {\r\n        return JSON.stringify(data, (_, v) => typeof v === 'bigint' ? `${v}#bigint` : v)\r\n            .replace(/\"(-?\\d+)#bigint\"/g, (_, a) => a);\r\n    }\r\n}\r\n\r\nconst exp = {\r\n    toJson,\r\n    getIfHas,\r\n    addInspection,\r\n    InternalError,\r\n    getLocalStack,\r\n    isText,\r\n    isNull,\r\n    isDev,\r\n    addReadProp,\r\n    addReadProperties,\r\n    getSafeConnection,\r\n    messageGap,\r\n    inherits,\r\n    isConnectivityError\r\n};\r\n\r\nconst mainFile = process.argv[1];\r\n\r\n// istanbul ignore next\r\nexp.startDir = mainFile ? npm.path.dirname(mainFile) : process.cwd();\r\n\r\nmodule.exports = exp;\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ColorConsole} = require('./utils/color');\r\n\r\nconst npm = {\r\n    utils: require('./utils')\r\n};\r\n\r\n/**\r\n * @class DatabasePool\r\n * @static\r\n * @private\r\n */\r\nclass DatabasePool {\r\n\r\n    /**\r\n     * Global instance of the database pool repository.\r\n     *\r\n     * @returns {{dbMap: {}, dbs: Array}}\r\n     */\r\n    static get instance() {\r\n        const s = Symbol.for('pgPromiseDatabasePool');\r\n        let scope = global[s];\r\n        if (!scope) {\r\n            scope = {\r\n                dbMap: {}, // map of used database context keys (connection + dc)\r\n                dbs: [] // all database objects\r\n            };\r\n            global[s] = scope;\r\n        }\r\n        return scope;\r\n    }\r\n\r\n    /**\r\n     * @method DatabasePool.register\r\n     * @static\r\n     * @description\r\n     *  - Registers each database object, to make sure no duplicates connections are used,\r\n     *    and if they are, produce a warning;\r\n     *  - Registers each Pool object, to be able to release them all when requested.\r\n     *\r\n     * @param {Database} db - The new Database object being registered.\r\n     */\r\n    static register(db) {\r\n        const cnKey = DatabasePool.createContextKey(db);\r\n        npm.utils.addReadProp(db, '$cnKey', cnKey, true);\r\n        const {dbMap, dbs} = DatabasePool.instance;\r\n        if (cnKey in dbMap) {\r\n            dbMap[cnKey]++;\r\n            /* istanbul ignore if */\r\n            if (!db.$config.options.noWarnings) {\r\n                ColorConsole.warn(`WARNING: Creating a duplicate database object for the same connection.\\n${npm.utils.getLocalStack(4, 3)}\\n`);\r\n            }\r\n        } else {\r\n            dbMap[cnKey] = 1;\r\n        }\r\n        dbs.push(db);\r\n    }\r\n\r\n    /**\r\n     * @method DatabasePool.unregister\r\n     * @static\r\n     * @param db\r\n     */\r\n    static unregister(db) {\r\n        const cnKey = db.$cnKey;\r\n        const {dbMap} = DatabasePool.instance;\r\n        if (!--dbMap[cnKey]) {\r\n            delete dbMap[cnKey];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @method DatabasePool.shutDown\r\n     * @static\r\n     */\r\n    static shutDown() {\r\n        const {instance} = DatabasePool;\r\n        instance.dbs.forEach(db => {\r\n            db.$destroy();\r\n        });\r\n        instance.dbs.length = 0;\r\n        instance.dbMap = {};\r\n    }\r\n\r\n    /**\r\n     * @method DatabasePool.createContextKey\r\n     * @static\r\n     * @description\r\n     * For connections that are objects it reorders the keys alphabetically,\r\n     * and then serializes the result into a JSON string.\r\n     *\r\n     * @param {Database} db - Database instance.\r\n     */\r\n    static createContextKey(db) {\r\n        let cn = db.$cn;\r\n        if (typeof cn === 'object') {\r\n            const obj = {}, keys = Object.keys(cn).sort();\r\n            keys.forEach(name => {\r\n                obj[name] = cn[name];\r\n            });\r\n            cn = obj;\r\n        }\r\n        return npm.utils.toJson(npm.utils.getSafeConnection(cn)) + npm.utils.toJson(db.$dc);\r\n    }\r\n}\r\n\r\nmodule.exports = {DatabasePool};\r\n","const {addReadProp} = require('./utils');\r\n\r\n/**\r\n * @private\r\n * @class InnerState\r\n * @description\r\n * Implements support for private/inner state object inside the class,\r\n * which can be accessed by a derived class via hidden read-only property _inner.\r\n */\r\nclass InnerState {\r\n\r\n    constructor(initialState) {\r\n        addReadProp(this, '_inner', {}, true);\r\n        if (initialState && typeof initialState === 'object') {\r\n            this.extendState(initialState);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extends or overrides inner state with the specified properties.\r\n     *\r\n     * Only own properties are used, i.e. inherited ones are skipped.\r\n     */\r\n    extendState(state) {\r\n        for (const a in state) {\r\n            // istanbul ignore else\r\n            if (Object.prototype.hasOwnProperty.call(state, a)) {\r\n                this._inner[a] = state[a];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @member InnerState#_inner\r\n * Private/Inner object state.\r\n */\r\n\r\nmodule.exports = {InnerState};\r\n","const {InnerState} = require('../inner-state');\r\nconst {addInspection} = require('../utils');\r\nconst utils = require('../utils');\r\n\r\n/**\r\n * @private\r\n * @class ServerFormatting\r\n */\r\nclass ServerFormatting extends InnerState {\r\n\r\n    constructor(options) {\r\n        const _inner = {\r\n            options,\r\n            changed: true,\r\n            currentError: undefined,\r\n            target: {}\r\n        };\r\n        super(_inner);\r\n        setValues.call(this, options.values);\r\n    }\r\n\r\n    get error() {\r\n        return this._inner.currentError;\r\n    }\r\n\r\n    get text() {\r\n        return this._inner.options.text;\r\n    }\r\n\r\n    set text(value) {\r\n        const _i = this._inner;\r\n        if (value !== _i.options.text) {\r\n            _i.options.text = value;\r\n            _i.changed = true;\r\n        }\r\n    }\r\n\r\n    get binary() {\r\n        return this._inner.options.binary;\r\n    }\r\n\r\n    set binary(value) {\r\n        const _i = this._inner;\r\n        if (value !== _i.options.binary) {\r\n            _i.options.binary = value;\r\n            _i.changed = true;\r\n        }\r\n    }\r\n\r\n    get rowMode() {\r\n        return this._inner.options.rowMode;\r\n    }\r\n\r\n    set rowMode(value) {\r\n        const _i = this._inner;\r\n        if (value !== _i.options.rowMode) {\r\n            _i.options.rowMode = value;\r\n            _i.changed = true;\r\n        }\r\n    }\r\n\r\n    get values() {\r\n        return this._inner.target.values;\r\n    }\r\n\r\n    set values(values) {\r\n        setValues.call(this, values);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @member ServerFormatting#parse\r\n */\r\n\r\nfunction setValues(v) {\r\n    const target = this._inner.target;\r\n    if (Array.isArray(v)) {\r\n        if (v.length) {\r\n            target.values = v;\r\n        } else {\r\n            delete target.values;\r\n        }\r\n    } else {\r\n        if (utils.isNull(v)) {\r\n            delete target.values;\r\n        } else {\r\n            target.values = [v];\r\n        }\r\n    }\r\n}\r\n\r\naddInspection(ServerFormatting, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {ServerFormatting};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\n/* All error messages used in the module */\r\n\r\nconst streamVersion = require('../package.json')\r\n    .devDependencies['pg-query-stream'];\r\n\r\nmodule.exports = {\r\n    nativeError: 'Failed to initialize Native Bindings.',\r\n\r\n    /* Database errors */\r\n    queryDisconnected: 'Cannot execute a query on a disconnected client.',\r\n    invalidQuery: 'Invalid query format.',\r\n    invalidFunction: 'Invalid function name.',\r\n    invalidProc: 'Invalid procedure name.',\r\n    invalidMask: 'Invalid Query Result Mask specified.',\r\n    looseQuery: 'Querying against a released or lost connection.',\r\n\r\n    /* result errors */\r\n    notEmpty: 'No return data was expected.',\r\n    noData: 'No data returned from the query.',\r\n    multiple: 'Multiple rows were not expected.',\r\n\r\n    /* streaming support */\r\n    nativeStreaming: 'Streaming doesn\\'t work with Native Bindings.',\r\n    invalidStream: `Invalid or missing stream object: pg-query-stream >= v${streamVersion} was expected`,\r\n    invalidStreamState: 'Invalid stream state.',\r\n    invalidStreamCB: 'Invalid or missing stream initialization callback.',\r\n\r\n    /* connection errors */\r\n    poolDestroyed: 'Connection pool of the database object has been destroyed.',\r\n    clientEnd: 'Abnormal client.end() call, due to invalid code or failed server connection.'\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst npm = {\r\n    os: require('os'),\r\n    utils: require('../utils'),\r\n    text: require('../text')\r\n};\r\n\r\n/**\r\n * @enum {number}\r\n * @alias errors.queryResultErrorCode\r\n * @readonly\r\n * @description\r\n * `queryResultErrorCode` enumerator, available from the {@link errors} namespace.\r\n *\r\n * Represents an integer code for each type of error supported by type {@link errors.QueryResultError}.\r\n *\r\n * @see {@link errors.QueryResultError}\r\n */\r\nconst queryResultErrorCode = {\r\n    /** No data returned from the query. */\r\n    noData: 0,\r\n\r\n    /** No return data was expected. */\r\n    notEmpty: 1,\r\n\r\n    /** Multiple rows were not expected. */\r\n    multiple: 2\r\n};\r\n\r\nconst errorMessages = [\r\n    {name: 'noData', message: npm.text.noData},\r\n    {name: 'notEmpty', message: npm.text.notEmpty},\r\n    {name: 'multiple', message: npm.text.multiple}\r\n];\r\n\r\n/**\r\n * @class errors.QueryResultError\r\n * @augments external:Error\r\n * @description\r\n *\r\n * This error is specified as the rejection reason for all result-specific methods when the result doesn't match\r\n * the expectation, i.e. when a query result doesn't match its Query Result Mask - the value of {@link queryResult}.\r\n *\r\n * The error applies to the result from the following methods: {@link Database#none none},\r\n * {@link Database#one one}, {@link Database#oneOrNone oneOrNone} and {@link Database#many many}.\r\n *\r\n * Supported errors:\r\n *\r\n * - `No return data was expected.`, method {@link Database#none none}\r\n * - `No data returned from the query.`, methods {@link Database#one one} and {@link Database#many many}\r\n * - `Multiple rows were not expected.`, methods {@link Database#one one} and {@link Database#oneOrNone oneOrNone}\r\n *\r\n * Like any other error, this one is notified with through the global event {@link event:error error}.\r\n *\r\n * The type is available from the {@link errors} namespace.\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `QueryResultError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {object} result\r\n * The original $[Result] object that was received.\r\n *\r\n * @property {number} received\r\n * Total number of rows received. It is simply the value of `result.rows.length`.\r\n *\r\n * @property {number} code\r\n * Error code - {@link errors.queryResultErrorCode queryResultErrorCode} value.\r\n *\r\n * @property {string} query\r\n * Query that was executed.\r\n *\r\n * Normally, it is the query already formatted with values, if there were any.\r\n * But if you are using initialization option `pgFormatting`, then the query string is before formatting.\r\n *\r\n * @property {*} values\r\n * Values passed in as query parameters. Available only when initialization option `pgFormatting` is used.\r\n * Otherwise, the values are within the pre-formatted `query` string.\r\n *\r\n * @example\r\n *\r\n * const QueryResultError = pgp.errors.QueryResultError;\r\n * const qrec = pgp.errors.queryResultErrorCode;\r\n *\r\n * const initOptions = {\r\n *\r\n *   // pg-promise initialization options...\r\n *\r\n *   error(err, e) {\r\n *       if (err instanceof QueryResultError) {\r\n *           // A query returned unexpected number of records, and thus rejected;\r\n *           \r\n *           // we can check the error code, if we want specifics:\r\n *           if(err.code === qrec.noData) {\r\n *               // expected some data, but received none;\r\n *           }\r\n *\r\n *           // If you write QueryResultError into the console,\r\n *           // you will get a nicely formatted output.\r\n *\r\n *           console.log(err);\r\n *           \r\n *           // See also: err, e.query, e.params, etc.\r\n *       }\r\n *   }\r\n * };\r\n *\r\n * @see\r\n * {@link queryResult}, {@link Database#none none}, {@link Database#one one},\r\n * {@link Database#oneOrNone oneOrNone}, {@link Database#many many}\r\n *\r\n */\r\nclass QueryResultError extends Error {\r\n    constructor(code, result, query, values) {\r\n        const message = errorMessages[code].message;\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n        this.code = code;\r\n        this.result = result;\r\n        this.query = query;\r\n        this.values = values;\r\n        this.received = result.rows.length;\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\n/**\r\n * @method errors.QueryResultError#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nQueryResultError.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        lines = [\r\n            'QueryResultError {',\r\n            gap1 + 'code: queryResultErrorCode.' + errorMessages[this.code].name,\r\n            gap1 + 'message: \"' + this.message + '\"',\r\n            gap1 + 'received: ' + this.received,\r\n            gap1 + 'query: ' + (typeof this.query === 'string' ? '\"' + this.query + '\"' : npm.utils.toJson(this.query))\r\n        ];\r\n    if (this.values !== undefined) {\r\n        lines.push(gap1 + 'values: ' + npm.utils.toJson(this.values));\r\n    }\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(QueryResultError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {\r\n    QueryResultError,\r\n    queryResultErrorCode\r\n};\r\n","const {inspect} = require('util');\r\n\r\n/////////////////////////////////////////////////////////////\r\n// Returns {line, column} of an index within multi-line text.\r\nfunction getIndexPos(text, index) {\r\n    let lineIdx = 0, colIdx = index, pos = 0;\r\n    do {\r\n        pos = text.indexOf('\\n', pos);\r\n        if (pos === -1 || index < pos + 1) {\r\n            break;\r\n        }\r\n        lineIdx++;\r\n        pos++;\r\n        colIdx = index - pos;\r\n    } while (pos < index);\r\n    return {\r\n        line: lineIdx + 1,\r\n        column: colIdx + 1\r\n    };\r\n}\r\n\r\n///////////////////////////////////////////\r\n// Returns a space gap for console output.\r\nfunction messageGap(level) {\r\n    return ' '.repeat(level * 4);\r\n}\r\n\r\n////////////////////////////////////////////////////\r\n// Type inspection\r\nfunction addInspection(type, cb) {\r\n    type[inspect.custom] = cb;\r\n}\r\n\r\nmodule.exports = {\r\n    getIndexPos,\r\n    messageGap,\r\n    addInspection\r\n};\r\n","const {EOL} = require('os');\r\nconst {addInspection, messageGap} = require('./utils');\r\n\r\nconst parsingErrorCode = {\r\n    unclosedMLC: 0, // Unclosed multi-line comment.\r\n    unclosedText: 1, // Unclosed text block.\r\n    unclosedQI: 2, // Unclosed quoted identifier.\r\n    multiLineQI: 3 // Multi-line quoted identifiers are not supported.\r\n};\r\n\r\nObject.freeze(parsingErrorCode);\r\n\r\nconst errorMessages = [\r\n    {name: 'unclosedMLC', message: 'Unclosed multi-line comment.'},\r\n    {name: 'unclosedText', message: 'Unclosed text block.'},\r\n    {name: 'unclosedQI', message: 'Unclosed quoted identifier.'},\r\n    {name: 'multiLineQI', message: 'Multi-line quoted identifiers are not supported.'}\r\n];\r\n\r\nclass SQLParsingError extends Error {\r\n    constructor(code, position) {\r\n        const err = errorMessages[code].message;\r\n        const message = `Error parsing SQL at {line:${position.line},col:${position.column}}: ${err}`;\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n        this.error = err;\r\n        this.code = code;\r\n        this.position = position;\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\nSQLParsingError.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap = messageGap(level + 1);\r\n    const lines = [\r\n        'SQLParsingError {',\r\n        `${gap}code: parsingErrorCode.${errorMessages[this.code].name}`,\r\n        `${gap}error: \"${this.error}\"`,\r\n        `${gap}position: {line: ${this.position.line}, col: ${this.position.column}}`,\r\n        `${messageGap(level)}}`\r\n    ];\r\n    return lines.join(EOL);\r\n};\r\n\r\naddInspection(SQLParsingError.prototype, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {\r\n    SQLParsingError,\r\n    parsingErrorCode\r\n};\r\n","const {parsingErrorCode, SQLParsingError} = require('./error');\r\nconst {getIndexPos} = require('./utils');\r\n\r\n// symbols that need no spaces around them:\r\nconst compressors = '.,;:()[]=<>+-*/|!?@#';\r\n\r\n////////////////////////////////////////////\r\n// Parses and minimizes a PostgreSQL script.\r\nfunction minify(sql, options) {\r\n\r\n    if (typeof sql !== 'string') {\r\n        throw new TypeError('Input SQL must be a text string.');\r\n    }\r\n\r\n    if (!sql.length) {\r\n        return '';\r\n    }\r\n\r\n    sql = sql.replace(/\\r\\n/g, '\\n');\r\n\r\n    options = options || {};\r\n\r\n    let idx = 0, // current index\r\n        result = '', // resulting sql\r\n        space = false; // add a space on the next step\r\n\r\n    const len = sql.length;\r\n\r\n    do {\r\n        const s = sql[idx], // current symbol;\r\n            s1 = sql[idx + 1]; // next symbol;\r\n\r\n        if (isGap(s)) {\r\n            while (++idx < len && isGap(sql[idx])) ;\r\n            if (idx < len) {\r\n                space = true;\r\n            }\r\n            idx--;\r\n            continue;\r\n        }\r\n\r\n        if (s === '-' && s1 === '-') {\r\n            const lb = sql.indexOf('\\n', idx + 2);\r\n            if (lb < 0) {\r\n                break;\r\n            }\r\n            idx = lb - 1;\r\n            skipGaps();\r\n            continue;\r\n        }\r\n\r\n        if (s === '/' && s1 === '*') {\r\n            let c = idx + 1, open = 0, close = 0, lastOpen, lastClose;\r\n            while (++c < len - 1 && close <= open) {\r\n                if (sql[c] === '/' && sql[c + 1] === '*') {\r\n                    lastOpen = c;\r\n                    open++;\r\n                    c++;\r\n                } else {\r\n                    if (sql[c] === '*' && sql[c + 1] === '/') {\r\n                        lastClose = c;\r\n                        close++;\r\n                        c++;\r\n                    }\r\n                }\r\n            }\r\n            if (close <= open) {\r\n                idx = lastOpen;\r\n                throwError(parsingErrorCode.unclosedMLC);\r\n            }\r\n            if (sql[idx + 2] === '!' && !options.removeAll) {\r\n                if (options.compress) {\r\n                    space = false;\r\n                }\r\n                addSpace();\r\n                result += sql.substring(idx, lastClose + 2)\r\n                    .replace(/\\n/g, '\\r\\n');\r\n            }\r\n            idx = lastClose + 1;\r\n            skipGaps();\r\n            continue;\r\n        }\r\n\r\n        let closeIdx, text;\r\n\r\n        if (s === '\"') {\r\n            closeIdx = sql.indexOf('\"', idx + 1);\r\n            if (closeIdx < 0) {\r\n                throwError(parsingErrorCode.unclosedQI);\r\n            }\r\n            text = sql.substring(idx, closeIdx + 1);\r\n            if (text.indexOf('\\n') > 0) {\r\n                throwError(parsingErrorCode.multiLineQI);\r\n            }\r\n            if (options.compress) {\r\n                space = false;\r\n            }\r\n            addSpace();\r\n            result += text;\r\n            idx = closeIdx;\r\n            skipGaps();\r\n            continue;\r\n        }\r\n\r\n        if (s === '\\'') {\r\n            closeIdx = idx;\r\n            do {\r\n                closeIdx = sql.indexOf('\\'', closeIdx + 1);\r\n                if (closeIdx > 0) {\r\n                    let i = closeIdx;\r\n                    while (sql[--i] === '\\\\') ;\r\n                    if ((closeIdx - i) % 2) {\r\n                        let step = closeIdx;\r\n                        while (++step < len && sql[step] === '\\'') ;\r\n                        if ((step - closeIdx) % 2) {\r\n                            closeIdx = step - 1;\r\n                            break;\r\n                        }\r\n                        closeIdx = step === len ? -1 : step;\r\n                    }\r\n                }\r\n            } while (closeIdx > 0);\r\n            if (closeIdx < 0) {\r\n                throwError(parsingErrorCode.unclosedText);\r\n            }\r\n            if (options.compress) {\r\n                space = false;\r\n            }\r\n            addSpace();\r\n            text = sql.substring(idx, closeIdx + 1);\r\n            const hasLB = text.indexOf('\\n') > 0;\r\n            if (hasLB) {\r\n                text = text.split('\\n').map(m => {\r\n                    return m.replace(/^\\s+|\\s+$/g, '');\r\n                }).join('\\\\n');\r\n            }\r\n            const hasTabs = text.indexOf('\\t') > 0;\r\n            if (hasLB || hasTabs) {\r\n                const prev = idx ? sql[idx - 1] : '';\r\n                if (prev !== 'E' && prev !== 'e') {\r\n                    const r = result ? result[result.length - 1] : '';\r\n                    if (r && r !== ' ' && compressors.indexOf(r) < 0) {\r\n                        result += ' ';\r\n                    }\r\n                    result += 'E';\r\n                }\r\n                if (hasTabs) {\r\n                    text = text.replace(/\\t/g, '\\\\t');\r\n                }\r\n            }\r\n            result += text;\r\n            idx = closeIdx;\r\n            skipGaps();\r\n            continue;\r\n        }\r\n\r\n        if (options.compress && compressors.indexOf(s) >= 0) {\r\n            space = false;\r\n            skipGaps();\r\n        }\r\n\r\n        addSpace();\r\n        result += s;\r\n\r\n    } while (++idx < len);\r\n\r\n    return result;\r\n\r\n    function skipGaps() {\r\n        if (options.compress) {\r\n            while (idx < len - 1 && isGap(sql[idx + 1]) && idx++) ;\r\n        }\r\n    }\r\n\r\n    function addSpace() {\r\n        if (space) {\r\n            if (result.length) {\r\n                result += ' ';\r\n            }\r\n            space = false;\r\n        }\r\n    }\r\n\r\n    function throwError(code) {\r\n        const position = getIndexPos(sql, idx);\r\n        throw new SQLParsingError(code, position);\r\n    }\r\n}\r\n\r\n////////////////////////////////////\r\n// Identifies a gap / empty symbol.\r\nfunction isGap(s) {\r\n    return s === ' ' || s === '\\t' || s === '\\r' || s === '\\n';\r\n}\r\n\r\nmodule.exports = minify;\r\n","const parser = require('./parser');\r\nconst error = require('./error');\r\n\r\nparser.SQLParsingError = error.SQLParsingError;\r\nparser.parsingErrorCode = error.parsingErrorCode;\r\n\r\nmodule.exports = parser;\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst npm = {\r\n    os: require('os'),\r\n    utils: require('../utils'),\r\n    minify: require('pg-minify')\r\n};\r\n\r\n/**\r\n * @class errors.QueryFileError\r\n * @augments external:Error\r\n * @description\r\n * {@link errors.QueryFileError QueryFileError} class, available from the {@link errors} namespace.\r\n *\r\n * This type represents all errors related to {@link QueryFile}.\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `QueryFileError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {string} file\r\n * File path/name that was passed into the {@link QueryFile} constructor.\r\n *\r\n * @property {object} options\r\n * Set of options that was used by the {@link QueryFile} object.\r\n *\r\n * @property {SQLParsingError} error\r\n * Internal $[SQLParsingError] object.\r\n *\r\n * It is set only when the error was thrown by $[pg-minify] while parsing the SQL file.\r\n *\r\n * @see QueryFile\r\n *\r\n */\r\nclass QueryFileError extends Error {\r\n    constructor(error, qf) {\r\n        const isSqlError = error instanceof npm.minify.SQLParsingError;\r\n        const message = isSqlError ? 'Failed to parse the SQL.' : error.message;\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n        if (isSqlError) {\r\n            this.error = error;\r\n        }\r\n        this.file = qf.file;\r\n        this.options = qf.options;\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\n/**\r\n * @method errors.QueryFileError#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nQueryFileError.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        lines = [\r\n            'QueryFileError {',\r\n            gap1 + 'message: \"' + this.message + '\"',\r\n            gap1 + 'options: ' + npm.utils.toJson(this.options),\r\n            gap1 + 'file: \"' + this.file + '\"'\r\n        ];\r\n    if (this.error) {\r\n        lines.push(gap1 + 'error: ' + this.error.toString(level + 1));\r\n    }\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(QueryFileError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {QueryFileError};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {QueryFileError} = require('./query-file-error');\r\n\r\nconst npm = {\r\n    os: require('os'),\r\n    utils: require('../utils')\r\n};\r\n\r\n/**\r\n * @class errors.PreparedStatementError\r\n * @augments external:Error\r\n * @description\r\n * {@link errors.PreparedStatementError PreparedStatementError} class, available from the {@link errors} namespace.\r\n *\r\n * This type represents all errors that can be reported by class {@link PreparedStatement}, whether it is used\r\n * explicitly or implicitly (via a simple `{name, text, values}` object).\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `PreparedStatementError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {errors.QueryFileError} error\r\n * Internal {@link errors.QueryFileError} object.\r\n *\r\n * It is set only when the source {@link PreparedStatement} used a {@link QueryFile} which threw the error.\r\n *\r\n * @property {object} result\r\n * Resulting Prepared Statement object.\r\n *\r\n * @see PreparedStatement\r\n */\r\nclass PreparedStatementError extends Error {\r\n    constructor(error, ps) {\r\n        const isQueryFileError = error instanceof QueryFileError;\r\n        const message = isQueryFileError ? 'Failed to initialize \\'text\\' from a QueryFile.' : error;\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n        if (isQueryFileError) {\r\n            this.error = error;\r\n        }\r\n        this.result = ps;\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\n/**\r\n * @method errors.PreparedStatementError#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nPreparedStatementError.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        gap2 = npm.utils.messageGap(level + 2),\r\n        lines = [\r\n            'PreparedStatementError {',\r\n            gap1 + 'message: \"' + this.message + '\"',\r\n            gap1 + 'result: {',\r\n            gap2 + 'name: ' + npm.utils.toJson(this.result.name),\r\n            gap2 + 'text: ' + npm.utils.toJson(this.result.text),\r\n            gap2 + 'values: ' + npm.utils.toJson(this.result.values),\r\n            gap1 + '}'\r\n        ];\r\n    if (this.error) {\r\n        lines.push(gap1 + 'error: ' + this.error.toString(level + 1));\r\n    }\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(PreparedStatementError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {PreparedStatementError};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {QueryFileError} = require('./query-file-error');\r\n\r\nconst npm = {\r\n    os: require('os'),\r\n    utils: require('../utils')\r\n};\r\n\r\n/**\r\n * @class errors.ParameterizedQueryError\r\n * @augments external:Error\r\n * @description\r\n * {@link errors.ParameterizedQueryError ParameterizedQueryError} class, available from the {@link errors} namespace.\r\n *\r\n * This type represents all errors that can be reported by class {@link ParameterizedQuery}, whether it is used\r\n * explicitly or implicitly (via a simple `{text, values}` object).\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `ParameterizedQueryError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {errors.QueryFileError} error\r\n * Internal {@link errors.QueryFileError} object.\r\n *\r\n * It is set only when the source {@link ParameterizedQuery} used a {@link QueryFile} which threw the error.\r\n *\r\n * @property {object} result\r\n * Resulting Parameterized Query object.\r\n *\r\n * @see ParameterizedQuery\r\n */\r\nclass ParameterizedQueryError extends Error {\r\n    constructor(error, pq) {\r\n        const isQueryFileError = error instanceof QueryFileError;\r\n        const message = isQueryFileError ? 'Failed to initialize \\'text\\' from a QueryFile.' : error;\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n        if (isQueryFileError) {\r\n            this.error = error;\r\n        }\r\n        this.result = pq;\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\n/**\r\n * @method errors.ParameterizedQueryError#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nParameterizedQueryError.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        gap2 = npm.utils.messageGap(level + 2),\r\n        lines = [\r\n            'ParameterizedQueryError {',\r\n            gap1 + 'message: \"' + this.message + '\"',\r\n            gap1 + 'result: {',\r\n            gap2 + 'text: ' + npm.utils.toJson(this.result.text),\r\n            gap2 + 'values: ' + npm.utils.toJson(this.result.values),\r\n            gap1 + '}'\r\n        ];\r\n    if (this.error) {\r\n        lines.push(gap1 + 'error: ' + this.error.toString(level + 1));\r\n    }\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(ParameterizedQueryError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {ParameterizedQueryError};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {QueryResultError, queryResultErrorCode} = require('./query-result-error');\r\nconst {PreparedStatementError} = require('./prepared-statement-error');\r\nconst {ParameterizedQueryError} = require('./parameterized-query-error');\r\nconst {QueryFileError} = require('./query-file-error');\r\n\r\n/**\r\n * @namespace errors\r\n * @description\r\n * Error types namespace, available as `pgp.errors`, before and after initializing the library.\r\n *\r\n * @property {function} PreparedStatementError\r\n * {@link errors.PreparedStatementError PreparedStatementError} class constructor.\r\n *\r\n * Represents all errors that can be reported by class {@link PreparedStatement}.\r\n *\r\n * @property {function} ParameterizedQueryError\r\n * {@link errors.ParameterizedQueryError ParameterizedQueryError} class constructor.\r\n *\r\n * Represents all errors that can be reported by class {@link ParameterizedQuery}.\r\n *\r\n * @property {function} QueryFileError\r\n * {@link errors.QueryFileError QueryFileError} class constructor.\r\n *\r\n * Represents all errors that can be reported by class {@link QueryFile}.\r\n *\r\n * @property {function} QueryResultError\r\n * {@link errors.QueryResultError QueryResultError} class constructor.\r\n *\r\n * Represents all result-specific errors from query methods.\r\n *\r\n * @property {errors.queryResultErrorCode} queryResultErrorCode\r\n * Error codes `enum` used by class {@link errors.QueryResultError QueryResultError}.\r\n *\r\n */\r\n\r\nmodule.exports = {\r\n    QueryResultError,\r\n    queryResultErrorCode,\r\n    PreparedStatementError,\r\n    ParameterizedQueryError,\r\n    QueryFileError\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {assert} = require('./assert');\r\n\r\nconst npm = {\r\n    pgUtils: require('pg/lib/utils'),\r\n    patterns: require('./patterns'),\r\n    utils: require('./utils')\r\n};\r\n\r\n// Format Modification Flags;\r\nconst fmFlags = {\r\n    raw: 1, // Raw-Text variable\r\n    alias: 2, // SQL Alias\r\n    name: 4, // SQL Name/Identifier\r\n    json: 8, // JSON modifier\r\n    csv: 16, // CSV modifier\r\n    value: 32 // escaped, but without ''\r\n};\r\n\r\n// Format Modification Map;\r\nconst fmMap = {\r\n    '^': fmFlags.raw,\r\n    ':raw': fmFlags.raw,\r\n    ':alias': fmFlags.alias,\r\n    '~': fmFlags.name,\r\n    ':name': fmFlags.name,\r\n    ':json': fmFlags.json,\r\n    ':csv': fmFlags.csv,\r\n    ':list': fmFlags.csv,\r\n    ':value': fmFlags.value,\r\n    '#': fmFlags.value\r\n};\r\n\r\n// Global symbols for Custom Type Formatting:\r\nconst ctfSymbols = {\r\n    toPostgres: Symbol.for('ctf.toPostgres'),\r\n    rawType: Symbol.for('ctf.rawType')\r\n};\r\n\r\nconst maxVariable = 100000; // maximum supported variable is '$100000'\r\n\r\n////////////////////////////////////////////////////\r\n// Converts a single value into its Postgres format.\r\nfunction formatValue({value, fm, cc, options}) {\r\n\r\n    if (typeof value === 'function') {\r\n        return formatValue({value: resolveFunc(value, cc), fm, cc});\r\n    }\r\n\r\n    const ctf = getCTF(value); // Custom Type Formatting\r\n    if (ctf) {\r\n        fm |= ctf.rawType ? fmFlags.raw : 0;\r\n        return formatValue({value: resolveFunc(ctf.toPostgres, value), fm, cc});\r\n    }\r\n\r\n    const isRaw = !!(fm & fmFlags.raw);\r\n    fm &= ~fmFlags.raw;\r\n\r\n    switch (fm) {\r\n        case fmFlags.alias:\r\n            return $as.alias(value);\r\n        case fmFlags.name:\r\n            return $as.name(value);\r\n        case fmFlags.json:\r\n            return $as.json(value, isRaw);\r\n        case fmFlags.csv:\r\n            return $to.csv(value, options);\r\n        case fmFlags.value:\r\n            return $as.value(value);\r\n        default:\r\n            break;\r\n    }\r\n\r\n    if (isNull(value)) {\r\n        throwIfRaw(isRaw);\r\n        return 'null';\r\n    }\r\n\r\n    switch (typeof value) {\r\n        case 'string':\r\n            return $to.text(value, isRaw);\r\n        case 'boolean':\r\n            return $to.bool(value);\r\n        case 'number':\r\n        case 'bigint':\r\n            return $to.number(value);\r\n        case 'symbol':\r\n            throw new TypeError(`Type Symbol has no meaning for PostgreSQL: ${value.toString()}`);\r\n        default:\r\n            if (value instanceof Date) {\r\n                return $to.date(value, isRaw);\r\n            }\r\n            if (Array.isArray(value)) {\r\n                return $to.array(value, options);\r\n            }\r\n            if (Buffer.isBuffer(value)) {\r\n                return $to.buffer(value, isRaw);\r\n            }\r\n            return $to.json(value, isRaw);\r\n    }\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n// Converts array of values into PostgreSQL Array Constructor: array[...], as per PostgreSQL documentation:\r\n// http://www.postgresql.org/docs/9.6/static/arrays.html\r\n//\r\n// Arrays of any depth/dimension are supported.\r\n//\r\n// Top-level empty arrays are formatted as literal '{}' to avoid the necessity of explicit type casting,\r\n// as the server cannot automatically infer the type of empty non-literal array.\r\nfunction formatArray(array, options) {\r\n    const loop = a => '[' + a.map(value => Array.isArray(value) ? loop(value) : formatValue({\r\n        value,\r\n        options\r\n    })).join() + ']';\r\n    const prefix = options && options.capSQL ? 'ARRAY' : 'array';\r\n    return array.length ? (prefix + loop(array)) : '\\'{}\\'';\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////\r\n// Formats array/object/value as a list of comma-separated values.\r\nfunction formatCSV(values, options) {\r\n    if (Array.isArray(values)) {\r\n        return values.map(value => formatValue({value, options})).join();\r\n    }\r\n    if (typeof values === 'object' && values !== null) {\r\n        return Object.keys(values).map(v => formatValue({value: values[v], options})).join();\r\n    }\r\n    return values === undefined ? '' : formatValue({value: values, options});\r\n}\r\n\r\n///////////////////////////////\r\n// Query formatting helpers;\r\nconst formatAs = {\r\n\r\n    object({query, obj, raw, options}) {\r\n        options = options && typeof options === 'object' ? options : {};\r\n        return query.replace(npm.patterns.namedParameters, name => {\r\n            const v = formatAs.stripName(name.replace(/^\\$[{(<[/]|[\\s})>\\]/]/g, ''), raw),\r\n                c = npm.utils.getIfHas(obj, v.name);\r\n            if (!c.valid) {\r\n                throw new Error(`Invalid property name '${v.name}'.`);\r\n            }\r\n            if (c.has) {\r\n                return formatValue({value: c.value, fm: v.fm, cc: c.target, options});\r\n            }\r\n            if (v.name === 'this') {\r\n                return formatValue({value: obj, fm: v.fm, options});\r\n            }\r\n            if ('def' in options) {\r\n                const d = options.def, value = typeof d === 'function' ? d.call(obj, v.name, obj) : d;\r\n                return formatValue({value, fm: v.fm, cc: obj, options});\r\n            }\r\n            if (options.partial) {\r\n                return name;\r\n            }\r\n            // property must exist as the object's own or inherited;\r\n            throw new Error(`Property '${v.name}' doesn't exist.`);\r\n        });\r\n    },\r\n\r\n    array({query, array, raw, options}) {\r\n        options = options && typeof options === 'object' ? options : {};\r\n        return query.replace(npm.patterns.multipleValues, name => {\r\n            const v = formatAs.stripName(name.substring(1), raw);\r\n            const idx = v.name - 1;\r\n            if (idx >= maxVariable) {\r\n                throw new RangeError(`Variable $${v.name} exceeds supported maximum of $${maxVariable}`);\r\n            }\r\n            if (idx < array.length) {\r\n                return formatValue({value: array[idx], fm: v.fm, options});\r\n            }\r\n            if ('def' in options) {\r\n                const d = options.def, value = typeof d === 'function' ? d.call(array, idx, array) : d;\r\n                return formatValue({value, fm: v.fm, options});\r\n            }\r\n            if (options.partial) {\r\n                return name;\r\n            }\r\n            throw new RangeError(`Variable $${v.name} out of range. Parameters array length: ${array.length}`);\r\n        });\r\n    },\r\n\r\n    value({query, value, raw, options}) {\r\n        return query.replace(npm.patterns.singleValue, name => {\r\n            const v = formatAs.stripName(name, raw);\r\n            return formatValue({value, fm: v.fm, options});\r\n        });\r\n    },\r\n\r\n    stripName(name, raw) {\r\n        const mod = name.match(npm.patterns.hasValidModifier);\r\n        if (mod) {\r\n            return {\r\n                name: name.substring(0, mod.index),\r\n                fm: fmMap[mod[0]] | (raw ? fmFlags.raw : 0)\r\n            };\r\n        }\r\n        return {\r\n            name,\r\n            fm: raw ? fmFlags.raw : null\r\n        };\r\n    }\r\n};\r\n\r\n////////////////////////////////////////////\r\n// Simpler check for null/undefined;\r\nfunction isNull(value) {\r\n    return value === undefined || value === null;\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////\r\n// Checks if the value supports Custom Type Formatting,\r\n// to return {toPostgres, rawType}, if it does, or null otherwise.\r\nfunction getCTF(value) {\r\n    if (!isNull(value)) {\r\n        let toPostgres = value[ctfSymbols.toPostgres], rawType = !!value[ctfSymbols.rawType];\r\n        if (typeof toPostgres !== 'function') {\r\n            toPostgres = value.toPostgres;\r\n            rawType = !!value.rawType;\r\n        }\r\n        if (typeof toPostgres === 'function') {\r\n            if (toPostgres.constructor.name !== 'Function') {\r\n                throw new Error('CTF does not support asynchronous toPostgres functions.');\r\n            }\r\n            return {toPostgres, rawType};\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/////////////////////////////////////////\r\n// Wraps a text string in single quotes;\r\nfunction wrapText(text) {\r\n    return `'${text}'`;\r\n}\r\n\r\n////////////////////////////////////////////////\r\n// Replaces each single-quote symbol ' with two,\r\n// for compliance with PostgreSQL strings.\r\nfunction safeText(text) {\r\n    return text.replace(/'/g, '\\'\\'');\r\n}\r\n\r\n/////////////////////////////////////////////\r\n// Throws an exception, if flag 'raw' is set.\r\nfunction throwIfRaw(raw) {\r\n    if (raw) {\r\n        throw new TypeError('Values null/undefined cannot be used as raw text.');\r\n    }\r\n}\r\n\r\n/////////////////////////////////////////////////////////////////////////////\r\n// Recursively resolves parameter-function, with an optional Calling Context.\r\nfunction resolveFunc(value, cc) {\r\n    while (typeof value === 'function') {\r\n        if (value.constructor.name !== 'Function') {\r\n            // Constructor name for asynchronous functions have different names:\r\n            // - 'GeneratorFunction' for ES6 generators\r\n            // - 'AsyncFunction' for ES7 async functions\r\n            throw new Error('Cannot use asynchronous functions with query formatting.');\r\n        }\r\n        value = value.call(cc, cc);\r\n    }\r\n    return value;\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////\r\n// It implements two types of formatting, depending on the 'values' passed:\r\n//\r\n// 1. format '$1, $2, etc', when 'values' is of type string, boolean, number, date,\r\n//    function or null (or an array of the same types, plus undefined values);\r\n// 2. format $*propName*, when 'values' is an object (not null and not Date),\r\n//    and where * is any of the supported open-close pairs: {}, (), [], <>, //\r\n//\r\nfunction formatQuery(query, values, raw, options) {\r\n    if (typeof query !== 'string') {\r\n        throw new TypeError('Parameter \\'query\\' must be a text string.');\r\n    }\r\n    const ctf = getCTF(values);\r\n    if (ctf) {\r\n        // Custom Type Formatting\r\n        return formatQuery(query, resolveFunc(ctf.toPostgres, values), raw || ctf.rawType, options);\r\n    }\r\n    if (typeof values === 'object' && values !== null) {\r\n        if (Array.isArray(values)) {\r\n            // $1, $2,... formatting to be applied;\r\n            return formatAs.array({query, array: values, raw, options});\r\n        }\r\n        if (!(values instanceof Date || values instanceof Buffer)) {\r\n            // $*propName* formatting to be applied;\r\n            return formatAs.object({query, obj: values, raw, options});\r\n        }\r\n    }\r\n    // $1 formatting to be applied, if values != undefined;\r\n    return values === undefined ? query : formatAs.value({query, value: values, raw, options});\r\n}\r\n\r\n//////////////////////////////////////////////////////\r\n// Formats a function or stored procedure call query;\r\nfunction formatEntity(entity, values, {capSQL, type}) {\r\n    let prefix = type === 'func' ? 'select * from' : 'call';\r\n    if (capSQL) {\r\n        prefix = prefix.toUpperCase();\r\n    }\r\n    return `${prefix} ${$as.alias(entity)}(${formatCSV(values, {capSQL})})`;\r\n}\r\n\r\nfunction formatSqlName(name) {\r\n    return `\"${name.replace(/\"/g, '\"\"')}\"`;\r\n}\r\n\r\n/**\r\n * @namespace formatting\r\n * @description\r\n * Namespace for all query-formatting functions, available from `pgp.as` before and after initializing the library.\r\n *\r\n * @property {formatting.ctf} ctf\r\n * Namespace for symbols used by $[Custom Type Formatting].\r\n *\r\n * @property {function} alias\r\n * {@link formatting.alias alias} - formats an SQL alias.\r\n *\r\n * @property {function} name\r\n * {@link formatting.name name} - formats an SQL Name/Identifier.\r\n *\r\n * @property {function} text\r\n * {@link formatting.text text} - formats a text string.\r\n *\r\n * @property {function} number\r\n * {@link formatting.number number} - formats a number.\r\n *\r\n * @property {function} buffer\r\n * {@link formatting.buffer buffer} - formats a `Buffer` object.\r\n *\r\n * @property {function} value\r\n * {@link formatting.value value} - formats text as an open value.\r\n *\r\n * @property {function} json\r\n * {@link formatting.json json} - formats any value as JSON.\r\n *\r\n * @property {function} array\r\n * {@link formatting.array array} - formats an array of any depth.\r\n *\r\n * @property {function} csv\r\n * {@link formatting.csv csv} - formats an array as a list of comma-separated values.\r\n *\r\n * @property {function} func\r\n * {@link formatting.func func} - formats the value returned from a function.\r\n *\r\n * @property {function} format\r\n * {@link formatting.format format} - formats a query, according to parameters.\r\n *\r\n */\r\nconst $as = {\r\n\r\n    /**\r\n     * @namespace formatting.ctf\r\n     * @description\r\n     * Namespace for ES6 symbols used by $[Custom Type Formatting], available from `pgp.as.ctf` before and after initializing the library.\r\n     *\r\n     * It was added to avoid explicit/enumerable extension of types that need to be used as formatting parameters, to keep their type signature intact.\r\n     *\r\n     * @property {external:Symbol} toPostgres\r\n     * Property name for the $[Custom Type Formatting] callback function `toPostgres`.\r\n     *\r\n     * @property {external:Symbol} rawType\r\n     * Property name for the $[Custom Type Formatting] flag `rawType`.\r\n     *\r\n     * @example\r\n     * const {toPostgres, rawType} = pgp.as.ctf; // Custom Type Formatting symbols\r\n     *\r\n     * class MyType {\r\n     *     constructor() {\r\n     *         this[rawType] = true; // set it only when toPostgres returns a pre-formatted result\r\n     *     }\r\n     *\r\n     *     [toPostgres](self) {\r\n     *         // self = this\r\n     *\r\n     *         // return the custom/actual value here\r\n     *     }\r\n     * }\r\n     *\r\n     * const a = new MyType();\r\n     *\r\n     * const s = pgp.as.format('$1', a); // will be custom-formatted\r\n     */\r\n    ctf: ctfSymbols,\r\n\r\n    /**\r\n     * @method formatting.text\r\n     * @description\r\n     * Converts a value into PostgreSQL text presentation, escaped as required.\r\n     *\r\n     * Escaping the result means:\r\n     *  1. Every single-quote (apostrophe) is replaced with two\r\n     *  2. The resulting text is wrapped in apostrophes\r\n     *\r\n     * @param {value|function} value\r\n     * Value to be converted, or a function that returns the value.\r\n     *\r\n     * If the `value` resolves as `null` or `undefined`, while `raw`=`true`,\r\n     * it will throw {@link external:TypeError TypeError} = `Values null/undefined cannot be used as raw text.`\r\n     *\r\n     * @param {boolean} [raw=false]\r\n     * Indicates when not to escape the resulting text.\r\n     *\r\n     * @returns {string}\r\n     *\r\n     * - `null` string, if the `value` resolves as `null` or `undefined`\r\n     * - escaped result of `value.toString()`, if the `value` isn't a string\r\n     * - escaped string version, if `value` is a string.\r\n     *\r\n     *  The result is not escaped, if `raw` was passed in as `true`.\r\n     */\r\n    text(value, raw) {\r\n        value = resolveFunc(value);\r\n        if (isNull(value)) {\r\n            throwIfRaw(raw);\r\n            return 'null';\r\n        }\r\n        if (typeof value !== 'string') {\r\n            value = value.toString();\r\n        }\r\n        return $to.text(value, raw);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.name\r\n     * @description\r\n     * Properly escapes an sql name or identifier, fixing double-quote symbols and wrapping the result in double quotes.\r\n     *\r\n     * Implements a safe way to format $[SQL Names] that neutralizes SQL Injection.\r\n     *\r\n     * When formatting a query, a variable makes use of this method via modifier `:name` or `~`. See method {@link formatting.format format}.\r\n     *\r\n     * @param {string|function|array|object} name\r\n     * SQL name or identifier, or a function that returns it.\r\n     *\r\n     * The name must be at least 1 character long.\r\n     *\r\n     * If `name` doesn't resolve into a non-empty string, it throws {@link external:TypeError TypeError} = `Invalid sql name: ...`\r\n     *\r\n     * If the `name` contains only a single `*` (trailing spaces are ignored), then `name` is returned exactly as is (unescaped).\r\n     *\r\n     * - If `name` is an Array, it is formatted as a comma-separated list of $[SQL Names]\r\n     * - If `name` is a non-Array object, its keys are formatted as a comma-separated list of $[SQL Names]\r\n     *\r\n     * Passing in an empty array/object will throw {@link external:Error Error} = `Cannot retrieve sql names from an empty array/object.`\r\n     *\r\n     * @returns {string}\r\n     * The SQL Name/Identifier, properly escaped for compliance with the PostgreSQL standard for $[SQL Names] and identifiers.\r\n     *\r\n     * @see\r\n     * {@link formatting.alias alias},\r\n     * {@link formatting.format format}\r\n     *\r\n     * @example\r\n     *\r\n     * // automatically list object properties as sql names:\r\n     * format('INSERT INTO table(${this~}) VALUES(${one}, ${two})', {\r\n     *     one: 1,\r\n     *     two: 2\r\n     * });\r\n     * //=> INSERT INTO table(\"one\",\"two\") VALUES(1, 2)\r\n     *\r\n     */\r\n    name(name) {\r\n        name = resolveFunc(name);\r\n        if (name) {\r\n            if (typeof name === 'string') {\r\n                return /^\\s*\\*(\\s*)$/.test(name) ? name : formatSqlName(name);\r\n            }\r\n            if (typeof name === 'object') {\r\n                const keys = Array.isArray(name) ? name : Object.keys(name);\r\n                if (!keys.length) {\r\n                    throw new Error('Cannot retrieve sql names from an empty array/object.');\r\n                }\r\n                return keys.map(value => {\r\n                    if (!value || typeof value !== 'string') {\r\n                        throw new Error(`Invalid sql name: ${npm.utils.toJson(value)}`);\r\n                    }\r\n                    return formatSqlName(value);\r\n                }).join();\r\n            }\r\n        }\r\n        throw new TypeError(`Invalid sql name: ${npm.utils.toJson(name)}`);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.alias\r\n     * @description\r\n     * Simpler (non-verbose) version of method {@link formatting.name name}, to handle only a regular string-identifier\r\n     * that's mostly used as an SQL alias, i.e. it doesn't support `*` or an array/object of names, which in the context of\r\n     * an SQL alias would be incorrect. However, it supports `.` as name-separator, for simpler escaping of composite names.\r\n     *\r\n     * The surrounding double quotes are not added when the alias uses a simple syntax:\r\n     *  - it is a same-case single word, without spaces\r\n     *  - it can contain underscores, and can even start with them\r\n     *  - it can contain digits and `$`, but cannot start with those\r\n     *\r\n     * The method will automatically split the string with `.`, to support composite SQL names.\r\n     *\r\n     * When formatting a query, a variable makes use of this method via modifier `:alias`. See method {@link formatting.format format}.\r\n     *\r\n     * @param {string|function} name\r\n     * SQL alias name, or a function that returns it.\r\n     *\r\n     * The name must be at least 1 character long. And it can contain `.`, to split into multiple SQL names.\r\n     *\r\n     * If `name` doesn't resolve into a non-empty string, it throws {@link external:TypeError TypeError} = `Invalid sql alias: ...`\r\n     *\r\n     * @returns {string}\r\n     * The SQL alias, properly escaped for compliance with the PostgreSQL standard for $[SQL Names] and identifiers.\r\n     *\r\n     * @see\r\n     * {@link formatting.name name},\r\n     * {@link formatting.format format}\r\n     *\r\n     */\r\n    alias(name) {\r\n        name = resolveFunc(name);\r\n        if (name && typeof name === 'string') {\r\n            return name.split('.')\r\n                .filter(f => f)\r\n                .map(a => {\r\n                    const m = a.match(/^([a-z_][a-z0-9_$]*|[A-Z_][A-Z0-9_$]*)$/);\r\n                    if (m && m[0] === a) {\r\n                        return a;\r\n                    }\r\n                    return `\"${a.replace(/\"/g, '\"\"')}\"`;\r\n                }).join('.');\r\n        }\r\n        throw new TypeError(`Invalid sql alias: ${npm.utils.toJson(name)}`);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.value\r\n     * @description\r\n     * Represents an open value, one to be formatted according to its type, properly escaped, but without surrounding quotes for text types.\r\n     *\r\n     * When formatting a query, a variable makes use of this method via modifier `:value` or `#`. See method {@link formatting.format format}.\r\n     *\r\n     * @param {value|function} value\r\n     * Value to be converted, or a function that returns the value.\r\n     *\r\n     * If `value` resolves as `null` or `undefined`, it will throw {@link external:TypeError TypeError} = `Open values cannot be null or undefined.`\r\n     *\r\n     * @returns {string}\r\n     * Formatted and properly escaped string, but without surrounding quotes for text types.\r\n     *\r\n     * @see {@link formatting.format format}\r\n     *\r\n     */\r\n    value(value) {\r\n        value = resolveFunc(value);\r\n        if (isNull(value)) {\r\n            throw new TypeError('Open values cannot be null or undefined.');\r\n        }\r\n        return safeText(formatValue({value, fm: fmFlags.raw}));\r\n    },\r\n\r\n    /**\r\n     * @method formatting.buffer\r\n     * @description\r\n     * Converts an object of type `Buffer` into a hex string compatible with PostgreSQL type `bytea`.\r\n     *\r\n     * @param {Buffer|function} obj\r\n     * Object to be converted, or a function that returns one.\r\n     *\r\n     * @param {boolean} [raw=false]\r\n     * Indicates when not to wrap the resulting string in quotes.\r\n     *\r\n     * The generated hex string doesn't need to be escaped.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    buffer(obj, raw) {\r\n        obj = resolveFunc(obj);\r\n        if (isNull(obj)) {\r\n            throwIfRaw(raw);\r\n            return 'null';\r\n        }\r\n        if (obj instanceof Buffer) {\r\n            return $to.buffer(obj, raw);\r\n        }\r\n        throw new TypeError(`${wrapText(obj)} is not a Buffer object.`);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.bool\r\n     * @description\r\n     * Converts a truthy value into PostgreSQL boolean presentation.\r\n     *\r\n     * @param {boolean|function} value\r\n     * Value to be converted, or a function that returns the value.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    bool(value) {\r\n        value = resolveFunc(value);\r\n        if (isNull(value)) {\r\n            return 'null';\r\n        }\r\n        return $to.bool(value);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.date\r\n     * @description\r\n     * Converts a `Date`-type value into PostgreSQL date/time presentation,\r\n     * wrapped in quotes (unless flag `raw` is set).\r\n     *\r\n     * @param {Date|function} d\r\n     * Date object to be converted, or a function that returns one.\r\n     *\r\n     * @param {boolean} [raw=false]\r\n     * Indicates when not to escape the value.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    date(d, raw) {\r\n        d = resolveFunc(d);\r\n        if (isNull(d)) {\r\n            throwIfRaw(raw);\r\n            return 'null';\r\n        }\r\n        if (d instanceof Date) {\r\n            return $to.date(d, raw);\r\n        }\r\n        throw new TypeError(`${wrapText(d)} is not a Date object.`);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.number\r\n     * @description\r\n     * Converts a numeric value into its PostgreSQL number presentation, with support\r\n     * for special values of `NaN`, `+Infinity` and `-Infinity`.\r\n     *\r\n     * @param {number|bigint|function} num\r\n     * Number to be converted, or a function that returns one.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    number(num) {\r\n        num = resolveFunc(num);\r\n        if (isNull(num)) {\r\n            return 'null';\r\n        }\r\n        const t = typeof num;\r\n        if (t !== 'number' && t !== 'bigint') {\r\n            throw new TypeError(`${wrapText(num)} is not a number.`);\r\n        }\r\n        return $to.number(num);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.array\r\n     * @description\r\n     * Converts an array of values into its PostgreSQL presentation as an Array-Type constructor string: `array[]`.\r\n     *\r\n     * Top-level empty arrays are formatted as literal `{}`, to avoid the necessity of explicit type casting,\r\n     * as the server cannot automatically infer type of empty non-literal array.\r\n     *\r\n     * @param {Array|function} arr\r\n     * Array to be converted, or a function that returns one.\r\n     *\r\n     * @param {{}} [options]\r\n     * Array-Formatting Options.\r\n     *\r\n     * @param {boolean} [options.capSQL=false]\r\n     * When `true`, outputs `ARRAY` instead of `array`.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    array(arr, options) {\r\n        options = assert(options, ['capSQL']);\r\n        arr = resolveFunc(arr);\r\n        if (isNull(arr)) {\r\n            return 'null';\r\n        }\r\n        if (Array.isArray(arr)) {\r\n            return $to.array(arr, options);\r\n        }\r\n        throw new TypeError(`${wrapText(arr)} is not an Array object.`);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.csv\r\n     * @description\r\n     * Converts a single value or an array of values into a CSV (comma-separated values) string, with all values formatted\r\n     * according to their JavaScript type.\r\n     *\r\n     * When formatting a query, a variable makes use of this method via modifier `:csv` or its alias `:list`.\r\n     *\r\n     * When `values` is an object that's not `null` or `Array`, its properties are enumerated for the actual values.\r\n     *\r\n     * @param {Array|Object|value|function} values\r\n     * Value(s) to be converted, or a function that returns it.\r\n     *\r\n     * @returns {string}\r\n     *\r\n     * @see {@link formatting.format format}\r\n     */\r\n    csv(values) {\r\n        return $to.csv(values);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.json\r\n     * @description\r\n     * Converts any value into JSON (includes `BigInt` support), and returns it as a valid string,\r\n     * with single-quote symbols fixed, unless flag `raw` is set.\r\n     *\r\n     * When formatting a query, a variable makes use of this method via modifier `:json`. See method {@link formatting.format format}.\r\n     *\r\n     * @param {*} data\r\n     * Object/value to be converted, or a function that returns it.\r\n     *\r\n     * @param {boolean} [raw=false]\r\n     * Indicates when not to escape the result.\r\n     *\r\n     * @returns {string}\r\n     *\r\n     * @see {@link formatting.format format}\r\n     */\r\n    json(data, raw) {\r\n        data = resolveFunc(data);\r\n        if (isNull(data)) {\r\n            throwIfRaw(raw);\r\n            return 'null';\r\n        }\r\n        return $to.json(data, raw);\r\n    },\r\n\r\n    /**\r\n     * @method formatting.func\r\n     * @description\r\n     * Calls the function to get the actual value, and then formats the result according to its type + `raw` flag.\r\n     *\r\n     * @param {function} func\r\n     * Function to be called, with support for nesting.\r\n     *\r\n     * @param {boolean} [raw=false]\r\n     * Indicates when not to escape the result.\r\n     *\r\n     * @param {*} [cc]\r\n     * Calling Context: `this` + the only value to be passed into the function on all nested levels.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    func(func, raw, cc) {\r\n        if (isNull(func)) {\r\n            throwIfRaw(raw);\r\n            return 'null';\r\n        }\r\n        if (typeof func !== 'function') {\r\n            throw new TypeError(`${wrapText(func)} is not a function.`);\r\n        }\r\n        const fm = raw ? fmFlags.raw : null;\r\n        return formatValue({value: resolveFunc(func, cc), fm, cc});\r\n    },\r\n\r\n    /**\r\n     * @method formatting.format\r\n     * @description\r\n     * Replaces variables in a string according to the type of `values`:\r\n     *\r\n     * - Replaces `$1` occurrences when `values` is of type `string`, `boolean`, `number`, `bigint`, `Date`, `Buffer` or when it is `null`.\r\n     *\r\n     * - Replaces variables `$1`, `$2`, ...`$100000` when `values` is an array of parameters. It throws a {@link external:RangeError RangeError}\r\n     * when the values or variables are out of range.\r\n     *\r\n     * - Replaces `$*propName*`, where `*` is any of `{}`, `()`, `[]`, `<>`, `//`, when `values` is an object that's not a\r\n     * `Date`, `Buffer`, {@link QueryFile} or `null`. Special property name `this` refers to the formatting object itself,\r\n     *   to be injected as a JSON string. When referencing a property that doesn't exist in the formatting object, it throws\r\n     *   {@link external:Error Error} = `Property 'PropName' doesn't exist`, unless option `partial` is used.\r\n     *\r\n     * - Supports $[Nested Named Parameters] of any depth.\r\n     *\r\n     * By default, each variable is automatically formatted according to its type, unless it is a special variable:\r\n     *\r\n     * - Raw-text variables end with `:raw` or symbol `^`, and prevent escaping the text. Such variables are not\r\n     *   allowed to be `null` or `undefined`, or the method will throw {@link external:TypeError TypeError} = `Values null/undefined cannot be used as raw text.`\r\n     *   - `$1:raw`, `$2:raw`,..., and `$*propName:raw*` (see `*` above)\r\n     *   - `$1^`, `$2^`,..., and `$*propName^*` (see `*` above)\r\n     *\r\n     * - Open-value variables end with `:value` or symbol `#`, to be escaped, but not wrapped in quotes. Such variables are\r\n     *   not allowed to be `null` or `undefined`, or the method will throw {@link external:TypeError TypeError} = `Open values cannot be null or undefined.`\r\n     *   - `$1:value`, `$2:value`,..., and `$*propName:value*` (see `*` above)\r\n     *   - `$1#`, `$2#`,..., and `$*propName#*` (see `*` above)\r\n     *\r\n     * - SQL name variables end with `:name` or symbol `~` (tilde), and provide proper escaping for SQL names/identifiers:\r\n     *   - `$1:name`, `$2:name`,..., and `$*propName:name*` (see `*` above)\r\n     *   - `$1~`, `$2~`,..., and `$*propName~*` (see `*` above)\r\n     *\r\n     * - Modifier `:alias` - non-verbose $[SQL Names] escaping.\r\n     *\r\n     * - JSON override ends with `:json` to format the value of any type as a JSON string\r\n     *\r\n     * - CSV override ends with `:csv` or `:list` to format an array as a properly escaped comma-separated list of values.\r\n     *\r\n     * @param {string|QueryFile|object} query\r\n     * A query string, a {@link QueryFile} or any object that implements $[Custom Type Formatting], to be formatted according to `values`.\r\n     *\r\n     * @param {array|object|value} [values]\r\n     * Formatting parameter(s) / variable value(s).\r\n     *\r\n     * @param {{}} [options]\r\n     * Formatting Options.\r\n     *\r\n     * @param {boolean} [options.capSQL=false]\r\n     * Formats reserved SQL words capitalized. Presently, this only concerns arrays, to output `ARRAY` when required.\r\n     *\r\n     * @param {boolean} [options.partial=false]\r\n     * Indicates that we intend to do only a partial replacement, i.e. throw no error when encountering a variable or\r\n     * property name that's missing within the formatting parameters.\r\n     *\r\n     * **NOTE:** This option has no meaning when option `def` is used.\r\n     *\r\n     * @param {*} [options.def]\r\n     * Sets default value for every variable that's missing, consequently preventing errors when encountering a variable\r\n     * or property name that's missing within the formatting parameters.\r\n     *\r\n     * It can also be set to a function, to be called with two parameters that depend on the type of formatting being used,\r\n     * and to return the actual default value:\r\n     *\r\n     * - For $[Named Parameters] formatting:\r\n     *   - `name` - name of the property missing in the formatting object\r\n     *   - `obj` - the formatting object, and is the same as `this` context\r\n     *\r\n     * - For $[Index Variables] formatting:\r\n     *   - `index` - element's index (starts with 1) that's outside the input array\r\n     *   - `arr` - the formatting/input array, and is the same as `this` context\r\n     *\r\n     *   You can tell which type of call it is by checking the type of the first parameter.\r\n     *\r\n     * @returns {string}\r\n     * Formatted query string.\r\n     *\r\n     * The function will throw an error, if any occurs during formatting.\r\n     */\r\n    format(query, values, options) {\r\n        options = assert(options, ['capSQL', 'partial', 'def']);\r\n        const ctf = getCTF(query);\r\n        if (ctf) {\r\n            query = ctf.toPostgres.call(query, query);\r\n        }\r\n        return formatQuery(query, values, false, options);\r\n    }\r\n};\r\n\r\n/* Pre-parsed type formatting */\r\nconst $to = {\r\n    array(arr, options) {\r\n        return formatArray(arr, options);\r\n    },\r\n    csv(values, options) {\r\n        return formatCSV(resolveFunc(values), options);\r\n    },\r\n    bool(value) {\r\n        return value ? 'true' : 'false';\r\n    },\r\n    buffer(obj, raw) {\r\n        const s = `\\\\x${obj.toString('hex')}`;\r\n        return raw ? s : wrapText(s);\r\n    },\r\n    date(d, raw) {\r\n        const s = npm.pgUtils.prepareValue(d);\r\n        return raw ? s : wrapText(s);\r\n    },\r\n    json(data, raw) {\r\n        const s = npm.utils.toJson(data);\r\n        return raw ? s : wrapText(safeText(s));\r\n    },\r\n    number(num) {\r\n        if (typeof num === 'bigint' || Number.isFinite(num)) {\r\n            const s = num.toString();\r\n            return num < 0 ? `(${s})` : s;\r\n        }\r\n        // Converting NaN/+Infinity/-Infinity according to Postgres documentation:\r\n        // http://www.postgresql.org/docs/9.6/static/datatype-numeric.html#DATATYPE-FLOAT\r\n        //\r\n        // NOTE: strings for 'NaN'/'+Infinity'/'-Infinity' are not case-sensitive.\r\n        if (num === Number.POSITIVE_INFINITY) {\r\n            return wrapText('+Infinity');\r\n        }\r\n        if (num === Number.NEGATIVE_INFINITY) {\r\n            return wrapText('-Infinity');\r\n        }\r\n        return wrapText('NaN');\r\n    },\r\n    text(value, raw) {\r\n        return raw ? value : wrapText(safeText(value));\r\n    }\r\n};\r\n\r\nmodule.exports = {\r\n    formatQuery,\r\n    formatEntity,\r\n    resolveFunc,\r\n    as: $as\r\n};\r\n\r\n/**\r\n * @external Error\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\r\n */\r\n\r\n/**\r\n * @external TypeError\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError\r\n */\r\n\r\n/**\r\n * @external RangeError\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError\r\n */\r\n\r\n/**\r\n * @external Symbol\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {InnerState} = require('./inner-state');\r\nconst {QueryFileError} = require('./errors');\r\nconst {assert} = require('./assert');\r\nconst {ColorConsole} = require('./utils/color');\r\n\r\nconst npm = {\r\n    fs: require('fs'),\r\n    os: require('os'),\r\n    path: require('path'),\r\n    minify: require('pg-minify'),\r\n    utils: require('./utils'),\r\n    formatting: require('./formatting')\r\n};\r\n\r\nconst file$query = Symbol('QueryFile.query');\r\n\r\n/**\r\n * @class QueryFile\r\n * @description\r\n *\r\n * Represents an external SQL file. The type is available from the library's root: `pgp.QueryFile`.\r\n *\r\n * Reads a file with SQL and prepares it for execution, also parses and minifies it, if required.\r\n * The SQL can be of any complexity, with both single and multi-line comments.\r\n *\r\n * The type can be used in place of the `query` parameter, with any query method directly, plus as `text` in {@link PreparedStatement}\r\n * and {@link ParameterizedQuery}.\r\n *\r\n * It never throws any error, leaving it for query methods to reject with {@link errors.QueryFileError QueryFileError}.\r\n *\r\n * **IMPORTANT:** You should only create a single reusable object per file, in order to avoid repeated file reads,\r\n * as the IO is a very expensive resource. If you do not follow it, you will be seeing the following warning:\r\n * `Creating a duplicate QueryFile object for the same file`, which signals a bad-use pattern.\r\n *\r\n * @param {string} file\r\n * Path to the SQL file with the query, either absolute or relative to the application's entry point file.\r\n *\r\n * If there is any problem reading the file, it will be reported when executing the query.\r\n *\r\n * @param {QueryFile.Options} [options]\r\n * Set of configuration options, as documented by {@link QueryFile.Options}.\r\n *\r\n * @returns {QueryFile}\r\n *\r\n * @see\r\n * {@link errors.QueryFileError QueryFileError},\r\n * {@link QueryFile#toPostgres toPostgres}\r\n *\r\n * @example\r\n * // File sql.js\r\n *\r\n * // Proper way to organize an sql provider:\r\n * //\r\n * // - have all sql files for Users in ./sql/users\r\n * // - have all sql files for Products in ./sql/products\r\n * // - have your sql provider module as ./sql/index.js\r\n *\r\n * const {QueryFile} = require('pg-promise');\r\n * const {join: joinPath} = require('path');\r\n *\r\n * // Helper for linking to external query files:\r\n * function sql(file) {\r\n *     const fullPath = joinPath(__dirname, file); // generating full path;\r\n *     return new QueryFile(fullPath, {minify: true});\r\n * }\r\n *\r\n * module.exports = {\r\n *     // external queries for Users:\r\n *     users: {\r\n *         add: sql('users/create.sql'),\r\n *         search: sql('users/search.sql'),\r\n *         report: sql('users/report.sql'),\r\n *     },\r\n *     // external queries for Products:\r\n *     products: {\r\n *         add: sql('products/add.sql'),\r\n *         quote: sql('products/quote.sql'),\r\n *         search: sql('products/search.sql'),\r\n *     }\r\n * };\r\n *\r\n * @example\r\n * // Testing our SQL provider\r\n *\r\n * const db = require('./db'); // our database module;\r\n * const {users: sql} = require('./sql'); // sql for users;\r\n *\r\n * module.exports = {\r\n *     addUser: (name, age) => db.none(sql.add, [name, age]),\r\n *     findUser: name => db.any(sql.search, name)\r\n * };\r\n *\r\n */\r\nclass QueryFile extends InnerState {\r\n\r\n    constructor(file, options) {\r\n\r\n        let filePath = file;\r\n\r\n        options = assert(options, {\r\n            debug: npm.utils.isDev(),\r\n            minify: (options && options.compress && options.minify === undefined) ? true : undefined,\r\n            compress: undefined,\r\n            params: undefined,\r\n            noWarnings: undefined\r\n        });\r\n\r\n        if (npm.utils.isText(filePath) && !npm.path.isAbsolute(filePath)) {\r\n            filePath = npm.path.join(npm.utils.startDir, filePath);\r\n        }\r\n\r\n        const {usedPath} = QueryFile.instance;\r\n\r\n        // istanbul ignore next:\r\n        if (!options.noWarnings) {\r\n            if (filePath in usedPath) {\r\n                usedPath[filePath]++;\r\n                ColorConsole.warn(`WARNING: Creating a duplicate QueryFile object for the same file - \\n    ${filePath}\\n${npm.utils.getLocalStack(2, 3)}\\n`);\r\n            } else {\r\n                usedPath[filePath] = 0;\r\n            }\r\n        }\r\n\r\n        const _inner = {\r\n            file,\r\n            filePath,\r\n            options,\r\n            sql: undefined,\r\n            error: undefined,\r\n            ready: undefined,\r\n            modTime: undefined\r\n        };\r\n\r\n        super(_inner);\r\n\r\n        this.prepare();\r\n    }\r\n\r\n    /**\r\n     * Global instance of the file-path repository.\r\n     *\r\n     * @return {{usedPath: {}}}\r\n     */\r\n    static get instance() {\r\n        const s = Symbol.for('pgPromiseQueryFile');\r\n        let scope = global[s];\r\n        if (!scope) {\r\n            scope = {\r\n                usedPath: {} // used-path look-up dictionary\r\n            };\r\n            global[s] = scope;\r\n        }\r\n        return scope;\r\n    }\r\n\r\n    /**\r\n     * @name QueryFile#Symbol(QueryFile.$query)\r\n     * @type {string}\r\n     * @default undefined\r\n     * @readonly\r\n     * @private\r\n     * @summary Prepared query string.\r\n     * @description\r\n     * When property {@link QueryFile#error error} is set, the query is `undefined`.\r\n     *\r\n     * **IMPORTANT:** This property is for internal use by the library only, never use this\r\n     * property directly from your code.\r\n     */\r\n    get [file$query]() {\r\n        return this._inner.sql;\r\n    }\r\n\r\n    /**\r\n     * @name QueryFile#error\r\n     * @type {errors.QueryFileError}\r\n     * @default undefined\r\n     * @readonly\r\n     * @description\r\n     * When in an error state, it is set to a {@link errors.QueryFileError QueryFileError} object. Otherwise, it is `undefined`.\r\n     */\r\n    get error() {\r\n        return this._inner.error;\r\n    }\r\n\r\n    /**\r\n     * @name QueryFile#file\r\n     * @type {string}\r\n     * @readonly\r\n     * @description\r\n     * File name that was passed into the constructor.\r\n     *\r\n     * This property is primarily for internal use by the library.\r\n     */\r\n    get file() {\r\n        return this._inner.file;\r\n    }\r\n\r\n    /**\r\n     * @name QueryFile#options\r\n     * @type {QueryFile.Options}\r\n     * @readonly\r\n     * @description\r\n     * Set of options, as configured during the object's construction.\r\n     *\r\n     * This property is primarily for internal use by the library.\r\n     */\r\n    get options() {\r\n        return this._inner.options;\r\n    }\r\n\r\n    /**\r\n     * @summary Prepares the query for execution.\r\n     * @description\r\n     * If the query hasn't been prepared yet, it will read the file and process the content according\r\n     * to the parameters passed into the constructor.\r\n     *\r\n     * This method is primarily for internal use by the library.\r\n     *\r\n     * @param {boolean} [throwErrors=false]\r\n     * Throw any error encountered.\r\n     */\r\n    prepare(throwErrors) {\r\n        const i = this._inner, options = i.options;\r\n        let lastMod;\r\n        if (options.debug && i.ready) {\r\n            try {\r\n                lastMod = npm.fs.statSync(i.filePath).mtime.getTime();\r\n                // istanbul ignore if;\r\n                if (lastMod === i.modTime) {\r\n                    return;\r\n                }\r\n                i.ready = false;\r\n            } catch (e) {\r\n                i.sql = undefined;\r\n                i.ready = false;\r\n                i.error = e;\r\n                if (throwErrors) {\r\n                    throw i.error;\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        if (i.ready) {\r\n            return;\r\n        }\r\n        try {\r\n            i.sql = npm.fs.readFileSync(i.filePath, 'utf8');\r\n            i.modTime = lastMod || npm.fs.statSync(i.filePath).mtime.getTime();\r\n            if (options.minify && options.minify !== 'after') {\r\n                i.sql = npm.minify(i.sql, {compress: options.compress});\r\n            }\r\n            if (options.params !== undefined) {\r\n                i.sql = npm.formatting.as.format(i.sql, options.params, {partial: true});\r\n            }\r\n            if (options.minify && options.minify === 'after') {\r\n                i.sql = npm.minify(i.sql, {compress: options.compress});\r\n            }\r\n            i.ready = true;\r\n            i.error = undefined;\r\n        } catch (e) {\r\n            i.sql = undefined;\r\n            i.error = new QueryFileError(e, this);\r\n            if (throwErrors) {\r\n                throw i.error;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// Hiding the query as a symbol within the type,\r\n// to make it even more difficult to misuse it:\r\nQueryFile.$query = file$query;\r\n\r\n/**\r\n * @method QueryFile#toPostgres\r\n * @description\r\n * $[Custom Type Formatting], based on $[Symbolic CTF], i.e. the actual method is available only via {@link external:Symbol Symbol}:\r\n *\r\n * ```js\r\n * const {toPostgres} = pgp.as.ctf; // Custom Type Formatting symbols namespace\r\n * const query = qf[toPostgres](); // qf = an object of type QueryFile\r\n * ```\r\n *\r\n * This is a raw formatting type (`rawType = true`), i.e. when used as a query-formatting parameter, type `QueryFile` injects SQL as raw text.\r\n *\r\n * If you need to support type `QueryFile` outside of query methods, this is the only safe way to get the most current SQL.\r\n * And you would want to use this method dynamically, as it reloads the SQL automatically, if option `debug` is set.\r\n * See {@link QueryFile.Options Options}.\r\n *\r\n * @param {QueryFile} [self]\r\n * Optional self-reference, for ES6 arrow functions.\r\n *\r\n * @returns {string}\r\n * SQL string from the file, according to the {@link QueryFile.Options options} specified.\r\n *\r\n */\r\nQueryFile.prototype[npm.formatting.as.ctf.toPostgres] = function (self) {\r\n    self = this instanceof QueryFile && this || self;\r\n    self.prepare(true);\r\n    return self[QueryFile.$query];\r\n};\r\n\r\nQueryFile.prototype[npm.formatting.as.ctf.rawType] = true; // use as pre-formatted\r\n\r\n/**\r\n * @method QueryFile#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the object's current state.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nQueryFile.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap = npm.utils.messageGap(level + 1);\r\n    const lines = [\r\n        'QueryFile {'\r\n    ];\r\n    this.prepare();\r\n    lines.push(gap + 'file: \"' + this.file + '\"');\r\n    lines.push(gap + 'options: ' + npm.utils.toJson(this.options));\r\n    if (this.error) {\r\n        lines.push(gap + 'error: ' + this.error.toString(level + 1));\r\n    } else {\r\n        lines.push(gap + 'query: \"' + this[QueryFile.$query] + '\"');\r\n    }\r\n    lines.push(npm.utils.messageGap(level) + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(QueryFile, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {QueryFile};\r\n\r\n/**\r\n * @typedef QueryFile.Options\r\n * @description\r\n * A set of configuration options as passed into the {@link QueryFile} constructor.\r\n *\r\n * @property {boolean} debug\r\n * When in debug mode, the query file is checked for its last modification time on every query request,\r\n * so if it changes, the file is read afresh.\r\n *\r\n * The default for this property is `true` when `NODE_ENV` = `development`,\r\n * or `false` otherwise.\r\n *\r\n * @property {boolean|string} minify=false\r\n * Parses and minifies the SQL using $[pg-minify]:\r\n * - `false` - do not use $[pg-minify]\r\n * - `true` - use $[pg-minify] to parse and minify SQL\r\n * - `'after'` - use $[pg-minify] after applying static formatting parameters\r\n *   (option `params`), as opposed to before it (default)\r\n *\r\n * If option `compress` is set, then the default for `minify` is `true`.\r\n *\r\n * Failure to parse SQL will result in $[SQLParsingError].\r\n *\r\n * @property {boolean} compress=false\r\n * Sets option `compress` as supported by $[pg-minify], to uglify the SQL:\r\n * - `false` - no compression to be applied, keep minimum spaces for easier read\r\n * - `true` - remove all unnecessary spaces from SQL\r\n *\r\n * This option has no meaning, if `minify` is explicitly set to `false`. However, if `minify` is not\r\n * specified and `compress` is specified as `true`, then `minify` defaults to `true`.\r\n *\r\n * @property {array|object|value} params\r\n *\r\n * Static formatting parameters to be applied to the SQL, using the same method {@link formatting.format as.format},\r\n * but with option `partial` = `true`.\r\n *\r\n * Most of the time query formatting is fully dynamic, and applied just before executing the query.\r\n * In some cases though you may need to pre-format SQL with static values. Examples of it can be a\r\n * schema name, or a configurable table name.\r\n *\r\n * This option makes two-step SQL formatting easy: you can pre-format the SQL initially, and then\r\n * apply the second-step dynamic formatting when executing the query.\r\n *\r\n * @property {boolean} noWarnings=false\r\n * Suppresses all warnings produced by the class. It is not recommended for general use, only in specific tests\r\n * that may require it.\r\n *\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ServerFormatting} = require('./server-formatting');\r\nconst {PreparedStatementError} = require('../errors');\r\nconst {QueryFile} = require('../query-file');\r\nconst {assert} = require('../assert');\r\n\r\nconst npm = {\r\n    EOL: require('os').EOL,\r\n    utils: require('../utils')\r\n};\r\n\r\n/**\r\n * @class PreparedStatement\r\n * @description\r\n * Constructs a new $[Prepared Statement] object. All properties can also be set after the object's construction.\r\n *\r\n * This type extends the basic `{name, text, values}` object, i.e. when the basic object is used\r\n * with a query method, a new {@link PreparedStatement} object is created in its place.\r\n *\r\n * The type can be used in place of the `query` parameter, with any query method directly.\r\n *\r\n * The type is available from the library's root: `pgp.PreparedStatement`.\r\n *\r\n * @param {Object} [options]\r\n * Object configuration options / properties.\r\n *\r\n * @param {string} [options.name] - See property {@link PreparedStatement#name name}.\r\n * @param {string|QueryFile} [options.text] - See property {@link PreparedStatement#text text}.\r\n * @param {array} [options.values] - See property {@link PreparedStatement#values values}.\r\n * @param {boolean} [options.binary] - See property {@link PreparedStatement#binary binary}.\r\n * @param {string} [options.rowMode] - See property {@link PreparedStatement#rowMode rowMode}.\r\n * @param {number} [options.rows] - See property {@link PreparedStatement#rows rows}.\r\n * @param {ITypes} [options.types] - See property {@link PreparedStatement#types types}.\r\n *\r\n * @returns {PreparedStatement}\r\n *\r\n * @see\r\n * {@link errors.PreparedStatementError PreparedStatementError},\r\n * {@link http://www.postgresql.org/docs/9.6/static/sql-prepare.html PostgreSQL Prepared Statements}\r\n *\r\n * @example\r\n *\r\n * const {PreparedStatement: PS} = require('pg-promise');\r\n *\r\n * // Creating a complete Prepared Statement with parameters:\r\n * const findUser = new PS({name: 'find-user', text: 'SELECT * FROM Users WHERE id = $1', values: [123]});\r\n *\r\n * db.one(findUser)\r\n *     .then(user => {\r\n *         // user found;\r\n *     })\r\n *     .catch(error => {\r\n *         // error;\r\n *     });\r\n *\r\n * @example\r\n *\r\n * const {PreparedStatement: PS} = require('pg-promise');\r\n *\r\n * // Creating a reusable Prepared Statement without values:\r\n * const addUser = new PS({name: 'add-user', text: 'INSERT INTO Users(name, age) VALUES($1, $2)'});\r\n *\r\n * // setting values explicitly:\r\n * addUser.values = ['John', 30];\r\n *\r\n * db.none(addUser)\r\n *     .then(() => {\r\n *         // user added;\r\n *     })\r\n *     .catch(error => {\r\n *         // error;\r\n *     });\r\n *\r\n * // setting values implicitly, by passing them into the query method:\r\n * db.none(addUser, ['Mike', 25])\r\n *     .then(() => {\r\n *         // user added;\r\n *     })\r\n *     .catch(error => {\r\n *         // error;\r\n *     });\r\n */\r\nclass PreparedStatement extends ServerFormatting {\r\n    constructor(options) {\r\n        options = assert(options, ['name', 'text', 'values', 'binary', 'rowMode', 'rows', 'types']);\r\n        super(options);\r\n    }\r\n\r\n    /**\r\n     * @name PreparedStatement#name\r\n     * @type {string}\r\n     * @description\r\n     * An arbitrary name given to this particular prepared statement. It must be unique within a single session and is\r\n     * subsequently used to execute or deallocate a previously prepared statement.\r\n     */\r\n    get name() {\r\n        return this._inner.options.name;\r\n    }\r\n\r\n    set name(value) {\r\n        const _i = this._inner;\r\n        if (value !== _i.options.name) {\r\n            _i.options.name = value;\r\n            _i.changed = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name PreparedStatement#rows\r\n     * @type {number}\r\n     * @description\r\n     * Number of rows to return at a time from a Prepared Statement's portal.\r\n     * The default is 0, which means that all rows must be returned at once.\r\n     */\r\n    get rows() {\r\n        return this._inner.options.rows;\r\n    }\r\n\r\n    set rows(value) {\r\n        const _i = this._inner;\r\n        if (value !== _i.options.rows) {\r\n            _i.options.rows = value;\r\n            _i.changed = true;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @method PreparedStatement#parse\r\n * @description\r\n * Parses the current object and returns a simple `{name, text, values}`, if successful,\r\n * or else it returns a {@link errors.PreparedStatementError PreparedStatementError} object.\r\n *\r\n * This method is primarily for internal use by the library.\r\n *\r\n * @returns {{name, text, values}|errors.PreparedStatementError}\r\n */\r\nPreparedStatement.prototype.parse = function () {\r\n\r\n    const _i = this._inner, options = _i.options;\r\n\r\n    const qf = options.text instanceof QueryFile ? options.text : null;\r\n\r\n    if (!_i.changed && !qf) {\r\n        return _i.target;\r\n    }\r\n\r\n    const errors = [], values = _i.target.values;\r\n    _i.target = {\r\n        name: options.name,\r\n        text: options.text\r\n    };\r\n    _i.changed = true;\r\n    _i.currentError = undefined;\r\n\r\n    if (!npm.utils.isText(_i.target.name)) {\r\n        errors.push('Property \\'name\\' must be a non-empty text string.');\r\n    }\r\n\r\n    if (qf) {\r\n        qf.prepare();\r\n        if (qf.error) {\r\n            errors.push(qf.error);\r\n        } else {\r\n            _i.target.text = qf[QueryFile.$query];\r\n        }\r\n    }\r\n    if (!npm.utils.isText(_i.target.text)) {\r\n        errors.push('Property \\'text\\' must be a non-empty text string.');\r\n    }\r\n\r\n    if (!npm.utils.isNull(values)) {\r\n        _i.target.values = values;\r\n    }\r\n\r\n    if (options.binary !== undefined) {\r\n        _i.target.binary = !!options.binary;\r\n    }\r\n\r\n    if (options.rowMode !== undefined) {\r\n        _i.target.rowMode = options.rowMode;\r\n    }\r\n\r\n    if (options.rows !== undefined) {\r\n        _i.target.rows = options.rows;\r\n    }\r\n\r\n    if (options.types !== undefined) {\r\n        _i.target.types = options.types;\r\n    }\r\n\r\n    if (errors.length) {\r\n        return _i.currentError = new PreparedStatementError(errors[0], _i.target);\r\n    }\r\n\r\n    _i.changed = false;\r\n\r\n    return _i.target;\r\n};\r\n\r\n/**\r\n * @method PreparedStatement#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the object's current state.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nPreparedStatement.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap = npm.utils.messageGap(level + 1);\r\n    const ps = this.parse();\r\n    const lines = [\r\n        'PreparedStatement {',\r\n        gap + 'name: ' + npm.utils.toJson(this.name)\r\n    ];\r\n    if (npm.utils.isText(ps.text)) {\r\n        lines.push(gap + 'text: \"' + ps.text + '\"');\r\n    }\r\n    if (this.values !== undefined) {\r\n        lines.push(gap + 'values: ' + npm.utils.toJson(this.values));\r\n    }\r\n    if (this.binary !== undefined) {\r\n        lines.push(gap + 'binary: ' + npm.utils.toJson(this.binary));\r\n    }\r\n    if (this.rowMode !== undefined) {\r\n        lines.push(gap + 'rowMode: ' + npm.utils.toJson(this.rowMode));\r\n    }\r\n    if (this.rows !== undefined) {\r\n        lines.push(gap + 'rows: ' + npm.utils.toJson(this.rows));\r\n    }\r\n    if (this.error) {\r\n        lines.push(gap + 'error: ' + this.error.toString(level + 1));\r\n    }\r\n    lines.push(npm.utils.messageGap(level) + '}');\r\n    return lines.join(npm.EOL);\r\n};\r\n\r\nmodule.exports = {PreparedStatement};\r\n\r\n/**\r\n * @name PreparedStatement#text\r\n * @type {string|QueryFile}\r\n * @description\r\n * A non-empty query string or a {@link QueryFile} object.\r\n *\r\n * Only the basic variables (`$1`, `$2`, etc) can be used in the query, because $[Prepared Statements]\r\n * are formatted on the server side.\r\n *\r\n * Changing this property for the same {@link PreparedStatement#name name} will have no effect, because queries\r\n * for Prepared Statements are cached by the server, with {@link PreparedStatement#name name} being the cache key.\r\n */\r\n\r\n/**\r\n * @name PreparedStatement#values\r\n * @type {array}\r\n * @description\r\n * Query formatting parameters, depending on the type:\r\n *\r\n * - `null` / `undefined` means the query has no formatting parameters\r\n * - `Array` - it is an array of formatting parameters\r\n * - None of the above, means it is a single formatting value, which\r\n *   is then automatically wrapped into an array\r\n */\r\n\r\n/**\r\n * @name PreparedStatement#binary\r\n * @type {boolean}\r\n * @default undefined\r\n * @description\r\n * Activates binary result mode. The default is the text mode.\r\n *\r\n * @see {@link http://www.postgresql.org/docs/devel/static/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY Extended Query}\r\n */\r\n\r\n/**\r\n * @name PreparedStatement#rowMode\r\n * @type {string}\r\n * @default undefined\r\n * @description\r\n * Changes the way data arrives to the client, with only one value supported by $[pg]:\r\n *  - `array` will make all data rows arrive as arrays of values. By default, rows arrive as objects.\r\n */\r\n\r\n/**\r\n * @name PreparedStatement#types\r\n * @type {ITypes}\r\n * @default undefined\r\n * @description\r\n * Custom type parsers just for this query result.\r\n */\r\n\r\n/**\r\n * @name PreparedStatement#error\r\n * @type {errors.PreparedStatementError}\r\n * @default undefined\r\n * @description\r\n * When in an error state, it is set to a {@link errors.PreparedStatementError PreparedStatementError} object. Otherwise, it is `undefined`.\r\n *\r\n * This property is primarily for internal use by the library.\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ServerFormatting} = require('./server-formatting');\r\nconst {ParameterizedQueryError} = require('../errors');\r\nconst {QueryFile} = require('../query-file');\r\nconst {assert} = require('../assert');\r\n\r\nconst npm = {\r\n    EOL: require('os').EOL,\r\n    utils: require('../utils')\r\n};\r\n\r\n/**\r\n * @class ParameterizedQuery\r\n * @description\r\n * Constructs a new {@link ParameterizedQuery} object. All properties can also be set after the object's construction.\r\n *\r\n * This type extends the basic `{text, values}` object, i.e. when the basic object is used with a query method,\r\n * a new {@link ParameterizedQuery} object is created in its place.\r\n *\r\n * The type can be used in place of the `query` parameter, with any query method directly.\r\n *\r\n * The type is available from the library's root: `pgp.ParameterizedQuery`.\r\n *\r\n * @param {string|QueryFile|Object} [options]\r\n * Object configuration options / properties.\r\n *\r\n * @param {string|QueryFile} [options.text] - See property {@link ParameterizedQuery#text text}.\r\n * @param {array} [options.values] - See property {@link ParameterizedQuery#values values}.\r\n * @param {boolean} [options.binary] - See property {@link ParameterizedQuery#binary binary}.\r\n * @param {string} [options.rowMode] - See property {@link ParameterizedQuery#rowMode rowMode}.\r\n * @param {ITypes} [options.types] - See property {@link ParameterizedQuery#types types}.\r\n *\r\n * @returns {ParameterizedQuery}\r\n *\r\n * @see\r\n * {@link errors.ParameterizedQueryError ParameterizedQueryError}\r\n *\r\n * @example\r\n *\r\n * const {ParameterizedQuery: PQ} = require('pg-promise');\r\n *\r\n * // Creating a complete Parameterized Query with parameters:\r\n * const findUser = new PQ({text: 'SELECT * FROM Users WHERE id = $1', values: [123]});\r\n *\r\n * db.one(findUser)\r\n *     .then(user => {\r\n *         // user found;\r\n *     })\r\n *     .catch(error => {\r\n *         // error;\r\n *     });\r\n *\r\n * @example\r\n *\r\n * const {ParameterizedQuery: PQ} = require('pg-promise');\r\n *\r\n * // Creating a reusable Parameterized Query without values:\r\n * const addUser = new PQ('INSERT INTO Users(name, age) VALUES($1, $2)');\r\n *\r\n * // setting values explicitly:\r\n * addUser.values = ['John', 30];\r\n *\r\n * db.none(addUser)\r\n *     .then(() => {\r\n *         // user added;\r\n *     })\r\n *     .catch(error=> {\r\n *         // error;\r\n *     });\r\n *\r\n * // setting values implicitly, by passing them into the query method:\r\n * db.none(addUser, ['Mike', 25])\r\n *     .then(() => {\r\n *         // user added;\r\n *     })\r\n *     .catch(error=> {\r\n *         // error;\r\n *     });\r\n */\r\nclass ParameterizedQuery extends ServerFormatting {\r\n    constructor(options) {\r\n        if (typeof options === 'string' || options instanceof QueryFile) {\r\n            options = {\r\n                text: options\r\n            };\r\n        } else {\r\n            options = assert(options, ['text', 'values', 'binary', 'rowMode', 'types']);\r\n        }\r\n        super(options);\r\n    }\r\n}\r\n\r\n/**\r\n * @method ParameterizedQuery#parse\r\n * @description\r\n * Parses the current object and returns a simple `{text, values}`, if successful,\r\n * or else it returns a {@link errors.ParameterizedQueryError ParameterizedQueryError} object.\r\n *\r\n * This method is primarily for internal use by the library.\r\n *\r\n * @returns {{text, values}|errors.ParameterizedQueryError}\r\n */\r\nParameterizedQuery.prototype.parse = function () {\r\n\r\n    const _i = this._inner, options = _i.options;\r\n    const qf = options.text instanceof QueryFile ? options.text : null;\r\n\r\n    if (!_i.changed && !qf) {\r\n        return _i.target;\r\n    }\r\n\r\n    const errors = [], values = _i.target.values;\r\n    _i.target = {\r\n        text: options.text\r\n    };\r\n    _i.changed = true;\r\n    _i.currentError = undefined;\r\n\r\n    if (qf) {\r\n        qf.prepare();\r\n        if (qf.error) {\r\n            errors.push(qf.error);\r\n        } else {\r\n            _i.target.text = qf[QueryFile.$query];\r\n        }\r\n    }\r\n\r\n    if (!npm.utils.isText(_i.target.text)) {\r\n        errors.push('Property \\'text\\' must be a non-empty text string.');\r\n    }\r\n\r\n    if (!npm.utils.isNull(values)) {\r\n        _i.target.values = values;\r\n    }\r\n\r\n    if (options.binary !== undefined) {\r\n        _i.target.binary = !!options.binary;\r\n    }\r\n\r\n    if (options.rowMode !== undefined) {\r\n        _i.target.rowMode = options.rowMode;\r\n    }\r\n\r\n    if (options.types !== undefined) {\r\n        _i.target.types = options.types;\r\n    }\r\n\r\n    if (errors.length) {\r\n        return _i.currentError = new ParameterizedQueryError(errors[0], _i.target);\r\n    }\r\n\r\n    _i.changed = false;\r\n\r\n    return _i.target;\r\n};\r\n\r\n/**\r\n * @method ParameterizedQuery#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the object's current state.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nParameterizedQuery.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap = npm.utils.messageGap(level + 1);\r\n    const pq = this.parse();\r\n    const lines = [\r\n        'ParameterizedQuery {'\r\n    ];\r\n    if (npm.utils.isText(pq.text)) {\r\n        lines.push(gap + 'text: \"' + pq.text + '\"');\r\n    }\r\n    if (this.values !== undefined) {\r\n        lines.push(gap + 'values: ' + npm.utils.toJson(this.values));\r\n    }\r\n    if (this.binary !== undefined) {\r\n        lines.push(gap + 'binary: ' + npm.utils.toJson(this.binary));\r\n    }\r\n    if (this.rowMode !== undefined) {\r\n        lines.push(gap + 'rowMode: ' + npm.utils.toJson(this.rowMode));\r\n    }\r\n    if (this.error !== undefined) {\r\n        lines.push(gap + 'error: ' + this.error.toString(level + 1));\r\n    }\r\n    lines.push(npm.utils.messageGap(level) + '}');\r\n    return lines.join(npm.EOL);\r\n};\r\n\r\nmodule.exports = {ParameterizedQuery};\r\n\r\n/**\r\n * @name ParameterizedQuery#text\r\n * @type {string|QueryFile}\r\n * @description\r\n * A non-empty query string or a {@link QueryFile} object.\r\n *\r\n * Only the basic variables (`$1`, `$2`, etc) can be used in the query, because _Parameterized Queries_\r\n * are formatted on the server side.\r\n */\r\n\r\n/**\r\n * @name ParameterizedQuery#values\r\n * @type {array}\r\n * @description\r\n * Query formatting parameters, depending on the type:\r\n *\r\n * - `null` / `undefined` means the query has no formatting parameters\r\n * - `Array` - it is an array of formatting parameters\r\n * - None of the above, means it is a single formatting value, which\r\n *   is then automatically wrapped into an array\r\n */\r\n\r\n/**\r\n * @name ParameterizedQuery#binary\r\n * @type {boolean}\r\n * @default undefined\r\n * @description\r\n * Activates binary result mode. The default is the text mode.\r\n *\r\n * @see {@link http://www.postgresql.org/docs/devel/static/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY Extended Query}\r\n */\r\n\r\n/**\r\n * @name ParameterizedQuery#rowMode\r\n * @type {string}\r\n * @default undefined\r\n * @description\r\n * Changes the way data arrives to the client, with only one value supported by $[pg]:\r\n *  - `array` will make all data rows arrive as arrays of values. By default, rows arrive as objects.\r\n */\r\n\r\n/**\r\n * @name ParameterizedQuery#types\r\n * @type {ITypes}\r\n * @default undefined\r\n * @description\r\n * Custom type parsers just for this query result.\r\n */\r\n\r\n/**\r\n * @name ParameterizedQuery#error\r\n * @type {errors.ParameterizedQueryError}\r\n * @default undefined\r\n * @readonly\r\n * @description\r\n * When in an error state, it is set to a {@link errors.ParameterizedQueryError ParameterizedQueryError} object. Otherwise, it is `undefined`.\r\n *\r\n * This property is primarily for internal use by the library.\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ServerFormatting} = require('./server-formatting');\r\nconst {PreparedStatement} = require('./prepared-statement');\r\nconst {ParameterizedQuery} = require('./parameterized-query');\r\n\r\nmodule.exports = {\r\n    ServerFormatting,\r\n    PreparedStatement,\r\n    ParameterizedQuery\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\n/**\r\n * @enum {number}\r\n * @alias queryResult\r\n * @readonly\r\n * @description\r\n * **Query Result Mask**\r\n *\r\n * Binary mask that represents the number of rows expected from a query method,\r\n * used by generic {@link Database#query query} method, plus {@link Database#func func}.\r\n *\r\n * The mask is always the last optional parameter, which defaults to `queryResult.any`.\r\n *\r\n * Any combination of flags is supported, except for `one + many`.\r\n *\r\n * The type is available from the library's root: `pgp.queryResult`.\r\n *\r\n * @see {@link Database#query Database.query}, {@link Database#func Database.func}\r\n */\r\nconst queryResult = {\r\n    /** Single row is expected, to be resolved as a single row-object. */\r\n    one: 1,\r\n    /** One or more rows expected, to be resolved as an array, with at least 1 row-object. */\r\n    many: 2,\r\n    /** Expecting no rows, to be resolved with `null`. */\r\n    none: 4,\r\n    /** `many|none` - any result is expected, to be resolved with an array of rows-objects. */\r\n    any: 6\r\n};\r\n\r\nmodule.exports = {queryResult};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {PromiseAdapter} = require('./promise-adapter');\r\n\r\n//////////////////////////////////////////\r\n// Parses and validates a promise library;\r\nfunction parse(pl) {\r\n\r\n    let promise;\r\n    if (pl instanceof PromiseAdapter) {\r\n        promise = function (func) {\r\n            return pl.create(func);\r\n        };\r\n        promise.resolve = pl.resolve;\r\n        promise.reject = pl.reject;\r\n        promise.all = pl.all;\r\n        return promise;\r\n    }\r\n    const t = typeof pl;\r\n    if (t === 'function' || t === 'object') {\r\n        const Root = typeof pl.Promise === 'function' ? pl.Promise : pl;\r\n        promise = function (func) {\r\n            return new Root(func);\r\n        };\r\n        promise.resolve = Root.resolve;\r\n        promise.reject = Root.reject;\r\n        promise.all = Root.all;\r\n        if (typeof promise.resolve === 'function' &&\r\n            typeof promise.reject === 'function' &&\r\n            typeof promise.all === 'function') {\r\n            return promise;\r\n        }\r\n    }\r\n\r\n    throw new TypeError('Invalid promise library specified.');\r\n}\r\n\r\nfunction parsePromise(promiseLib) {\r\n    const result = {promiseLib};\r\n    if (promiseLib) {\r\n        result.promise = parse(promiseLib);\r\n    } else {\r\n        result.promise = parse(Promise);\r\n        result.promiseLib = Promise;\r\n    }\r\n    return result;\r\n}\r\n\r\nmodule.exports = {parsePromise};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {InnerState} = require('../inner-state');\r\nconst {assert} = require('../assert');\r\n\r\nconst npm = {\r\n    os: require('os'),\r\n    utils: require('../utils'),\r\n    formatting: require('../formatting'),\r\n    patterns: require('../patterns')\r\n};\r\n\r\n/**\r\n *\r\n * @class helpers.Column\r\n * @description\r\n *\r\n * Read-only structure with details for a single column. Used primarily by {@link helpers.ColumnSet ColumnSet}.\r\n *\r\n * The class parses details into a template, to be used for query generation.\r\n *\r\n * @param {string|helpers.ColumnConfig} col\r\n * Column details, depending on the type.\r\n *\r\n * When it is a string, it is expected to contain a name for both the column and the source property, assuming that the two are the same.\r\n * The name must adhere to JavaScript syntax for variable names. The name can be appended with any format modifier as supported by\r\n * {@link formatting.format as.format} (`^`, `~`, `#`, `:csv`, `:list`, `:json`, `:alias`, `:name`, `:raw`, `:value`), which is then removed from the name and put\r\n * into property `mod`. If the name starts with `?`, it is removed, while setting flag `cnd` = `true`.\r\n *\r\n * If the string doesn't adhere to the above requirements, the method will throw {@link external:TypeError TypeError} = `Invalid column syntax`.\r\n *\r\n * When `col` is a simple {@link helpers.ColumnConfig ColumnConfig}-like object, it is used as an input configurator to set all the properties\r\n * of the class.\r\n *\r\n * @property {string} name\r\n * Destination column name + source property name (if `prop` is skipped). The name must adhere to JavaScript syntax for variables,\r\n * unless `prop` is specified, in which case `name` represents only the column name, and therefore can be any non-empty string.\r\n *\r\n * @property {string} [prop]\r\n * Source property name, if different from the column's name. It must adhere to JavaScript syntax for variables.\r\n *\r\n * It is ignored when it is the same as `name`.\r\n *\r\n * @property {string} [mod]\r\n * Formatting modifier, as supported by method {@link formatting.format as.format}: `^`, `~`, `#`, `:csv`, `:list`, `:json`, `:alias`, `:name`, `:raw`, `:value`.\r\n *\r\n * @property {string} [cast]\r\n * Server-side type casting, without `::` in front.\r\n *\r\n * @property {boolean} [cnd]\r\n * Conditional column flag.\r\n *\r\n * Used by methods {@link helpers.update update} and {@link helpers.sets sets}, ignored by methods {@link helpers.insert insert} and\r\n * {@link helpers.values values}. It indicates that the column is reserved for a `WHERE` condition, not to be set or updated.\r\n *\r\n * It can be set from a string initialization, by adding `?` in front of the name.\r\n *\r\n * @property {*} [def]\r\n * Default value for the property, to be used only when the source object doesn't have the property.\r\n * It is ignored when property `init` is set.\r\n *\r\n * @property {helpers.initCB} [init]\r\n * Override callback for the value.\r\n *\r\n * @property {helpers.skipCB} [skip]\r\n * An override for skipping columns dynamically.\r\n *\r\n * Used by methods {@link helpers.update update} (for a single object) and {@link helpers.sets sets}, ignored by methods\r\n * {@link helpers.insert insert} and {@link helpers.values values}.\r\n *\r\n * It is also ignored when conditional flag `cnd` is set.\r\n *\r\n * @returns {helpers.Column}\r\n *\r\n * @see\r\n * {@link helpers.ColumnConfig ColumnConfig},\r\n * {@link helpers.Column#castText castText},\r\n * {@link helpers.Column#escapedName escapedName},\r\n * {@link helpers.Column#variable variable}\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')({\r\n *     capSQL: true // if you want all generated SQL capitalized\r\n * });\r\n *\r\n * const {Column} = pgp.helpers;\r\n *\r\n * // creating a column from just a name:\r\n * const col1 = new Column('colName');\r\n * console.log(col1);\r\n * //=>\r\n * // Column {\r\n * //    name: \"colName\"\r\n * // }\r\n *\r\n * // creating a column from a name + modifier:\r\n * const col2 = new Column('colName:csv');\r\n * console.log(col2);\r\n * //=>\r\n * // Column {\r\n * //    name: \"colName\"\r\n * //    mod: \":csv\"\r\n * // }\r\n *\r\n * // creating a column from a configurator:\r\n * const col3 = new Column({\r\n *     name: 'colName', // required\r\n *     prop: 'propName', // optional\r\n *     mod: '^', // optional\r\n *     def: 123 // optional\r\n * });\r\n * console.log(col3);\r\n * //=>\r\n * // Column {\r\n * //    name: \"colName\"\r\n * //    prop: \"propName\"\r\n * //    mod: \"^\"\r\n * //    def: 123\r\n * // }\r\n *\r\n */\r\nclass Column extends InnerState {\r\n\r\n    constructor(col) {\r\n        super();\r\n\r\n        if (typeof col === 'string') {\r\n            const info = parseColumn(col);\r\n            this.name = info.name;\r\n            if ('mod' in info) {\r\n                this.mod = info.mod;\r\n            }\r\n            if ('cnd' in info) {\r\n                this.cnd = info.cnd;\r\n            }\r\n        } else {\r\n            col = assert(col, ['name', 'prop', 'mod', 'cast', 'cnd', 'def', 'init', 'skip']);\r\n            if ('name' in col) {\r\n                if (!npm.utils.isText(col.name)) {\r\n                    throw new TypeError(`Invalid 'name' value: ${npm.utils.toJson(col.name)}. A non-empty string was expected.`);\r\n                }\r\n                if (npm.utils.isNull(col.prop) && !isValidVariable(col.name)) {\r\n                    throw new TypeError(`Invalid 'name' syntax: ${npm.utils.toJson(col.name)}.`);\r\n                }\r\n                this.name = col.name; // column name + property name (if 'prop' isn't specified)\r\n\r\n                if (!npm.utils.isNull(col.prop)) {\r\n                    if (!npm.utils.isText(col.prop)) {\r\n                        throw new TypeError(`Invalid 'prop' value: ${npm.utils.toJson(col.prop)}. A non-empty string was expected.`);\r\n                    }\r\n                    if (!isValidVariable(col.prop)) {\r\n                        throw new TypeError(`Invalid 'prop' syntax: ${npm.utils.toJson(col.prop)}.`);\r\n                    }\r\n                    if (col.prop !== col.name) {\r\n                        // optional property name, if different from the column's name;\r\n                        this.prop = col.prop;\r\n                    }\r\n                }\r\n                if (!npm.utils.isNull(col.mod)) {\r\n                    if (typeof col.mod !== 'string' || !isValidMod(col.mod)) {\r\n                        throw new TypeError(`Invalid 'mod' value: ${npm.utils.toJson(col.mod)}.`);\r\n                    }\r\n                    this.mod = col.mod; // optional format modifier;\r\n                }\r\n                if (!npm.utils.isNull(col.cast)) {\r\n                    this.cast = parseCast(col.cast); // optional SQL type casting\r\n                }\r\n                if ('cnd' in col) {\r\n                    this.cnd = !!col.cnd;\r\n                }\r\n                if ('def' in col) {\r\n                    this.def = col.def; // optional default\r\n                }\r\n                if (typeof col.init === 'function') {\r\n                    this.init = col.init; // optional value override (overrides 'def' also)\r\n                }\r\n                if (typeof col.skip === 'function') {\r\n                    this.skip = col.skip;\r\n                }\r\n            } else {\r\n                throw new TypeError('Invalid column details.');\r\n            }\r\n        }\r\n\r\n        const variable = '${' + (this.prop || this.name) + (this.mod || '') + '}';\r\n        const castText = this.cast ? ('::' + this.cast) : '';\r\n        const escapedName = npm.formatting.as.name(this.name);\r\n\r\n        this.extendState({variable, castText, escapedName});\r\n        Object.freeze(this);\r\n    }\r\n\r\n    /**\r\n     * @name helpers.Column#variable\r\n     * @type string\r\n     * @readonly\r\n     * @description\r\n     * Full-syntax formatting variable, ready for direct use in query templates.\r\n     *\r\n     * @example\r\n     *\r\n     * const cs = new ColumnSet([\r\n     *     'id',\r\n     *     'coordinate:json',\r\n     *     {\r\n     *         name: 'places',\r\n     *         mod: ':csv',\r\n     *         cast: 'int[]'\r\n     *     }\r\n     * ]);\r\n     *\r\n     * // cs.columns[0].variable = ${id}\r\n     * // cs.columns[1].variable = ${coordinate:json}\r\n     * // cs.columns[2].variable = ${places:csv}::int[]\r\n     */\r\n    get variable() {\r\n        return this._inner.variable;\r\n    }\r\n\r\n    /**\r\n     * @name helpers.Column#castText\r\n     * @type string\r\n     * @readonly\r\n     * @description\r\n     * Full-syntax sql type casting, if there is any, or else an empty string.\r\n     */\r\n    get castText() {\r\n        return this._inner.castText;\r\n    }\r\n\r\n    /**\r\n     * @name helpers.Column#escapedName\r\n     * @type string\r\n     * @readonly\r\n     * @description\r\n     * Escaped name of the column, ready to be injected into queries directly.\r\n     *\r\n     */\r\n    get escapedName() {\r\n        return this._inner.escapedName;\r\n    }\r\n\r\n}\r\n\r\nfunction parseCast(name) {\r\n    if (typeof name === 'string') {\r\n        const s = name.replace(/^[:\\s]*|\\s*$/g, '');\r\n        if (s) {\r\n            return s;\r\n        }\r\n    }\r\n    throw new TypeError(`Invalid 'cast' value: ${npm.utils.toJson(name)}.`);\r\n}\r\n\r\nfunction parseColumn(name) {\r\n    const m = name.match(npm.patterns.validColumn);\r\n    if (m && m[0] === name) {\r\n        const res = {};\r\n        if (name[0] === '?') {\r\n            res.cnd = true;\r\n            name = name.substring(1);\r\n        }\r\n        const mod = name.match(npm.patterns.hasValidModifier);\r\n        if (mod) {\r\n            res.name = name.substring(0, mod.index);\r\n            res.mod = mod[0];\r\n        } else {\r\n            res.name = name;\r\n        }\r\n        return res;\r\n    }\r\n    throw new TypeError(`Invalid column syntax: ${npm.utils.toJson(name)}.`);\r\n}\r\n\r\nfunction isValidMod(mod) {\r\n    return npm.patterns.validModifiers.indexOf(mod) !== -1;\r\n}\r\n\r\nfunction isValidVariable(name) {\r\n    const m = name.match(npm.patterns.validVariable);\r\n    return !!m && m[0] === name;\r\n}\r\n\r\n/**\r\n * @method helpers.Column#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the object.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nColumn.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        lines = [\r\n            gap0 + 'Column {',\r\n            gap1 + 'name: ' + npm.utils.toJson(this.name)\r\n        ];\r\n    if ('prop' in this) {\r\n        lines.push(gap1 + 'prop: ' + npm.utils.toJson(this.prop));\r\n    }\r\n    if ('mod' in this) {\r\n        lines.push(gap1 + 'mod: ' + npm.utils.toJson(this.mod));\r\n    }\r\n    if ('cast' in this) {\r\n        lines.push(gap1 + 'cast: ' + npm.utils.toJson(this.cast));\r\n    }\r\n    if ('cnd' in this) {\r\n        lines.push(gap1 + 'cnd: ' + npm.utils.toJson(this.cnd));\r\n    }\r\n    if ('def' in this) {\r\n        lines.push(gap1 + 'def: ' + npm.utils.toJson(this.def));\r\n    }\r\n    if ('init' in this) {\r\n        lines.push(gap1 + 'init: [Function]');\r\n    }\r\n    if ('skip' in this) {\r\n        lines.push(gap1 + 'skip: [Function]');\r\n    }\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(Column, function () {\r\n    return this.toString();\r\n});\r\n\r\n/**\r\n * @typedef helpers.ColumnConfig\r\n * @description\r\n * A simple structure with column details, to be passed into the {@link helpers.Column Column} constructor for initialization.\r\n *\r\n * @property {string} name\r\n * Destination column name + source property name (if `prop` is skipped). The name must adhere to JavaScript syntax for variables,\r\n * unless `prop` is specified, in which case `name` represents only the column name, and therefore can be any non-empty string.\r\n *\r\n * @property {string} [prop]\r\n * Source property name, if different from the column's name. It must adhere to JavaScript syntax for variables.\r\n *\r\n * It is ignored when it is the same as `name`.\r\n *\r\n * @property {string} [mod]\r\n * Formatting modifier, as supported by method {@link formatting.format as.format}: `^`, `~`, `#`, `:csv`, `:list`, `:json`, `:alias`, `:name`, `:raw`, `:value`.\r\n *\r\n * @property {string} [cast]\r\n * Server-side type casting. Leading `::` is allowed, but not needed (automatically removed when specified).\r\n *\r\n * @property {boolean} [cnd]\r\n * Conditional column flag.\r\n *\r\n * Used by methods {@link helpers.update update} and {@link helpers.sets sets}, ignored by methods {@link helpers.insert insert} and\r\n * {@link helpers.values values}. It indicates that the column is reserved for a `WHERE` condition, not to be set or updated.\r\n *\r\n * It can be set from a string initialization, by adding `?` in front of the name.\r\n *\r\n * @property {*} [def]\r\n * Default value for the property, to be used only when the source object doesn't have the property.\r\n * It is ignored when property `init` is set.\r\n *\r\n * @property {helpers.initCB} [init]\r\n * Override callback for the value.\r\n *\r\n * @property {helpers.skipCB} [skip]\r\n * An override for skipping columns dynamically.\r\n *\r\n * Used by methods {@link helpers.update update} (for a single object) and {@link helpers.sets sets}, ignored by methods\r\n * {@link helpers.insert insert} and {@link helpers.values values}.\r\n *\r\n * It is also ignored when conditional flag `cnd` is set.\r\n *\r\n */\r\n\r\n/**\r\n * @callback helpers.initCB\r\n * @description\r\n * A callback function type used by parameter `init` within {@link helpers.ColumnConfig ColumnConfig}.\r\n *\r\n * It works as an override for the corresponding property value in the `source` object.\r\n *\r\n * The function is called with `this` set to the `source` object.\r\n *\r\n * @param {*} col\r\n * Column-to-property descriptor.\r\n *\r\n * @param {object} col.source\r\n * The source object, equals to `this` that's passed into the function.\r\n *\r\n * @param {string} col.name\r\n * Resolved name of the property within the `source` object, i.e. the value of `name` when `prop` is not used\r\n * for the column, or the value of `prop` when it is specified.\r\n *\r\n * @param {*} col.value\r\n *\r\n * Property value, set to one of the following:\r\n *\r\n * - Value of the property within the `source` object (`value` = `source[name]`), if the property exists\r\n * - If the property doesn't exist and `def` is set in the column, then `value` is set to the value of `def`\r\n * - If the property doesn't exist and `def` is not set in the column, then `value` is set to `undefined`\r\n *\r\n * @param {boolean} col.exists\r\n * Indicates whether the property exists in the `source` object (`exists = name in source`).\r\n *\r\n * @returns {*}\r\n * The new value to be used for the corresponding column.\r\n */\r\n\r\n/**\r\n * @callback helpers.skipCB\r\n * @description\r\n * A callback function type used by parameter `skip` within {@link helpers.ColumnConfig ColumnConfig}.\r\n *\r\n * It is to dynamically determine when the property with specified `name` in the `source` object is to be skipped.\r\n *\r\n * The function is called with `this` set to the `source` object.\r\n *\r\n * @param {*} col\r\n * Column-to-property descriptor.\r\n *\r\n * @param {object} col.source\r\n * The source object, equals to `this` that's passed into the function.\r\n *\r\n * @param {string} col.name\r\n * Resolved name of the property within the `source` object, i.e. the value of `name` when `prop` is not used\r\n * for the column, or the value of `prop` when it is specified.\r\n *\r\n * @param {*} col.value\r\n *\r\n * Property value, set to one of the following:\r\n *\r\n * - Value of the property within the `source` object (`value` = `source[name]`), if the property exists\r\n * - If the property doesn't exist and `def` is set in the column, then `value` is set to the value of `def`\r\n * - If the property doesn't exist and `def` is not set in the column, then `value` is set to `undefined`\r\n *\r\n * @param {boolean} col.exists\r\n * Indicates whether the property exists in the `source` object (`exists = name in source`).\r\n *\r\n * @returns {boolean}\r\n * A truthy value that indicates whether the column is to be skipped.\r\n *\r\n */\r\n\r\nmodule.exports = {Column};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {assert} = require('../assert');\r\n\r\nconst npm = {\r\n    utils: require('../utils'),\r\n    format: require('../formatting').as // formatting namespace\r\n};\r\n\r\n/**\r\n * @class helpers.TableName\r\n * @description\r\n * Represents a full table name that can be injected into queries directly.\r\n *\r\n * This is a read-only type that can be used wherever parameter `table` is supported.\r\n *\r\n * It supports $[Custom Type Formatting], which means you can use the type directly as a formatting\r\n * parameter, without specifying any escaping.\r\n *\r\n * Filter `:alias` is an alternative approach to splitting an SQL name into multiple ones.\r\n *\r\n * @param {string|Table} table\r\n * Table name details, depending on the type:\r\n *\r\n * - table name, if `table` is a string\r\n * - {@link Table} object\r\n *\r\n * @property {string} name\r\n * Formatted/escaped full table name, combining `schema` + `table`.\r\n *\r\n * @property {string} table\r\n * Table name.\r\n *\r\n * @property {string} schema\r\n * Database schema name.\r\n *\r\n * It is `undefined` when no valid schema was specified.\r\n *\r\n * @returns {helpers.TableName}\r\n *\r\n * @see\r\n * {@link helpers._TN _TN},\r\n * {@link helpers.TableName#toPostgres toPostgres}\r\n *\r\n * @example\r\n *\r\n * const table = new pgp.helpers.TableName({table: 'my-table', schema: 'my-schema'});\r\n * console.log(table);\r\n * //=> \"my-schema\".\"my-table\"\r\n *\r\n * // Formatting the type directly:\r\n * pgp.as.format('SELECT * FROM $1', table);\r\n * //=> SELECT * FROM \"my-schema\".\"my-table\"\r\n *\r\n */\r\nclass TableName {\r\n\r\n    constructor(table) {\r\n        if (typeof table === 'string') {\r\n            this.table = table;\r\n        } else {\r\n            const config = assert(table, ['table', 'schema']);\r\n            this.table = config.table;\r\n            if (npm.utils.isText(config.schema)) {\r\n                this.schema = config.schema;\r\n            }\r\n        }\r\n        if (!npm.utils.isText(this.table)) {\r\n            throw new TypeError('Table name must be a non-empty text string.');\r\n        }\r\n        this.name = npm.format.name(this.table);\r\n        if (this.schema) {\r\n            this.name = npm.format.name(this.schema) + '.' + this.name;\r\n        }\r\n        Object.freeze(this);\r\n    }\r\n}\r\n\r\n/**\r\n * @method helpers.TableName#toPostgres\r\n * @description\r\n * $[Custom Type Formatting], based on $[Symbolic CTF], i.e. the actual method is available only via {@link external:Symbol Symbol}:\r\n *\r\n * ```js\r\n * const {toPostgres} = pgp.as.ctf; // Custom Type Formatting symbols namespace\r\n * const fullName = tn[toPostgres]; // tn = an object of type TableName\r\n * ```\r\n *\r\n * This is a raw formatting type (`rawType = true`), i.e. when used as a query-formatting parameter, type `TableName`\r\n * injects full table name as raw text.\r\n *\r\n * @param {helpers.TableName} [self]\r\n * Optional self-reference, for ES6 arrow functions.\r\n *\r\n * @returns {string}\r\n * Escaped full table name that includes optional schema name, if specified.\r\n */\r\nTableName.prototype[npm.format.ctf.toPostgres] = function (self) {\r\n    self = this instanceof TableName && this || self;\r\n    return self.name;\r\n};\r\n\r\nTableName.prototype[npm.format.ctf.rawType] = true; // use as pre-formatted\r\n\r\n/**\r\n * @method helpers.TableName#toString\r\n * @description\r\n * Creates a well-formatted string that represents the object.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @returns {string}\r\n */\r\nTableName.prototype.toString = function () {\r\n    return this.name;\r\n};\r\n\r\nnpm.utils.addInspection(TableName, function () {\r\n    return this.toString();\r\n});\r\n\r\n/**\r\n * @interface Table\r\n * @description\r\n * Structure for any table name/path.\r\n *\r\n * Function {@link helpers._TN _TN} can help you construct it from a string.\r\n *\r\n * @property {string} [schema] - schema name, if specified\r\n * @property {string} table - table name\r\n *\r\n * @see {@link helpers.TableName TableName}, {@link helpers._TN _TN}\r\n */\r\n\r\n/**\r\n * @external TemplateStringsArray\r\n * @see https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_es5_d_.templatestringsarray.html\r\n */\r\n\r\n/**\r\n * @function helpers._TN\r\n * @description\r\n * Table-Name helper function, to convert any `\"schema.table\"` string\r\n * into `{schema, table}` object. It also works as a template-tag function.\r\n *\r\n * @param {string|TemplateStringsArray} path\r\n * Table-name path, as a simple string or a template string (with parameters).\r\n *\r\n * @example\r\n * const {ColumnSet, _TN} = pgp.helpers;\r\n *\r\n * // Using as a regular function:\r\n * const cs1 = new ColumnSet(['id', 'name'], {table: _TN('schema.table')});\r\n *\r\n * // Using as a template-tag function:\r\n * const schema = 'schema';\r\n * const cs2 = new ColumnSet(['id', 'name'], {table: _TN`${schema}.table`});\r\n *\r\n * @returns {Table}\r\n *\r\n * @see {@link helpers.TableName TableName}, {@link external:TemplateStringsArray TemplateStringsArray}\r\n */\r\nfunction _TN(path, ...args) {\r\n    if (Array.isArray(path)) {\r\n        path = path.reduce((a, c, i) => a + c + (args[i] ?? ''), '');\r\n    } // else 'path' is a string\r\n    const [schema, table] = path.split('.');\r\n    if (table === undefined) {\r\n        return {table: schema};\r\n    }\r\n    return schema ? {schema, table} : {table};\r\n}\r\n\r\nmodule.exports = {TableName, _TN};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {InnerState} = require('../inner-state');\r\nconst {assert} = require('../assert');\r\nconst {TableName} = require('./table-name');\r\nconst {Column} = require('./column');\r\n\r\nconst npm = {\r\n    os: require('os'),\r\n    utils: require('../utils'),\r\n    formatting: require('../formatting')\r\n};\r\n\r\n/**\r\n * @class helpers.ColumnSet\r\n * @description\r\n * Performance-optimized, read-only structure with query-formatting columns.\r\n *\r\n * In order to avail from performance optimization provided by this class, it should be created\r\n * only once, statically, and then reused.\r\n *\r\n * @param {object|helpers.Column|array} columns\r\n * Columns information object, depending on the type:\r\n *\r\n * - When it is a simple object, its properties are enumerated to represent both column names and property names\r\n *   within the source objects. See also option `inherit` that's applicable in this case.\r\n *\r\n * - When it is a single {@link helpers.Column Column} object, property {@link helpers.ColumnSet#columns columns} is initialized with\r\n *   just a single column. It is not a unique situation when only a single column is required for an update operation.\r\n *\r\n * - When it is an array, each element is assumed to represent details for a column. If the element is already of type {@link helpers.Column Column},\r\n *   it is used directly; otherwise the element is passed into {@link helpers.Column Column} constructor for initialization.\r\n *   On any duplicate column name (case-sensitive) it will throw {@link external:Error Error} = `Duplicate column name \"name\".`\r\n *\r\n * - When it is none of the above, it will throw {@link external:TypeError TypeError} = `Invalid parameter 'columns' specified.`\r\n *\r\n * @param {object} [options]\r\n *\r\n * @param {helpers.TableName|Table|string} [options.table]\r\n * Table details.\r\n *\r\n * When it is a non-null value, and not a {@link helpers.TableName TableName} object, a new {@link helpers.TableName TableName} is constructed from the value.\r\n *\r\n * It can be used as the default for methods {@link helpers.insert insert} and {@link helpers.update update} when their parameter\r\n * `table` is omitted, and for logging purposes.\r\n *\r\n * @param {boolean} [options.inherit = false]\r\n * Use inherited properties in addition to the object's own properties.\r\n *\r\n * By default, only the object's own properties are enumerated for column names.\r\n *\r\n * @returns {helpers.ColumnSet}\r\n *\r\n * @see\r\n *\r\n * {@link helpers.ColumnSet#columns columns},\r\n * {@link helpers.ColumnSet#names names},\r\n * {@link helpers.ColumnSet#table table},\r\n * {@link helpers.ColumnSet#variables variables} |\r\n * {@link helpers.ColumnSet#assign assign},\r\n * {@link helpers.ColumnSet#assignColumns assignColumns},\r\n * {@link helpers.ColumnSet#extend extend},\r\n * {@link helpers.ColumnSet#merge merge},\r\n * {@link helpers.ColumnSet#prepare prepare}\r\n *\r\n * @example\r\n *\r\n * // A complex insert/update object scenario for table 'purchases' in schema 'fiscal'.\r\n * // For a good performance, you should declare such objects once and then reuse them.\r\n * //\r\n * // Column Requirements:\r\n * //\r\n * // 1. Property 'id' is only to be used for a WHERE condition in updates\r\n * // 2. Property 'list' needs to be formatted as a csv\r\n * // 3. Property 'code' is to be used as raw text, and to be defaulted to 0 when the\r\n * //    property is missing in the source object\r\n * // 4. Property 'log' is a JSON object with 'log-entry' for the column name\r\n * // 5. Property 'data' requires SQL type casting '::int[]'\r\n * // 6. Property 'amount' needs to be set to 100, if it is 0\r\n * // 7. Property 'total' must be skipped during updates, if 'amount' was 0, plus its\r\n * //    column name is 'total-val'\r\n * const {ColumnSet} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet([\r\n *     '?id', // ColumnConfig equivalent: {name: 'id', cnd: true}\r\n *     'list:csv', // ColumnConfig equivalent: {name: 'list', mod: ':csv'}\r\n *     {\r\n *         name: 'code',\r\n *         mod: '^', // format as raw text\r\n *         def: 0 // default to 0 when the property doesn't exist\r\n *     },\r\n *     {\r\n *         name: 'log-entry',\r\n *         prop: 'log',\r\n *         mod: ':json' // format as JSON\r\n *     },\r\n *     {\r\n *         name: 'data',\r\n *         cast: 'int[]' // use SQL type casting '::int[]'\r\n *     },\r\n *     {\r\n *         name: 'amount',\r\n *         init(col) {\r\n *             // set to 100, if the value is 0:\r\n *             return col.value === 0 ? 100 : col.value;\r\n *         }\r\n *     },\r\n *     {\r\n *         name: 'total-val',\r\n *         prop: 'total',\r\n *         skip(col) {\r\n *             // skip from updates, if 'amount' is 0:\r\n *             return col.source.amount === 0;\r\n *         }\r\n *     }\r\n * ], {table: {table: 'purchases', schema: 'fiscal'}});\r\n *\r\n * // Alternatively, you could take the table declaration out:\r\n * // const table = new pgp.helpers.TableName('purchases', 'fiscal');\r\n *\r\n * console.log(cs); // console output for the object:\r\n * //=>\r\n * // ColumnSet {\r\n * //    table: \"fiscal\".\"purchases\"\r\n * //    columns: [\r\n * //        Column {\r\n * //            name: \"id\"\r\n * //            cnd: true\r\n * //        }\r\n * //        Column {\r\n * //            name: \"list\"\r\n * //            mod: \":csv\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"code\"\r\n * //            mod: \"^\"\r\n * //            def: 0\r\n * //        }\r\n * //        Column {\r\n * //            name: \"log-entry\"\r\n * //            prop: \"log\"\r\n * //            mod: \":json\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"data\"\r\n * //            cast: \"int[]\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"amount\"\r\n * //            init: [Function]\r\n * //        }\r\n * //        Column {\r\n * //            name: \"total-val\"\r\n * //            prop: \"total\"\r\n * //            skip: [Function]\r\n * //        }\r\n * //    ]\r\n * // }\r\n */\r\nclass ColumnSet extends InnerState {\r\n\r\n    constructor(columns, opt) {\r\n        super();\r\n\r\n        if (!columns || typeof columns !== 'object') {\r\n            throw new TypeError('Invalid parameter \\'columns\\' specified.');\r\n        }\r\n\r\n        opt = assert(opt, ['table', 'inherit']);\r\n\r\n        if (!npm.utils.isNull(opt.table)) {\r\n            this.table = (opt.table instanceof TableName) ? opt.table : new TableName(opt.table);\r\n        }\r\n\r\n        /**\r\n         * @name helpers.ColumnSet#table\r\n         * @type {helpers.TableName}\r\n         * @readonly\r\n         * @description\r\n         * Destination table. It can be specified for two purposes:\r\n         *\r\n         * - **primary:** to be used as the default table when it is omitted during a call into methods {@link helpers.insert insert} and {@link helpers.update update}\r\n         * - **secondary:** to be automatically written into the console (for logging purposes).\r\n         */\r\n\r\n\r\n        /**\r\n         * @name helpers.ColumnSet#columns\r\n         * @type helpers.Column[]\r\n         * @readonly\r\n         * @description\r\n         * Array of {@link helpers.Column Column} objects.\r\n         */\r\n        if (Array.isArray(columns)) {\r\n            const colNames = {};\r\n            this.columns = columns.map(c => {\r\n                const col = (c instanceof Column) ? c : new Column(c);\r\n                if (col.name in colNames) {\r\n                    throw new Error(`Duplicate column name \"${col.name}\".`);\r\n                }\r\n                colNames[col.name] = true;\r\n                return col;\r\n            });\r\n        } else {\r\n            if (columns instanceof Column) {\r\n                this.columns = [columns];\r\n            } else {\r\n                this.columns = [];\r\n                for (const name in columns) {\r\n                    if (opt.inherit || Object.prototype.hasOwnProperty.call(columns, name)) {\r\n                        this.columns.push(new Column(name));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        Object.freeze(this.columns);\r\n        Object.freeze(this);\r\n\r\n        this.extendState({\r\n            names: undefined,\r\n            variables: undefined,\r\n            updates: undefined,\r\n            isSimple: true\r\n        });\r\n\r\n        for (let i = 0; i < this.columns.length; i++) {\r\n            const c = this.columns[i];\r\n            // ColumnSet is simple when the source objects require no preparation,\r\n            // and should be used directly:\r\n            if (c.prop || c.init || 'def' in c) {\r\n                this._inner.isSimple = false;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name helpers.ColumnSet#names\r\n     * @type string\r\n     * @readonly\r\n     * @description\r\n     * Returns a string - comma-separated list of all column names, properly escaped.\r\n     *\r\n     * @example\r\n     * const cs = new ColumnSet(['id^', {name: 'cells', cast: 'int[]'}, 'doc:json']);\r\n     * console.log(cs.names);\r\n     * //=> \"id\",\"cells\",\"doc\"\r\n     */\r\n    get names() {\r\n        const _i = this._inner;\r\n        if (!_i.names) {\r\n            _i.names = this.columns.map(c => c.escapedName).join();\r\n        }\r\n        return _i.names;\r\n    }\r\n\r\n    /**\r\n     * @name helpers.ColumnSet#variables\r\n     * @type string\r\n     * @readonly\r\n     * @description\r\n     * Returns a string - formatting template for all column values.\r\n     *\r\n     * @see {@link helpers.ColumnSet#assign assign}\r\n     *\r\n     * @example\r\n     * const cs = new ColumnSet(['id^', {name: 'cells', cast: 'int[]'}, 'doc:json']);\r\n     * console.log(cs.variables);\r\n     * //=> ${id^},${cells}::int[],${doc:json}\r\n     */\r\n    get variables() {\r\n        const _i = this._inner;\r\n        if (!_i.variables) {\r\n            _i.variables = this.columns.map(c => c.variable + c.castText).join();\r\n        }\r\n        return _i.variables;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @method helpers.ColumnSet#assign\r\n * @description\r\n * Returns a formatting template of SET assignments, either generic or for a single object.\r\n *\r\n * The method is optimized to cache the output string when there are no columns that can be skipped dynamically.\r\n *\r\n * This method is primarily for internal use, that's why it does not validate the input.\r\n *\r\n * @param {object} [options]\r\n * Assignment/formatting options.\r\n *\r\n * @param {object} [options.source]\r\n * Source - a single object that contains values for columns.\r\n *\r\n * The object is only necessary to correctly apply the logic of skipping columns dynamically, based on the source data\r\n * and the rules defined in the {@link helpers.ColumnSet ColumnSet}. If, however, you do not care about that, then you do not need to specify any object.\r\n *\r\n * Note that even if you do not specify the object, the columns marked as conditional (`cnd: true`) will always be skipped.\r\n *\r\n * @param {string} [options.prefix]\r\n * In cases where needed, an alias prefix to be added before each column.\r\n *\r\n * @returns {string}\r\n * Comma-separated list of variable-to-column assignments.\r\n *\r\n * @see {@link helpers.ColumnSet#variables variables}\r\n *\r\n * @example\r\n *\r\n * const cs = new pgp.helpers.ColumnSet([\r\n *     '?first', // = {name: 'first', cnd: true}\r\n *     'second:json',\r\n *     {name: 'third', mod: ':raw', cast: 'text'}\r\n * ]);\r\n *\r\n * cs.assign();\r\n * //=> \"second\"=${second:json},\"third\"=${third:raw}::text\r\n *\r\n * cs.assign({prefix: 'a b c'});\r\n * //=> \"a b c\".\"second\"=${second:json},\"a b c\".\"third\"=${third:raw}::text\r\n */\r\nColumnSet.prototype.assign = function (options) {\r\n    const _i = this._inner;\r\n    const hasPrefix = options && options.prefix && typeof options.prefix === 'string';\r\n    if (_i.updates && !hasPrefix) {\r\n        return _i.updates;\r\n    }\r\n    let dynamic = hasPrefix;\r\n    const hasSource = options && options.source && typeof options.source === 'object';\r\n    let list = this.columns.filter(c => {\r\n        if (c.cnd) {\r\n            return false;\r\n        }\r\n        if (c.skip) {\r\n            dynamic = true;\r\n            if (hasSource) {\r\n                const a = colDesc(c, options.source);\r\n                if (c.skip.call(options.source, a)) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    });\r\n\r\n    const prefix = hasPrefix ? npm.formatting.as.alias(options.prefix) + '.' : '';\r\n    list = list.map(c => prefix + c.escapedName + '=' + c.variable + c.castText).join();\r\n\r\n    if (!dynamic) {\r\n        _i.updates = list;\r\n    }\r\n    return list;\r\n};\r\n\r\n/**\r\n * @method helpers.ColumnSet#assignColumns\r\n * @description\r\n * Generates assignments for all columns in the set, with support for aliases and column-skipping logic.\r\n * Aliases are set by using method {@link formatting.alias as.alias}.\r\n *\r\n * @param {{}} [options]\r\n * Optional Parameters.\r\n *\r\n * @param {string} [options.from]\r\n * Alias for the source columns.\r\n *\r\n * @param {string} [options.to]\r\n * Alias for the destination columns.\r\n *\r\n * @param {string | Array<string> | function} [options.skip]\r\n * Name(s) of the column(s) to be skipped (case-sensitive). It can be either a single string or an array of strings.\r\n *\r\n * It can also be a function - iterator, to be called for every column, passing in {@link helpers.Column Column} as\r\n * `this` context, and plus as a single parameter. The function would return a truthy value for every column that needs to be skipped.\r\n *\r\n * @returns {string}\r\n * A string of comma-separated column assignments.\r\n *\r\n * @example\r\n *\r\n * const cs = new ColumnSet(['id', 'city', 'street']);\r\n *\r\n * cs.assignColumns({from: 'EXCLUDED', skip: 'id'})\r\n * //=> \"city\"=EXCLUDED.\"city\",\"street\"=EXCLUDED.\"street\"\r\n *\r\n * @example\r\n *\r\n * const cs = new ColumnSet(['?id', 'city', 'street']);\r\n *\r\n * cs.assignColumns({from: 'source', to: 'target', skip: c => c.cnd})\r\n * //=> target.\"city\"=source.\"city\",target.\"street\"=source.\"street\"\r\n *\r\n */\r\nColumnSet.prototype.assignColumns = function (options) {\r\n    options = assert(options, ['from', 'to', 'skip']);\r\n    const skip = (typeof options.skip === 'string' && [options.skip]) || ((Array.isArray(options.skip) || typeof options.skip === 'function') && options.skip);\r\n    const from = (typeof options.from === 'string' && options.from && (npm.formatting.as.alias(options.from) + '.')) || '';\r\n    const to = (typeof options.to === 'string' && options.to && (npm.formatting.as.alias(options.to) + '.')) || '';\r\n    const iterator = typeof skip === 'function' ? c => !skip.call(c, c) : c => skip.indexOf(c.name) === -1;\r\n    const cols = skip ? this.columns.filter(iterator) : this.columns;\r\n    return cols.map(c => to + c.escapedName + '=' + from + c.escapedName).join();\r\n};\r\n\r\n/**\r\n * @method helpers.ColumnSet#extend\r\n * @description\r\n * Creates a new {@link helpers.ColumnSet ColumnSet}, by joining the two sets of columns.\r\n *\r\n * If the two sets contain a column with the same `name` (case-sensitive), an error is thrown.\r\n *\r\n * @param {helpers.Column|helpers.ColumnSet|array} columns\r\n * Columns to be appended, of the same type as parameter `columns` during {@link helpers.ColumnSet ColumnSet} construction, except:\r\n * - it can also be of type {@link helpers.ColumnSet ColumnSet}\r\n * - it cannot be a simple object (properties enumeration is not supported here)\r\n *\r\n * @returns {helpers.ColumnSet}\r\n * New {@link helpers.ColumnSet ColumnSet} object with the extended/concatenated list of columns.\r\n *\r\n * @see\r\n * {@link helpers.Column Column},\r\n * {@link helpers.ColumnSet#merge merge}\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')();\r\n *\r\n * const cs = new pgp.helpers.ColumnSet(['one', 'two'], {table: 'my-table'});\r\n * console.log(cs);\r\n * //=>\r\n * // ColumnSet {\r\n * //    table: \"my-table\"\r\n * //    columns: [\r\n * //        Column {\r\n * //            name: \"one\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"two\"\r\n * //        }\r\n * //    ]\r\n * // }\r\n * const csExtended = cs.extend(['three']);\r\n * console.log(csExtended);\r\n * //=>\r\n * // ColumnSet {\r\n * //    table: \"my-table\"\r\n * //    columns: [\r\n * //        Column {\r\n * //            name: \"one\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"two\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"three\"\r\n * //        }\r\n * //    ]\r\n * // }\r\n */\r\nColumnSet.prototype.extend = function (columns) {\r\n    let cs = columns;\r\n    if (!(cs instanceof ColumnSet)) {\r\n        cs = new ColumnSet(columns);\r\n    }\r\n    // Any duplicate column will throw Error = 'Duplicate column name \"name\".',\r\n    return new ColumnSet(this.columns.concat(cs.columns), {table: this.table});\r\n};\r\n\r\n/**\r\n * @method helpers.ColumnSet#merge\r\n * @description\r\n * Creates a new {@link helpers.ColumnSet ColumnSet}, by joining the two sets of columns.\r\n *\r\n * Items in `columns` with the same `name` (case-sensitive) override the original columns.\r\n *\r\n * @param {helpers.Column|helpers.ColumnSet|array} columns\r\n * Columns to be appended, of the same type as parameter `columns` during {@link helpers.ColumnSet ColumnSet} construction, except:\r\n * - it can also be of type {@link helpers.ColumnSet ColumnSet}\r\n * - it cannot be a simple object (properties enumeration is not supported here)\r\n *\r\n * @see\r\n * {@link helpers.Column Column},\r\n * {@link helpers.ColumnSet#extend extend}\r\n *\r\n * @returns {helpers.ColumnSet}\r\n * New {@link helpers.ColumnSet ColumnSet} object with the merged list of columns.\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')();\r\n * const {ColumnSet} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet(['?one', 'two:json'], {table: 'my-table'});\r\n * console.log(cs);\r\n * //=>\r\n * // ColumnSet {\r\n * //    table: \"my-table\"\r\n * //    columns: [\r\n * //        Column {\r\n * //            name: \"one\"\r\n * //            cnd: true\r\n * //        }\r\n * //        Column {\r\n * //            name: \"two\"\r\n * //            mod: \":json\"\r\n * //        }\r\n * //    ]\r\n * // }\r\n * const csMerged = cs.merge(['two', 'three^']);\r\n * console.log(csMerged);\r\n * //=>\r\n * // ColumnSet {\r\n * //    table: \"my-table\"\r\n * //    columns: [\r\n * //        Column {\r\n * //            name: \"one\"\r\n * //            cnd: true\r\n * //        }\r\n * //        Column {\r\n * //            name: \"two\"\r\n * //        }\r\n * //        Column {\r\n * //            name: \"three\"\r\n * //            mod: \"^\"\r\n * //        }\r\n * //    ]\r\n * // }\r\n *\r\n */\r\nColumnSet.prototype.merge = function (columns) {\r\n    let cs = columns;\r\n    if (!(cs instanceof ColumnSet)) {\r\n        cs = new ColumnSet(columns);\r\n    }\r\n    const colNames = {}, cols = [];\r\n    this.columns.forEach((c, idx) => {\r\n        cols.push(c);\r\n        colNames[c.name] = idx;\r\n    });\r\n    cs.columns.forEach(c => {\r\n        if (c.name in colNames) {\r\n            cols[colNames[c.name]] = c;\r\n        } else {\r\n            cols.push(c);\r\n        }\r\n    });\r\n    return new ColumnSet(cols, {table: this.table});\r\n};\r\n\r\n/**\r\n * @method helpers.ColumnSet#prepare\r\n * @description\r\n * Prepares a source object to be formatted, by cloning it and applying the rules as set by the\r\n * columns configuration.\r\n *\r\n * This method is primarily for internal use, that's why it does not validate the input parameters.\r\n *\r\n * @param {object} source\r\n * The source object to be prepared, if required.\r\n *\r\n * It must be a non-`null` object, which the method does not validate, as it is\r\n * intended primarily for internal use by the library.\r\n *\r\n * @returns {object}\r\n * When the object needs to be prepared, the method returns a clone of the source object,\r\n * with all properties and values set according to the columns configuration.\r\n *\r\n * When the object does not need to be prepared, the original object is returned.\r\n */\r\nColumnSet.prototype.prepare = function (source) {\r\n    if (this._inner.isSimple) {\r\n        return source; // a simple ColumnSet requires no object preparation;\r\n    }\r\n    const target = {};\r\n    this.columns.forEach(c => {\r\n        const a = colDesc(c, source);\r\n        if (c.init) {\r\n            target[a.name] = c.init.call(source, a);\r\n        } else {\r\n            if (a.exists || 'def' in c) {\r\n                target[a.name] = a.value;\r\n            }\r\n        }\r\n    });\r\n    return target;\r\n};\r\n\r\nfunction colDesc(column, source) {\r\n    const a = {\r\n        source,\r\n        name: column.prop || column.name\r\n    };\r\n    a.exists = a.name in source;\r\n    if (a.exists) {\r\n        a.value = source[a.name];\r\n    } else {\r\n        a.value = 'def' in column ? column.def : undefined;\r\n    }\r\n    return a;\r\n}\r\n\r\n/**\r\n * @method helpers.ColumnSet#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the object.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nColumnSet.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        lines = [\r\n            'ColumnSet {'\r\n        ];\r\n    if (this.table) {\r\n        lines.push(gap1 + 'table: ' + this.table);\r\n    }\r\n    if (this.columns.length) {\r\n        lines.push(gap1 + 'columns: [');\r\n        this.columns.forEach(c => {\r\n            lines.push(c.toString(2));\r\n        });\r\n        lines.push(gap1 + ']');\r\n    } else {\r\n        lines.push(gap1 + 'columns: []');\r\n    }\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(ColumnSet, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {ColumnSet};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {QueryFile} = require('../../query-file');\r\n\r\nconst npm = {\r\n    formatting: require('../../formatting')\r\n};\r\n\r\n/**\r\n * @method helpers.concat\r\n * @description\r\n * Formats and concatenates multiple queries into a single query string.\r\n *\r\n * Before joining the queries, the method does the following:\r\n *  - Formats each query, if `values` are provided;\r\n *  - Removes all leading and trailing spaces, tabs and semi-colons;\r\n *  - Automatically skips all empty queries.\r\n *\r\n * @param {array<string|helpers.QueryFormat|QueryFile>} queries\r\n * Array of mixed-type elements:\r\n * - a simple query string, to be used as is\r\n * - a {@link helpers.QueryFormat QueryFormat}-like object = `{query, [values], [options]}`\r\n * - a {@link QueryFile} object\r\n *\r\n * @returns {string}\r\n * Concatenated string with all queries.\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')();\r\n *\r\n * const qf1 = new pgp.QueryFile('./query1.sql', {minify: true});\r\n * const qf2 = new pgp.QueryFile('./query2.sql', {minify: true});\r\n *\r\n * const query = pgp.helpers.concat([\r\n *     {query: 'INSERT INTO Users(name, age) VALUES($1, $2)', values: ['John', 23]}, // QueryFormat-like object\r\n *     {query: qf1, values: [1, 'Name']}, // QueryFile with formatting parameters\r\n *     'SELECT count(*) FROM Users', // a simple-string query,\r\n *     qf2 // direct QueryFile object\r\n * ]);\r\n *\r\n * // query = concatenated string with all the queries\r\n */\r\nfunction concat(queries, capSQL) {\r\n    if (!Array.isArray(queries)) {\r\n        throw new TypeError('Parameter \\'queries\\' must be an array.');\r\n    }\r\n    const fmOptions = {capSQL};\r\n    const all = queries.map((q, index) => {\r\n        if (typeof q === 'string') {\r\n            // a simple query string without parameters:\r\n            return clean(q);\r\n        }\r\n        if (q && typeof q === 'object') {\r\n            if (q instanceof QueryFile) {\r\n                // QueryFile object:\r\n                return clean(q[npm.formatting.as.ctf.toPostgres]());\r\n            }\r\n            if ('query' in q) {\r\n                // object {query, values, options}:\r\n                let opt = q.options && typeof q.options === 'object' ? q.options : {};\r\n                opt = opt.capSQL === undefined ? Object.assign(opt, fmOptions) : opt;\r\n                return clean(npm.formatting.as.format(q.query, q.values, opt));\r\n            }\r\n        }\r\n        throw new Error(`Invalid query element at index ${index}.`);\r\n    });\r\n\r\n    return all.filter(q => q).join(';');\r\n}\r\n\r\nfunction clean(q) {\r\n    // removes from the query all leading and trailing symbols ' ', '\\t' and ';'\r\n    return q.replace(/^[\\s;]*|[\\s;]*$/g, '');\r\n}\r\n\r\nmodule.exports = {concat};\r\n\r\n/**\r\n * @typedef helpers.QueryFormat\r\n * @description\r\n * A simple structure of parameters to be passed into method {@link formatting.format as.format} exactly as they are,\r\n * used by {@link helpers.concat}.\r\n *\r\n * @property {string|value|object} query\r\n * A query string or a value/object that implements $[Custom Type Formatting], to be formatted according to `values`.\r\n *\r\n * @property {array|object|value} [values]\r\n * Query-formatting values.\r\n *\r\n * @property {object} [options]\r\n * Query-formatting options, as supported by method {@link formatting.format as.format}.\r\n *\r\n * @see\r\n * {@link formatting.format as.format}\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {TableName} = require('../table-name');\r\nconst {ColumnSet} = require('../column-set');\r\n\r\nconst npm = {\r\n    formatting: require('../../formatting'),\r\n    utils: require('../../utils')\r\n};\r\n\r\n/**\r\n * @method helpers.insert\r\n * @description\r\n * Generates an `INSERT` query for either one object or an array of objects.\r\n *\r\n * @param {object|object[]} data\r\n * An insert object with properties for insert values, or an array of such objects.\r\n *\r\n * When `data` is not a non-null object and not an array, it will throw {@link external:TypeError TypeError} = `Invalid parameter 'data' specified.`\r\n *\r\n * When `data` is an empty array, it will throw {@link external:TypeError TypeError} = `Cannot generate an INSERT from an empty array.`\r\n *\r\n * When `data` is an array that contains a non-object value, the method will throw {@link external:Error Error} =\r\n * `Invalid insert object at index N.`\r\n *\r\n * @param {array|helpers.Column|helpers.ColumnSet} [columns]\r\n * Set of columns to be inserted.\r\n *\r\n * It is optional when `data` is a single object, and required when `data` is an array of objects. If not specified for an array\r\n * of objects, the method will throw {@link external:TypeError TypeError} = `Parameter 'columns' is required when inserting multiple records.`\r\n *\r\n * When `columns` is not a {@link helpers.ColumnSet ColumnSet} object, a temporary {@link helpers.ColumnSet ColumnSet}\r\n * is created - from the value of `columns` (if it was specified), or from the value of `data` (if it is not an array).\r\n *\r\n * When the final {@link helpers.ColumnSet ColumnSet} is empty (no columns in it), the method will throw\r\n * {@link external:Error Error} = `Cannot generate an INSERT without any columns.`\r\n *\r\n * @param {helpers.TableName|Table|string} [table]\r\n * Destination table.\r\n *\r\n * It is normally a required parameter. But when `columns` is passed in as a {@link helpers.ColumnSet ColumnSet} object\r\n * with `table` set in it, that will be used when this parameter isn't specified. When neither is available, the method\r\n * will throw {@link external:Error Error} = `Table name is unknown.`\r\n *\r\n * @returns {string}\r\n * An `INSERT` query string.\r\n *\r\n * @see\r\n *  {@link helpers.Column Column},\r\n *  {@link helpers.ColumnSet ColumnSet},\r\n *  {@link helpers.TableName TableName}\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')({\r\n *    capSQL: true // if you want all generated SQL capitalized\r\n * });\r\n * const {insert} = pgp.helpers;\r\n *\r\n * const dataSingle = {val: 123, msg: 'hello'};\r\n * const dataMulti = [{val: 123, msg: 'hello'}, {val: 456, msg: 'world!'}];\r\n *\r\n * // Column details can be taken from the data object:\r\n *\r\n * insert(dataSingle, null, 'my-table');\r\n * //=> INSERT INTO \"my-table\"(\"val\",\"msg\") VALUES(123,'hello')\r\n *\r\n * @example\r\n *\r\n * // Column details are required for a multi-row `INSERT`:\r\n * const {insert} = pgp.helpers;\r\n *\r\n * insert(dataMulti, ['val', 'msg'], 'my-table');\r\n * //=> INSERT INTO \"my-table\"(\"val\",\"msg\") VALUES(123,'hello'),(456,'world!')\r\n *\r\n * @example\r\n *\r\n * // Column details from a reusable ColumnSet (recommended for performance):\r\n * const {ColumnSet, insert} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet(['val', 'msg'], {table: 'my-table'});\r\n *\r\n * insert(dataMulti, cs);\r\n * //=> INSERT INTO \"my-table\"(\"val\",\"msg\") VALUES(123,'hello'),(456,'world!')\r\n *\r\n */\r\nfunction insert(data, columns, table, capSQL) {\r\n\r\n    if (!data || typeof data !== 'object') {\r\n        throw new TypeError('Invalid parameter \\'data\\' specified.');\r\n    }\r\n\r\n    const isArray = Array.isArray(data);\r\n\r\n    if (isArray && !data.length) {\r\n        throw new TypeError('Cannot generate an INSERT from an empty array.');\r\n    }\r\n\r\n    if (columns instanceof ColumnSet) {\r\n        if (npm.utils.isNull(table)) {\r\n            table = columns.table;\r\n        }\r\n    } else {\r\n        if (isArray && npm.utils.isNull(columns)) {\r\n            throw new TypeError('Parameter \\'columns\\' is required when inserting multiple records.');\r\n        }\r\n        columns = new ColumnSet(columns || data);\r\n    }\r\n\r\n    if (!columns.columns.length) {\r\n        throw new Error('Cannot generate an INSERT without any columns.');\r\n    }\r\n\r\n    if (!table) {\r\n        throw new Error('Table name is unknown.');\r\n    }\r\n\r\n    if (!(table instanceof TableName)) {\r\n        table = new TableName(table);\r\n    }\r\n\r\n    let query = capSQL ? sql.capCase : sql.lowCase;\r\n    const fmOptions = {capSQL};\r\n\r\n    const format = npm.formatting.as.format;\r\n    query = format(query, [table.name, columns.names], fmOptions);\r\n\r\n    if (isArray) {\r\n        return query + data.map((d, index) => {\r\n            if (!d || typeof d !== 'object') {\r\n                throw new Error(`Invalid insert object at index ${index}.`);\r\n            }\r\n            return '(' + format(columns.variables, columns.prepare(d), fmOptions) + ')';\r\n        }).join();\r\n    }\r\n    return query + '(' + format(columns.variables, columns.prepare(data), fmOptions) + ')';\r\n}\r\n\r\nconst sql = {\r\n    lowCase: 'insert into $1^($2^) values',\r\n    capCase: 'INSERT INTO $1^($2^) VALUES'\r\n};\r\n\r\nmodule.exports = {insert};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {assert} = require('../../assert');\r\nconst {TableName} = require('../table-name');\r\nconst {ColumnSet} = require('../column-set');\r\n\r\nconst npm = {\r\n    formatting: require('../../formatting'),\r\n    utils: require('../../utils')\r\n};\r\n\r\n/**\r\n * @method helpers.update\r\n * @description\r\n * Generates a simplified `UPDATE` query for either one object or an array of objects.\r\n *\r\n * The resulting query needs a `WHERE` clause to be appended to it, to specify the update logic.\r\n * This is to allow for update conditions of any complexity that are easy to add.\r\n *\r\n * @param {object|object[]} data\r\n * An update object with properties for update values, or an array of such objects.\r\n *\r\n * When `data` is not a non-null object and not an array, it will throw {@link external:TypeError TypeError} = `Invalid parameter 'data' specified.`\r\n *\r\n * When `data` is an empty array, it will throw {@link external:TypeError TypeError} = `Cannot generate an UPDATE from an empty array.`\r\n *\r\n * When `data` is an array that contains a non-object value, the method will throw {@link external:Error Error} =\r\n * `Invalid update object at index N.`\r\n *\r\n * @param {array|helpers.Column|helpers.ColumnSet} [columns]\r\n * Set of columns to be updated.\r\n *\r\n * It is optional when `data` is a single object, and required when `data` is an array of objects. If not specified for an array\r\n * of objects, the method will throw {@link external:TypeError TypeError} = `Parameter 'columns' is required when updating multiple records.`\r\n *\r\n * When `columns` is not a {@link helpers.ColumnSet ColumnSet} object, a temporary {@link helpers.ColumnSet ColumnSet}\r\n * is created - from the value of `columns` (if it was specified), or from the value of `data` (if it is not an array).\r\n *\r\n * When the final {@link helpers.ColumnSet ColumnSet} is empty (no columns in it), the method will throw\r\n * {@link external:Error Error} = `Cannot generate an UPDATE without any columns.`, unless option `emptyUpdate` was specified.\r\n *\r\n * @param {helpers.TableName|Table|string} [table]\r\n * Table to be updated.\r\n *\r\n * It is normally a required parameter. But when `columns` is passed in as a {@link helpers.ColumnSet ColumnSet} object\r\n * with `table` set in it, that will be used when this parameter isn't specified. When neither is available, the method\r\n * will throw {@link external:Error Error} = `Table name is unknown.`\r\n *\r\n * @param {{}} [options]\r\n * An object with formatting options for multi-row `UPDATE` queries.\r\n *\r\n * @param {string} [options.tableAlias=t]\r\n * Name of the SQL variable that represents the destination table.\r\n *\r\n * @param {string} [options.valueAlias=v]\r\n * Name of the SQL variable that represents the values.\r\n *\r\n * @param {*} [options.emptyUpdate]\r\n * This is a convenience option, to avoid throwing an error when generating a conditional update results in no columns.\r\n *\r\n * When present, regardless of the value, this option overrides the method's behavior when applying `skip` logic results in no columns,\r\n * i.e. when every column is being skipped.\r\n *\r\n * By default, in that situation the method throws {@link external:Error Error} = `Cannot generate an UPDATE without any columns.`\r\n * But when this option is present, the method will instead return whatever value the option was passed.\r\n *\r\n * @returns {*}\r\n * An `UPDATE` query string that needs a `WHERE` condition appended.\r\n *\r\n * If it results in an empty update, and option `emptyUpdate` was passed in, then the method returns the value\r\n * to which the option was set.\r\n *\r\n * @see\r\n *  {@link helpers.Column Column},\r\n *  {@link helpers.ColumnSet ColumnSet},\r\n *  {@link helpers.TableName TableName}\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')({\r\n *    capSQL: true // if you want all generated SQL capitalized\r\n * });\r\n * const {update} = pgp.helpers;\r\n *\r\n * const dataSingle = {id: 1, val: 123, msg: 'hello'};\r\n * const dataMulti = [{id: 1, val: 123, msg: 'hello'}, {id: 2, val: 456, msg: 'world!'}];\r\n *\r\n * // Although column details can be taken from the data object, it is not\r\n * // a likely scenario for an update, unless updating the whole table:\r\n *\r\n * update(dataSingle, null, 'my-table');\r\n * //=> UPDATE \"my-table\" SET \"id\"=1,\"val\"=123,\"msg\"='hello'\r\n *\r\n * @example\r\n *\r\n * // A typical single-object update:\r\n *\r\n * // Dynamic conditions must be escaped/formatted properly:\r\n * const condition = pgp.as.format(' WHERE id = ${id}', dataSingle);\r\n *\r\n * update(dataSingle, ['val', 'msg'], 'my-table') + condition;\r\n * //=> UPDATE \"my-table\" SET \"val\"=123,\"msg\"='hello' WHERE id = 1\r\n *\r\n * @example\r\n *\r\n * // Column details are required for a multi-row `UPDATE`;\r\n * // Adding '?' in front of a column name means it is only for a WHERE condition:\r\n *\r\n * update(dataMulti, ['?id', 'val', 'msg'], 'my-table') + ' WHERE v.id = t.id';\r\n * //=> UPDATE \"my-table\" AS t SET \"val\"=v.\"val\",\"msg\"=v.\"msg\" FROM (VALUES(1,123,'hello'),(2,456,'world!'))\r\n * //   AS v(\"id\",\"val\",\"msg\") WHERE v.id = t.id\r\n *\r\n * @example\r\n *\r\n * // Column details from a reusable ColumnSet (recommended for performance):\r\n * const {ColumnSet, update} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet(['?id', 'val', 'msg'], {table: 'my-table'});\r\n *\r\n * update(dataMulti, cs) + ' WHERE v.id = t.id';\r\n * //=> UPDATE \"my-table\" AS t SET \"val\"=v.\"val\",\"msg\"=v.\"msg\" FROM (VALUES(1,123,'hello'),(2,456,'world!'))\r\n * //   AS v(\"id\",\"val\",\"msg\") WHERE v.id = t.id\r\n *\r\n * @example\r\n *\r\n * // Using parameter `options` to change the default alias names:\r\n *\r\n * update(dataMulti, cs, null, {tableAlias: 'X', valueAlias: 'Y'}) + ' WHERE Y.id = X.id';\r\n * //=> UPDATE \"my-table\" AS X SET \"val\"=Y.\"val\",\"msg\"=Y.\"msg\" FROM (VALUES(1,123,'hello'),(2,456,'world!'))\r\n * //   AS Y(\"id\",\"val\",\"msg\") WHERE Y.id = X.id\r\n *\r\n * @example\r\n *\r\n * // Handling an empty update\r\n * const {ColumnSet, update} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet(['?id', '?name'], {table: 'tt'}); // no actual update-able columns\r\n * const result = update(dataMulti, cs, null, {emptyUpdate: 123});\r\n * if(result === 123) {\r\n *    // We know the update is empty, i.e. no columns that can be updated;\r\n *    // And it didn't throw because we specified `emptyUpdate` option.\r\n * }\r\n */\r\nfunction update(data, columns, table, options, capSQL) {\r\n\r\n    if (!data || typeof data !== 'object') {\r\n        throw new TypeError('Invalid parameter \\'data\\' specified.');\r\n    }\r\n\r\n    const isArray = Array.isArray(data);\r\n\r\n    if (isArray && !data.length) {\r\n        throw new TypeError('Cannot generate an UPDATE from an empty array.');\r\n    }\r\n\r\n    if (columns instanceof ColumnSet) {\r\n        if (npm.utils.isNull(table)) {\r\n            table = columns.table;\r\n        }\r\n    } else {\r\n        if (isArray && npm.utils.isNull(columns)) {\r\n            throw new TypeError('Parameter \\'columns\\' is required when updating multiple records.');\r\n        }\r\n        columns = new ColumnSet(columns || data);\r\n    }\r\n\r\n    options = assert(options, ['tableAlias', 'valueAlias', 'emptyUpdate']);\r\n\r\n    const format = npm.formatting.as.format,\r\n        useEmptyUpdate = 'emptyUpdate' in options,\r\n        fmOptions = {capSQL};\r\n\r\n    if (isArray) {\r\n        const tableAlias = npm.formatting.as.alias(npm.utils.isNull(options.tableAlias) ? 't' : options.tableAlias);\r\n        const valueAlias = npm.formatting.as.alias(npm.utils.isNull(options.valueAlias) ? 'v' : options.valueAlias);\r\n\r\n        const q = capSQL ? sql.multi.capCase : sql.multi.lowCase;\r\n\r\n        const actualColumns = columns.columns.filter(c => !c.cnd);\r\n\r\n        if (checkColumns(actualColumns)) {\r\n            return options.emptyUpdate;\r\n        }\r\n\r\n        checkTable();\r\n\r\n        const targetCols = actualColumns.map(c => c.escapedName + '=' + valueAlias + '.' + c.escapedName).join();\r\n\r\n        const values = data.map((d, index) => {\r\n            if (!d || typeof d !== 'object') {\r\n                throw new Error(`Invalid update object at index ${index}.`);\r\n            }\r\n            return '(' + format(columns.variables, columns.prepare(d), fmOptions) + ')';\r\n        }).join();\r\n\r\n        return format(q, [table.name, tableAlias, targetCols, values, valueAlias, columns.names], fmOptions);\r\n    }\r\n\r\n    const updates = columns.assign({source: data});\r\n\r\n    if (checkColumns(updates)) {\r\n        return options.emptyUpdate;\r\n    }\r\n\r\n    checkTable();\r\n\r\n    const query = capSQL ? sql.single.capCase : sql.single.lowCase;\r\n\r\n    return format(query, table.name) + format(updates, columns.prepare(data), fmOptions);\r\n\r\n    function checkTable() {\r\n        if (table && !(table instanceof TableName)) {\r\n            table = new TableName(table);\r\n        }\r\n        if (!table) {\r\n            throw new Error('Table name is unknown.');\r\n        }\r\n    }\r\n\r\n    function checkColumns(cols) {\r\n        if (!cols.length) {\r\n            if (useEmptyUpdate) {\r\n                return true;\r\n            }\r\n            throw new Error('Cannot generate an UPDATE without any columns.');\r\n        }\r\n    }\r\n}\r\n\r\nconst sql = {\r\n    single: {\r\n        lowCase: 'update $1^ set ',\r\n        capCase: 'UPDATE $1^ SET '\r\n    },\r\n    multi: {\r\n        lowCase: 'update $1^ as $2^ set $3^ from (values$4^) as $5^($6^)',\r\n        capCase: 'UPDATE $1^ AS $2^ SET $3^ FROM (VALUES$4^) AS $5^($6^)'\r\n    }\r\n};\r\n\r\nmodule.exports = {update};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ColumnSet} = require('../column-set');\r\n\r\nconst npm = {\r\n    formatting: require('../../formatting'),\r\n    utils: require('../../utils')\r\n};\r\n\r\n/**\r\n * @method helpers.values\r\n * @description\r\n * Generates a string of comma-separated value groups from either one object or an array of objects,\r\n * to be used as part of a query:\r\n *\r\n * - from a single object: `(val_1, val_2, ...)`\r\n * - from an array of objects: `(val_11, val_12, ...), (val_21, val_22, ...)`\r\n *\r\n * @param {object|object[]} data\r\n * A source object with properties as values, or an array of such objects.\r\n *\r\n * If it is anything else, the method will throw {@link external:TypeError TypeError} = `Invalid parameter 'data' specified.`\r\n *\r\n * When `data` is an array that contains a non-object value, the method will throw {@link external:Error Error} =\r\n * `Invalid object at index N.`\r\n *\r\n * When `data` is an empty array, an empty string is returned.\r\n *\r\n * @param {array|helpers.Column|helpers.ColumnSet} [columns]\r\n * Columns for which to return values.\r\n *\r\n * It is optional when `data` is a single object, and required when `data` is an array of objects. If not specified for an array\r\n * of objects, the method will throw {@link external:TypeError TypeError} = `Parameter 'columns' is required when generating multi-row values.`\r\n *\r\n * When the final {@link helpers.ColumnSet ColumnSet} is empty (no columns in it), the method will throw\r\n * {@link external:Error Error} = `Cannot generate values without any columns.`\r\n *\r\n * @returns {string}\r\n * - comma-separated value groups, according to `data`\r\n * - an empty string, if `data` is an empty array\r\n *\r\n * @see\r\n *  {@link helpers.Column Column},\r\n *  {@link helpers.ColumnSet ColumnSet}\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')();\r\n *\r\n * const dataSingle = {val: 123, msg: 'hello'};\r\n * const dataMulti = [{val: 123, msg: 'hello'}, {val: 456, msg: 'world!'}];\r\n *\r\n * // Properties can be pulled automatically from a single object:\r\n *\r\n * pgp.helpers.values(dataSingle);\r\n * //=> (123,'hello')\r\n *\r\n * @example\r\n *\r\n * // Column details are required when using an array of objects:\r\n *\r\n * pgp.helpers.values(dataMulti, ['val', 'msg']);\r\n * //=> (123,'hello'),(456,'world!')\r\n *\r\n * @example\r\n *\r\n * // Column details from a reusable ColumnSet (recommended for performance):\r\n * const {ColumnSet, values} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet(['val', 'msg']);\r\n *\r\n * values(dataMulti, cs);\r\n * //=> (123,'hello'),(456,'world!')\r\n *\r\n */\r\nfunction values(data, columns, capSQL) {\r\n\r\n    if (!data || typeof data !== 'object') {\r\n        throw new TypeError('Invalid parameter \\'data\\' specified.');\r\n    }\r\n\r\n    const isArray = Array.isArray(data);\r\n\r\n    if (!(columns instanceof ColumnSet)) {\r\n        if (isArray && npm.utils.isNull(columns)) {\r\n            throw new TypeError('Parameter \\'columns\\' is required when generating multi-row values.');\r\n        }\r\n        columns = new ColumnSet(columns || data);\r\n    }\r\n\r\n    if (!columns.columns.length) {\r\n        throw new Error('Cannot generate values without any columns.');\r\n    }\r\n\r\n    const format = npm.formatting.as.format,\r\n        fmOptions = {capSQL};\r\n\r\n    if (isArray) {\r\n        return data.map((d, index) => {\r\n            if (!d || typeof d !== 'object') {\r\n                throw new Error(`Invalid object at index ${index}.`);\r\n            }\r\n            return '(' + format(columns.variables, columns.prepare(d), fmOptions) + ')';\r\n        }).join();\r\n    }\r\n    return '(' + format(columns.variables, columns.prepare(data), fmOptions) + ')';\r\n}\r\n\r\nmodule.exports = {values};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ColumnSet} = require('../column-set');\r\n\r\nconst npm = {\r\n    format: require('../../formatting').as.format,\r\n    utils: require('../../utils')\r\n};\r\n\r\n/**\r\n * @method helpers.sets\r\n * @description\r\n * Generates a string of comma-separated value-set statements from a single object: `col1=val1, col2=val2, ...`,\r\n * to be used as part of a query.\r\n *\r\n * Since it is to be used as part of `UPDATE` queries, {@link helpers.Column Column} properties `cnd` and `skip` apply.\r\n *\r\n * @param {object} data\r\n * A simple, non-null and non-array source object.\r\n *\r\n * If it is anything else, the method will throw {@link external:TypeError TypeError} = `Invalid parameter 'data' specified.`\r\n *\r\n * @param {array|helpers.Column|helpers.ColumnSet} [columns]\r\n * Columns for which to set values.\r\n *\r\n * When not specified, properties of the `data` object are used.\r\n *\r\n * When no effective columns are found, an empty string is returned.\r\n *\r\n * @returns {string}\r\n * - comma-separated value-set statements for the `data` object\r\n * - an empty string, if no effective columns found\r\n *\r\n * @see\r\n *  {@link helpers.Column Column},\r\n *  {@link helpers.ColumnSet ColumnSet}\r\n *\r\n * @example\r\n *\r\n * const pgp = require('pg-promise')();\r\n *\r\n * const data = {id: 1, val: 123, msg: 'hello'};\r\n *\r\n * // Properties can be pulled automatically from the object:\r\n *\r\n * pgp.helpers.sets(data);\r\n * //=> \"id\"=1,\"val\"=123,\"msg\"='hello'\r\n *\r\n * @example\r\n *\r\n * // Column details from a reusable ColumnSet (recommended for performance);\r\n * // NOTE: Conditional columns (start with '?') are skipped:\r\n * const {ColumnSet, sets} = pgp.helpers;\r\n *\r\n * const cs = new ColumnSet(['?id','val', 'msg']);\r\n *\r\n * sets(data, cs);\r\n * //=> \"val\"=123,\"msg\"='hello'\r\n *\r\n */\r\nfunction sets(data, columns, capSQL) {\r\n\r\n    if (!data || typeof data !== 'object' || Array.isArray(data)) {\r\n        throw new TypeError('Invalid parameter \\'data\\' specified.');\r\n    }\r\n\r\n    if (!(columns instanceof ColumnSet)) {\r\n        columns = new ColumnSet(columns || data);\r\n    }\r\n\r\n    return npm.format(columns.assign({source: data}), columns.prepare(data), {capSQL});\r\n}\r\n\r\nmodule.exports = {sets};\r\n","const {concat} = require('./concat');\r\nconst {insert} = require('./insert');\r\nconst {update} = require('./update');\r\nconst {values} = require('./values');\r\nconst {sets} = require('./sets');\r\n\r\nmodule.exports = {\r\n    concat,\r\n    insert,\r\n    update,\r\n    values,\r\n    sets\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {Column} = require('./column');\r\nconst {ColumnSet} = require('./column-set');\r\nconst {TableName, _TN} = require('./table-name');\r\nconst method = require('./methods');\r\n\r\n/**\r\n * @namespace helpers\r\n * @description\r\n * Namespace for query-formatting generators, available as {@link module:pg-promise~helpers pgp.helpers}, after initializing the library.\r\n *\r\n * It unifies the approach to generating multi-row `INSERT` / `UPDATE` queries with the single-row ones.\r\n *\r\n * See also: $[Performance Boost].\r\n *\r\n * @property {function} TableName\r\n * {@link helpers.TableName TableName} class constructor.\r\n *\r\n * @property {function} _TN\r\n * {@link helpers._TN _TN} Table-Name conversion function.\r\n *\r\n * @property {function} ColumnSet\r\n * {@link helpers.ColumnSet ColumnSet} class constructor.\r\n *\r\n * @property {function} Column\r\n * {@link helpers.Column Column} class constructor.\r\n *\r\n * @property {function} insert\r\n * {@link helpers.insert insert} static method.\r\n *\r\n * @property {function} update\r\n * {@link helpers.update update} static method.\r\n *\r\n * @property {function} values\r\n * {@link helpers.values values} static method.\r\n *\r\n * @property {function} sets\r\n * {@link helpers.sets sets} static method.\r\n *\r\n * @property {function} concat\r\n * {@link helpers.concat concat} static method.\r\n */\r\nmodule.exports = config => {\r\n    const capSQL = () => config.options && config.options.capSQL;\r\n    const res = {\r\n        insert(data, columns, table) {\r\n            return method.insert(data, columns, table, capSQL());\r\n        },\r\n        update(data, columns, table, options) {\r\n            return method.update(data, columns, table, options, capSQL());\r\n        },\r\n        concat(queries) {\r\n            return method.concat(queries, capSQL());\r\n        },\r\n        values(data, columns) {\r\n            return method.values(data, columns, capSQL());\r\n        },\r\n        sets(data, columns) {\r\n            return method.sets(data, columns, capSQL());\r\n        },\r\n        TableName,\r\n        _TN,\r\n        ColumnSet,\r\n        Column\r\n    };\r\n    return res;\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {assert} = require('../assert');\r\n\r\nconst npm = {\r\n    fs: require('fs'),\r\n    path: require('path'),\r\n    utils: require('./'),\r\n    package: require('../../package.json')\r\n};\r\n\r\n/**\r\n * @method utils.camelize\r\n * @description\r\n * Camelizes a text string.\r\n *\r\n * Case-changing characters include:\r\n * - _hyphen_\r\n * - _underscore_\r\n * - _period_\r\n * - _space_\r\n *\r\n * @param {string} text\r\n * Input text string.\r\n *\r\n * @returns {string}\r\n * Camelized text string.\r\n *\r\n * @see\r\n * {@link utils.camelizeVar camelizeVar}\r\n *\r\n */\r\nfunction camelize(text) {\r\n    text = text.replace(/[-_\\s.]+(.)?/g, (_, c) => c ? c.toUpperCase() : '');\r\n    return text.substring(0, 1).toLowerCase() + text.substring(1);\r\n}\r\n\r\n/**\r\n * @method utils.camelizeVar\r\n * @description\r\n * Camelizes a text string, while making it compliant with JavaScript variable names:\r\n * - contains symbols `a-z`, `A-Z`, `0-9`, `_` and `$`\r\n * - cannot have leading digits\r\n *\r\n * First, it removes all symbols that do not meet the above criteria, except for _hyphen_, _period_ and _space_,\r\n * and then it forwards into {@link utils.camelize camelize}.\r\n *\r\n * @param {string} text\r\n * Input text string.\r\n *\r\n * If it doesn't contain any symbols to make up a valid variable name, the result will be an empty string.\r\n *\r\n * @returns {string}\r\n * Camelized text string that can be used as an open property name.\r\n *\r\n * @see\r\n * {@link utils.camelize camelize}\r\n *\r\n */\r\nfunction camelizeVar(text) {\r\n    text = text.replace(/[^a-zA-Z0-9$_\\-\\s.]/g, '').replace(/^[0-9_\\-\\s.]+/, '');\r\n    return camelize(text);\r\n}\r\n\r\nfunction _enumSql(dir, options, cb, namePath) {\r\n    const tree = {};\r\n    npm.fs.readdirSync(dir).forEach(file => {\r\n        let stat;\r\n        const fullPath = npm.path.join(dir, file);\r\n        try {\r\n            stat = npm.fs.statSync(fullPath);\r\n        } catch (e) {\r\n            // while it is very easy to test manually, it is very difficult to test for\r\n            // access-denied errors automatically; therefore excluding from the coverage:\r\n            // istanbul ignore next\r\n            if (options.ignoreErrors) {\r\n                return; // on to the next file/folder;\r\n            }\r\n            // istanbul ignore next\r\n            throw e;\r\n        }\r\n        if (stat.isDirectory()) {\r\n            if (options.recursive) {\r\n                const dirName = camelizeVar(file);\r\n                const np = namePath ? (namePath + '.' + dirName) : dirName;\r\n                const t = _enumSql(fullPath, options, cb, np);\r\n                if (Object.keys(t).length) {\r\n                    if (!dirName.length || dirName in tree) {\r\n                        if (!options.ignoreErrors) {\r\n                            throw new Error('Empty or duplicate camelized folder name: ' + fullPath);\r\n                        }\r\n                    }\r\n                    tree[dirName] = t;\r\n                }\r\n            }\r\n        } else {\r\n            if (npm.path.extname(file).toLowerCase() === '.sql') {\r\n                const name = camelizeVar(file.replace(/\\.[^/.]+$/, ''));\r\n                if (!name.length || name in tree) {\r\n                    if (!options.ignoreErrors) {\r\n                        throw new Error('Empty or duplicate camelized file name: ' + fullPath);\r\n                    }\r\n                }\r\n                tree[name] = fullPath;\r\n                if (cb) {\r\n                    const result = cb(fullPath, name, namePath ? (namePath + '.' + name) : name);\r\n                    if (result !== undefined) {\r\n                        tree[name] = result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return tree;\r\n}\r\n\r\n/**\r\n * @method utils.enumSql\r\n * @description\r\n * Synchronously enumerates all SQL files (within a given directory) into a camelized SQL tree.\r\n *\r\n * All property names within the tree are camelized via {@link utils.camelizeVar camelizeVar},\r\n * so they can be used in the code directly, as open property names.\r\n *\r\n * @param {string} dir\r\n * Directory path where SQL files are located, either absolute or relative to the current directory.\r\n *\r\n * SQL files are identified by using `.sql` extension (case-insensitive).\r\n *\r\n * @param {{}} [options]\r\n * Search options.\r\n *\r\n * @param {boolean} [options.recursive=false]\r\n * Include sub-directories into the search.\r\n *\r\n * Sub-directories without SQL files will be skipped from the result.\r\n *\r\n * @param {boolean} [options.ignoreErrors=false]\r\n * Ignore the following types of errors:\r\n * - access errors, when there is no read access to a file or folder\r\n * - empty or duplicate camelized property names\r\n *\r\n * This flag does not affect errors related to invalid input parameters, or if you pass in a\r\n * non-existing directory.\r\n *\r\n * @param {function} [cb]\r\n * A callback function that takes three arguments:\r\n * - `file` - SQL file path, relative or absolute, according to how you specified the search directory\r\n * - `name` - name of the property that represents the SQL file\r\n * - `path` - property resolution path (full property name)\r\n *\r\n * If the function returns anything other than `undefined`, it overrides the corresponding property value in the tree.\r\n *\r\n * @returns {object}\r\n * Camelized SQL tree object, with each value being an SQL file path (unless changed via the callback).\r\n *\r\n * @example\r\n *\r\n * // simple SQL tree generation for further processing:\r\n * const tree = pgp.utils.enumSql('../sql', {recursive: true});\r\n *\r\n * @example\r\n *\r\n * // generating an SQL tree for dynamic use of names:\r\n * const sql = pgp.utils.enumSql(__dirname, {recursive: true}, file => {\r\n *     return new pgp.QueryFile(file, {minify: true});\r\n * });\r\n *\r\n * @example\r\n *\r\n * const {join: joinPath} = require('path');\r\n *\r\n * // replacing each relative path in the tree with a full one:\r\n * const tree = pgp.utils.enumSql('../sql', {recursive: true}, file => {\r\n *     return joinPath(__dirname, file);\r\n * });\r\n *\r\n */\r\nfunction enumSql(dir, options, cb) {\r\n    if (!npm.utils.isText(dir)) {\r\n        throw new TypeError('Parameter \\'dir\\' must be a non-empty text string.');\r\n    }\r\n    options = assert(options, ['recursive', 'ignoreErrors']);\r\n    cb = (typeof cb === 'function') ? cb : null;\r\n    return _enumSql(dir, options, cb, '');\r\n}\r\n\r\n/**\r\n * @method utils.taskArgs\r\n * @description\r\n * Normalizes/prepares arguments for tasks and transactions.\r\n *\r\n * Its main purpose is to simplify adding custom methods {@link Database#task task}, {@link Database#taskIf taskIf},\r\n * {@link Database#tx tx} and {@link Database#txIf txIf} within event {@link event:extend extend}, as the those methods use fairly\r\n * complex logic for parsing inputs.\r\n *\r\n * @param args {Object}\r\n * Array-like object of `arguments` that was passed into the method. It is expected that the `arguments`\r\n * are always made of two parameters - `(options, cb)`, same as all the default task/transaction methods.\r\n *\r\n * And if your custom method needs additional parameters, they should be passed in as extra properties within `options`.\r\n *\r\n * @returns {Array}\r\n * Array of arguments that can be passed into a task or transaction.\r\n *\r\n * It is extended with properties `options` and `cb` to access the corresponding array elements `[0]` and `[1]` by name.\r\n *\r\n * @example\r\n *\r\n * // Registering a custom transaction method that assigns a default Transaction Mode:\r\n *\r\n * const initOptions = {\r\n *     extend: obj => {\r\n *         obj.myTx = function(options, cb) {\r\n *             const args = pgp.utils.taskArgs(arguments); // prepare arguments\r\n *\r\n *             if (!('mode' in args.options)) {\r\n *                 // if no 'mode' was specified, set default for transaction mode:\r\n *                 args.options.mode = myTxModeObject; // of type pgp.txMode.TransactionMode\r\n *             }\r\n *\r\n *             return obj.tx.apply(this, args);\r\n *             // or explicitly, if needed:\r\n *             // return obj.tx.call(this, args.options, args.cb);\r\n *         }\r\n *     }\r\n * };\r\n *\r\n */\r\nfunction taskArgs(args) {\r\n\r\n    if (!args || typeof args.length !== 'number') {\r\n        throw new TypeError('Parameter \\'args\\' must be an array-like object of arguments.');\r\n    }\r\n\r\n    let options = args[0], cb;\r\n    if (typeof options === 'function') {\r\n        cb = options;\r\n        options = {};\r\n        if (cb.name) {\r\n            options.tag = cb.name;\r\n        }\r\n    } else {\r\n        if (typeof args[1] === 'function') {\r\n            cb = args[1];\r\n        }\r\n        if (typeof options === 'string' || typeof options === 'number') {\r\n            options = {tag: options};\r\n        } else {\r\n            options = (typeof options === 'object' && options) || {};\r\n            if (!('tag' in options) && cb && cb.name) {\r\n                options.tag = cb.name;\r\n            }\r\n        }\r\n    }\r\n\r\n    const res = [options, cb];\r\n\r\n    Object.defineProperty(res, 'options', {\r\n        get: function () {\r\n            return this[0];\r\n        },\r\n        set: function (newValue) {\r\n            this[0] = newValue;\r\n        },\r\n        enumerable: true\r\n    });\r\n\r\n    Object.defineProperty(res, 'cb', {\r\n        get: function () {\r\n            return this[1];\r\n        },\r\n        set: function (newValue) {\r\n            this[1] = newValue;\r\n        },\r\n        enumerable: true\r\n    });\r\n\r\n    return res;\r\n}\r\n\r\n/**\r\n * @namespace utils\r\n *\r\n * @description\r\n * Namespace for general-purpose static functions, available as `pgp.utils`, before and after initializing the library.\r\n *\r\n * @property {function} camelize\r\n * {@link utils.camelize camelize} - camelizes a text string\r\n *\r\n * @property {function} camelizeVar\r\n * {@link utils.camelizeVar camelizeVar} - camelizes a text string as a variable\r\n *\r\n * @property {function} enumSql\r\n * {@link utils.enumSql enumSql} - enumerates SQL files in a directory\r\n *\r\n * @property {function} taskArgs\r\n * {@link utils.taskArgs taskArgs} - prepares arguments for tasks and transactions\r\n */\r\nmodule.exports = {\r\n    camelize,\r\n    camelizeVar,\r\n    enumSql,\r\n    taskArgs\r\n};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {InnerState} = require('./inner-state');\r\nconst {addInspection} = require('./utils');\r\nconst {assert} = require('./assert');\r\n\r\n/**\r\n * @enum {number}\r\n * @alias txMode.isolationLevel\r\n * @readonly\r\n * @summary Transaction Isolation Level.\r\n * @description\r\n * The type is available from the {@link txMode} namespace.\r\n *\r\n * @see $[Transaction Isolation]\r\n */\r\nconst isolationLevel = {\r\n    /** Isolation level not specified. */\r\n    none: 0,\r\n\r\n    /** ISOLATION LEVEL SERIALIZABLE */\r\n    serializable: 1,\r\n\r\n    /** ISOLATION LEVEL REPEATABLE READ */\r\n    repeatableRead: 2,\r\n\r\n    /** ISOLATION LEVEL READ COMMITTED */\r\n    readCommitted: 3\r\n\r\n    // From the official documentation: http://www.postgresql.org/docs/9.5/static/sql-set-transaction.html\r\n    // The SQL standard defines one additional level, READ UNCOMMITTED. In PostgreSQL READ UNCOMMITTED is treated as READ COMMITTED.\r\n    // => skipping `READ UNCOMMITTED`.\r\n};\r\n\r\n/**\r\n * @class txMode.TransactionMode\r\n * @description\r\n * Constructs a complete transaction-opening `BEGIN` command, from these options:\r\n *  - isolation level\r\n *  - access mode\r\n *  - deferrable mode\r\n *\r\n * The type is available from the {@link txMode} namespace.\r\n *\r\n * @param {} [options]\r\n * Transaction Mode options.\r\n *\r\n * @param {txMode.isolationLevel} [options.tiLevel]\r\n * Transaction Isolation Level.\r\n *\r\n * @param {boolean} [options.readOnly]\r\n * Sets transaction access mode based on the read-only flag:\r\n *  - `undefined` - access mode not specified (default)\r\n *  - `true` - access mode is set to `READ ONLY`\r\n *  - `false` - access mode is set to `READ WRITE`\r\n *\r\n * @param {boolean} [options.deferrable]\r\n * Sets transaction deferrable mode based on the boolean value:\r\n *  - `undefined` - deferrable mode not specified (default)\r\n *  - `true` - mode is set to `DEFERRABLE`\r\n *  - `false` - mode is set to `NOT DEFERRABLE`\r\n *\r\n * It is used only when `tiLevel`=`isolationLevel.serializable`\r\n * and `readOnly`=`true`, or else it is ignored.\r\n *\r\n * @returns {txMode.TransactionMode}\r\n *\r\n * @see $[BEGIN], {@link txMode.isolationLevel}\r\n *\r\n * @example\r\n *\r\n * const {TransactionMode, isolationLevel} = pgp.txMode;\r\n *\r\n * // Create a reusable transaction mode (serializable + read-only + deferrable):\r\n * const mode = new TransactionMode({\r\n *     tiLevel: isolationLevel.serializable,\r\n *     readOnly: true,\r\n *     deferrable: true\r\n * });\r\n *\r\n * db.tx({mode}, t => {\r\n *     return t.any('SELECT * FROM table');\r\n * })\r\n *     .then(data => {\r\n *         // success;\r\n *     })\r\n *     .catch(error => {\r\n *         // error\r\n *     });\r\n *\r\n * // Instead of the default BEGIN, such transaction will start with:\r\n *\r\n * // BEGIN ISOLATION LEVEL SERIALIZABLE READ ONLY DEFERRABLE\r\n *\r\n */\r\nclass TransactionMode extends InnerState {\r\n\r\n    constructor(options) {\r\n        options = assert(options, ['tiLevel', 'deferrable', 'readOnly']);\r\n        const {readOnly, deferrable} = options;\r\n        let {tiLevel} = options;\r\n        let level, accessMode, deferrableMode, begin = 'begin';\r\n        tiLevel = (tiLevel > 0) ? parseInt(tiLevel) : 0;\r\n\r\n        if (tiLevel > 0 && tiLevel < 4) {\r\n            const values = ['serializable', 'repeatable read', 'read committed'];\r\n            level = 'isolation level ' + values[tiLevel - 1];\r\n        }\r\n        if (readOnly) {\r\n            accessMode = 'read only';\r\n        } else {\r\n            if (readOnly !== undefined) {\r\n                accessMode = 'read write';\r\n            }\r\n        }\r\n        // From the official documentation: http://www.postgresql.org/docs/9.5/static/sql-set-transaction.html\r\n        // The DEFERRABLE transaction property has no effect unless the transaction is also SERIALIZABLE and READ ONLY\r\n        if (tiLevel === isolationLevel.serializable && readOnly) {\r\n            if (deferrable) {\r\n                deferrableMode = 'deferrable';\r\n            } else {\r\n                if (deferrable !== undefined) {\r\n                    deferrableMode = 'not deferrable';\r\n                }\r\n            }\r\n        }\r\n        if (level) {\r\n            begin += ' ' + level;\r\n        }\r\n        if (accessMode) {\r\n            begin += ' ' + accessMode;\r\n        }\r\n        if (deferrableMode) {\r\n            begin += ' ' + deferrableMode;\r\n        }\r\n\r\n        super({begin, capBegin: begin.toUpperCase()});\r\n    }\r\n\r\n    /**\r\n     * @method txMode.TransactionMode#begin\r\n     * @description\r\n     * Returns a complete BEGIN statement, according to all the parameters passed into the class.\r\n     *\r\n     * This method is primarily for internal use by the library.\r\n     *\r\n     * @param {boolean} [cap=false]\r\n     * Indicates whether the returned SQL must be capitalized.\r\n     *\r\n     * @returns {string}\r\n     */\r\n    begin(cap) {\r\n        return cap ? this._inner.capBegin : this._inner.begin;\r\n    }\r\n}\r\n\r\naddInspection(TransactionMode, function () {\r\n    return this.begin(true);\r\n});\r\n\r\n/**\r\n * @namespace txMode\r\n * @description\r\n * Transaction Mode namespace, available as `pgp.txMode`, before and after initializing the library.\r\n *\r\n * Extends the default `BEGIN` with Transaction Mode parameters:\r\n *  - isolation level\r\n *  - access mode\r\n *  - deferrable mode\r\n *\r\n * @property {function} TransactionMode\r\n * {@link txMode.TransactionMode TransactionMode} class constructor.\r\n *\r\n * @property {txMode.isolationLevel} isolationLevel\r\n * Transaction Isolation Level enumerator\r\n *\r\n * @see $[BEGIN]\r\n */\r\nmodule.exports = {\r\n    isolationLevel,\r\n    TransactionMode\r\n};\r\n\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {ColorConsole} = require('./utils/color');\r\n\r\nconst npm = {\r\n    main: require('./'),\r\n    utils: require('./utils')\r\n};\r\n\r\n/////////////////////////////////\r\n// Client notification helpers;\r\nclass Events {\r\n\r\n    /**\r\n     * @event connect\r\n     * @description\r\n     * Global notification of acquiring a new database connection from the connection pool, i.e. a virtual connection.\r\n     *\r\n     * However, for direct calls to method {@link Database#connect Database.connect} with parameter `{direct: true}`,\r\n     * this event represents a physical connection.\r\n     *\r\n     * The library will suppress any error thrown by the handler and write it into the console.\r\n     *\r\n     * @param {{}} e Event Properties\r\n     *\r\n     * @param {external:Client} e.client\r\n     * $[pg.Client] object that represents the connection.\r\n     *\r\n     * @param {*} e.dc\r\n     * Database Context that was used when creating the database object (see {@link Database}).\r\n     *\r\n     * @param {number} e.useCount\r\n     * Number of times the connection has been previously used, starting with 0, for a freshly\r\n     * allocated physical connection.\r\n     *\r\n     * This parameter is always 0 for direct connections (created by calling {@link Database#connect Database.connect}\r\n     * with parameter `{direct: true}`).\r\n     *\r\n     * @example\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     connect(e) {\r\n     *         const cp = e.client.connectionParameters;\r\n     *         console.log('Connected to database:', cp.database);\r\n     *     }\r\n     *\r\n     * };\r\n     */\r\n    static connect(ctx, client, useCount) {\r\n        if (typeof ctx.options.connect === 'function') {\r\n            try {\r\n                ctx.options.connect({client, dc: ctx.dc, useCount});\r\n            } catch (e) {\r\n                // have to silence errors here;\r\n                // cannot allow unhandled errors while connecting to the database,\r\n                // as it will break the connection logic;\r\n                Events.unexpected('connect', e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event disconnect\r\n     * @description\r\n     * Global notification of releasing a database connection back to the connection pool, i.e. releasing the virtual connection.\r\n     *\r\n     * However, when releasing a direct connection (created by calling {@link Database#connect Database.connect} with parameter\r\n     * `{direct: true}`), this event represents a physical disconnection.\r\n     *\r\n     * The library will suppress any error thrown by the handler and write it into the console.\r\n     *\r\n     * @param {{}} e Event Properties\r\n     *\r\n     * @param {external:Client} e.client - $[pg.Client] object that represents connection with the database.\r\n     *\r\n     * @param {*} e.dc - Database Context that was used when creating the database object (see {@link Database}).\r\n     *\r\n     * @example\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     disconnect(e) {\r\n     *        const cp = e.client.connectionParameters;\r\n     *        console.log('Disconnecting from database:', cp.database);\r\n     *     }\r\n     *\r\n     * };\r\n     */\r\n    static disconnect(ctx, client) {\r\n        if (typeof ctx.options.disconnect === 'function') {\r\n            try {\r\n                ctx.options.disconnect({client, dc: ctx.dc});\r\n            } catch (e) {\r\n                // have to silence errors here;\r\n                // cannot allow unhandled errors while disconnecting from the database,\r\n                // as it will break the disconnection logic;\r\n                Events.unexpected('disconnect', e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event query\r\n     * @description\r\n     *\r\n     * Global notification of a query that's about to execute.\r\n     *\r\n     * Notification happens just before the query execution. And if the handler throws an error, the query execution\r\n     * will be rejected with that error.\r\n     *\r\n     * @param {EventContext} e\r\n     * Event Context Object.\r\n     *\r\n     * @example\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     query(e) {\r\n     *         console.log('QUERY:', e.query);\r\n     *     }\r\n     * };\r\n     */\r\n    static query(options, context) {\r\n        if (typeof options.query === 'function') {\r\n            try {\r\n                options.query(context);\r\n            } catch (e) {\r\n                // throwing an error during event 'query'\r\n                // will result in a reject for the request.\r\n                return e instanceof Error ? e : new npm.utils.InternalError(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event receive\r\n     * @description\r\n     * Global notification of any data received from the database, coming from a regular query or from a stream.\r\n     *\r\n     * The event is fired before the data reaches the client, and it serves two purposes:\r\n     *  - Providing selective data logging for debugging;\r\n     *  - Pre-processing data before it reaches the client.\r\n     *\r\n     * **NOTES:**\r\n     * - If you alter the size of `data` directly or through the `result` object, it may affect `QueryResultMask`\r\n     *   validation for regular queries, which is executed right after.\r\n     * - Any data pre-processing needs to be fast here, to avoid performance penalties.\r\n     * - If the event handler throws an error, the original request will be rejected with that error.\r\n     *\r\n     * For methods {@link Database#multi Database.multi} and {@link Database#multiResult Database.multiResult},\r\n     * this event is called for every result that's returned. And for method {@link Database#stream Database.stream},\r\n     * the event occurs for every record.\r\n     *\r\n     * @param {{}} e Event Properties\r\n     *\r\n     * @param {Array<Object>} e.data\r\n     * Array of received objects/rows.\r\n     *\r\n     * If any of those objects are modified during notification, the client will receive the modified data.\r\n     *\r\n     * @param {external:Result} e.result\r\n     * - Original $[Result] object, if the data is from a non-stream query, in which case `data = result.rows`.\r\n     *   For single-query requests, $[Result] object is extended with property `duration` - number of milliseconds\r\n     *   it took to send the query, execute it and get the result back.\r\n     * - It is `undefined` when the data comes from a stream (method {@link Database#stream Database.stream}).\r\n     *\r\n     * @param {EventContext} e.ctx\r\n     * Event Context Object.\r\n     *\r\n     * @example\r\n     *\r\n     * // Example below shows the fastest way to camelize all column names.\r\n     * // NOTE: The example does not do processing for nested JSON objects.\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     receive(e) {\r\n     *         camelizeColumns(e.data);\r\n     *     }\r\n     * };\r\n     *\r\n     * function camelizeColumns(data) {\r\n     *     const tmp = data[0];\r\n     *     for (const prop in tmp) {\r\n     *         const camel = pgp.utils.camelize(prop);\r\n     *         if (!(camel in tmp)) {\r\n     *             for (let i = 0; i < data.length; i++) {\r\n     *                 const d = data[i];\r\n     *                 d[camel] = d[prop];\r\n     *                 delete d[prop];\r\n     *             }\r\n     *         }\r\n     *     }\r\n     * }\r\n     */\r\n    static receive(options, data, result, ctx) {\r\n        if (typeof options.receive === 'function') {\r\n            try {\r\n                options.receive({data, result, ctx});\r\n            } catch (e) {\r\n                // throwing an error during event 'receive'\r\n                // will result in a reject for the request.\r\n                return e instanceof Error ? e : new npm.utils.InternalError(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event task\r\n     * @description\r\n     * Global notification of a task start / finish events, as executed via\r\n     * {@link Database#task Database.task} or {@link Database#taskIf Database.taskIf}.\r\n     *\r\n     * The library will suppress any error thrown by the handler and write it into the console.\r\n     *\r\n     * @param {EventContext} e\r\n     * Event Context Object.\r\n     *\r\n     * @example\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     task(e) {\r\n     *         if (e.ctx.finish) {\r\n     *             // this is a task->finish event;\r\n     *             console.log('Duration:', e.ctx.duration);\r\n     *             if (e.ctx.success) {\r\n     *                 // e.ctx.result = resolved data;\r\n     *             } else {\r\n     *                 // e.ctx.result = error/rejection reason;\r\n     *             }\r\n     *         } else {\r\n     *             // this is a task->start event;\r\n     *             console.log('Start Time:', e.ctx.start);\r\n     *         }\r\n     *     }\r\n     * };\r\n     *\r\n     */\r\n    static task(options, context) {\r\n        if (typeof options.task === 'function') {\r\n            try {\r\n                options.task(context);\r\n            } catch (e) {\r\n                // silencing the error, to avoid breaking the task;\r\n                Events.unexpected('task', e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event transact\r\n     * @description\r\n     * Global notification of a transaction start / finish events, as executed via {@link Database#tx Database.tx}\r\n     * or {@link Database#txIf Database.txIf}.\r\n     *\r\n     * The library will suppress any error thrown by the handler and write it into the console.\r\n     *\r\n     * @param {EventContext} e\r\n     * Event Context Object.\r\n     *\r\n     * @example\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     transact(e) {\r\n     *         if (e.ctx.finish) {\r\n     *             // this is a transaction->finish event;\r\n     *             console.log('Duration:', e.ctx.duration);\r\n     *             if (e.ctx.success) {\r\n     *                 // e.ctx.result = resolved data;\r\n     *             } else {\r\n     *                 // e.ctx.result = error/rejection reason;\r\n     *             }\r\n     *         } else {\r\n     *             // this is a transaction->start event;\r\n     *             console.log('Start Time:', e.ctx.start);\r\n     *         }\r\n     *     }\r\n     * };\r\n     *\r\n     */\r\n    static transact(options, context) {\r\n        if (typeof options.transact === 'function') {\r\n            try {\r\n                options.transact(context);\r\n            } catch (e) {\r\n                // silencing the error, to avoid breaking the transaction;\r\n                Events.unexpected('transact', e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event error\r\n     * @description\r\n     * Global notification of every error encountered by this library.\r\n     *\r\n     * The library will suppress any error thrown by the handler and write it into the console.\r\n     *\r\n     * @param {*} err\r\n     * The error encountered, of the same value and type as it was reported.\r\n     *\r\n     * @param {EventContext} e\r\n     * Event Context Object.\r\n     *\r\n     * @example\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     error(err, e) {\r\n     *\r\n     *         if (e.cn) {\r\n     *             // this is a connection-related error\r\n     *             // cn = safe connection details passed into the library:\r\n     *             //      if password is present, it is masked by #\r\n     *         }\r\n     *\r\n     *         if (e.query) {\r\n     *             // query string is available\r\n     *             if (e.params) {\r\n     *                 // query parameters are available\r\n     *             }\r\n     *         }\r\n     *\r\n     *         if (e.ctx) {\r\n     *             // occurred inside a task or transaction\r\n     *         }\r\n     *       }\r\n     * };\r\n     *\r\n     */\r\n    static error(options, err, context) {\r\n        if (typeof options.error === 'function') {\r\n            try {\r\n                options.error(err, context);\r\n            } catch (e) {\r\n                // have to silence errors here;\r\n                // throwing unhandled errors while handling an error\r\n                // notification is simply not acceptable.\r\n                Events.unexpected('error', e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event extend\r\n     * @description\r\n     * Extends {@link Database} protocol with custom methods and properties.\r\n     *\r\n     * Override this event to extend the existing access layer with your own functions and\r\n     * properties best suited for your application.\r\n     *\r\n     * The extension thus becomes available across all access layers:\r\n     *\r\n     * - Within the root/default database protocol;\r\n     * - Inside transactions, including nested ones;\r\n     * - Inside tasks, including nested ones.\r\n     *\r\n     * All pre-defined methods and properties are read-only, so you will get an error,\r\n     * if you try overriding them.\r\n     *\r\n     * The library will suppress any error thrown by the handler and write it into the console.\r\n     *\r\n     * @param {object} obj - Protocol object to be extended.\r\n     *\r\n     * @param {*} dc - Database Context that was used when creating the {@link Database} object.\r\n     *\r\n     * @see $[pg-promise-demo]\r\n     *\r\n     * @example\r\n     *\r\n     * // In the example below we extend the protocol with function `addImage`\r\n     * // that will insert one binary image and resolve with the new record id.\r\n     *\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     extend(obj, dc) {\r\n     *         // dc = database context;\r\n     *         obj.addImage = data => {\r\n     *             // adds a new image and resolves with its record id:\r\n     *             return obj.one('INSERT INTO images(data) VALUES($1) RETURNING id', data, a => a.id);\r\n     *         }\r\n     *     }\r\n     * };\r\n     *\r\n     * @example\r\n     *\r\n     * // It is best to extend the protocol by adding whole entity repositories to it as shown in the following example.\r\n     * // For a comprehensive example see https://github.com/vitaly-t/pg-promise-demo\r\n     *\r\n     * class UsersRepository {\r\n     *     constructor(rep, pgp) {\r\n     *         this.rep = rep;\r\n     *         this.pgp = pgp;\r\n     *     }\r\n     *\r\n     *     add(name) {\r\n     *         return this.rep.one('INSERT INTO users(name) VALUES($1) RETURNING id', name, a => a.id);\r\n     *     }\r\n     *\r\n     *     remove(id) {\r\n     *         return this.rep.none('DELETE FROM users WHERE id = $1', id);\r\n     *     }\r\n     * }\r\n     *\r\n     * // Overriding 'extend' event;\r\n     * const initOptions = {\r\n     *\r\n     *     // pg-promise initialization options...\r\n     *\r\n     *     extend(obj, dc) {\r\n     *         // dc = database context;\r\n     *         obj.users = new UsersRepository(obj, pgp);\r\n     *         // You can set different repositories based on `dc`\r\n     *     }\r\n     * };\r\n     *\r\n     * // Usage example:\r\n     * db.users.add('John', true)\r\n     *     .then(id => {\r\n     *         // user added successfully, id = new user's id\r\n     *     })\r\n     *     .catch(error => {\r\n     *         // failed to add the user;\r\n     *     });\r\n     *\r\n     */\r\n    static extend(options, obj, dc) {\r\n        if (typeof options.extend === 'function') {\r\n            try {\r\n                options.extend.call(obj, obj, dc);\r\n            } catch (e) {\r\n                // have to silence errors here;\r\n                // the result of throwing unhandled errors while\r\n                // extending the protocol would be unpredictable.\r\n                Events.unexpected('extend', e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @event unexpected\r\n     * @param {string} event - unhandled event name.\r\n     * @param {string|Error} e - unhandled error.\r\n     * @private\r\n     */\r\n    static unexpected(event, e) {\r\n        // If you should ever get here, your app is definitely broken, and you need to fix\r\n        // your event handler to prevent unhandled errors during event notifications.\r\n        //\r\n        // Console output is suppressed when running tests, to avoid polluting test output\r\n        // with error messages that are intentional and of no value to the test.\r\n\r\n        /* istanbul ignore if */\r\n        if (!npm.main.suppressErrors) {\r\n            const stack = e instanceof Error ? e.stack : new Error().stack;\r\n            ColorConsole.error(`Unexpected error in '${event}' event handler.\\n${stack}\\n`);\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = {Events};\r\n\r\n/**\r\n * @typedef EventContext\r\n * @description\r\n * This common type is used for the following events: {@link event:query query}, {@link event:receive receive},\r\n * {@link event:error error}, {@link event:task task} and {@link event:transact transact}.\r\n *\r\n * @property {string|object} cn\r\n *\r\n * Set only for event {@link event:error error}, and only when the error is connection-related.\r\n *\r\n * It is a safe copy of the connection string/object that was used when initializing `db` - the database instance.\r\n *\r\n * If the original connection contains a password, the safe copy contains it masked with symbol `#`, so the connection\r\n * can be logged safely, without exposing the password.\r\n *\r\n * @property {*} dc\r\n * Database Context that was used when creating the database object (see {@link Database}). It is set for all events.\r\n *\r\n * @property {string|object} query\r\n *\r\n * Query string/object that was passed into the query method. This property is only set during events {@link event:query query},\r\n * {@link event:receive receive} and {@link event:error error} (only when the error is query-related).\r\n *\r\n * @property {external:Client} client\r\n *\r\n * $[pg.Client] object that represents the connection. It is set for all events, except for event {@link event:error error}\r\n * when it is connection-related. Note that sometimes the value may be unset when the connection is lost.\r\n *\r\n * @property {*} params - Formatting parameters for the query.\r\n *\r\n * It is set only for events {@link event:query query}, {@link event:receive receive} and {@link event:error error}, and only\r\n * when it is needed for logging. This library takes an extra step in figuring out when formatting parameters are of any value\r\n * to the event logging:\r\n * - when an error occurs related to the query formatting, event {@link event:error error} is sent with the property set.\r\n * - when initialization parameter `pgFormat` is used, and all query formatting is done within the $[PG] library, events\r\n * {@link event:query query} and {@link event:receive receive} will have this property set also, since this library no longer\r\n * handles the query formatting.\r\n *\r\n * When this parameter is not set, it means one of the two things:\r\n * - there were no parameters passed into the query method;\r\n * - property `query` of this object already contains all the formatting values in it, so logging only the query is sufficient.\r\n *\r\n * @property {*} values - The original parameter values passed into the query method.\r\n * It is set for all events.\r\n * \r\n * @property {string|undefined} queryFilePath\r\n * File path of a {@link QueryFile}, if the query comes from an external SQL file.\r\n * This is set only when the query originates from a {@link QueryFile} and only for events {@link event:query query} and {@link event:error error}.\r\n *\r\n * @property {TaskContext} ctx\r\n * _Task/Transaction Context_ object.\r\n *\r\n * This property is always set for events {@link event:task task} and {@link event:transact transact}, while for events\r\n * {@link event:query query}, {@link event:receive receive} and {@link event:error error} it is only set when they occur\r\n * inside a task or transaction.\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst specialQueryType = {\r\n    result: 0,\r\n    multiResult: 1,\r\n    stream: 2\r\n};\r\n\r\nclass SpecialQuery {\r\n    constructor(type) {\r\n        this.isResult = type === specialQueryType.result; // type used implicitly\r\n        this.isStream = type === specialQueryType.stream;\r\n        this.isMultiResult = type === specialQueryType.multiResult;\r\n    }\r\n}\r\n\r\nconst cache = {\r\n    resultQuery: new SpecialQuery(specialQueryType.result),\r\n    multiResultQuery: new SpecialQuery(specialQueryType.multiResult),\r\n    streamQuery: new SpecialQuery(specialQueryType.stream)\r\n};\r\n\r\nmodule.exports = Object.assign({SpecialQuery}, cache);\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\n/**\r\n * @class ConnectionContext\r\n * @private\r\n * @summary Internal connection context.\r\n *\r\n * @param {object} cc\r\n * Connection Context.\r\n *\r\n * @param {object} cc.cn\r\n * Connection details\r\n *\r\n * @param {*} cc.dc\r\n * Database Context\r\n *\r\n * @param {object} cc.options\r\n * Library's Initialization Options\r\n *\r\n * @param {object} cc.db\r\n * Database Session we're attached to, if any.\r\n *\r\n * @param {number} cc.level\r\n * Task Level\r\n *\r\n * @param {number} cc.txLevel\r\n * Transaction Level\r\n *\r\n * @param {object} cc.parentCtx\r\n * Connection Context of the parent operation, if any.\r\n *\r\n */\r\nclass ConnectionContext {\r\n\r\n    constructor(cc) {\r\n        this.cn = cc.cn; // connection details;\r\n        this.dc = cc.dc; // database context;\r\n        this.options = cc.options; // library options;\r\n        this.db = cc.db; // database session;\r\n        this.level = cc.level; // task level;\r\n        this.txLevel = cc.txLevel; // transaction level;\r\n        this.parentCtx = null; // parent context\r\n        this.taskCtx = null; // task context\r\n        this.start = null; // Date/Time when connected\r\n        this.txCount = 0;\r\n    }\r\n\r\n    connect(db) {\r\n        this.db = db;\r\n        this.start = new Date();\r\n    }\r\n\r\n    disconnect(kill) {\r\n        if (this.db) {\r\n            const p = this.db.release(kill);\r\n            this.db = null;\r\n            return p;\r\n        }\r\n    }\r\n\r\n    clone() {\r\n        const obj = new ConnectionContext(this);\r\n        obj.parent = this;\r\n        obj.parentCtx = this.taskCtx;\r\n        return obj;\r\n    }\r\n\r\n    get nextTxCount() {\r\n        let txCurrent = this, txTop = this;\r\n        while (txCurrent.parent) {\r\n            txCurrent = txCurrent.parent;\r\n            if (txCurrent.taskCtx && txCurrent.taskCtx.isTX) {\r\n                txTop = txCurrent;\r\n            }\r\n        }\r\n        return txTop.txCount++;\r\n    }\r\n}\r\n\r\n/**\r\n * Connection Context\r\n * @module context\r\n * @author Vitaly Tomilov\r\n * @private\r\n */\r\nmodule.exports = {ConnectionContext};\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {Events} = require('./events');\r\nconst {ColorConsole} = require('./utils/color');\r\n\r\nconst npm = {\r\n    utils: require('./utils'),\r\n    text: require('./text'),\r\n    formatting: require('./formatting')\r\n};\r\n\r\nfunction poolConnect(ctx, db, config) {\r\n    return config.promise((resolve, reject) => {\r\n        const p = db.$pool;\r\n        if (p.ending) {\r\n            db.$destroy();\r\n            const err = new Error(npm.text.poolDestroyed);\r\n            Events.error(ctx.options, err, {\r\n                dc: ctx.dc\r\n            });\r\n            reject(err);\r\n            return;\r\n        }\r\n        p.connect((err, client) => {\r\n            if (err) {\r\n                Events.error(ctx.options, err, {\r\n                    cn: npm.utils.getSafeConnection(ctx.cn),\r\n                    dc: ctx.dc\r\n                });\r\n                reject(err);\r\n            } else {\r\n                if ('$useCount' in client) {\r\n                    // Make sure useCount drops to 1, if it ever reaches maximum integer number;\r\n                    // We do not drop it to zero, to avoid rerun of initialization queries that\r\n                    // usually check for useCount === 0;\r\n                    // istanbul ignore if\r\n                    if (client.$useCount >= Number.MAX_SAFE_INTEGER) {\r\n                        client.$useCount = 1; // resetting; cannot auto-test this\r\n                    } else {\r\n                        client.$useCount = ++client.$useCount;\r\n                    }\r\n                } else {\r\n                    Object.defineProperty(client, '$useCount', {\r\n                        value: 0,\r\n                        configurable: false,\r\n                        enumerable: false,\r\n                        writable: true\r\n                    });\r\n                    setSchema(client, ctx);\r\n                }\r\n                setCtx(client, ctx);\r\n                const end = lockClientEnd(client);\r\n                client.on('error', onError);\r\n                resolve({\r\n                    client,\r\n                    useCount: client.$useCount,\r\n                    release(kill) {\r\n                        client.end = end;\r\n                        client.release(kill || client.$connectionError);\r\n                        Events.disconnect(ctx, client);\r\n                        client.removeListener('error', onError);\r\n                    }\r\n                });\r\n                Events.connect(ctx, client, client.$useCount);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction directConnect(ctx, config) {\r\n    return config.promise((resolve, reject) => {\r\n        const client = new config.pgp.pg.Client(ctx.cn);\r\n        client.connect(err => {\r\n            if (err) {\r\n                Events.error(ctx.options, err, {\r\n                    cn: npm.utils.getSafeConnection(ctx.cn),\r\n                    dc: ctx.dc\r\n                });\r\n                reject(err);\r\n            } else {\r\n                setSchema(client, ctx);\r\n                setCtx(client, ctx);\r\n                const end = lockClientEnd(client);\r\n                client.on('error', onError);\r\n                resolve({\r\n                    client,\r\n                    useCount: 0,\r\n                    release() {\r\n                        client.end = end;\r\n                        const p = config.promise((res, rej) => client.end().then(res).catch(rej));\r\n                        Events.disconnect(ctx, client);\r\n                        client.removeListener('error', onError);\r\n                        return p;\r\n                    }\r\n                });\r\n                Events.connect(ctx, client, 0);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// this event only happens when the connection is lost physically,\r\n// which cannot be tested automatically; removing from coverage:\r\n// istanbul ignore next\r\nfunction onError(err) {\r\n    const ctx = this.$ctx;\r\n    const cn = npm.utils.getSafeConnection(ctx.cn);\r\n    Events.error(ctx.options, err, {cn, dc: ctx.dc});\r\n    if (ctx.cnOptions && typeof ctx.cnOptions.onLost === 'function' && !ctx.notified) {\r\n        try {\r\n            ctx.cnOptions.onLost.call(this, err, {\r\n                cn,\r\n                dc: ctx.dc,\r\n                start: ctx.start,\r\n                client: this\r\n            });\r\n        } catch (e) {\r\n            ColorConsole.error(e && e.stack || e);\r\n        }\r\n        ctx.notified = true;\r\n    }\r\n}\r\n\r\nfunction lockClientEnd(client) {\r\n    const end = client.end;\r\n    client.end = doNotCall => {\r\n        // This call can happen only in the following two cases:\r\n        // 1. the client made the call directly, against the library's documentation (invalid code)\r\n        // 2. connection with the server broke, and the pool is terminating all clients forcefully.\r\n        ColorConsole.error(`${npm.text.clientEnd}\\n${npm.utils.getLocalStack(1, 3)}\\n`);\r\n        if (!doNotCall) {\r\n            end.call(client);\r\n        }\r\n    };\r\n    return end;\r\n}\r\n\r\nfunction setCtx(client, ctx) {\r\n    Object.defineProperty(client, '$ctx', {\r\n        value: ctx,\r\n        writable: true\r\n    });\r\n}\r\n\r\nfunction setSchema(client, ctx) {\r\n    let s = ctx.options.schema;\r\n    if (!s) {\r\n        return;\r\n    }\r\n    if (typeof s === 'function') {\r\n        s = s.call(ctx.dc, ctx.dc);\r\n    }\r\n    if (Array.isArray(s)) {\r\n        s = s.filter(a => a && typeof a === 'string');\r\n    }\r\n    if (typeof s === 'string' || (Array.isArray(s) && s.length)) {\r\n        client.query(npm.formatting.as.format('SET search_path TO $1:name', [s]), err => {\r\n            // istanbul ignore if;\r\n            if (err) {\r\n                // This is unlikely to ever happen, unless the connection is created faulty,\r\n                // and fails on the very first query, which is impossible to test automatically.\r\n                throw err;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = config => ({\r\n    pool: (ctx, db) => poolConnect(ctx, db, config),\r\n    direct: ctx => directConnect(ctx, config)\r\n});\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {Events} = require('./events');\r\n\r\nconst npm = {\r\n    utils: require('./utils'),\r\n    text: require('./text')\r\n};\r\n\r\n////////////////////////////////////////////\r\n// Streams query data into any destination,\r\n// with the help of pg-query-stream library.\r\nfunction $stream(ctx, qs, initCB, config) {\r\n\r\n    const $p = config.promise;\r\n\r\n    // istanbul ignore next:\r\n    // we do not provide code coverage for the Native Bindings specifics\r\n    if (ctx.options.pgNative) {\r\n        return $p.reject(new Error(npm.text.nativeStreaming));\r\n    }\r\n    // Stream class was renamed again, see the following issue:\r\n    // https://github.com/brianc/node-postgres/issues/2412\r\n    if (!qs || !qs.constructor || qs.constructor.name !== 'QueryStream') {\r\n        // invalid or missing stream object;\r\n        return $p.reject(new TypeError(npm.text.invalidStream));\r\n    }\r\n    if (qs._reading || qs._closed) {\r\n        // stream object is in the wrong state;\r\n        return $p.reject(new Error(npm.text.invalidStreamState));\r\n    }\r\n    if (typeof initCB !== 'function') {\r\n        // parameter `initCB` must be passed as the initialization callback;\r\n        return $p.reject(new TypeError(npm.text.invalidStreamCB));\r\n    }\r\n\r\n    let error = Events.query(ctx.options, getContext());\r\n\r\n    if (error) {\r\n        error = getError(error);\r\n        Events.error(ctx.options, error, getContext());\r\n        return $p.reject(error);\r\n    }\r\n\r\n    const stream = ctx.db.client.query(qs);\r\n\r\n    stream.on('data', onData);\r\n    stream.on('error', onError);\r\n    stream.on('end', onEnd);\r\n\r\n    try {\r\n        initCB.call(this, stream); // the stream must be initialized during the call;\r\n    } catch (e) {\r\n        release();\r\n        error = getError(e);\r\n        Events.error(ctx.options, error, getContext());\r\n        return $p.reject(error);\r\n    }\r\n\r\n    const start = Date.now();\r\n    let resolve, reject, nRows = 0;\r\n\r\n    function onData(data) {\r\n        nRows++;\r\n        error = Events.receive(ctx.options, [data], undefined, getContext());\r\n        if (error) {\r\n            onError(error);\r\n        }\r\n    }\r\n\r\n    function onError(e) {\r\n        release();\r\n        stream.destroy();\r\n        e = getError(e);\r\n        Events.error(ctx.options, e, getContext());\r\n        reject(e);\r\n    }\r\n\r\n    function onEnd() {\r\n        release();\r\n        resolve({\r\n            processed: nRows, // total number of rows processed;\r\n            duration: Date.now() - start // duration, in milliseconds;\r\n        });\r\n    }\r\n\r\n    function release() {\r\n        stream.removeListener('data', onData);\r\n        stream.removeListener('error', onError);\r\n        stream.removeListener('end', onEnd);\r\n    }\r\n\r\n    function getError(e) {\r\n        return e instanceof npm.utils.InternalError ? e.error : e;\r\n    }\r\n\r\n    function getContext() {\r\n        let client;\r\n        if (ctx.db) {\r\n            client = ctx.db.client;\r\n        } else {\r\n            error = new Error(npm.text.looseQuery);\r\n        }\r\n        return {\r\n            client,\r\n            dc: ctx.dc,\r\n            query: qs.cursor.text,\r\n            params: qs.cursor.values,\r\n            ctx: ctx.ctx\r\n        };\r\n    }\r\n\r\n    return $p((res, rej) => {\r\n        resolve = res;\r\n        reject = rej;\r\n    });\r\n\r\n}\r\n\r\nmodule.exports = $stream;\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {Events} = require('./events');\r\nconst {QueryFile} = require('./query-file');\r\nconst {ServerFormatting, PreparedStatement, ParameterizedQuery} = require('./types');\r\nconst {SpecialQuery} = require('./special-query');\r\nconst {queryResult} = require('./query-result');\r\n\r\nconst npm = {\r\n    util: require('util'),\r\n    utils: require('./utils'),\r\n    formatting: require('./formatting'),\r\n    errors: require('./errors'),\r\n    stream: require('./stream'),\r\n    text: require('./text')\r\n};\r\n\r\nconst QueryResultError = npm.errors.QueryResultError,\r\n    InternalError = npm.utils.InternalError,\r\n    qrec = npm.errors.queryResultErrorCode;\r\n\r\nconst badMask = queryResult.one | queryResult.many; // unsupported combination bit-mask;\r\n\r\n//////////////////////////////\r\n// Generic query method;\r\nfunction $query(ctx, query, values, qrm, config) {\r\n\r\n    const special = qrm instanceof SpecialQuery && qrm;\r\n    const $p = config.promise;\r\n\r\n    if (special && special.isStream) {\r\n        return npm.stream.call(this, ctx, query, values, config);\r\n    }\r\n\r\n    const opt = ctx.options,\r\n        capSQL = opt.capSQL;\r\n\r\n    let error, entityType, queryFilePath,\r\n        pgFormatting = opt.pgFormatting,\r\n        params = pgFormatting ? values : undefined;\r\n\r\n    if (typeof query === 'function') {\r\n        try {\r\n            query = npm.formatting.resolveFunc(query, values);\r\n        } catch (e) {\r\n            error = e;\r\n            params = values;\r\n            query = npm.util.inspect(query);\r\n        }\r\n    }\r\n\r\n    if (!error && !query) {\r\n        error = new TypeError(npm.text.invalidQuery);\r\n    }\r\n\r\n    if (!error && typeof query === 'object') {\r\n        if (query instanceof QueryFile) {\r\n            query.prepare();\r\n            if (query.error) {\r\n                error = query.error;\r\n                query = query.file;\r\n            } else {\r\n                queryFilePath = query.file;\r\n                query = query[QueryFile.$query];\r\n            }\r\n        } else {\r\n            if ('entity' in query) {\r\n                entityType = query.type;\r\n                query = query.entity; // query is a function name;\r\n            } else {\r\n                if (query instanceof ServerFormatting) {\r\n                    pgFormatting = true;\r\n                } else {\r\n                    if ('name' in query) {\r\n                        query = new PreparedStatement(query);\r\n                        pgFormatting = true;\r\n                    } else {\r\n                        if ('text' in query) {\r\n                            query = new ParameterizedQuery(query);\r\n                            pgFormatting = true;\r\n                        }\r\n                    }\r\n                }\r\n                if (query instanceof ServerFormatting && !npm.utils.isNull(values)) {\r\n                    query.values = values;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!error) {\r\n        if (!pgFormatting && !npm.utils.isText(query)) {\r\n            const errTxt = entityType ? (entityType === 'func' ? npm.text.invalidFunction : npm.text.invalidProc) : npm.text.invalidQuery;\r\n            error = new TypeError(errTxt);\r\n        }\r\n        if (query instanceof ServerFormatting) {\r\n            const qp = query.parse();\r\n            if (qp instanceof Error) {\r\n                error = qp;\r\n            } else {\r\n                query = qp;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!error && !special) {\r\n        if (npm.utils.isNull(qrm)) {\r\n            qrm = queryResult.any; // default query result;\r\n        } else {\r\n            if (qrm !== parseInt(qrm) || (qrm & badMask) === badMask || qrm < 1 || qrm > 6) {\r\n                error = new TypeError(npm.text.invalidMask);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!error && (!pgFormatting || entityType)) {\r\n        try {\r\n            // use 'pg-promise' implementation of values formatting;\r\n            if (entityType) {\r\n                params = undefined;\r\n                query = npm.formatting.formatEntity(query, values, {capSQL, type: entityType});\r\n            } else {\r\n                query = npm.formatting.formatQuery(query, values);\r\n            }\r\n        } catch (e) {\r\n            if (entityType) {\r\n                let prefix = entityType === 'func' ? 'select * from' : 'call';\r\n                if (capSQL) {\r\n                    prefix = prefix.toUpperCase();\r\n                }\r\n                query = prefix + ' ' + query + '(...)';\r\n            } else {\r\n                params = values;\r\n            }\r\n            error = e instanceof Error ? e : new npm.utils.InternalError(e);\r\n        }\r\n    }\r\n\r\n    return $p((resolve, reject) => {\r\n\r\n        if (notifyReject()) {\r\n            return;\r\n        }\r\n        error = Events.query(opt, getContext());\r\n        if (notifyReject()) {\r\n            return;\r\n        }\r\n        try {\r\n            const start = Date.now();\r\n            ctx.db.client.query(query, params, (err, result) => {\r\n                let data, multiResult, lastResult = result;\r\n                if (err) {\r\n                    // istanbul ignore if (auto-testing connectivity issues is too problematic)\r\n                    if (npm.utils.isConnectivityError(err)) {\r\n                        ctx.db.client.$connectionError = err;\r\n                    }\r\n                    err.query = err.query || query;\r\n                    err.params = err.params || params;\r\n                    error = err;\r\n                } else {\r\n                    multiResult = Array.isArray(result);\r\n                    if (multiResult) {\r\n                        lastResult = result[result.length - 1];\r\n                        for (let i = 0; i < result.length; i++) {\r\n                            const r = result[i];\r\n                            makeIterable(r);\r\n                            error = Events.receive(opt, r.rows, r, getContext());\r\n                            if (error) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        makeIterable(result);\r\n                        result.duration = Date.now() - start;\r\n                        error = Events.receive(opt, result.rows, result, getContext());\r\n                    }\r\n                }\r\n                if (!error) {\r\n                    data = lastResult;\r\n                    if (special) {\r\n                        if (special.isMultiResult) {\r\n                            data = multiResult ? result : [result]; // method .multiResult() is called\r\n                        }\r\n                        // else, method .result() is called\r\n                    } else {\r\n                        data = data.rows;\r\n                        const len = data.length;\r\n                        if (len) {\r\n                            if (len > 1 && qrm & queryResult.one) {\r\n                                // one row was expected, but returned multiple;\r\n                                error = new QueryResultError(qrec.multiple, lastResult, query, params);\r\n                            } else {\r\n                                if (!(qrm & (queryResult.one | queryResult.many))) {\r\n                                    // no data should have been returned;\r\n                                    error = new QueryResultError(qrec.notEmpty, lastResult, query, params);\r\n                                } else {\r\n                                    if (!(qrm & queryResult.many)) {\r\n                                        data = data[0];\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            // no data returned;\r\n                            if (qrm & queryResult.none) {\r\n                                if (qrm & queryResult.one) {\r\n                                    data = null;\r\n                                } else {\r\n                                    data = qrm & queryResult.many ? data : null;\r\n                                }\r\n                            } else {\r\n                                error = new QueryResultError(qrec.noData, lastResult, query, params);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!notifyReject()) {\r\n                    resolve(data);\r\n                }\r\n            });\r\n        } catch (e) {\r\n            // this can only happen as a result of an internal failure within node-postgres,\r\n            // like during a sudden loss of communications, which is impossible to reproduce\r\n            // automatically, so removing it from the test coverage:\r\n            // istanbul ignore next\r\n            error = e;\r\n        }\r\n\r\n        function getContext() {\r\n            let client;\r\n            if (ctx.db) {\r\n                client = ctx.db.client;\r\n            } else {\r\n                error = new Error(npm.text.looseQuery);\r\n            }\r\n            return {\r\n                client, query, params, queryFilePath, values,\r\n                dc: ctx.dc,\r\n                ctx: ctx.ctx\r\n            };\r\n        }\r\n\r\n        notifyReject();\r\n\r\n        function notifyReject() {\r\n            const context = getContext();\r\n            if (error) {\r\n                if (error instanceof InternalError) {\r\n                    error = error.error;\r\n                }\r\n                Events.error(opt, error, context);\r\n                reject(error);\r\n                return true;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// Extends Result to provide iterable for the rows;\r\n// See: https://github.com/brianc/node-postgres/pull/2861\r\nfunction makeIterable(r) {\r\n    r[Symbol.iterator] = function () {\r\n        return this.rows.values();\r\n    };\r\n}\r\n\r\nmodule.exports = config => {\r\n    return function (ctx, query, values, qrm) {\r\n        return $query.call(this, ctx, query, values, qrm, config);\r\n    };\r\n};\r\n","const npm = {\r\n    stream: require('stream'),\r\n    util: require('util')\r\n};\r\n\r\n/////////////////////////////////////\r\n// Checks if the value is a promise;\r\nfunction isPromise(value) {\r\n    return value && typeof value.then === 'function';\r\n}\r\n\r\n////////////////////////////////////////////\r\n// Checks object for being a readable stream;\r\nfunction isReadableStream(obj) {\r\n    return obj instanceof npm.stream.Stream &&\r\n        typeof obj._read === 'function' &&\r\n        typeof obj._readableState === 'object';\r\n}\r\n\r\n////////////////////////////////////////////////////////////\r\n// Sets an object property as read-only and non-enumerable.\r\nfunction extend(obj, name, value) {\r\n    Object.defineProperty(obj, name, {\r\n        value,\r\n        configurable: false,\r\n        enumerable: false,\r\n        writable: false\r\n    });\r\n}\r\n\r\n///////////////////////////////////////////\r\n// Returns a space gap for console output;\r\nfunction messageGap(level) {\r\n    return ' '.repeat(level * 4);\r\n}\r\n\r\nfunction formatError(error, level) {\r\n    const names = ['BatchError', 'PageError', 'SequenceError'];\r\n    let msg = npm.util.inspect(error);\r\n    if (error instanceof Error) {\r\n        if (names.indexOf(error.name) === -1) {\r\n            const gap = messageGap(level);\r\n            msg = msg.split('\\n').map((line, index) => {\r\n                return (index ? gap : '') + line;\r\n            }).join('\\n');\r\n        } else {\r\n            msg = error.toString(level);\r\n        }\r\n    }\r\n    return msg;\r\n}\r\n\r\n////////////////////////////////////////////////////////\r\n// Adds prototype inspection, with support of the newer\r\n// Custom Inspection, which was added in Node.js 6.x\r\nfunction addInspection(type, cb) {\r\n    // istanbul ignore next;\r\n    if (npm.util.inspect.custom) {\r\n        // Custom inspection is supported:\r\n        type.prototype[npm.util.inspect.custom] = cb;\r\n    } else {\r\n        // Use classic inspection:\r\n        type.prototype.inspect = cb;\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    addInspection,\r\n    formatError,\r\n    isPromise,\r\n    isReadableStream,\r\n    messageGap,\r\n    extend\r\n};\r\n","const npm = {\r\n    stat: require('./static')\r\n};\r\n\r\nmodule.exports = function ($p) {\r\n\r\n    const exp = {\r\n        formatError: npm.stat.formatError,\r\n        isPromise: npm.stat.isPromise,\r\n        isReadableStream: npm.stat.isReadableStream,\r\n        messageGap: npm.stat.messageGap,\r\n        extend: npm.stat.extend,\r\n        resolve,\r\n        wrap\r\n    };\r\n\r\n    return exp;\r\n\r\n    //////////////////////////////////////////\r\n    // Checks if the function is a generator,\r\n    // and if so - wraps it up into a promise;\r\n    function wrap(func) {\r\n        if (typeof func === 'function') {\r\n            if (func.constructor.name === 'GeneratorFunction') {\r\n                return asyncAdapter(func);\r\n            }\r\n            return func;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /////////////////////////////////////////////////////\r\n    // Resolves a mixed value into the actual value,\r\n    // consistent with the way mixed values are defined:\r\n    // https://github.com/vitaly-t/spex/wiki/Mixed-Values\r\n    function resolve(value, params, onSuccess, onError) {\r\n\r\n        const self = this;\r\n        let delayed = false;\r\n\r\n        function loop() {\r\n            while (typeof value === 'function') {\r\n                if (value.constructor.name === 'GeneratorFunction') {\r\n                    value = asyncAdapter(value);\r\n                }\r\n                try {\r\n                    value = params ? value.apply(self, params) : value.call(self);\r\n                } catch (e) {\r\n                    onError(e, false); // false means 'threw an error'\r\n                    return;\r\n                }\r\n            }\r\n            if (exp.isPromise(value)) {\r\n                value\r\n                    .then(data => {\r\n                        delayed = true;\r\n                        value = data;\r\n                        loop();\r\n                        return null; // this dummy return is just to prevent Bluebird warnings;\r\n                    })\r\n                    .catch(error => {\r\n                        onError(error, true); // true means 'rejected'\r\n                    });\r\n            } else {\r\n                onSuccess(value, delayed);\r\n            }\r\n        }\r\n\r\n        loop();\r\n    }\r\n\r\n    // Generator-to-Promise adapter;\r\n    // Based on: https://www.promisejs.org/generators/#both\r\n    function asyncAdapter(generator) {\r\n        return function () {\r\n            const g = generator.apply(this, arguments);\r\n\r\n            function handle(result) {\r\n                if (result.done) {\r\n                    return $p.resolve(result.value);\r\n                }\r\n                return $p.resolve(result.value)\r\n                    .then(res => handle(g.next(res)), err => handle(g.throw(err)));\r\n            }\r\n\r\n            return handle(g.next());\r\n        };\r\n    }\r\n\r\n};\r\n","const npm = {\r\n    u: require('util'),\r\n    os: require('os'),\r\n    utils: require('../utils/static')\r\n};\r\n\r\n/**\r\n * @class errors.BatchError\r\n * @augments external:Error\r\n * @description\r\n * This type represents all errors rejected by method {@link batch}, except for {@link external:TypeError TypeError}\r\n * when the method receives invalid input parameters.\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `BatchError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * It represents the message of the first error encountered in the batch, and is a safe\r\n * version of using `first.message`.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {array} data\r\n * Array of objects `{success, result, [origin]}`:\r\n * - `success` = true/false, indicates whether the corresponding value in the input array was resolved.\r\n * - `result` = resolved data, if `success`=`true`, or else the rejection reason.\r\n * - `origin` - set only when failed as a result of an unsuccessful call into the notification callback\r\n *    (parameter `cb` of method {@link batch})\r\n *\r\n * The array has the same size as the input one that was passed into method {@link batch}, providing direct mapping.\r\n *\r\n * @property {} stat\r\n * Resolution Statistics.\r\n *\r\n * @property {number} stat.total\r\n * Total number of elements in the batch.\r\n *\r\n * @property {number} stat.succeeded\r\n * Number of resolved values in the batch.\r\n *\r\n * @property {number} stat.failed\r\n * Number of rejected values in the batch.\r\n *\r\n * @property {number} stat.duration\r\n * Time in milliseconds it took to settle all values.\r\n *\r\n * @property {} first\r\n * The very first error within the batch, with support for nested batch results, it is also the same error\r\n * as $[promise.all] would provide.\r\n *\r\n * @see {@link batch}\r\n *\r\n */\r\nclass BatchError extends Error {\r\n\r\n    constructor(result, errors, duration) {\r\n\r\n        function getErrors() {\r\n            const err = new Array(errors.length);\r\n            for (let i = 0; i < errors.length; i++) {\r\n                err[i] = result[errors[i]].result;\r\n                if (err[i] instanceof BatchError) {\r\n                    err[i] = err[i].getErrors();\r\n                }\r\n            }\r\n            npm.utils.extend(err, '$isErrorList', true);\r\n            return err;\r\n        }\r\n\r\n        const e = getErrors();\r\n\r\n        let first = e[0];\r\n\r\n        while (first && first.$isErrorList) {\r\n            first = first[0];\r\n        }\r\n\r\n        let message;\r\n\r\n        if (first instanceof Error) {\r\n            message = first.message;\r\n        } else {\r\n            if (typeof first !== 'string') {\r\n                first = npm.u.inspect(first);\r\n            }\r\n            message = first;\r\n        }\r\n\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        this.data = result;\r\n\r\n        // we do not show it within the inspect, because when the error\r\n        // happens for a nested result, the output becomes a mess.\r\n        this.first = first;\r\n\r\n        this.stat = {\r\n            total: result.length,\r\n            succeeded: result.length - e.length,\r\n            failed: e.length,\r\n            duration\r\n        };\r\n\r\n        this.getErrors = getErrors;\r\n\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n\r\n    /**\r\n     * @method errors.BatchError.getErrors\r\n     * @description\r\n     * Returns the complete list of errors only.\r\n     *\r\n     * It supports nested batch results, presented as a sub-array.\r\n     *\r\n     * @returns {array}\r\n     */\r\n}\r\n\r\n/**\r\n * @method errors.BatchError.toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * The output is an abbreviated version of the error, because the complete error\r\n * is often too much for displaying or even logging, as a batch can be of any size.\r\n * Therefore, only errors are rendered from the `data` property, alongside their indexes,\r\n * and only up to the first 5, to avoid polluting the screen or the log file.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nBatchError.prototype.toString = function (level) {\r\n    level = level > 0 ? parseInt(level) : 0;\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        gap2 = npm.utils.messageGap(level + 2),\r\n        lines = [\r\n            'BatchError {',\r\n            gap1 + 'stat: { total: ' + this.stat.total + ', succeeded: ' + this.stat.succeeded +\r\n            ', failed: ' + this.stat.failed + ', duration: ' + this.stat.duration + ' }',\r\n            gap1 + 'errors: ['\r\n        ];\r\n\r\n    // In order to avoid polluting the error log or the console, \r\n    // we limit the log output to the top 5 errors:\r\n    const maxErrors = 5;\r\n    let counter = 0;\r\n    this.data.forEach((d, index) => {\r\n        if (!d.success && counter < maxErrors) {\r\n            lines.push(gap2 + index + ': ' + npm.utils.formatError(d.result, level + 2));\r\n            counter++;\r\n        }\r\n    });\r\n    lines.push(gap1 + ']');\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(BatchError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {BatchError};\r\n","const {BatchError} = require('../errors/batch');\r\n\r\n/**\r\n * @method batch\r\n * @description\r\n * Settles (resolves or rejects) every [mixed value]{@tutorial mixed} in the input array.\r\n *\r\n * The method resolves with an array of results, the same as the standard $[promise.all],\r\n * while providing comprehensive error details in case of a reject, in the form of\r\n * type {@link errors.BatchError BatchError}.\r\n *\r\n * @param {Array} values\r\n * Array of [mixed values]{@tutorial mixed} (it can be empty), to be resolved asynchronously, in no particular order.\r\n *\r\n * Passing in anything other than an array will reject with {@link external:TypeError TypeError} =\r\n * `Method 'batch' requires an array of values.`\r\n *\r\n * @param {Object} [options]\r\n * Optional Parameters.\r\n *\r\n * @param {Function|generator} [options.cb]\r\n * Optional callback (or generator) to receive the result for each settled value.\r\n *\r\n * Callback Parameters:\r\n *  - `index` = index of the value in the source array\r\n *  - `success` - indicates whether the value was resolved (`true`), or rejected (`false`)\r\n *  - `result` = resolved data, if `success`=`true`, or else the rejection reason\r\n *  - `delay` = number of milliseconds since the last call (`undefined` when `index=0`)\r\n *\r\n * The function inherits `this` context from the calling method.\r\n *\r\n * It can optionally return a promise to indicate that notifications are handled asynchronously.\r\n * And if the returned promise resolves, it signals a successful handling, while any resolved\r\n * data is ignored.\r\n *\r\n * If the function returns a rejected promise or throws an error, the entire method rejects\r\n * with {@link errors.BatchError BatchError} where the corresponding value in property `data`\r\n * is set to `{success, result, origin}`:\r\n *  - `success` = `false`\r\n *  - `result` = the rejection reason or the error thrown by the notification callback\r\n *  - `origin` = the original data passed into the callback as object `{success, result}`\r\n *\r\n * @returns {external:Promise}\r\n *\r\n * The method resolves with an array of individual resolved results, the same as the standard $[promise.all].\r\n * In addition, the array is extended with a hidden read-only property `duration` - number of milliseconds\r\n * spent resolving all the data.\r\n *\r\n * The method rejects with {@link errors.BatchError BatchError} when any of the following occurs:\r\n *  - one or more values rejected or threw an error while being resolved as a [mixed value]{@tutorial mixed}\r\n *  - notification callback `cb` returned a rejected promise or threw an error\r\n *\r\n */\r\nfunction batch(values, options, config) {\r\n\r\n    const $p = config.promise, utils = config.utils;\r\n\r\n    if (!Array.isArray(values)) {\r\n        return $p.reject(new TypeError('Method \\'batch\\' requires an array of values.'));\r\n    }\r\n\r\n    if (!values.length) {\r\n        const empty = [];\r\n        utils.extend(empty, 'duration', 0);\r\n        return $p.resolve(empty);\r\n    }\r\n\r\n    options = options || {};\r\n\r\n    const cb = utils.wrap(options.cb),\r\n        self = this, start = Date.now();\r\n\r\n    return $p((resolve, reject) => {\r\n        let cbTime, remaining = values.length;\r\n        const errors = [], result = new Array(remaining);\r\n        values.forEach((item, i) => {\r\n            utils.resolve.call(self, item, null, data => {\r\n                result[i] = data;\r\n                step(i, true, data);\r\n            }, reason => {\r\n                result[i] = {success: false, result: reason};\r\n                errors.push(i);\r\n                step(i, false, reason);\r\n            });\r\n        });\r\n\r\n        function step(idx, pass, data) {\r\n            if (cb) {\r\n                const cbNow = Date.now(),\r\n                    cbDelay = idx ? (cbNow - cbTime) : undefined;\r\n                let cbResult;\r\n                cbTime = cbNow;\r\n                try {\r\n                    cbResult = cb.call(self, idx, pass, data, cbDelay);\r\n                } catch (e) {\r\n                    setError(e);\r\n                }\r\n                if (utils.isPromise(cbResult)) {\r\n                    cbResult\r\n                        .then(check)\r\n                        .catch(error => {\r\n                            setError(error);\r\n                            check();\r\n                        });\r\n                } else {\r\n                    check();\r\n                }\r\n            } else {\r\n                check();\r\n            }\r\n\r\n            function setError(e) {\r\n                const r = pass ? {success: false} : result[idx];\r\n                if (pass) {\r\n                    result[idx] = r;\r\n                    errors.push(idx);\r\n                }\r\n                r.result = e;\r\n                r.origin = {success: pass, result: data};\r\n            }\r\n\r\n            function check() {\r\n                if (!--remaining) {\r\n                    if (errors.length) {\r\n                        errors.sort();\r\n                        if (errors.length < result.length) {\r\n                            for (let i = 0, k = 0; i < result.length; i++) {\r\n                                if (i === errors[k]) {\r\n                                    k++;\r\n                                } else {\r\n                                    result[i] = {success: true, result: result[i]};\r\n                                }\r\n                            }\r\n                        }\r\n                        reject(new BatchError(result, errors, Date.now() - start));\r\n                    } else {\r\n                        utils.extend(result, 'duration', Date.now() - start);\r\n                        resolve(result);\r\n                    }\r\n                }\r\n                return null; // this dummy return is just to prevent Bluebird warnings;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = function (config) {\r\n    return function (values, options) {\r\n        return batch.call(this, values, options, config);\r\n    };\r\n};\r\n","const npm = {\r\n    u: require('util'),\r\n    os: require('os'),\r\n    utils: require('../utils/static')\r\n};\r\n\r\nconst errorReasons = {\r\n    0: 'Page with index %d rejected.',\r\n    1: 'Source %s returned a rejection at index %d.',\r\n    2: 'Source %s threw an error at index %d.',\r\n    3: 'Destination %s returned a rejection at index %d.',\r\n    4: 'Destination %s threw an error at index %d.',\r\n    5: 'Source %s returned a non-array value at index %d.'\r\n};\r\n\r\n/**\r\n * @class errors.PageError\r\n * @augments external:Error\r\n * @description\r\n * This type represents all errors rejected by method {@link page}, except for {@link external:TypeError TypeError}\r\n * when the method receives invalid input parameters.\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `PageError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {} error\r\n * The error that was thrown, or the rejection reason.\r\n *\r\n * @property {number} index\r\n * Index of the element in the sequence for which the error/rejection occurred.\r\n *\r\n * @property {number} duration\r\n * Duration (in milliseconds) of processing until the error/rejection occurred.\r\n *\r\n * @property {string} reason\r\n * Textual explanation of why the method failed.\r\n *\r\n * @property {} source\r\n * Resolved `data` parameter that was passed into the `source` function.\r\n *\r\n * It is only set when the error/rejection occurred inside the `source` function.\r\n *\r\n * @property {} dest\r\n * Resolved `data` parameter that was passed into the `dest` function.\r\n *\r\n * It is only set when the error/rejection occurred inside the `dest` function.\r\n *\r\n * @see\r\n * {@link page},\r\n * {@link batch}\r\n *\r\n */\r\nclass PageError extends Error {\r\n\r\n    constructor(e, code, cbName, duration) {\r\n\r\n        let message;\r\n        if (e.error instanceof Error) {\r\n            message = e.error.message;\r\n        } else {\r\n            message = e.error;\r\n            if (typeof message !== 'string') {\r\n                message = npm.u.inspect(message);\r\n            }\r\n        }\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        this.index = e.index;\r\n        this.duration = duration;\r\n        this.error = e.error;\r\n\r\n        if ('source' in e) {\r\n            this.source = e.source;\r\n        }\r\n\r\n        if ('dest' in e) {\r\n            this.dest = e.dest;\r\n        }\r\n\r\n        if (code) {\r\n            cbName = cbName ? ('\\'' + cbName + '\\'') : '<anonymous>';\r\n            this.reason = npm.u.format(errorReasons[code], cbName, e.index);\r\n        } else {\r\n            this.reason = npm.u.format(errorReasons[code], e.index);\r\n        }\r\n\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * @method errors.PageError.toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nPageError.prototype.toString = function (level) {\r\n\r\n    level = level > 0 ? parseInt(level) : 0;\r\n\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        lines = [\r\n            'PageError {',\r\n            gap1 + 'message: ' + JSON.stringify(this.message),\r\n            gap1 + 'reason: ' + this.reason,\r\n            gap1 + 'index: ' + this.index,\r\n            gap1 + 'duration: ' + this.duration\r\n        ];\r\n\r\n    lines.push(gap1 + 'error: ' + npm.utils.formatError(this.error, level + 1));\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(PageError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {PageError};\r\n\r\n","const {PageError} = require('../errors/page');\r\n\r\n/**\r\n * @method page\r\n * @description\r\n * Resolves a dynamic sequence of pages/arrays with [mixed values]{@tutorial mixed}.\r\n *\r\n * The method acquires pages (arrays of [mixed values]{@tutorial mixed}) from the `source` function, one by one,\r\n * and resolves each page as a {@link batch}, till no more pages left or an error/reject occurs.\r\n *\r\n * @param {Function|generator} source\r\n * Expected to return a [mixed value]{@tutorial mixed} that resolves with the next page of data (array of [mixed values]{@tutorial mixed}).\r\n * Returning or resolving with `undefined` ends the sequence, and the method resolves.\r\n *\r\n * The function inherits `this` context from the calling method.\r\n *\r\n * Parameters:\r\n *  - `index` = index of the page being requested\r\n *  - `data` = previously returned page, resolved as a {@link batch} (`undefined` when `index=0`)\r\n *  - `delay` = number of milliseconds since the last call (`undefined` when `index=0`)\r\n *\r\n * If the function throws an error or returns a rejected promise, the method rejects with\r\n * {@link errors.PageError PageError}, which will have property `source` set.\r\n *\r\n * And if the function returns or resolves with anything other than an array or `undefined`,\r\n * the method rejects with the same {@link errors.PageError PageError}, but with `error` set to\r\n * `Unexpected data returned from the source.`\r\n *\r\n * Passing in anything other than a function will reject with {@link external:TypeError TypeError} = `Parameter 'source' must be a function.`\r\n *\r\n * @param {Object} [options]\r\n * Optional Parameters.\r\n *\r\n * @param {Function|generator} [options.dest]\r\n * Optional destination function (or generator), to receive a resolved {@link batch} of data\r\n * for each page, process it and respond as required.\r\n *\r\n * Parameters:\r\n *  - `index` = page index in the sequence\r\n *  - `data` = page data resolved as a {@link batch}\r\n *  - `delay` = number of milliseconds since the last call (`undefined` when `index=0`)\r\n *\r\n * The function inherits `this` context from the calling method.\r\n *\r\n * It can optionally return a promise object, if notifications are handled asynchronously.\r\n * And if a promise is returned, the method will not request another page from the `source`\r\n * function until the promise has been resolved.\r\n *\r\n * If the function throws an error or returns a rejected promise, the sequence terminates,\r\n * and the method rejects with {@link errors.PageError PageError}, which will have property `dest` set.\r\n *\r\n * @param {Number} [options.limit=0]\r\n * Limits the maximum number of pages to be requested from the `source`. If the value is greater\r\n * than 0, the method will successfully resolve once the specified limit has been reached.\r\n *\r\n * When `limit` isn't specified (default), the sequence is unlimited, and it will continue\r\n * till one of the following occurs:\r\n *  - `source` returns or resolves with `undefined` or an invalid value (non-array)\r\n *  - either `source` or `dest` functions throw an error or return a rejected promise\r\n *\r\n * @returns {external:Promise}\r\n *\r\n * When successful, the method resolves with object `{pages, total, duration}`:\r\n *  - `pages` = number of pages resolved\r\n *  - `total` = the sum of all page sizes (total number of values resolved)\r\n *  - `duration` = number of milliseconds consumed by the method\r\n *\r\n * When the method fails, it rejects with {@link errors.PageError PageError}.\r\n *\r\n */\r\nfunction page(source, options, config) {\r\n\r\n    const $p = config.promise, spex = config.spex, utils = config.utils;\r\n\r\n    if (typeof source !== 'function') {\r\n        return $p.reject(new TypeError('Parameter \\'source\\' must be a function.'));\r\n    }\r\n\r\n    options = options || {};\r\n    source = utils.wrap(source);\r\n\r\n    const limit = (options.limit > 0) ? parseInt(options.limit) : 0,\r\n        dest = utils.wrap(options.dest), self = this, start = Date.now();\r\n    let request, srcTime, destTime, total = 0;\r\n\r\n    return $p((resolve, reject) => {\r\n\r\n        function loop(idx) {\r\n            const srcNow = Date.now(),\r\n                srcDelay = idx ? (srcNow - srcTime) : undefined;\r\n            srcTime = srcNow;\r\n            utils.resolve.call(self, source, [idx, request, srcDelay], value => {\r\n                if (value === undefined) {\r\n                    success();\r\n                } else {\r\n                    if (value instanceof Array) {\r\n                        spex.batch(value)\r\n                            .then(data => {\r\n                                request = data;\r\n                                total += data.length;\r\n                                if (dest) {\r\n                                    const destNow = Date.now(),\r\n                                        destDelay = idx ? (destNow - destTime) : undefined;\r\n                                    let destResult;\r\n                                    destTime = destNow;\r\n                                    try {\r\n                                        destResult = dest.call(self, idx, data, destDelay);\r\n                                    } catch (err) {\r\n                                        fail({\r\n                                            error: err,\r\n                                            dest: data\r\n                                        }, 4, dest.name);\r\n                                        return;\r\n                                    }\r\n                                    if (utils.isPromise(destResult)) {\r\n                                        destResult\r\n                                            .then(next)\r\n                                            .catch(error => {\r\n                                                fail({\r\n                                                    error,\r\n                                                    dest: data\r\n                                                }, 3, dest.name);\r\n                                            });\r\n                                    } else {\r\n                                        next();\r\n                                    }\r\n                                } else {\r\n                                    next();\r\n                                }\r\n                                return null; // this dummy return is just to prevent Bluebird warnings;\r\n                            })\r\n                            .catch(error => {\r\n                                fail({error}, 0);\r\n                            });\r\n                    } else {\r\n                        fail({\r\n                            error: new Error('Unexpected data returned from the source.'),\r\n                            source: request\r\n                        }, 5, source.name);\r\n                    }\r\n                }\r\n            }, (reason, isRej) => {\r\n                fail({\r\n                    error: reason,\r\n                    source: request\r\n                }, isRej ? 1 : 2, source.name);\r\n            });\r\n\r\n            function next() {\r\n                if (limit === ++idx) {\r\n                    success();\r\n                } else {\r\n                    loop(idx);\r\n                }\r\n                return null; // this dummy return is just to prevent Bluebird warnings;\r\n            }\r\n\r\n            function success() {\r\n                resolve({\r\n                    pages: idx,\r\n                    total,\r\n                    duration: Date.now() - start\r\n                });\r\n            }\r\n\r\n            function fail(reason, code, cbName) {\r\n                reason.index = idx;\r\n                reject(new PageError(reason, code, cbName, Date.now() - start));\r\n            }\r\n        }\r\n\r\n        loop(0);\r\n    });\r\n}\r\n\r\nmodule.exports = function (config) {\r\n    return function (source, options) {\r\n        return page.call(this, source, options, config);\r\n    };\r\n};\r\n","const npm = {\r\n    u: require('util'),\r\n    os: require('os'),\r\n    utils: require('../utils/static')\r\n};\r\n\r\nconst errorReasons = {\r\n    0: 'Source %s returned a rejection at index %d.',\r\n    1: 'Source %s threw an error at index %d.',\r\n    2: 'Destination %s returned a rejection at index %d.',\r\n    3: 'Destination %s threw an error at index %d.'\r\n};\r\n\r\n/**\r\n * @class errors.SequenceError\r\n * @augments external:Error\r\n * @description\r\n * This type represents all errors rejected by method {@link sequence}, except for {@link external:TypeError TypeError}\r\n * when the method receives invalid input parameters.\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `SequenceError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {} error\r\n * The error that was thrown or the rejection reason.\r\n *\r\n * @property {number} index\r\n * Index of the element in the sequence for which the error/rejection occurred.\r\n *\r\n * @property {number} duration\r\n * Duration (in milliseconds) of processing until the error/rejection occurred.\r\n *\r\n * @property {string} reason\r\n * Textual explanation of why the method failed.\r\n *\r\n * @property {} source\r\n * Resolved `data` parameter that was passed into the `source` function.\r\n *\r\n * It is only set when the error/rejection occurred inside the `source` function.\r\n *\r\n * @property {} dest\r\n * Resolved `data` parameter that was passed into the `dest` function.\r\n *\r\n * It is only set when the error/rejection occurred inside the `dest` function.\r\n *\r\n * @see {@link sequence}\r\n *\r\n */\r\nclass SequenceError extends Error {\r\n\r\n    constructor(e, code, cbName, duration) {\r\n\r\n        let message;\r\n        if (e.error instanceof Error) {\r\n            message = e.error.message;\r\n        } else {\r\n            message = e.error;\r\n            if (typeof message !== 'string') {\r\n                message = npm.u.inspect(message);\r\n            }\r\n        }\r\n\r\n        super(message);\r\n        this.name = this.constructor.name;\r\n\r\n        this.index = e.index;\r\n        this.duration = duration;\r\n        this.error = e.error;\r\n\r\n        if ('source' in e) {\r\n            this.source = e.source;\r\n        } else {\r\n            this.dest = e.dest;\r\n        }\r\n\r\n        cbName = cbName ? ('\\'' + cbName + '\\'') : '<anonymous>';\r\n        this.reason = npm.u.format(errorReasons[code], cbName, e.index);\r\n\r\n        Error.captureStackTrace(this, this.constructor);\r\n    }\r\n}\r\n\r\n/**\r\n * @method errors.SequenceError.toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\r\nSequenceError.prototype.toString = function (level) {\r\n\r\n    level = level > 0 ? parseInt(level) : 0;\r\n\r\n    const gap0 = npm.utils.messageGap(level),\r\n        gap1 = npm.utils.messageGap(level + 1),\r\n        lines = [\r\n            'SequenceError {',\r\n            gap1 + 'message: ' + JSON.stringify(this.message),\r\n            gap1 + 'reason: ' + this.reason,\r\n            gap1 + 'index: ' + this.index,\r\n            gap1 + 'duration: ' + this.duration\r\n        ];\r\n\r\n    lines.push(gap1 + 'error: ' + npm.utils.formatError(this.error, level + 1));\r\n    lines.push(gap0 + '}');\r\n    return lines.join(npm.os.EOL);\r\n};\r\n\r\nnpm.utils.addInspection(SequenceError, function () {\r\n    return this.toString();\r\n});\r\n\r\nmodule.exports = {SequenceError};\r\n\r\n","const {SequenceError} = require('../errors/sequence');\r\n\r\n/**\r\n * @method sequence\r\n * @description\r\n * Resolves a dynamic sequence of [mixed values]{@tutorial mixed}.\r\n *\r\n * The method acquires [mixed values]{@tutorial mixed} from the `source` function, one at a time, and resolves them,\r\n * till either no more values left in the sequence or an error/reject occurs.\r\n *\r\n * It supports both [linked and detached sequencing]{@tutorial sequencing}.\r\n *\r\n * @param {Function|generator} source\r\n * Expected to return the next [mixed value]{@tutorial mixed} to be resolved. Returning or resolving\r\n * with `undefined` ends the sequence, and the method resolves.\r\n *\r\n * Parameters:\r\n *  - `index` = current request index in the sequence\r\n *  - `data` = resolved data from the previous call (`undefined` when `index=0`)\r\n *  - `delay` = number of milliseconds since the last call (`undefined` when `index=0`)\r\n *\r\n * The function inherits `this` context from the calling method.\r\n *\r\n * If the function throws an error or returns a rejected promise, the sequence terminates,\r\n * and the method rejects with {@link errors.SequenceError SequenceError}, which will have property `source` set.\r\n *\r\n * Passing in anything other than a function will reject with {@link external:TypeError TypeError} = `Parameter 'source' must be a function.`\r\n *\r\n * @param {Object} [options]\r\n * Optional Parameters.\r\n *\r\n * @param {Function|generator} [options.dest=null]\r\n * Optional destination function (or generator), to receive resolved data for each index,\r\n * process it and respond as required.\r\n *\r\n * Parameters:\r\n *  - `index` = index of the resolved data in the sequence\r\n *  - `data` = the data resolved\r\n *  - `delay` = number of milliseconds since the last call (`undefined` when `index=0`)\r\n *\r\n * The function inherits `this` context from the calling method.\r\n *\r\n * It can optionally return a promise object, if data processing is done asynchronously.\r\n * If a promise is returned, the method will not request another value from the `source` function,\r\n * until the promise has been resolved (the resolved value is ignored).\r\n *\r\n * If the function throws an error or returns a rejected promise, the sequence terminates,\r\n * and the method rejects with {@link errors.SequenceError SequenceError}, which will have property `dest` set.\r\n *\r\n * @param {Number} [options.limit=0]\r\n * Limits the maximum size of the sequence. If the value is greater than 0, the method will\r\n * successfully resolve once the specified limit has been reached.\r\n *\r\n * When `limit` isn't specified (default), the sequence is unlimited, and it will continue\r\n * till one of the following occurs:\r\n *  - `source` either returns or resolves with `undefined`\r\n *  - either `source` or `dest` functions throw an error or return a rejected promise\r\n *\r\n * @param {Boolean} [options.track=false]\r\n * Changes the type of data to be resolved by this method. By default, it is `false`\r\n * (see the return result). When set to be `true`, the method tracks/collects all resolved data\r\n * into an array internally, and resolves with that array once the method has finished successfully.\r\n *\r\n * It must be used with caution, as to the size of the sequence, because accumulating data for\r\n * a very large sequence can result in consuming too much memory.\r\n *\r\n * @returns {external:Promise}\r\n *\r\n * When successful, the resolved data depends on parameter `track`. When `track` is `false`\r\n * (default), the method resolves with object `{total, duration}`:\r\n *  - `total` = number of values resolved by the sequence\r\n *  - `duration` = number of milliseconds consumed by the method\r\n *\r\n * When `track` is `true`, the method resolves with an array of all the data that has been resolved,\r\n * the same way that the standard $[promise.all] resolves. In addition, the array comes extended with\r\n * a hidden read-only property `duration` - number of milliseconds consumed by the method.\r\n *\r\n * When the method fails, it rejects with {@link errors.SequenceError SequenceError}.\r\n */\r\nfunction sequence(source, options, config) {\r\n\r\n    const $p = config.promise, utils = config.utils;\r\n\r\n    if (typeof source !== 'function') {\r\n        return $p.reject(new TypeError('Parameter \\'source\\' must be a function.'));\r\n    }\r\n\r\n    source = utils.wrap(source);\r\n\r\n    options = options || {};\r\n\r\n    const limit = (options.limit > 0) ? parseInt(options.limit) : 0,\r\n        dest = utils.wrap(options.dest),\r\n        self = this, start = Date.now();\r\n    let data, srcTime, destTime, result = [];\r\n\r\n    return $p((resolve, reject) => {\r\n\r\n        function loop(idx) {\r\n            const srcNow = Date.now(),\r\n                srcDelay = idx ? (srcNow - srcTime) : undefined;\r\n            srcTime = srcNow;\r\n            utils.resolve.call(self, source, [idx, data, srcDelay], (value, delayed) => {\r\n                data = value;\r\n                if (data === undefined) {\r\n                    success();\r\n                } else {\r\n                    if (options.track) {\r\n                        result.push(data);\r\n                    }\r\n                    if (dest) {\r\n                        const destNow = Date.now(),\r\n                            destDelay = idx ? (destNow - destTime) : undefined;\r\n                        let destResult;\r\n                        destTime = destNow;\r\n                        try {\r\n                            destResult = dest.call(self, idx, data, destDelay);\r\n                        } catch (e) {\r\n                            fail({\r\n                                error: e,\r\n                                dest: data\r\n                            }, 3, dest.name);\r\n                            return;\r\n                        }\r\n                        if (utils.isPromise(destResult)) {\r\n                            destResult\r\n                                .then(() => {\r\n                                    next(true);\r\n                                    return null; // this dummy return is just to prevent Bluebird warnings;\r\n                                })\r\n                                .catch(error => {\r\n                                    fail({\r\n                                        error,\r\n                                        dest: data\r\n                                    }, 2, dest.name);\r\n                                });\r\n                        } else {\r\n                            next(delayed);\r\n                        }\r\n                    } else {\r\n                        next(delayed);\r\n                    }\r\n                }\r\n            }, (reason, isRej) => {\r\n                fail({\r\n                    error: reason,\r\n                    source: data\r\n                }, isRej ? 0 : 1, source.name);\r\n            });\r\n\r\n            function next(delayed) {\r\n                if (limit === ++idx) {\r\n                    success();\r\n                } else {\r\n                    if (delayed) {\r\n                        loop(idx);\r\n                    } else {\r\n                        $p.resolve()\r\n                            .then(() => {\r\n                                loop(idx);\r\n                                return null; // this dummy return is just to prevent Bluebird warnings;\r\n                            });\r\n                    }\r\n                }\r\n            }\r\n\r\n            function success() {\r\n                const length = Date.now() - start;\r\n                if (options.track) {\r\n                    utils.extend(result, 'duration', length);\r\n                } else {\r\n                    result = {\r\n                        total: idx,\r\n                        duration: length\r\n                    };\r\n                }\r\n                resolve(result);\r\n            }\r\n\r\n            function fail(reason, code, cbName) {\r\n                reason.index = idx;\r\n                reject(new SequenceError(reason, code, cbName, Date.now() - start));\r\n            }\r\n        }\r\n\r\n        loop(0);\r\n    });\r\n}\r\n\r\nmodule.exports = function (config) {\r\n    return function (source, options) {\r\n        return sequence.call(this, source, options, config);\r\n    };\r\n};\r\n","/**\r\n * @method stream.read\r\n * @description\r\n * Consumes and processes data from a $[Readable] stream.\r\n *\r\n * It reads the entire stream, using either **paused mode** (default), or in chunks (see `options.readChunks`)\r\n * with support for both synchronous and asynchronous data processing.\r\n *\r\n * **NOTE:** Once the method has finished, the onus is on the caller to release the stream\r\n * according to its protocol.\r\n *\r\n * @param {Object} stream\r\n * $[Readable] stream object.\r\n *\r\n * Passing in anything else will throw `Readable stream is required.`\r\n *\r\n * @param {Function|generator} receiver\r\n * Data processing callback (or generator).\r\n *\r\n * Passing in anything else will throw `Invalid stream receiver.`\r\n *\r\n * Parameters:\r\n *  - `index` = index of the call made to the function\r\n *  - `data` = array of all data reads from the stream's buffer\r\n *  - `delay` = number of milliseconds since the last call (`undefined` when `index=0`)\r\n *\r\n * The function is called with the same `this` context as the calling method.\r\n *\r\n * It can optionally return a promise object, if data processing is asynchronous.\r\n * And if a promise is returned, the method will not read data from the stream again,\r\n * until the promise has been resolved.\r\n *\r\n * If the function throws an error or returns a rejected promise, the method rejects\r\n * with the same error / rejection reason.\r\n *\r\n * @param {Object} [options]\r\n * Optional Parameters.\r\n *\r\n * @param {Boolean} [options.closable=false]\r\n * Instructs the method to resolve on event `close` supported by the stream, as opposed to event\r\n * `end` that's used by default.\r\n *\r\n * @param {Boolean} [options.readChunks=false]\r\n * By default, the method handles event `readable` of the stream to consume data in a simplified form,\r\n * item by item. If you enable this option, the method will instead handle event `data` of the stream,\r\n * to consume chunks of data.\r\n *\r\n * @param {Number} [options.readSize]\r\n * When the value is greater than 0, it sets the read size from the stream's buffer\r\n * when the next data is available. By default, the method uses as few reads as possible\r\n * to get all the data currently available in the buffer.\r\n *\r\n * NOTE: This option is ignored when option `readChunks` is enabled.\r\n *\r\n * @returns {external:Promise}\r\n *\r\n * When finished successfully, resolves with object `{calls, reads, length, duration}`:\r\n *  - `calls` = number of calls made into the `receiver`\r\n *  - `reads` = number of successful reads from the stream\r\n *  - `length` = total length for all the data reads from the stream\r\n *  - `duration` = number of milliseconds consumed by the method\r\n *\r\n * When it fails, the method rejects with the error/reject specified,\r\n * which can happen as a result of:\r\n *  - event `error` emitted by the stream\r\n *  - receiver throws an error or returns a rejected promise\r\n */\r\nfunction read(stream, receiver, options, config) {\r\n\r\n    const $p = config.promise, utils = config.utils;\r\n\r\n    if (!utils.isReadableStream(stream)) {\r\n        return $p.reject(new TypeError('Readable stream is required.'));\r\n    }\r\n\r\n    if (typeof receiver !== 'function') {\r\n        return $p.reject(new TypeError('Invalid stream receiver.'));\r\n    }\r\n\r\n    receiver = utils.wrap(receiver);\r\n\r\n    options = options || {};\r\n\r\n    const readSize = (options.readSize > 0) ? parseInt(options.readSize) : null,\r\n        self = this, start = Date.now(), receiveEvent = options.readChunks ? 'data' : 'readable';\r\n    let cbTime, ready, waiting, stop, reads = 0, length = 0, index = 0;\r\n\r\n    return $p((resolve, reject) => {\r\n\r\n        function onReceive(data) {\r\n            ready = true;\r\n            process(data);\r\n        }\r\n\r\n        function onEnd() {\r\n            if (!options.closable) {\r\n                success();\r\n            }\r\n        }\r\n\r\n        function onClose() {\r\n            success();\r\n        }\r\n\r\n        function onError(error) {\r\n            fail(error);\r\n        }\r\n\r\n        stream.on(receiveEvent, onReceive);\r\n        stream.on('end', onEnd);\r\n        stream.on('close', onClose);\r\n        stream.on('error', onError);\r\n\r\n        function process(data) {\r\n            if (!ready || stop || waiting) {\r\n                return;\r\n            }\r\n            ready = false;\r\n            let cache;\r\n            if (options.readChunks) {\r\n                cache = data;\r\n                // istanbul ignore else;\r\n                // we cannot test the else condition, as it requires a special broken stream interface.\r\n                if (!Array.isArray(cache)) {\r\n                    cache = [cache];\r\n                }\r\n                length += cache.length;\r\n                reads++;\r\n            } else {\r\n                cache = [];\r\n                waiting = true;\r\n                let page;\r\n                do {\r\n                    page = stream.read(readSize);\r\n                    if (page) {\r\n                        cache.push(page);\r\n                        // istanbul ignore next: requires a unique stream that\r\n                        // creates objects without property `length` defined.\r\n                        length += page.length || 0;\r\n                        reads++;\r\n                    }\r\n                } while (page);\r\n\r\n                if (!cache.length) {\r\n                    waiting = false;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            const cbNow = Date.now(),\r\n                cbDelay = index ? (cbNow - cbTime) : undefined;\r\n            let result;\r\n            cbTime = cbNow;\r\n            try {\r\n                result = receiver.call(self, index++, cache, cbDelay);\r\n            } catch (e) {\r\n                fail(e);\r\n                return;\r\n            }\r\n\r\n            if (utils.isPromise(result)) {\r\n                result\r\n                    .then(() => {\r\n                        waiting = false;\r\n                        process();\r\n                        return null; // this dummy return is just to prevent Bluebird warnings;\r\n                    })\r\n                    .catch(error => {\r\n                        fail(error);\r\n                    });\r\n            } else {\r\n                waiting = false;\r\n                process();\r\n            }\r\n        }\r\n\r\n        function success() {\r\n            cleanup();\r\n            resolve({\r\n                calls: index,\r\n                reads,\r\n                length,\r\n                duration: Date.now() - start\r\n            });\r\n        }\r\n\r\n        function fail(error) {\r\n            stop = true;\r\n            cleanup();\r\n            reject(error);\r\n        }\r\n\r\n        function cleanup() {\r\n            stream.removeListener(receiveEvent, onReceive);\r\n            stream.removeListener('close', onClose);\r\n            stream.removeListener('error', onError);\r\n            stream.removeListener('end', onEnd);\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = function (config) {\r\n    return function (stream, receiver, options) {\r\n        return read.call(this, stream, receiver, options, config);\r\n    };\r\n};\r\n","const npm = {\r\n    read: require('./read')\r\n};\r\n\r\n/**\r\n * @namespace stream\r\n * @description\r\n * Namespace with methods that implement stream operations, and {@link stream.read read} is the only method currently supported.\r\n *\r\n * **Synchronous Stream Processing**\r\n *\r\n * ```js\r\n * const stream = require('spex')(Promise).stream;\r\n * const fs = require('fs');\r\n *\r\n * const rs = fs.createReadStream('values.txt');\r\n *\r\n * function receiver(index, data, delay) {\r\n *    console.log('RECEIVED:', index, data, delay);\r\n * }\r\n *\r\n * stream.read(rs, receiver)\r\n *     .then(data => {\r\n *         console.log('DATA:', data);\r\n *     })\r\n *     .catch(error => {\r\n *         console.log('ERROR:', error);\r\n *     });\r\n * ```\r\n *\r\n * **Asynchronous Stream Processing**\r\n *\r\n * ```js\r\n * const stream = require('spex')(Promise).stream;\r\n * const fs = require('fs');\r\n *\r\n * const rs = fs.createReadStream('values.txt');\r\n *\r\n * function receiver(index, data, delay) {\r\n *    return new Promise(resolve => {\r\n *        console.log('RECEIVED:', index, data, delay);\r\n *        resolve();\r\n *    });\r\n * }\r\n *\r\n * stream.read(rs, receiver)\r\n *     .then(data => {\r\n *         console.log('DATA:', data);\r\n *     })\r\n *     .catch(error => {\r\n *         console.log('ERROR:', error);\r\n *    });\r\n * ```\r\n *\r\n * @property {function} stream.read\r\n * Consumes and processes data from a $[Readable] stream.\r\n *\r\n */\r\nmodule.exports = function (config) {\r\n    const res = {\r\n        read: npm.read(config)\r\n    };\r\n    Object.freeze(res);\r\n    return res;\r\n};\r\n","const {BatchError} = require('./batch');\r\nconst {PageError} = require('./page');\r\nconst {SequenceError} = require('./sequence');\r\n\r\n\r\n/**\r\n * @namespace errors\r\n * @description\r\n * Namespace for all custom error types supported by the library.\r\n *\r\n * In addition to the custom error type used by each method (regular error), they can also reject with\r\n * {@link external:TypeError TypeError} when receiving invalid input parameters.\r\n *\r\n * @property {function} BatchError\r\n * {@link errors.BatchError BatchError} class.\r\n *\r\n * Represents regular errors that can be reported by method {@link batch}.\r\n *\r\n * @property {function} PageError\r\n * {@link errors.PageError PageError} class.\r\n *\r\n * Represents regular errors that can be reported by method {@link page}.\r\n *\r\n * @property {function} SequenceError\r\n * {@link errors.SequenceError SequenceError} class.\r\n *\r\n * Represents regular errors that can be reported by method {@link sequence}.\r\n *\r\n */\r\nmodule.exports = {\r\n    BatchError,\r\n    PageError,\r\n    SequenceError\r\n};\r\n\r\nObject.freeze(module.exports);\r\n","/**\r\n * @class PromiseAdapter\r\n * @description\r\n * Adapter for the primary promise operations.\r\n *\r\n * Provides compatibility with promise libraries that cannot be recognized automatically,\r\n * via functions that implement the primary operations with promises:\r\n *\r\n *  - construct a new promise with a callback function\r\n *  - resolve a promise with some result data\r\n *  - reject a promise with a reason\r\n *\r\n * #### Example\r\n *\r\n * Below is an example of setting up a [client-side]{@tutorial client} adapter for AngularJS $q.\r\n *\r\n * ```js\r\n * const spexLib = require('spex'); // or include client-side spex.js\r\n *\r\n * const adapter = new spexLib.PromiseAdapter(\r\n *    cb => $q(cb), // creating a new promise;\r\n *    data => $q.when(data), // resolving a promise;\r\n *    reason => $q.reject(reason) // rejecting a promise;\r\n *    );\r\n *\r\n * const spex = spexLib(adapter);\r\n * ```\r\n *\r\n * @param {Function} create\r\n * A function that takes a callback parameter and returns a new promise object.\r\n * The callback parameter is expected to be `function(resolve, reject)`.\r\n *\r\n * Passing in anything other than a function will throw `Adapter requires a function to create a promise.`\r\n *\r\n * @param {Function} resolve\r\n * A function that takes an optional data parameter and resolves a promise with it.\r\n *\r\n * Passing in anything other than a function will throw `Adapter requires a function to resolve a promise.`\r\n *\r\n * @param {Function} reject\r\n * A function that takes an optional error parameter and rejects a promise with it.\r\n *\r\n * Passing in anything other than a function will throw `Adapter requires a function to reject a promise.`\r\n *\r\n * @see {@tutorial client}\r\n *\r\n */\r\nclass PromiseAdapter {\r\n    constructor(create, resolve, reject) {\r\n        this.create = create;\r\n        this.resolve = resolve;\r\n        this.reject = reject;\r\n\r\n        if (typeof create !== 'function') {\r\n            throw new TypeError('Adapter requires a function to create a promise.');\r\n        }\r\n\r\n        if (typeof resolve !== 'function') {\r\n            throw new TypeError('Adapter requires a function to resolve a promise.');\r\n        }\r\n\r\n        if (typeof reject !== 'function') {\r\n            throw new TypeError('Adapter requires a function to reject a promise.');\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = PromiseAdapter;\r\n","const npm = {\r\n    utils: require('./utils'),\r\n    batch: require('./ext/batch'),\r\n    page: require('./ext/page'),\r\n    sequence: require('./ext/sequence'),\r\n    stream: require('./ext/stream'),\r\n    errors: require('./errors')\r\n};\r\n\r\n/**\r\n * @module spex\r\n * @summary Specialized Promise Extensions\r\n * @author Vitaly Tomilov\r\n *\r\n * @description\r\n * Attaches to an external promise library and provides additional methods built solely\r\n * on the basic promise operations:\r\n *  - construct a new promise with a callback function\r\n *  - resolve a promise with some result data\r\n *  - reject a promise with a reason\r\n *\r\n * ### usage\r\n * For any third-party promise library:\r\n * ```js\r\n * const promise = require('bluebird');\r\n * const spex = require('spex')(promise);\r\n * ```\r\n * For ES6 promises:\r\n * ```js\r\n * const spex = require('spex')(Promise);\r\n * ```\r\n *\r\n * @param {Object|Function} promiseLib\r\n * Instance of a promise library to be used by this module.\r\n *\r\n * Some implementations use `Promise` constructor to create a new promise, while\r\n * others use the module's function for it. Both types are supported the same.\r\n *\r\n * Alternatively, an object of type {@link PromiseAdapter} can be passed in, which provides\r\n * compatibility with any promise library outside of the standard.\r\n *\r\n * Passing in a promise library that cannot be recognized will throw\r\n * `Invalid promise library specified.`\r\n *\r\n * @returns {Object}\r\n * Namespace with all supported methods.\r\n *\r\n * @see {@link PromiseAdapter}, {@link batch}, {@link page}, {@link sequence}, {@link stream}\r\n */\r\nfunction main(promiseLib) {\r\n\r\n    const spex = {}, // library instance;\r\n        promise = parsePromiseLib(promiseLib); // promise library parsing;\r\n\r\n    const config = {\r\n        spex,\r\n        promise,\r\n        utils: npm.utils(promise)\r\n    };\r\n\r\n    spex.errors = npm.errors;\r\n    spex.batch = npm.batch(config);\r\n    spex.page = npm.page(config);\r\n    spex.sequence = npm.sequence(config);\r\n    spex.stream = npm.stream(config);\r\n\r\n    config.utils.extend(spex, '$p', promise);\r\n\r\n    Object.freeze(spex);\r\n\r\n    return spex;\r\n}\r\n\r\n//////////////////////////////////////////\r\n// Parses and validates a promise library;\r\nfunction parsePromiseLib(lib) {\r\n    if (lib) {\r\n        let promise;\r\n        if (lib instanceof main.PromiseAdapter) {\r\n            promise = function (func) {\r\n                return lib.create(func);\r\n            };\r\n            promise.resolve = lib.resolve;\r\n            promise.reject = lib.reject;\r\n            return promise;\r\n        }\r\n        const t = typeof lib;\r\n        if (t === 'function' || t === 'object') {\r\n            const Root = typeof lib.Promise === 'function' ? lib.Promise : lib;\r\n            promise = function (func) {\r\n                return new Root(func);\r\n            };\r\n            promise.resolve = Root.resolve;\r\n            promise.reject = Root.reject;\r\n            if (typeof promise.resolve === 'function' && typeof promise.reject === 'function') {\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    throw new TypeError('Invalid promise library specified.');\r\n}\r\n\r\nmain.PromiseAdapter = require('./adapter');\r\nmain.errors = npm.errors;\r\n\r\nObject.freeze(main);\r\n\r\nmodule.exports = main;\r\n\r\n/**\r\n * @external Error\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\r\n */\r\n\r\n/**\r\n * @external TypeError\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError\r\n */\r\n\r\n/**\r\n * @external Promise\r\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {Events} = require('./events');\r\n\r\nconst npm = {\r\n    spex: require('spex'),\r\n    utils: require('./utils'),\r\n    mode: require('./tx-mode'),\r\n    query: require('./query'),\r\n    text: require('./text')\r\n};\r\n\r\n/**\r\n * @interface Task\r\n * @description\r\n * Extends {@link Database} for an automatic connection session, with methods for executing multiple database queries.\r\n *\r\n * The type isn't available directly, it can only be created via methods {@link Database#task Database.task}, {@link Database#tx Database.tx},\r\n * or their derivations.\r\n *\r\n * When executing more than one request at a time, one should allocate and release the connection only once,\r\n * while executing all the required queries within the same connection session. More importantly, a transaction\r\n * can only work within a single connection.\r\n *\r\n * This is an interface for tasks/transactions to implement a connection session, during which you can\r\n * execute multiple queries against the same connection that's released automatically when the task/transaction is finished.\r\n *\r\n * Each task/transaction manages the connection automatically. When executed on the root {@link Database} object, the connection\r\n * is allocated from the pool, and once the method's callback has finished, the connection is released back to the pool.\r\n * However, when invoked inside another task or transaction, the method reuses the parent connection.\r\n *\r\n * @see\r\n * {@link Task#ctx ctx},\r\n * {@link Task#batch batch},\r\n * {@link Task#sequence sequence},\r\n * {@link Task#page page}\r\n *\r\n * @example\r\n * db.task(t => {\r\n *       // t = task protocol context;\r\n *       // t.ctx = Task Context;\r\n *       return t.one('select * from users where id=$1', 123)\r\n *           .then(user => {\r\n *               return t.any('select * from events where login=$1', user.name);\r\n *           });\r\n *   })\r\n * .then(events => {\r\n *       // success;\r\n *   })\r\n * .catch(error => {\r\n *       // error;\r\n *   });\r\n *\r\n */\r\nfunction Task(ctx, tag, isTX, config) {\r\n\r\n    const $p = config.promise;\r\n\r\n    /**\r\n     * @member {TaskContext} Task#ctx\r\n     * @readonly\r\n     * @description\r\n     * Task/Transaction Context object - contains individual properties for each task/transaction.\r\n     *\r\n     * @see event {@link event:query query}\r\n     *\r\n     * @example\r\n     *\r\n     * db.task(t => {\r\n     *     return t.ctx; // task context object\r\n     * })\r\n     *     .then(ctx => {\r\n     *         console.log('Task Duration:', ctx.duration);\r\n     *     });\r\n     *\r\n     * @example\r\n     *\r\n     * db.tx(t => {\r\n     *     return t.ctx; // transaction context object\r\n     * })\r\n     *     .then(ctx => {\r\n     *         console.log('Transaction Duration:', ctx.duration);\r\n     *     });\r\n     */\r\n    this.ctx = ctx.ctx = {}; // task context object;\r\n\r\n    npm.utils.addReadProp(this.ctx, 'isTX', isTX);\r\n\r\n    if ('context' in ctx) {\r\n        npm.utils.addReadProp(this.ctx, 'context', ctx.context);\r\n    }\r\n\r\n    npm.utils.addReadProp(this.ctx, 'connected', !ctx.db);\r\n    npm.utils.addReadProp(this.ctx, 'tag', tag);\r\n    npm.utils.addReadProp(this.ctx, 'dc', ctx.dc);\r\n    npm.utils.addReadProp(this.ctx, 'level', ctx.level);\r\n    npm.utils.addReadProp(this.ctx, 'inTransaction', ctx.inTransaction);\r\n\r\n    if (isTX) {\r\n        npm.utils.addReadProp(this.ctx, 'txLevel', ctx.txLevel);\r\n    }\r\n\r\n    npm.utils.addReadProp(this.ctx, 'parent', ctx.parentCtx);\r\n\r\n    // generic query method;\r\n    this.query = function (query, values, qrm) {\r\n        if (!ctx.db) {\r\n            return $p.reject(new Error(npm.text.looseQuery));\r\n        }\r\n        return config.$npm.query.call(this, ctx, query, values, qrm);\r\n    };\r\n\r\n    /**\r\n     * @deprecated\r\n     * Consider using <b>async/await</b> syntax instead, or if you must have\r\n     * pre-generated promises, then $[Promise.allSettled].\r\n     *\r\n     * @method Task#batch\r\n     * @description\r\n     * Settles a predefined array of mixed values by redirecting to method $[spex.batch].\r\n     *\r\n     * For complete method documentation see $[spex.batch].\r\n     *\r\n     * @param {array} values\r\n     * @param {Object} [options]\r\n     * Optional Parameters.\r\n     * @param {function} [options.cb]\r\n     *\r\n     * @returns {external:Promise}\r\n     */\r\n    this.batch = function (values, options) {\r\n        return config.$npm.spex.batch.call(this, values, options);\r\n    };\r\n\r\n    /**\r\n     * @method Task#page\r\n     * @description\r\n     * Resolves a dynamic sequence of arrays/pages with mixed values, by redirecting to method $[spex.page].\r\n     *\r\n     * For complete method documentation see $[spex.page].\r\n     *\r\n     * @param {function} source\r\n     * @param {Object} [options]\r\n     * Optional Parameters.\r\n     * @param {function} [options.dest]\r\n     * @param {number} [options.limit=0]\r\n     *\r\n     * @returns {external:Promise}\r\n     */\r\n    this.page = function (source, options) {\r\n        return config.$npm.spex.page.call(this, source, options);\r\n    };\r\n\r\n    /**\r\n     * @method Task#sequence\r\n     * @description\r\n     * Resolves a dynamic sequence of mixed values by redirecting to method $[spex.sequence].\r\n     *\r\n     * For complete method documentation see $[spex.sequence].\r\n     *\r\n     * @param {function} source\r\n     * @param {Object} [options]\r\n     * Optional Parameters.\r\n     * @param {function} [options.dest]\r\n     * @param {number} [options.limit=0]\r\n     * @param {boolean} [options.track=false]\r\n     *\r\n     * @returns {external:Promise}\r\n     */\r\n    this.sequence = function (source, options) {\r\n        return config.$npm.spex.sequence.call(this, source, options);\r\n    };\r\n\r\n}\r\n\r\n/**\r\n * @private\r\n * @method Task.callback\r\n * Callback invocation helper.\r\n *\r\n * @param ctx\r\n * @param obj\r\n * @param cb\r\n * @param config\r\n * @returns {Promise.<TResult>}\r\n */\r\nconst callback = (ctx, obj, cb, config) => {\r\n\r\n    const $p = config.promise;\r\n    let result;\r\n\r\n    try {\r\n        if (cb.constructor.name === 'GeneratorFunction') {\r\n            // v9.0 dropped all support for ES6 generator functions;\r\n            // Clients should use the new ES7 async/await syntax.\r\n            throw new TypeError('ES6 generator functions are no longer supported!');\r\n        }\r\n        result = cb.call(obj, obj); // invoking the callback function;\r\n    } catch (err) {\r\n        Events.error(ctx.options, err, {\r\n            client: ctx.db && ctx.db.client, // the error can be due to loss of connectivity\r\n            dc: ctx.dc,\r\n            ctx: ctx.ctx\r\n        });\r\n        return $p.reject(err); // reject with the error;\r\n    }\r\n    if (result && typeof result.then === 'function') {\r\n        return result; // result is a valid promise object;\r\n    }\r\n    return $p.resolve(result);\r\n};\r\n\r\n/**\r\n * @private\r\n * @method Task.execute\r\n * Executes a task.\r\n *\r\n * @param ctx\r\n * @param obj\r\n * @param isTX\r\n * @param config\r\n * @returns {Promise.<TResult>}\r\n */\r\nconst execute = (ctx, obj, isTX, config) => {\r\n\r\n    const $p = config.promise;\r\n\r\n    // updates the task context and notifies the client;\r\n    function update(start, success, result) {\r\n        const c = ctx.ctx;\r\n        if (start) {\r\n            npm.utils.addReadProp(c, 'start', new Date());\r\n        } else {\r\n            c.finish = new Date();\r\n            c.success = success;\r\n            c.result = result;\r\n            c.duration = c.finish - c.start;\r\n        }\r\n        (isTX ? Events.transact : Events.task)(ctx.options, {\r\n            client: ctx.db && ctx.db.client, // loss of connectivity is possible at this point\r\n            dc: ctx.dc,\r\n            ctx: c\r\n        });\r\n    }\r\n\r\n    let cbData, cbReason, success,\r\n        spName; // Save-Point Name;\r\n\r\n    const capSQL = ctx.options.capSQL; // capitalize sql;\r\n\r\n    update(true);\r\n\r\n    if (isTX) {\r\n        // executing a transaction;\r\n        spName = `sp_${ctx.txLevel}_${ctx.nextTxCount}`;\r\n        return begin()\r\n            .then(() => callback(ctx, obj, ctx.cb, config)\r\n                .then(data => {\r\n                    cbData = data; // save callback data;\r\n                    success = true;\r\n                    return commit();\r\n                }, err => {\r\n                    cbReason = err; // save callback failure reason;\r\n                    return rollback();\r\n                })\r\n                .then(() => {\r\n                    if (success) {\r\n                        update(false, true, cbData);\r\n                        return cbData;\r\n                    }\r\n                    update(false, false, cbReason);\r\n                    return $p.reject(cbReason);\r\n                },\r\n                err => {\r\n                    // either COMMIT or ROLLBACK has failed, which is impossible\r\n                    // to replicate in a test environment, so skipping from the test;\r\n                    // istanbul ignore next:\r\n                    update(false, false, err);\r\n                    // istanbul ignore next:\r\n                    return $p.reject(err);\r\n                }),\r\n            err => {\r\n                // BEGIN has failed, which is impossible to replicate in a test\r\n                // environment, so skipping the whole block from the test;\r\n                // istanbul ignore next:\r\n                update(false, false, err);\r\n                // istanbul ignore next:\r\n                return $p.reject(err);\r\n            });\r\n    }\r\n\r\n    function begin() {\r\n        if (!ctx.txLevel && ctx.mode instanceof npm.mode.TransactionMode) {\r\n            return exec(ctx.mode.begin(capSQL), 'savepoint');\r\n        }\r\n        return exec('begin', 'savepoint');\r\n    }\r\n\r\n    function commit() {\r\n        return exec('commit', 'release savepoint');\r\n    }\r\n\r\n    function rollback() {\r\n        return exec('rollback', 'rollback to savepoint');\r\n    }\r\n\r\n    function exec(top, nested) {\r\n        if (ctx.txLevel) {\r\n            return obj.none((capSQL ? nested.toUpperCase() : nested) + ' ' + spName);\r\n        }\r\n        return obj.none(capSQL ? top.toUpperCase() : top);\r\n    }\r\n\r\n    // executing a task;\r\n    return callback(ctx, obj, ctx.cb, config)\r\n        .then(data => {\r\n            update(false, true, data);\r\n            return data;\r\n        })\r\n        .catch(error => {\r\n            update(false, false, error);\r\n            return $p.reject(error);\r\n        });\r\n};\r\n\r\nmodule.exports = config => {\r\n    const npmLocal = config.$npm;\r\n\r\n    // istanbul ignore next:\r\n    // we keep 'npm.query' initialization here, even though it is always\r\n    // pre-initialized by the 'database' module, for integrity purpose.\r\n    npmLocal.query = npmLocal.query || npm.query(config);\r\n    npmLocal.spex = npmLocal.spex || npm.spex(config.promiseLib);\r\n\r\n    return {\r\n        Task, execute, callback\r\n    };\r\n};\r\n\r\n/**\r\n * @typedef TaskContext\r\n * @description\r\n * Task/Transaction Context used via property {@link Task#ctx ctx} inside tasks (methods {@link Database#task Database.task} and {@link Database#taskIf Database.taskIf})\r\n * and transactions (methods {@link Database#tx Database.tx} and {@link Database#txIf Database.txIf}).\r\n *\r\n * Properties `context`, `connected`, `parent`, `level`, `dc`, `isTX`, `tag`, `start`, `useCount` and `serverVersion` are set just before the operation has started,\r\n * while properties `finish`, `duration`, `success` and `result` are set immediately after the operation has finished.\r\n *\r\n * @property {*} context\r\n * If the operation was invoked with a calling context - `task.call(context,...)` or `tx.call(context,...)`,\r\n * this property is set with the context that was passed in. Otherwise, the property doesn't exist.\r\n *\r\n * @property {*} dc\r\n * _Database Context_ that was passed into the {@link Database} object during construction.\r\n *\r\n * @property {boolean} isTX\r\n * Indicates whether this operation is a transaction (as opposed to a regular task).\r\n *\r\n * @property {number} duration\r\n * Number of milliseconds consumed by the operation.\r\n *\r\n * Set after the operation has finished, it is simply a shortcut for `finish - start`.\r\n *\r\n * @property {number} level\r\n * Task nesting level, starting from 0, counting both regular tasks and transactions.\r\n *\r\n * @property {number} txLevel\r\n * Transaction nesting level, starting from 0. Transactions on level 0 use `BEGIN/COMMIT/ROLLBACK`,\r\n * while transactions on nested levels use the corresponding `SAVEPOINT` commands.\r\n *\r\n * This property exists only within the context of a transaction (`isTX = true`).\r\n *\r\n * @property {boolean} inTransaction\r\n * Available in both tasks and transactions, it simplifies checking when there is a transaction\r\n * going on either on this level or above.\r\n *\r\n * For example, when you want to check for a containing transaction while inside a task, and\r\n * only start a transaction when there is none yet.\r\n *\r\n * @property {TaskContext} parent\r\n * Parent task/transaction context, or `null` when it is top-level.\r\n *\r\n * @property {boolean} connected\r\n * Indicates when the task/transaction acquired the connection on its own (`connected = true`), and will release it once\r\n * the operation has finished. When the value is `false`, the operation is reusing an existing connection.\r\n *\r\n * @property {*} tag\r\n * Tag value as it was passed into the task. See methods {@link Database#task task} and {@link Database#tx tx}.\r\n *\r\n * @property {Date} start\r\n * Date/Time of when this operation started the execution.\r\n *\r\n * @property {number} useCount\r\n * Number of times the connection has been previously used, starting with 0 for a freshly\r\n * allocated physical connection.\r\n *\r\n * @property {string} serverVersion\r\n * Version of the PostgreSQL server to which we are connected.\r\n * Not available with $[Native Bindings].\r\n *\r\n * @property {Date} finish\r\n * Once the operation has finished, this property is set to the Data/Time of when it happened.\r\n *\r\n * @property {boolean} success\r\n * Once the operation has finished, this property indicates whether it was successful.\r\n *\r\n * @property {*} result\r\n * Once the operation has finished, this property contains the result, depending on property `success`:\r\n * - data resolved by the operation, if `success = true`\r\n * - error / rejection reason, if `success = false`\r\n *\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {Events} = require('./events');\r\nconst {assert} = require('./assert');\r\nconst {resultQuery, multiResultQuery, streamQuery} = require('./special-query');\r\nconst {ConnectionContext} = require('./context');\r\nconst {DatabasePool} = require('./database-pool');\r\nconst {queryResult} = require('./query-result');\r\n\r\nconst npm = {\r\n    utils: require('./utils'),\r\n    pubUtils: require('./utils/public'),\r\n    connect: require('./connect'),\r\n    query: require('./query'),\r\n    task: require('./task'),\r\n    text: require('./text')\r\n};\r\n\r\n/**\r\n * @class Database\r\n * @description\r\n *\r\n * Represents the database protocol, extensible via event {@link event:extend extend}.\r\n * This type is not available directly, it can only be created via the library's base call.\r\n *\r\n * **IMPORTANT:**\r\n *\r\n * For any given connection, you should only create a single {@link Database} object in a separate module,\r\n * to be shared in your application (see the code example below). If instead you keep creating the {@link Database}\r\n * object dynamically, your application will suffer from loss in performance, and will be getting a warning in a\r\n * development environment (when `NODE_ENV` = `development`):\r\n *\r\n * `WARNING: Creating a duplicate database object for the same connection.`\r\n *\r\n * If you ever see this warning, rectify your {@link Database} object initialization, so there is only one object\r\n * per connection details. See the example provided below.\r\n *\r\n * See also: property `noWarnings` in {@link module:pg-promise Initialization Options}.\r\n *\r\n * Note however, that in special cases you may need to re-create the database object, if its connection pool has been\r\n * shut-down externally. And in this case the library won't be showing any warning.\r\n *\r\n * @param {string|object} cn\r\n * Database connection details, which can be:\r\n *\r\n * - a configuration object\r\n * - a connection string\r\n *\r\n * For details see {@link https://github.com/vitaly-t/pg-promise/wiki/Connection-Syntax Connection Syntax}.\r\n *\r\n * The value can be accessed from the database object via property {@link Database.$cn $cn}.\r\n *\r\n * @param {*} [dc]\r\n * Database Context.\r\n *\r\n * Any object or value to be propagated through the protocol, to allow implementations and event handling\r\n * that depend on the database context.\r\n *\r\n * This is mainly to facilitate the use of multiple databases which may need separate protocol extensions,\r\n * or different implementations within a single task / transaction callback, depending on the database context.\r\n *\r\n * This parameter also adds uniqueness to the connection context that's used in combination with the connection\r\n * parameters, i.e. use of unique database context will prevent getting the warning about creating a duplicate\r\n * Database object.\r\n *\r\n * The value can be accessed from the database object via property {@link Database#$dc $dc}.\r\n *\r\n * @returns {Database}\r\n *\r\n * @see\r\n *\r\n * {@link Database#query query},\r\n * {@link Database#none none},\r\n * {@link Database#one one},\r\n * {@link Database#oneOrNone oneOrNone},\r\n * {@link Database#many many},\r\n * {@link Database#manyOrNone manyOrNone},\r\n * {@link Database#any any},\r\n * {@link Database#func func},\r\n * {@link Database#proc proc},\r\n * {@link Database#result result},\r\n * {@link Database#multiResult multiResult},\r\n * {@link Database#multi multi},\r\n * {@link Database#map map},\r\n * {@link Database#each each},\r\n * {@link Database#stream stream},\r\n * {@link Database#task task},\r\n * {@link Database#taskIf taskIf},\r\n * {@link Database#tx tx},\r\n * {@link Database#txIf txIf},\r\n * {@link Database#connect connect},\r\n * {@link Database#$config $config},\r\n * {@link Database#$cn $cn},\r\n * {@link Database#$dc $dc},\r\n * {@link Database#$pool $pool},\r\n * {@link event:extend extend}\r\n *\r\n * @example\r\n * // Proper way to initialize and share the Database object\r\n *\r\n * // Loading and initializing the library:\r\n * const pgp = require('pg-promise')({\r\n *     // Initialization Options\r\n * });\r\n *\r\n * // Preparing the connection details:\r\n * const cn = 'postgres://username:password@host:port/database';\r\n *\r\n * // Creating a new database instance from the connection details:\r\n * const db = pgp(cn);\r\n *\r\n * // Exporting the database object for shared use:\r\n * module.exports = db;\r\n */\r\nfunction Database(cn, dc, config) {\r\n\r\n    const dbThis = this,\r\n        $p = config.promise,\r\n        poolConnection = typeof cn === 'string' ? {connectionString: cn} : cn,\r\n        pool = new config.pgp.pg.Pool(poolConnection),\r\n        endMethod = pool.end;\r\n\r\n    let destroyed;\r\n\r\n    pool.end = cb => {\r\n        const res = endMethod.call(pool, cb);\r\n        dbThis.$destroy();\r\n        return res;\r\n    };\r\n\r\n    pool.on('error', onError);\r\n\r\n    /**\r\n     * @method Database#connect\r\n     *\r\n     * @description\r\n     * Acquires a new or existing connection, depending on the current state of the connection pool, and parameter `direct`.\r\n     *\r\n     * This method creates a shared connection for executing a chain of queries against it. The connection must be released\r\n     * in the end of the chain by calling `done()` on the connection object.\r\n     *\r\n     * Method `done` takes one optional parameter - boolean `kill` flag, to signal the connection pool that you want it to kill\r\n     * the physical connection. This flag is ignored for direct connections, as they always close when released.\r\n     *\r\n     * It should not be used just for chaining queries on the same connection, methods {@link Database#task task} and\r\n     * {@link Database#tx tx} (for transactions) are to be used for that. This method is primarily for special cases, like\r\n     * `LISTEN` notifications.\r\n     *\r\n     * **NOTE:** Even though this method exposes a {@link external:Client Client} object via property `client`,\r\n     * you cannot call `client.end()` directly, or it will print an error into the console:\r\n     * `Abnormal client.end() call, due to invalid code or failed server connection.`\r\n     * You should only call method `done()` to release the connection.\r\n     *\r\n     * @param {object} [options]\r\n     * Connection Options.\r\n     *\r\n     * @param {boolean} [options.direct=false]\r\n     * Creates a new connection directly, as a stand-alone {@link external:Client Client} object, bypassing the connection pool.\r\n     *\r\n     * By default, all connections are acquired from the connection pool. But if you set this option, the library will instead\r\n     * create a new {@link external:Client Client} object directly (separately from the pool), and then call its `connect` method.\r\n     *\r\n     * Note that specifically for direct connections, method `done` returns a {@link external:Promise Promise}, because those connections\r\n     * are closed physically, which may take time.\r\n     *\r\n     * **WARNING:**\r\n     *\r\n     * Do not use this option for regular query execution, because it exclusively occupies one physical channel, and it cannot scale.\r\n     * This option is only suitable for global connection usage, such as event listeners.\r\n     *\r\n     * @param {function} [options.onLost]\r\n     * Notification callback of the lost/broken connection, called with the following parameters:\r\n     *  - `err` - the original connectivity error\r\n     *  - `e` - error context object, which contains:\r\n     *    - `cn` - safe connection string/config (with the password hashed);\r\n     *    - `dc` - Database Context, as was used during {@link Database} construction;\r\n     *    - `start` - Date/Time (`Date` type) when the connection was established;\r\n     *    - `client` - {@link external:Client Client} object that has lost the connection.\r\n     *\r\n     * The notification is mostly valuable with `direct: true`, to be able to re-connect direct/permanent connections by calling\r\n     * method {@link Database#connect connect} again.\r\n     *\r\n     * You do not need to call `done` on lost connections, as it happens automatically. However, if you had event listeners\r\n     * set up on the connection's `client` object, you should remove them to avoid leaks:\r\n     *\r\n     * ```js\r\n     * function onLostConnection(err, e) {\r\n     *     e.client.removeListener('my-event', myHandler);\r\n     * }\r\n     * ```\r\n     *\r\n     * For a complete example see $[Robust Listeners].\r\n     *\r\n     * @returns {external:Promise}\r\n     * A promise object that represents the connection result:\r\n     *  - resolves with the complete {@link Database} protocol, extended with:\r\n     *    - property `client` of type {@link external:Client Client} that represents the open connection\r\n     *    - method `done` that must be called in the end, in order to release the connection (returns a {@link external:Promise Promise}\r\n     *      in case of direct connections)\r\n     *    - methods `batch`, `page` and `sequence`, same as inside a {@link Task}\r\n     *  - rejects with a connection-related error when it fails to connect.\r\n     *\r\n     * @see\r\n     * {@link Database#task Database.task},\r\n     * {@link Database#taskIf Database.taskIf},\r\n     * {@link Database#tx Database.tx},\r\n     * {@link Database#txIf Database.txIf}\r\n     *\r\n     * @example\r\n     *\r\n     * let sco; // shared connection object;\r\n     *\r\n     * db.connect()\r\n     *     .then(obj => {\r\n     *         // obj.client = new connected Client object;\r\n     *\r\n     *         sco = obj; // save the connection object;\r\n     *\r\n     *         // execute all the queries you need:\r\n     *         return sco.any('SELECT * FROM Users');\r\n     *     })\r\n     *     .then(data => {\r\n     *         // success\r\n     *     })\r\n     *     .catch(error => {\r\n     *         // error\r\n     *     })\r\n     *     .finally(() => {\r\n     *         // release the connection, if it was successful:\r\n     *         if (sco) {\r\n     *             // if you pass `true` into method done, i.e. done(true),\r\n     *             // it will make the pool kill the physical connection.\r\n     *             sco.done();\r\n     *         }\r\n     *     });\r\n     *\r\n     */\r\n    this.connect = function (options) {\r\n        options = options || {};\r\n        const ctx = createContext();\r\n        ctx.cnOptions = options;\r\n        const self = {\r\n            query(query, values, qrm) {\r\n                if (!ctx.db) {\r\n                    return $p.reject(new Error(npm.text.queryDisconnected));\r\n                }\r\n                return config.$npm.query.call(this, ctx, query, values, qrm);\r\n            },\r\n            done(kill) {\r\n                if (!ctx.db) {\r\n                    throw new Error(npm.text.looseQuery);\r\n                }\r\n                return ctx.disconnect(kill);\r\n            },\r\n            batch(values, opt) {\r\n                return config.$npm.spex.batch.call(this, values, opt);\r\n            },\r\n            page(source, opt) {\r\n                return config.$npm.spex.page.call(this, source, opt);\r\n            },\r\n            sequence(source, opt) {\r\n                return config.$npm.spex.sequence.call(this, source, opt);\r\n            }\r\n        };\r\n        const connection = options.direct ? config.$npm.connect.direct(ctx) : config.$npm.connect.pool(ctx, dbThis);\r\n        return connection\r\n            .then(db => {\r\n                ctx.connect(db);\r\n                self.client = db.client;\r\n                extend(ctx, self);\r\n                return self;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * @method Database#query\r\n     *\r\n     * @description\r\n     * Base query method that executes a generic query, expecting the return data according to parameter `qrm`.\r\n     *\r\n     * It performs the following steps:\r\n     *\r\n     *  1. Validates and formats the query via {@link formatting.format as.format}, according to the `query` and `values` passed in;\r\n     *  2. For a root-level query (against the {@link Database} object), it requests a new connection from the pool;\r\n     *  3. Executes the query;\r\n     *  4. For a root-level query (against the {@link Database} object), it releases the connection back to the pool;\r\n     *  5. Resolves/rejects, according to the data returned from the query and the value of `qrm`.\r\n     *\r\n     * Direct use of this method is not suitable for chaining queries, for performance reasons. It should be done\r\n     * through either task or transaction context, see $[Chaining Queries].\r\n     *\r\n     * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n     *\r\n     * @param {string|function|object} query\r\n     * Query to be executed, which can be any of the following types:\r\n     * - A non-empty query string\r\n     * - A function that returns a query string or another function, i.e. recursive resolution\r\n     *   is supported, passing in `values` as `this`, and as the first parameter.\r\n     * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n     * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n     * - {@link QueryFile} object\r\n     *\r\n     * @param {array|value|function} [values]\r\n     * Query formatting parameter(s), or a function that returns it.\r\n     *\r\n     * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n     * - a single value - to replace all `$1` occurrences\r\n     * - an array of values - to replace all `$1`, `$2`, ... variables\r\n     * - an object - to apply $[Named Parameters] formatting\r\n     *\r\n     * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n     * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n     * as an override for its internal `values`.\r\n     *\r\n     * @param {queryResult} [qrm=queryResult.any]\r\n     * {@link queryResult Query Result Mask}\r\n     *\r\n     * @returns {external:Promise}\r\n     * A promise object that represents the query result according to `qrm`.\r\n     */\r\n    this.query = function (query, values, qrm) {\r\n        const self = this, ctx = createContext();\r\n        return config.$npm.connect.pool(ctx, dbThis)\r\n            .then(db => {\r\n                ctx.connect(db);\r\n                return config.$npm.query.call(self, ctx, query, values, qrm);\r\n            })\r\n            .then(data => {\r\n                ctx.disconnect();\r\n                return data;\r\n            })\r\n            .catch(error => {\r\n                ctx.disconnect();\r\n                return $p.reject(error);\r\n            });\r\n    };\r\n\r\n    /**\r\n     * @member {object} Database#$config\r\n     * @readonly\r\n     * @description\r\n     * This is a hidden property, to help integrating type {@link Database} directly with third-party libraries.\r\n     *\r\n     * Properties available in the object:\r\n     * - `pgp` - instance of the entire library after initialization\r\n     * - `options` - the library's {@link module:pg-promise Initialization Options} object\r\n     * - `promiseLib` - instance of the promise library that's used\r\n     * - `promise` - generic promise interface that uses `promiseLib` via 4 basic methods:\r\n     *   - `promise((resolve, reject) => {})` - to create a new promise\r\n     *   - `promise.resolve(value)` - to resolve with a value\r\n     *   - `promise.reject(reason)` - to reject with a reason\r\n     *   - `promise.all(iterable)` - to resolve an iterable list of promises\r\n     * - `version` - this library's version\r\n     * - `$npm` _(hidden property)_ - internal module cache\r\n     *\r\n     * @example\r\n     *\r\n     * // Using the promise protocol as configured by pg-promise:\r\n     *\r\n     * const $p = db.$config.promise;\r\n     *\r\n     * const resolvedPromise = $p.resolve('some data');\r\n     * const rejectedPromise = $p.reject('some reason');\r\n     *\r\n     * const newPromise = $p((resolve, reject) => {\r\n     *     // call either resolve(data) or reject(reason) here\r\n     * });\r\n     */\r\n    npm.utils.addReadProp(this, '$config', config, true);\r\n\r\n    /**\r\n     * @member {string|object} Database#$cn\r\n     * @readonly\r\n     * @description\r\n     * Database connection, as was passed in during the object's construction.\r\n     *\r\n     * This is a hidden property, to help integrating type {@link Database} directly with third-party libraries.\r\n     *\r\n     * @see Database\r\n     */\r\n    npm.utils.addReadProp(this, '$cn', cn, true);\r\n\r\n    /**\r\n     * @member {*} Database#$dc\r\n     * @readonly\r\n     * @description\r\n     * Database Context, as was passed in during the object's construction.\r\n     *\r\n     * This is a hidden property, to help integrating type {@link Database} directly with third-party libraries.\r\n     *\r\n     * @see Database\r\n     */\r\n    npm.utils.addReadProp(this, '$dc', dc, true);\r\n\r\n    /**\r\n     * @member {external:pg-pool} Database#$pool\r\n     * @readonly\r\n     * @description\r\n     * A $[pg-pool] object associated with the database object, as each {@link Database} creates its own $[pg-pool] instance.\r\n     *\r\n     * This is a hidden property, primarily for integrating type {@link Database} with third-party libraries that support\r\n     * $[pg-pool] directly. Note however, that if you pass the pool object into a library that calls `pool.end()`, you will no longer be able\r\n     * to use this {@link Database} object, and each query method will be rejecting with {@link external:Error Error} =\r\n     * `Connection pool of the database object has been destroyed.`\r\n     *\r\n     * You can also use this object to shut down the pool, by calling `$pool.end()`.\r\n     *\r\n     * For more details see $[Library de-initialization].\r\n     *\r\n     * @see\r\n     * {@link Database}\r\n     * {@link module:pg-promise~end pgp.end}\r\n     *\r\n     * @example\r\n     *\r\n     * // Shutting down the connection pool of this database object,\r\n     * // after all queries have finished in a run-though process:\r\n     *\r\n     * .then(() => {}) // processing the data\r\n     * .catch() => {}) // handling the error\r\n     * .finally(db.$pool.end); // shutting down the pool\r\n     *\r\n     */\r\n    npm.utils.addReadProp(this, '$pool', pool, true);\r\n\r\n    /**\r\n     * @member {function} Database.$destroy\r\n     * @readonly\r\n     * @private\r\n     * @description\r\n     * Permanently shuts down the database object.\r\n     */\r\n    npm.utils.addReadProp(this, '$destroy', () => {\r\n        if (!destroyed) {\r\n            if (!pool.ending) {\r\n                endMethod.call(pool);\r\n            }\r\n            DatabasePool.unregister(dbThis);\r\n            pool.removeListener('error', onError);\r\n            destroyed = true;\r\n        }\r\n    }, true);\r\n\r\n    DatabasePool.register(this);\r\n\r\n    extend(createContext(), this); // extending root protocol;\r\n\r\n    function createContext() {\r\n        return new ConnectionContext({cn, dc, options: config.options});\r\n    }\r\n\r\n    // Optional value-transformation helper:\r\n    function transform(value, cb, thisArg) {\r\n        return typeof cb === 'function' ? value.then(data => cb.call(thisArg, data)) : value;\r\n    }\r\n\r\n    ////////////////////////////////////////////////////\r\n    // Injects additional methods into an access object,\r\n    // extending the protocol's base method 'query'.\r\n    function extend(ctx, obj) {\r\n\r\n        /**\r\n         * @method Database#none\r\n         * @description\r\n         * Executes a query that expects no data to be returned. If the query returns any data,\r\n         * the method rejects.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @returns {external:Promise<null>}\r\n         * A promise object that represents the query result:\r\n         * - When no records are returned, it resolves with `null`.\r\n         * - When any data is returned, it rejects with {@link errors.QueryResultError QueryResultError}:\r\n         *   - `.message` = `No return data was expected.`\r\n         *   - `.code` = {@link errors.queryResultErrorCode.notEmpty queryResultErrorCode.notEmpty}\r\n         */\r\n        obj.none = function (query, values) {\r\n            return obj.query.call(this, query, values, queryResult.none);\r\n        };\r\n\r\n        /**\r\n         * @method Database#one\r\n         * @description\r\n         * Executes a query that expects exactly 1 row to be returned. When 0 or more than 1 rows are returned,\r\n         * the method rejects.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @param {function} [cb]\r\n         * Value-transformation callback, to allow in-line value change.\r\n         * When specified, the returned value replaces the original one.\r\n         *\r\n         * The function takes only one parameter - value resolved from the query.\r\n         *\r\n         * @param {*} [thisArg]\r\n         * Value to use as `this` when executing the transformation callback.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object that represents the query result:\r\n         * - When 1 row is returned, it resolves with that row as a single object.\r\n         * - When no rows are returned, it rejects with {@link errors.QueryResultError QueryResultError}:\r\n         *   - `.message` = `No data returned from the query.`\r\n         *   - `.code` = {@link errors.queryResultErrorCode.noData queryResultErrorCode.noData}\r\n         * - When multiple rows are returned, it rejects with {@link errors.QueryResultError QueryResultError}:\r\n         *   - `.message` = `Multiple rows were not expected.`\r\n         *   - `.code` = {@link errors.queryResultErrorCode.multiple queryResultErrorCode.multiple}\r\n         * - Resolves with the new value, if transformation callback `cb` was specified.\r\n         *\r\n         * @see\r\n         * {@link Database#oneOrNone oneOrNone}\r\n         *\r\n         * @example\r\n         *\r\n         * // a query with in-line value transformation:\r\n         * db.one('INSERT INTO Events VALUES($1) RETURNING id', [123], event => event.id)\r\n         *     .then(data => {\r\n         *         // data = a new event id, rather than an object with it\r\n         *     });\r\n         *\r\n         * @example\r\n         *\r\n         * // a query with in-line value transformation + conversion:\r\n         * db.one('SELECT count(*) FROM Users', [], c => +c.count)\r\n         *     .then(count => {\r\n         *         // count = a proper integer value, rather than an object with a string\r\n         *     });\r\n         *\r\n         */\r\n        obj.one = function (query, values, cb, thisArg) {\r\n            const v = obj.query.call(this, query, values, queryResult.one);\r\n            return transform(v, cb, thisArg);\r\n        };\r\n\r\n        /**\r\n         * @method Database#many\r\n         * @description\r\n         * Executes a query that expects one or more rows to be returned. When the query returns no rows, the method rejects.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object that represents the query result:\r\n         * - When 1 or more rows are returned, it resolves with the array of rows.\r\n         * - When no rows are returned, it rejects with {@link errors.QueryResultError QueryResultError}:\r\n         *   - `.message` = `No data returned from the query.`\r\n         *   - `.code` = {@link errors.queryResultErrorCode.noData queryResultErrorCode.noData}\r\n         */\r\n        obj.many = function (query, values) {\r\n            return obj.query.call(this, query, values, queryResult.many);\r\n        };\r\n\r\n        /**\r\n         * @method Database#oneOrNone\r\n         * @description\r\n         * Executes a query that expects 0 or 1 rows to be returned. It resolves with the row-object when 1 row is returned,\r\n         * or with `null` when nothing is returned. When the query returns more than 1 row, the method rejects.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @param {function} [cb]\r\n         * Value-transformation callback, to allow in-line value change.\r\n         * When specified, the returned value replaces the original one.\r\n         *\r\n         * The function takes only one parameter - value resolved from the query.\r\n         *\r\n         * @param {*} [thisArg]\r\n         * Value to use as `this` when executing the transformation callback.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object that represents the query result:\r\n         * - When no rows are returned, it resolves with `null`.\r\n         * - When 1 row is returned, it resolves with that row as a single object.\r\n         * - When multiple rows are returned, it rejects with {@link errors.QueryResultError QueryResultError}:\r\n         *   - `.message` = `Multiple rows were not expected.`\r\n         *   - `.code` = {@link errors.queryResultErrorCode.multiple queryResultErrorCode.multiple}\r\n         * - Resolves with the new value, if transformation callback `cb` was specified.\r\n         *\r\n         * @see\r\n         * {@link Database#one one},\r\n         * {@link Database#none none},\r\n         * {@link Database#manyOrNone manyOrNone}\r\n         *\r\n         * @example\r\n         *\r\n         * // a query with in-line value transformation:\r\n         * db.oneOrNone('SELECT id FROM Events WHERE type = $1', ['entry'], e => e && e.id)\r\n         *     .then(data => {\r\n         *         // data = the event id or null (rather than object or null)\r\n         *     });\r\n         *\r\n         */\r\n        obj.oneOrNone = function (query, values, cb, thisArg) {\r\n            const v = obj.query.call(this, query, values, queryResult.one | queryResult.none);\r\n            return transform(v, cb, thisArg);\r\n        };\r\n\r\n        /**\r\n         * @method Database#manyOrNone\r\n         * @description\r\n         * Executes a query that can return any number of rows.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @returns {external:Promise<Array>}\r\n         * A promise object that represents the query result:\r\n         * - When no rows are returned, it resolves with an empty array.\r\n         * - When 1 or more rows are returned, it resolves with the array of rows.\r\n         *\r\n         * @see\r\n         * {@link Database#any any},\r\n         * {@link Database#many many},\r\n         * {@link Database#none none}\r\n         *\r\n         */\r\n        obj.manyOrNone = function (query, values) {\r\n            return obj.query.call(this, query, values, queryResult.many | queryResult.none);\r\n        };\r\n\r\n        /**\r\n         * @method Database#any\r\n         * @description\r\n         * Executes a query that can return any number of rows.\r\n         * This is simply a shorter alias for method {@link Database#manyOrNone manyOrNone}.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @returns {external:Promise<Array>}\r\n         * A promise object that represents the query result:\r\n         * - When no rows are returned, it resolves with an empty array.\r\n         * - When 1 or more rows are returned, it resolves with the array of rows.\r\n         *\r\n         * @see\r\n         * {@link Database#manyOrNone manyOrNone},\r\n         * {@link Database#map map},\r\n         * {@link Database#each each}\r\n         *\r\n         */\r\n        obj.any = function (query, values) {\r\n            return obj.query.call(this, query, values, queryResult.any);\r\n        };\r\n\r\n        /**\r\n         * @method Database#result\r\n         * @description\r\n         * Executes a query without any expectation for the return data, and resolves with the\r\n         * original $[Result] object when successful.\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @param {function} [cb]\r\n         * Value-transformation callback, to allow in-line value change.\r\n         * When specified, the returned value replaces the original one.\r\n         *\r\n         * The function takes only one parameter - value resolved from the query.\r\n         *\r\n         * @param {*} [thisArg]\r\n         * Value to use as `this` when executing the transformation callback.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object that represents the query result:\r\n         * - resolves with the original $[Result] object (by default);\r\n         * - resolves with the new value, if transformation callback `cb` was specified.\r\n         *\r\n         * @example\r\n         *\r\n         * // use of value transformation:\r\n         * // deleting rows and returning the number of rows deleted\r\n         * db.result('DELETE FROM Events WHERE id = $1', [123], r => r.rowCount)\r\n         *     .then(data => {\r\n         *         // data = number of rows that were deleted\r\n         *     });\r\n         *\r\n         * @example\r\n         *\r\n         * // use of value transformation:\r\n         * // getting only column details from a table\r\n         * db.result('SELECT * FROM Users LIMIT 0', null, r => r.fields)\r\n         *     .then(data => {\r\n         *         // data = array of column descriptors\r\n         *     });\r\n         *\r\n         */\r\n        obj.result = function (query, values, cb, thisArg) {\r\n            const v = obj.query.call(this, query, values, resultQuery);\r\n            return transform(v, cb, thisArg);\r\n        };\r\n\r\n        /**\r\n         * @method Database#multiResult\r\n         * @description\r\n         * Executes a multi-query string, without any expectation for the return data, and resolves with an array\r\n         * of the original $[Result] objects when successful.\r\n         *\r\n         * The operation is atomic, i.e. all queries are executed in a single transaction, unless there are explicit\r\n         * `BEGIN/COMMIT` commands included in the query string to divide it into multiple transactions.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Multi-query string to be executed, which can be any of the following types:\r\n         * - A non-empty string that can contain any number of queries\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @returns {external:Promise<external:Result[]>}\r\n         *\r\n         * @see {@link Database#multi multi}\r\n         *\r\n         */\r\n        obj.multiResult = function (query, values) {\r\n            return obj.query.call(this, query, values, multiResultQuery);\r\n        };\r\n\r\n        /**\r\n         * @method Database#multi\r\n         * @description\r\n         * Executes a multi-query string, without any expectation for the return data, and resolves with an array\r\n         * of arrays of rows when successful.\r\n         *\r\n         * The operation is atomic, i.e. all queries are executed in a single transaction, unless there are explicit\r\n         * `BEGIN/COMMIT` commands included in the query string to divide it into multiple transactions.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Multi-query string to be executed, which can be any of the following types:\r\n         * - A non-empty string that can contain any number of queries\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @returns {external:Promise<Array<Array>>}\r\n         *\r\n         * @see {@link Database#multiResult multiResult}\r\n         *\r\n         * @example\r\n         *\r\n         * // Get data from 2 tables in a single request:\r\n         * const [users, products] = await db.multi('SELECT * FROM users;SELECT * FROM products');\r\n         *\r\n         */\r\n        obj.multi = function (query, values) {\r\n            return obj.query.call(this, query, values, multiResultQuery)\r\n                .then(data => data.map(a => a.rows));\r\n        };\r\n\r\n        /**\r\n         * @method Database#stream\r\n         * @description\r\n         * Custom data streaming, with the help of $[pg-query-stream].\r\n         *\r\n         * This method doesn't work with the $[Native Bindings], and if option `pgNative`\r\n         * is set, it will reject with `Streaming doesn't work with Native Bindings.`\r\n         *\r\n         * @param {QueryStream} qs\r\n         * Stream object of type $[QueryStream].\r\n         *\r\n         * @param {Database.streamInitCB} initCB\r\n         * Stream initialization callback.\r\n         *\r\n         * It is invoked with the same `this` context as the calling method.\r\n         *\r\n         * @returns {external:Promise}\r\n         * Result of the streaming operation.\r\n         *\r\n         * Once the streaming has finished successfully, the method resolves with\r\n         * `{processed, duration}`:\r\n         * - `processed` - total number of rows processed;\r\n         * - `duration` - streaming duration, in milliseconds.\r\n         *\r\n         * Possible rejections messages:\r\n         * - `Invalid or missing stream object.`\r\n         * - `Invalid stream state.`\r\n         * - `Invalid or missing stream initialization callback.`\r\n         */\r\n        obj.stream = function (qs, init) {\r\n            return obj.query.call(this, qs, init, streamQuery);\r\n        };\r\n\r\n        /**\r\n         * @method Database#func\r\n         * @description\r\n         * Executes a database function that returns a table, abbreviating the full syntax\r\n         * of `query('SELECT * FROM $1:alias($2:csv)', [funcName, values], qrm)`.\r\n         *\r\n         * @param {string} funcName\r\n         * Name of the function to be executed.\r\n         * When it is not same-case, or contains extended symbols, it is double-quoted, as per the `:alias` filter,\r\n         * which also supports `.`, to auto-split into a composite name.\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Parameters for the function - one value | array of values | function returning value(s).\r\n         *\r\n         * @param {queryResult} [qrm=queryResult.any] - {@link queryResult Query Result Mask}.\r\n         *\r\n         * @returns {external:Promise}\r\n         *\r\n         * A promise object as returned from method {@link Database#query query}, according to parameter `qrm`.\r\n         *\r\n         * @see\r\n         * {@link Database#query query},\r\n         * {@link Database#proc proc}\r\n         */\r\n        obj.func = function (funcName, values, qrm) {\r\n            return obj.query.call(this, {entity: funcName, type: 'func'}, values, qrm);\r\n        };\r\n\r\n        /**\r\n         * @method Database#proc\r\n         * @description\r\n         * Executes a stored procedure by name, abbreviating the full syntax of\r\n         * `oneOrNone('CALL $1:alias($2:csv)', [procName, values], cb, thisArg)`.\r\n         *\r\n         * **NOTE:** This method uses the new `CALL` syntax that requires PostgreSQL v11 or later.\r\n         *\r\n         * @param {string} procName\r\n         * Name of the stored procedure to be executed.\r\n         * When it is not same-case, or contains extended symbols, it is double-quoted, as per the `:alias` filter,\r\n         * which also supports `.`, to auto-split into a composite SQL name.\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Parameters for the procedure - one value | array of values | function returning value(s).\r\n         *\r\n         * @param {function} [cb]\r\n         * Value-transformation callback, to allow in-line value change.\r\n         * When specified, the returned value replaces the original one.\r\n         *\r\n         * The function takes only one parameter - value resolved from the query.\r\n         *\r\n         * @param {*} [thisArg]\r\n         * Value to use as `this` when executing the transformation callback.\r\n         *\r\n         * @returns {external:Promise}\r\n         * When the procedure takes output parameters, a single object is returned, with\r\n         * properties for the output values. Otherwise, the method resolves with `null`.\r\n         * And if the value-transformation callback is provided, it overrides the result.\r\n         *\r\n         * @see\r\n         * {@link Database#func func}\r\n         */\r\n        obj.proc = function (procName, values, cb, thisArg) {\r\n            const v = obj.query.call(this, {\r\n                entity: procName,\r\n                type: 'proc'\r\n            }, values, queryResult.one | queryResult.none);\r\n            return transform(v, cb, thisArg);\r\n        };\r\n\r\n        /**\r\n         * @method Database#map\r\n         * @description\r\n         * Creates a new array with the results of calling a provided function on every element in the array of rows\r\n         * resolved by method {@link Database#any any}.\r\n         *\r\n         * It is a convenience method, to reduce the following code:\r\n         *\r\n         * ```js\r\n         * db.any(query, values)\r\n         *     .then(data => {\r\n         *         return data.map((row, index, data) => {\r\n         *              // return a new element\r\n         *         });\r\n         *     });\r\n         * ```\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} values\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @param {function} cb\r\n         * Function that produces an element of the new array, taking three arguments:\r\n         * - `row` - the current row object being processed in the array\r\n         * - `index` - the index of the current row being processed in the array\r\n         * - `data` - the original array of rows resolved by method {@link Database#any any}\r\n         *\r\n         * @param {*} [thisArg]\r\n         * Value to use as `this` when executing the callback.\r\n         *\r\n         * @returns {external:Promise<Array>}\r\n         * Resolves with the new array of values returned from the callback.\r\n         *\r\n         * @see\r\n         * {@link Database#any any},\r\n         * {@link Database#each each},\r\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map Array.map}\r\n         *\r\n         * @example\r\n         *\r\n         * db.map('SELECT id FROM Users WHERE status = $1', ['active'], row => row.id)\r\n         *     .then(data => {\r\n         *         // data = array of active user id-s\r\n         *     })\r\n         *     .catch(error => {\r\n         *        // error\r\n         *     });\r\n         *\r\n         * @example\r\n         *\r\n         * db.tx(t => {\r\n         *     return t.map('SELECT id FROM Users WHERE status = $1', ['active'], row => {\r\n         *        return t.none('UPDATE Events SET checked = $1 WHERE userId = $2', [true, row.id]);\r\n         *     }).then(t.batch);\r\n         * })\r\n         *     .then(data => {\r\n         *         // success\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         * @example\r\n         *\r\n         * // Build a list of active users, each with the list of user events:\r\n         * db.task(t => {\r\n         *     return t.map('SELECT id FROM Users WHERE status = $1', ['active'], user => {\r\n         *         return t.any('SELECT * FROM Events WHERE userId = $1', user.id)\r\n         *             .then(events=> {\r\n         *                 user.events = events;\r\n         *                 return user;\r\n         *             });\r\n         *     }).then(t.batch);\r\n         * })\r\n         *     .then(data => {\r\n         *         // success\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         */\r\n        obj.map = function (query, values, cb, thisArg) {\r\n            return obj.any.call(this, query, values)\r\n                .then(data => data.map(cb, thisArg));\r\n        };\r\n\r\n        /**\r\n         * @method Database#each\r\n         * @description\r\n         * Executes a provided function once per array element, for an array of rows resolved by method {@link Database#any any}.\r\n         *\r\n         * It is a convenience method to reduce the following code:\r\n         *\r\n         * ```js\r\n         * db.any(query, values)\r\n         *     .then(data => {\r\n         *         data.forEach((row, index, data) => {\r\n         *              // process the row\r\n         *         });\r\n         *         return data;\r\n         *     });\r\n         * ```\r\n         *\r\n         * When receiving a multi-query result, only the last result is processed, ignoring the rest.\r\n         *\r\n         * @param {string|function|object} query\r\n         * Query to be executed, which can be any of the following types:\r\n         * - A non-empty query string\r\n         * - A function that returns a query string or another function, i.e. recursive resolution\r\n         *   is supported, passing in `values` as `this`, and as the first parameter.\r\n         * - Prepared Statement `{name, text, values, ...}` or {@link PreparedStatement} object\r\n         * - Parameterized Query `{text, values, ...}` or {@link ParameterizedQuery} object\r\n         * - {@link QueryFile} object\r\n         *\r\n         * @param {array|value|function} [values]\r\n         * Query formatting parameter(s), or a function that returns it.\r\n         *\r\n         * When `query` is of type `string` or a {@link QueryFile} object, the `values` can be:\r\n         * - a single value - to replace all `$1` occurrences\r\n         * - an array of values - to replace all `$1`, `$2`, ... variables\r\n         * - an object - to apply $[Named Parameters] formatting\r\n         *\r\n         * When `query` is a Prepared Statement or a Parameterized Query (or their class types),\r\n         * and `values` is not `null` or `undefined`, it is automatically set within such object,\r\n         * as an override for its internal `values`.\r\n         *\r\n         * @param {function} cb\r\n         * Function to execute for each row, taking three arguments:\r\n         * - `row` - the current row object being processed in the array\r\n         * - `index` - the index of the current row being processed in the array\r\n         * - `data` - the array of rows resolved by method {@link Database#any any}\r\n         *\r\n         * @param {*} [thisArg]\r\n         * Value to use as `this` when executing the callback.\r\n         *\r\n         * @returns {external:Promise<Array<Object>>}\r\n         * Resolves with the original array of rows.\r\n         *\r\n         * @see\r\n         * {@link Database#any any},\r\n         * {@link Database#map map},\r\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach Array.forEach}\r\n         *\r\n         * @example\r\n         *\r\n         * db.each('SELECT id, code, name FROM Events', [], row => {\r\n         *     row.code = parseInt(row.code);\r\n         * })\r\n         *     .then(data => {\r\n         *         // data = array of events, with 'code' converted into integer\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         */\r\n        obj.each = function (query, values, cb, thisArg) {\r\n            return obj.any.call(this, query, values)\r\n                .then(data => {\r\n                    data.forEach(cb, thisArg);\r\n                    return data;\r\n                });\r\n        };\r\n\r\n        /**\r\n         * @method Database#task\r\n         * @description\r\n         * Executes a callback function with automatically managed connection.\r\n         *\r\n         * When invoked on the root {@link Database} object, the method allocates the connection from the pool,\r\n         * executes the callback, and once finished - releases the connection back to the pool.\r\n         * However, when invoked inside another task or transaction, the method reuses the parent connection.\r\n         *\r\n         * This method should be used whenever executing more than one query at once, so the allocated connection\r\n         * is reused between all queries, and released only after the task has finished (see $[Chaining Queries]).\r\n         *\r\n         * The callback function is called with one parameter - database protocol (same as `this`), extended with methods\r\n         * {@link Task#batch batch}, {@link Task#page page}, {@link Task#sequence sequence}, plus property {@link Task#ctx ctx} -\r\n         * the task context object. See class {@link Task} for more details.\r\n         *\r\n         * @param {string|number|Object} [options]\r\n         * This parameter is optional, and presumed skipped when the first parameter is a function (`cb` parameter).\r\n         *\r\n         * When it is of type `string` or `number`, it is assumed to be option `tag` passed in directly. Otherwise,\r\n         * it is expected to be an object with options as listed below.\r\n         *\r\n         * @param {} [options.tag]\r\n         * Traceable context for the task (see $[tags]).\r\n         *\r\n         * @param {function} cb\r\n         * Task callback function, to return the result that will determine either success or failure for the operation.\r\n         *\r\n         * The function can be either the first of the second parameter passed into the method.\r\n         *\r\n         * It also can be an ES7 `async` function.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object with the result from the callback function.\r\n         *\r\n         * @see\r\n         * {@link Task},\r\n         * {@link Database#taskIf taskIf},\r\n         * {@link Database#tx tx},\r\n         * $[tags],\r\n         * $[Chaining Queries]\r\n         *\r\n         * @example\r\n         *\r\n         * db.task('my-task', t => {\r\n         *         // t.ctx = task context object\r\n         *\r\n         *         return t.one('SELECT id FROM Users WHERE name = $1', 'John')\r\n         *             .then(user => {\r\n         *                 return t.any('SELECT * FROM Events WHERE userId = $1', user.id);\r\n         *             });\r\n         *     })\r\n         *     .then(data => {\r\n         *         // success\r\n         *         // data = as returned from the task's callback\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         * @example\r\n         *\r\n         * // using an ES7 syntax for the callback:\r\n         * db.task('my-task', async t {\r\n         *         // t.ctx = task context object\r\n         *\r\n         *         const user = await t.one('SELECT id FROM Users WHERE name = $1', 'John');\r\n         *         return t.any('SELECT * FROM Events WHERE userId = $1', user.id);\r\n         *     })\r\n         *     .then(data => {\r\n         *         // success\r\n         *         // data = as returned from the task's callback\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         */\r\n        obj.task = function () {\r\n            const args = npm.pubUtils.taskArgs(arguments);\r\n            assert(args.options, ['tag']);\r\n            return taskProcessor.call(this, args, false);\r\n        };\r\n\r\n        /**\r\n         * @method Database#taskIf\r\n         * @description\r\n         * Executes a conditional task that results in an actual new {@link Database#task task}, if either condition is met or\r\n         * when it is necessary (on the top level), or else it reuses the current connection context.\r\n         *\r\n         * The default condition is `not in task or transaction`, to start a task only if currently not inside another task or transaction,\r\n         * which is the same as calling the following:\r\n         *\r\n         * ```js\r\n         * db.taskIf({cnd: t => !t.ctx}, cb => {})\r\n         * ```\r\n         *\r\n         * It can be useful, if you want to simplify/reduce the task + log events footprint, by creating new tasks only when necessary.\r\n         *\r\n         * @param {string|number|Object} [options]\r\n         * This parameter is optional, and presumed skipped when the first parameter is a function (`cb` parameter).\r\n         *\r\n         * When it is of type `string` or `number`, it is assumed to be option `tag` passed in directly. Otherwise,\r\n         * it is expected to be an object with options as listed below.\r\n         *\r\n         * @param {} [options.tag]\r\n         * Traceable context for the task/transaction (see $[tags]).\r\n         *\r\n         * @param {boolean|function} [options.cnd]\r\n         * Condition for creating a ({@link Database#task task}), if it is met.\r\n         * It can be either a simple boolean, or a callback function that takes the task context as `this` and as the first parameter.\r\n         *\r\n         * Default condition (when it is not specified):\r\n         *\r\n         * ```js\r\n         * {cnd: t => !t.ctx}\r\n         * ```\r\n         *\r\n         * @param {function} cb\r\n         * Task callback function, to return the result that will determine either success or failure for the operation.\r\n         *\r\n         * The function can be either the first or the second parameter passed into the method.\r\n         *\r\n         * It also can be an ES7 `async` function.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object with the result from the callback function.\r\n         *\r\n         * @see\r\n         * {@link Task},\r\n         * {@link Database#task Database.task},\r\n         * {@link Database#tx Database.tx},\r\n         * {@link Database#txIf Database.txIf},\r\n         * {@link TaskContext}\r\n         *\r\n         */\r\n        obj.taskIf = function () {\r\n            const args = npm.pubUtils.taskArgs(arguments);\r\n            assert(args.options, ['tag', 'cnd']);\r\n            try {\r\n                let cnd = args.options.cnd;\r\n                if ('cnd' in args.options) {\r\n                    cnd = typeof cnd === 'function' ? cnd.call(obj, obj) : !!cnd;\r\n                } else {\r\n                    cnd = !obj.ctx; // create task, if it is the top level\r\n                }\r\n                // reusable only if condition fails, and not top-level:\r\n                args.options.reusable = !cnd && !!obj.ctx;\r\n            } catch (e) {\r\n                return $p.reject(e);\r\n            }\r\n            return taskProcessor.call(this, args, false);\r\n        };\r\n\r\n        /**\r\n         * @method Database#tx\r\n         * @description\r\n         * Executes a callback function as a transaction, with automatically managed connection.\r\n         *\r\n         * When invoked on the root {@link Database} object, the method allocates the connection from the pool,\r\n         * executes the callback, and once finished - releases the connection back to the pool.\r\n         * However, when invoked inside another task or transaction, the method reuses the parent connection.\r\n         *\r\n         * A transaction wraps a regular {@link Database#task task} into additional queries:\r\n         * - it executes `BEGIN` just before invoking the callback function\r\n         * - it executes `COMMIT`, if the callback didn't throw any error or return a rejected promise\r\n         * - it executes `ROLLBACK`, if the callback did throw an error or return a rejected promise\r\n         * - it executes corresponding `SAVEPOINT` commands when the method is called recursively.\r\n         *\r\n         * The callback function is called with one parameter - database protocol (same as `this`), extended with methods\r\n         * {@link Task#batch batch}, {@link Task#page page}, {@link Task#sequence sequence}, plus property {@link Task#ctx ctx} -\r\n         * the transaction context object. See class {@link Task} for more details.\r\n         *\r\n         * Note that transactions should be chosen over tasks only where necessary, because unlike regular tasks,\r\n         * transactions are blocking operations.\r\n         *\r\n         * @param {string|number|Object} [options]\r\n         * This parameter is optional, and presumed skipped when the first parameter is a function (`cb` parameter).\r\n         *\r\n         * When it is of type `string` or `number`, it is assumed to be option `tag` passed in directly. Otherwise,\r\n         * it is expected to be an object with options as listed below.\r\n         *\r\n         * @param {} [options.tag]\r\n         * Traceable context for the transaction (see $[tags]).\r\n         *\r\n         * @param {txMode.TransactionMode} [options.mode]\r\n         * Transaction Configuration Mode - extends the transaction-opening command with additional configuration.\r\n         *\r\n         * @param {function} cb\r\n         * Transaction callback function, to return the result that will determine either success or failure for the operation.\r\n         *\r\n         * The function can be either the first of the second parameter passed into the method.\r\n         *\r\n         * It also can be an ES7 `async` function.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object with the result from the callback function.\r\n         *\r\n         * @see\r\n         * {@link Task},\r\n         * {@link Database#task Database.task},\r\n         * {@link Database#taskIf Database.taskIf},\r\n         * {@link TaskContext},\r\n         * $[tags],\r\n         * $[Chaining Queries]\r\n         *\r\n         * @example\r\n         *\r\n         * db.tx('my-transaction', t => {\r\n         *         // t.ctx = transaction context object\r\n         *\r\n         *         return t.one('INSERT INTO Users(name, age) VALUES($1, $2) RETURNING id', ['Mike', 25])\r\n         *             .then(user => {\r\n         *                 return t.batch([\r\n         *                     t.none('INSERT INTO Events(userId, name) VALUES($1, $2)', [user.id, 'created']),\r\n         *                     t.none('INSERT INTO Events(userId, name) VALUES($1, $2)', [user.id, 'login'])\r\n         *                 ]);\r\n         *             });\r\n         *     })\r\n         *     .then(data => {\r\n         *         // success\r\n         *         // data = as returned from the transaction's callback\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         * @example\r\n         *\r\n         * // using an ES7 syntax for the callback:\r\n         * db.tx('my-transaction', async t {\r\n         *         // t.ctx = transaction context object\r\n         *\r\n         *         const user = await t.one('INSERT INTO Users(name, age) VALUES($1, $2) RETURNING id', ['Mike', 25]);\r\n         *         return t.none('INSERT INTO Events(userId, name) VALUES($1, $2)', [user.id, 'created']);\r\n         *     })\r\n         *     .then(data => {\r\n         *         // success\r\n         *         // data = as returned from the transaction's callback\r\n         *     })\r\n         *     .catch(error => {\r\n         *         // error\r\n         *     });\r\n         *\r\n         */\r\n        obj.tx = function () {\r\n            const args = npm.pubUtils.taskArgs(arguments);\r\n            assert(args.options, ['tag', 'mode']);\r\n            return taskProcessor.call(this, args, true);\r\n        };\r\n\r\n        /**\r\n         * @method Database#txIf\r\n         * @description\r\n         * Executes a conditional transaction that results in an actual transaction ({@link Database#tx tx}), if the condition is met,\r\n         * or else it executes a regular {@link Database#task task}.\r\n         *\r\n         * The default condition is `not in transaction`, to start a transaction only if currently not in transaction,\r\n         * or else start a task, which is the same as calling the following:\r\n         *\r\n         * ```js\r\n         * db.txIf({cnd: t => !t.ctx || !t.ctx.inTransaction}, cb => {})\r\n         * ```\r\n         *\r\n         * It is useful when you want to avoid $[Nested Transactions] - savepoints.\r\n         *\r\n         * @param {string|number|Object} [options]\r\n         * This parameter is optional, and presumed skipped when the first parameter is a function (`cb` parameter).\r\n         *\r\n         * When it is of type `string` or `number`, it is assumed to be option `tag` passed in directly. Otherwise,\r\n         * it is expected to be an object with options as listed below.\r\n         *\r\n         * @param {} [options.tag]\r\n         * Traceable context for the task/transaction (see $[tags]).\r\n         *\r\n         * @param {txMode.TransactionMode} [options.mode]\r\n         * Transaction Configuration Mode - extends the transaction-opening command with additional configuration.\r\n         *\r\n         * @param {boolean|function} [options.cnd]\r\n         * Condition for opening a transaction ({@link Database#tx tx}), if it is met, or a {@link Database#task task} when the condition is not met.\r\n         * It can be either a simple boolean, or a callback function that takes the task/tx context as `this` and as the first parameter.\r\n         *\r\n         * Default condition (when it is not specified):\r\n         *\r\n         * ```js\r\n         * {cnd: t => !t.ctx || !t.ctx.inTransaction}\r\n         * ```\r\n         *\r\n         * @param {boolean|function} [options.reusable=false]\r\n         * When `cnd` is/returns false, reuse context of the current task/transaction, if one exists.\r\n         * It can be either a simple boolean, or a callback function that takes the task/tx context as `this`\r\n         * and as the first parameter.\r\n         *\r\n         * By default, when `cnd` is/returns false, the method creates a new task. This option tells\r\n         * the method to reuse the current task/transaction context, and not create a new task.\r\n         *\r\n         * This option is ignored when executing against the top level of the protocol, because on\r\n         * that level, if no transaction is suddenly needed, a new task becomes necessary.\r\n         *\r\n         * @param {function} cb\r\n         * Transaction/task callback function, to return the result that will determine either\r\n         * success or failure for the operation.\r\n         *\r\n         * The function can be either the first or the second parameter passed into the method.\r\n         *\r\n         * It also can be an ES7 `async` function.\r\n         *\r\n         * @returns {external:Promise}\r\n         * A promise object with the result from the callback function.\r\n         *\r\n         * @see\r\n         * {@link Task},\r\n         * {@link Database#task Database.task},\r\n         * {@link Database#taskIf Database.taskIf},\r\n         * {@link Database#tx Database.tx},\r\n         * {@link TaskContext}\r\n         */\r\n        obj.txIf = function () {\r\n            const args = npm.pubUtils.taskArgs(arguments);\r\n            assert(args.options, ['tag', 'mode', 'cnd', 'reusable']);\r\n            try {\r\n                let cnd;\r\n                if ('cnd' in args.options) {\r\n                    cnd = args.options.cnd;\r\n                    cnd = typeof cnd === 'function' ? cnd.call(obj, obj) : !!cnd;\r\n                } else {\r\n                    cnd = !obj.ctx || !obj.ctx.inTransaction;\r\n                }\r\n                args.options.cnd = cnd;\r\n                const reusable = args.options.reusable;\r\n                args.options.reusable = !cnd && obj.ctx && typeof reusable === 'function' ? reusable.call(obj, obj) : !!reusable;\r\n            } catch (e) {\r\n                return $p.reject(e);\r\n            }\r\n            return taskProcessor.call(this, args, args.options.cnd);\r\n        };\r\n\r\n        // Task method;\r\n        // Resolves with result from the callback function;\r\n        function taskProcessor(params, isTX) {\r\n\r\n            if (typeof params.cb !== 'function') {\r\n                return $p.reject(new TypeError('Callback function is required.'));\r\n            }\r\n\r\n            if (params.options.reusable) {\r\n                return config.$npm.task.callback(obj.ctx, obj, params.cb, config);\r\n            }\r\n\r\n            const taskCtx = ctx.clone(); // task context object;\r\n            if (isTX) {\r\n                taskCtx.txLevel = taskCtx.txLevel >= 0 ? (taskCtx.txLevel + 1) : 0;\r\n            }\r\n            taskCtx.inTransaction = taskCtx.txLevel >= 0;\r\n            taskCtx.level = taskCtx.level >= 0 ? (taskCtx.level + 1) : 0;\r\n            taskCtx.cb = params.cb; // callback function;\r\n            taskCtx.mode = params.options.mode; // transaction mode;\r\n            if (this !== obj) {\r\n                taskCtx.context = this; // calling context object;\r\n            }\r\n\r\n            const tsk = new config.$npm.task.Task(taskCtx, params.options.tag, isTX, config);\r\n            taskCtx.taskCtx = tsk.ctx;\r\n            extend(taskCtx, tsk);\r\n\r\n            if (taskCtx.db) {\r\n                // reuse existing connection;\r\n                npm.utils.addReadProp(tsk.ctx, 'useCount', taskCtx.db.useCount);\r\n                addServerVersion(tsk.ctx, taskCtx.db.client);\r\n                return config.$npm.task.execute(taskCtx, tsk, isTX, config);\r\n            }\r\n\r\n            // connection required;\r\n            return config.$npm.connect.pool(taskCtx, dbThis)\r\n                .then(db => {\r\n                    taskCtx.connect(db);\r\n                    npm.utils.addReadProp(tsk.ctx, 'useCount', db.useCount);\r\n                    addServerVersion(tsk.ctx, db.client);\r\n                    return config.$npm.task.execute(taskCtx, tsk, isTX, config);\r\n                })\r\n                .then(data => {\r\n                    taskCtx.disconnect();\r\n                    return data;\r\n                })\r\n                .catch(error => {\r\n                    taskCtx.disconnect();\r\n                    return $p.reject(error);\r\n                });\r\n        }\r\n\r\n        function addServerVersion(target, client) {\r\n            // Exclude else-case from coverage, because it can only occur with Native Bindings.\r\n            // istanbul ignore else\r\n            if (client.serverVersion) {\r\n                npm.utils.addReadProp(target, 'serverVersion', client.serverVersion);\r\n            }\r\n        }\r\n\r\n        // extending the protocol;\r\n        Events.extend(ctx.options, obj, ctx.dc);\r\n    }\r\n\r\n}\r\n\r\n// this event only happens when the connection is lost physically,\r\n// which cannot be tested automatically; removing from coverage:\r\n// istanbul ignore next\r\nfunction onError(err) {\r\n    // this client was never seen by pg-promise, which\r\n    // can happen if it failed to initialize\r\n    if (!err.client.$ctx) {\r\n        return;\r\n    }\r\n    const ctx = err.client.$ctx;\r\n    Events.error(ctx.options, err, {\r\n        cn: npm.utils.getSafeConnection(ctx.cn),\r\n        dc: ctx.dc\r\n    });\r\n}\r\n\r\nmodule.exports = config => {\r\n    const npmLocal = config.$npm;\r\n    npmLocal.connect = npmLocal.connect || npm.connect(config);\r\n    npmLocal.query = npmLocal.query || npm.query(config);\r\n    npmLocal.task = npmLocal.task || npm.task(config);\r\n    return Database;\r\n};\r\n\r\n/**\r\n * @callback Database.streamInitCB\r\n * @description\r\n * Stream initialization callback, used by {@link Database#stream Database.stream}.\r\n *\r\n * @param {external:Stream} stream\r\n * Stream object to initialize streaming.\r\n *\r\n * @example\r\n * const QueryStream = require('pg-query-stream');\r\n * const JSONStream = require('JSONStream');\r\n *\r\n * // you can also use pgp.as.format(query, values, options)\r\n * // to format queries properly, via pg-promise;\r\n * const qs = new QueryStream('SELECT * FROM users');\r\n *\r\n * db.stream(qs, stream => {\r\n *         // initiate streaming into the console:\r\n *         stream.pipe(JSONStream.stringify()).pipe(process.stdout);\r\n *     })\r\n *     .then(data => {\r\n *         console.log('Total rows processed:', data.processed,\r\n *           'Duration in milliseconds:', data.duration);\r\n *     })\r\n *     .catch(error => {\r\n *         // error;\r\n *     });\r\n */\r\n\r\n/**\r\n * @external Stream\r\n * @see https://nodejs.org/api/stream.html\r\n */\r\n\r\n/**\r\n * @external pg-pool\r\n * @alias pg-pool\r\n * @see https://github.com/brianc/node-pg-pool\r\n */\r\n\r\n/**\r\n * @external Result\r\n * @see https://node-postgres.com/apis/result\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\nconst {PromiseAdapter} = require('./promise-adapter');\r\nconst {DatabasePool} = require('./database-pool');\r\nconst {PreparedStatement, ParameterizedQuery} = require('./types');\r\nconst {QueryFile} = require('./query-file');\r\nconst {queryResult} = require('./query-result');\r\nconst {parsePromise} = require('./promise-parser');\r\nconst {assert} = require('./assert');\r\n\r\nconst npm = {\r\n    path: require('path'),\r\n    pg: require('pg'),\r\n    minify: require('pg-minify'),\r\n    formatting: require('./formatting'),\r\n    helpers: require('./helpers'),\r\n    errors: require('./errors'),\r\n    utils: require('./utils'),\r\n    pubUtils: require('./utils/public'),\r\n    mode: require('./tx-mode'),\r\n    package: require('../package.json'),\r\n    text: require('./text')\r\n};\r\n\r\nlet originalClientConnect;\r\n\r\n/**\r\n * @author Vitaly Tomilov\r\n * @module pg-promise\r\n *\r\n * @description\r\n * ## pg-promise v11.15\r\n * All documentation here is for the latest official release only.\r\n *\r\n * ### Initialization Options\r\n *\r\n * Below is the complete list of _Initialization Options_ for the library that can be passed in during\r\n * the library's initialization:\r\n *\r\n * ```js\r\n * const initOptions = {&#47;* options as documented below *&#47;};\r\n *\r\n * const pgp = require('pg-promise')(initOptions);\r\n * ```\r\n *\r\n * @property {{}} [options]\r\n * Library Initialization Options.\r\n *\r\n * @property {boolean} [options.pgFormatting=false]\r\n * Redirects all query formatting to the $[pg] driver.\r\n *\r\n * By default (`false`), the library uses its own advanced query-formatting engine.\r\n * If you set this option to a truthy value, query formatting will be done entirely by the\r\n * $[pg] driver, which means you won't be able to use any of the feature-rich query formatting\r\n * that this library implements, restricting yourself to the very basic `$1, $2,...` syntax.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {boolean} [options.pgNative=false]\r\n * Use $[Native Bindings]. Library $[pg-native] must be included and installed independently, or else there will\r\n * be an error thrown: {@link external:Error Error} = `Failed to initialize Native Bindings.`\r\n *\r\n * This is a static option (can only be set prior to initialization).\r\n *\r\n * @property {object|function} [options.promiseLib=Promise]\r\n * Overrides the default (ES6 Promise) promise library for its internal use.\r\n *\r\n * Example below sets to use $[Bluebird] - the best and recommended promise library. It is the fastest one,\r\n * and supports $[Long Stack Traces], essential for debugging promises.\r\n *\r\n * ```js\r\n * const Promise = require('bluebird');\r\n * const initOptions = {\r\n *     promiseLib: Promise\r\n * };\r\n * const pgp = require('pg-promise')(initOptions);\r\n * ```\r\n *\r\n * All existing promise libraries are supported. The ones with recognizable signature are used automatically,\r\n * while the rest can be configured via the $[Promise Adapter].\r\n *\r\n * This is a static option (can only be set prior to initialization).\r\n *\r\n * @property {boolean} [options.capSQL=false]\r\n * Capitalizes any SQL generated by the library.\r\n *\r\n * By default, all internal SQL within the library is generated using the low case.\r\n * If, however, you want all SQL to be capitalized instead, set `capSQL` = `true`.\r\n *\r\n * It is purely a cosmetic feature.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {string|Array<string>|null|undefined|function} [options.schema]\r\n * Forces change of the default database schema(s) for every fresh connection, i.e.\r\n * the library will execute `SET search_path TO schema_1, schema_2, ...` in the background\r\n * whenever a fresh physical connection is allocated.\r\n *\r\n * Normally, one changes the default schema(s) by $[changing the database or the role], but sometimes you\r\n * may want to switch the default schema(s) without persisting the change, and then use this option.\r\n *\r\n * It can be a string, an array of strings, or a callback function that takes `dc` (database context)\r\n * as the only parameter (and as `this`), and returns schema(s) according to the database context. A callback function\r\n * can also return nothing (`undefined` or `null`), if no schema change needed for the specified database context.\r\n *\r\n * The order of schema names matters, so if a table name exists in more than one schema, its default access resolves\r\n * to the table from the first such schema on the list.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {boolean} [options.noWarnings=false]\r\n * Disables all diagnostic warnings in the library (it is ill-advised).\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.connect]\r\n * Global event {@link event:connect connect} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.disconnect]\r\n * Global event {@link event:disconnect disconnect} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.query]\r\n * Global event {@link event:query query} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.receive]\r\n * Global event {@link event:receive receive} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.task]\r\n * Global event {@link event:task task} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.transact]\r\n * Global event {@link event:transact transact} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.error]\r\n * Global event {@link event:error error} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @property {function} [options.extend]\r\n * Global event {@link event:extend extend} handler.\r\n *\r\n * This option is dynamic (can be set before or after initialization).\r\n *\r\n * @see\r\n * {@link module:pg-promise~end end},\r\n * {@link module:pg-promise~as as},\r\n * {@link module:pg-promise~errors errors},\r\n * {@link module:pg-promise~helpers helpers},\r\n * {@link module:pg-promise~minify minify},\r\n * {@link module:pg-promise~ParameterizedQuery ParameterizedQuery},\r\n * {@link module:pg-promise~PreparedStatement PreparedStatement},\r\n * {@link module:pg-promise~pg pg},\r\n * {@link module:pg-promise~QueryFile QueryFile},\r\n * {@link module:pg-promise~queryResult queryResult},\r\n * {@link module:pg-promise~spex spex},\r\n * {@link module:pg-promise~txMode txMode},\r\n * {@link module:pg-promise~utils utils}\r\n *\r\n */\r\nfunction $main(options) {\r\n\r\n    options = assert(options, ['pgFormatting', 'pgNative', 'promiseLib', 'capSQL', 'noWarnings',\r\n        'connect', 'disconnect', 'query', 'receive', 'task', 'transact', 'error', 'extend', 'schema']);\r\n\r\n    let pg = npm.pg;\r\n    const p = parsePromise(options.promiseLib);\r\n\r\n    const config = {\r\n        version: npm.package.version,\r\n        promiseLib: p.promiseLib,\r\n        promise: p.promise\r\n    };\r\n\r\n    npm.utils.addReadProp(config, '$npm', {}, true);\r\n\r\n    // Locking properties that cannot be changed later:\r\n    npm.utils.addReadProp(options, 'promiseLib', options.promiseLib);\r\n    npm.utils.addReadProp(options, 'pgNative', !!options.pgNative);\r\n\r\n    config.options = options;\r\n\r\n    // istanbul ignore next:\r\n    // we do not cover code specific to Native Bindings\r\n    if (options.pgNative) {\r\n        pg = npm.pg.native;\r\n        if (npm.utils.isNull(pg)) {\r\n            throw new Error(npm.text.nativeError);\r\n        }\r\n    } else {\r\n        if (!originalClientConnect) {\r\n            originalClientConnect = pg.Client.prototype.connect;\r\n            pg.Client.prototype.connect = function () {\r\n                const handler = msg => {\r\n                    if (msg.parameterName === 'server_version') {\r\n                        this.serverVersion = msg.parameterValue;\r\n                        this.connection.removeListener('parameterStatus', handler);\r\n                    }\r\n                };\r\n                this.connection.on('parameterStatus', handler);\r\n                return originalClientConnect.call(this, ...arguments);\r\n            };\r\n        }\r\n    }\r\n\r\n    const Database = require('./database')(config);\r\n\r\n    const inst = (cn, dc) => {\r\n        if (npm.utils.isText(cn) || (cn && typeof cn === 'object')) {\r\n            return new Database(cn, dc, config);\r\n        }\r\n        throw new TypeError('Invalid connection details: ' + npm.utils.toJson(cn));\r\n    };\r\n\r\n    npm.utils.addReadProperties(inst, rootNameSpace);\r\n\r\n    /**\r\n     * @member {external:PG} pg\r\n     * @description\r\n     * Instance of the $[pg] library that's being used, depending on initialization option `pgNative`:\r\n     *  - regular `pg` module instance, without option `pgNative`, or equal to `false` (default)\r\n     *  - `pg` module instance with $[Native Bindings], if option `pgNative` was set.\r\n     *\r\n     * Available as `pgp.pg`, after initializing the library.\r\n     */\r\n    inst.pg = pg; // keep it modifiable, so the protocol can be mocked\r\n\r\n    /**\r\n     * @member {function} end\r\n     * @readonly\r\n     * @description\r\n     * Shuts down all connection pools created in the process, so it can terminate without delay.\r\n     * It is available as `pgp.end`, after initializing the library.\r\n     *\r\n     * All {@link Database} objects created previously can no longer be used, and their query methods will be rejecting\r\n     * with {@link external:Error Error} = `Connection pool of the database object has been destroyed.`\r\n     *\r\n     * And if you want to shut down only a specific connection pool, you do so via the {@link Database}\r\n     * object that owns the pool: `db.$pool.end()` (see {@link Database#$pool Database.$pool}).\r\n     *\r\n     * For more details see $[Library de-initialization].\r\n     */\r\n    npm.utils.addReadProp(inst, 'end', () => {\r\n        DatabasePool.shutDown();\r\n    });\r\n\r\n    /**\r\n     * @member {helpers} helpers\r\n     * @readonly\r\n     * @description\r\n     * Namespace for {@link helpers all query-formatting helper functions}.\r\n     *\r\n     * Available as `pgp.helpers`, after initializing the library.\r\n     *\r\n     * @see {@link helpers}.\r\n     */\r\n    npm.utils.addReadProp(inst, 'helpers', npm.helpers(config));\r\n\r\n    /**\r\n     * @member {external:spex} spex\r\n     * @readonly\r\n     * @description\r\n     * Initialized instance of the $[spex] module, used by the library within tasks and transactions.\r\n     *\r\n     * Available as `pgp.spex`, after initializing the library.\r\n     *\r\n     * @see\r\n     * {@link Task#batch},\r\n     * {@link Task#page},\r\n     * {@link Task#sequence}\r\n     */\r\n    npm.utils.addReadProp(inst, 'spex', config.$npm.spex);\r\n\r\n    config.pgp = inst;\r\n\r\n    return inst;\r\n}\r\n\r\nconst rootNameSpace = {\r\n\r\n    /**\r\n     * @member {formatting} as\r\n     * @readonly\r\n     * @description\r\n     * Namespace for {@link formatting all query-formatting functions}.\r\n     *\r\n     * Available as `pgp.as`, before and after initializing the library.\r\n     *\r\n     * @see {@link formatting}.\r\n     */\r\n    as: npm.formatting.as,\r\n\r\n    /**\r\n     * @member {external:pg-minify} minify\r\n     * @readonly\r\n     * @description\r\n     * Instance of the $[pg-minify] library used internally to minify SQL scripts.\r\n     *\r\n     * Available as `pgp.minify`, before and after initializing the library.\r\n     */\r\n    minify: npm.minify,\r\n\r\n    /**\r\n     * @member {queryResult} queryResult\r\n     * @readonly\r\n     * @description\r\n     * Query Result Mask enumerator.\r\n     *\r\n     * Available as `pgp.queryResult`, before and after initializing the library.\r\n     */\r\n    queryResult,\r\n\r\n    /**\r\n     * @member {PromiseAdapter} PromiseAdapter\r\n     * @readonly\r\n     * @description\r\n     * {@link PromiseAdapter} class.\r\n     *\r\n     * Available as `pgp.PromiseAdapter`, before and after initializing the library.\r\n     */\r\n    PromiseAdapter,\r\n\r\n    /**\r\n     * @member {ParameterizedQuery} ParameterizedQuery\r\n     * @readonly\r\n     * @description\r\n     * {@link ParameterizedQuery} class.\r\n     *\r\n     * Available as `pgp.ParameterizedQuery`, before and after initializing the library.\r\n     */\r\n    ParameterizedQuery,\r\n\r\n    /**\r\n     * @member {PreparedStatement} PreparedStatement\r\n     * @readonly\r\n     * @description\r\n     * {@link PreparedStatement} class.\r\n     *\r\n     * Available as `pgp.PreparedStatement`, before and after initializing the library.\r\n     */\r\n    PreparedStatement,\r\n\r\n    /**\r\n     * @member {QueryFile} QueryFile\r\n     * @readonly\r\n     * @description\r\n     * {@link QueryFile} class.\r\n     *\r\n     * Available as `pgp.QueryFile`, before and after initializing the library.\r\n     */\r\n    QueryFile,\r\n\r\n    /**\r\n     * @member {errors} errors\r\n     * @readonly\r\n     * @description\r\n     * {@link errors} - namespace for all error types.\r\n     *\r\n     * Available as `pgp.errors`, before and after initializing the library.\r\n     */\r\n    errors: npm.errors,\r\n\r\n    /**\r\n     * @member {utils} utils\r\n     * @readonly\r\n     * @description\r\n     * {@link utils} - namespace for utility functions.\r\n     *\r\n     * Available as `pgp.utils`, before and after initializing the library.\r\n     */\r\n    utils: npm.pubUtils,\r\n\r\n    /**\r\n     * @member {txMode} txMode\r\n     * @readonly\r\n     * @description\r\n     * {@link txMode Transaction Mode} namespace.\r\n     *\r\n     * Available as `pgp.txMode`, before and after initializing the library.\r\n     */\r\n    txMode: npm.mode\r\n};\r\n\r\nnpm.utils.addReadProperties($main, rootNameSpace);\r\n\r\nmodule.exports = $main;\r\n\r\n/**\r\n * @external Promise\r\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise\r\n */\r\n\r\n/**\r\n * @external PG\r\n * @see https://node-postgres.com\r\n */\r\n\r\n/**\r\n * @external Client\r\n * @see https://node-postgres.com/apis/client\r\n */\r\n\r\n/**\r\n * @external pg-minify\r\n * @see https://github.com/vitaly-t/pg-minify\r\n */\r\n\r\n/**\r\n * @external spex\r\n * @see https://github.com/vitaly-t/spex\r\n */\r\n","/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\r\n\r\n/* eslint no-var: off */\r\nvar v = process.versions.node.split('.'),\r\n    highVer = +v[0];\r\n\r\n// istanbul ignore next\r\nif (highVer < 16) {\r\n\r\n    // From pg-promise v11.15.0, the oldest supported Node.js is v16.0.0\r\n\r\n    // Node.js v14.x was supported up to pg-promise v11.14.0\r\n    // Node.js v12.x was supported up to pg-promise v10.15.4\r\n    // Node.js v8.x was supported up to pg-promise v10.14.2\r\n    // Node.js v7.6.0 was supported up to pg-promise v10.3.5\r\n    // Node.js v4.5.0 was supported up to pg-promise v8.7.5\r\n    // Node.js v0.10 was supported up to pg-promise v5.5.8\r\n\r\n    throw new Error('Minimum Node.js version supported by pg-promise is 16.0.0');\r\n}\r\n\r\nmodule.exports = require('./main');\r\n","import { MastraError, ErrorCategory, ErrorDomain } from '@mastra/core/error';\nimport { parseSqlIdentifier, parseFieldKey } from '@mastra/core/utils';\nimport { MastraVector } from '@mastra/core/vector';\nimport { Mutex } from 'async-mutex';\nimport * as pg from 'pg';\nimport xxhash from 'xxhash-wasm';\nimport { BaseFilterTranslator } from '@mastra/core/vector/filter';\nimport { MastraStorage, StoreOperations, TABLE_SCHEMAS, TABLE_WORKFLOW_SNAPSHOT, TABLE_AI_SPANS, TABLE_THREADS, TABLE_MESSAGES, TABLE_TRACES, TABLE_EVALS, TABLE_SCORERS, ScoresStorage, TracesStorage, safelyParseJSON, WorkflowsStorage, LegacyEvalsStorage, MemoryStorage, resolveMessageLimit, TABLE_RESOURCES, ObservabilityStorage, SCORERS_SCHEMA } from '@mastra/core/storage';\nimport pgPromise from 'pg-promise';\nimport { MessageList } from '@mastra/core/agent';\nimport { saveScorePayloadSchema } from '@mastra/core/scores';\n\n// src/vector/index.ts\n\n// src/shared/config.ts\nvar isConnectionStringConfig = (cfg) => {\n  return \"connectionString\" in cfg;\n};\nvar isHostConfig = (cfg) => {\n  return \"host\" in cfg && \"database\" in cfg && \"user\" in cfg && \"password\" in cfg;\n};\nvar isCloudSqlConfig = (cfg) => {\n  return \"stream\" in cfg || \"password\" in cfg && typeof cfg.password === \"function\";\n};\nvar validateConfig = (name, config) => {\n  if (isConnectionStringConfig(config)) {\n    if (!config.connectionString || typeof config.connectionString !== \"string\" || config.connectionString.trim() === \"\") {\n      throw new Error(\n        `${name}: connectionString must be provided and cannot be empty. Passing an empty string may cause fallback to local Postgres defaults.`\n      );\n    }\n  } else if (isCloudSqlConfig(config)) ; else if (isHostConfig(config)) {\n    const required = [\"host\", \"database\", \"user\", \"password\"];\n    for (const key of required) {\n      if (!config[key] || typeof config[key] !== \"string\" || config[key].trim() === \"\") {\n        throw new Error(\n          `${name}: ${key} must be provided and cannot be empty. Passing an empty string may cause fallback to local Postgres defaults.`\n        );\n      }\n    }\n  } else {\n    throw new Error(\n      `${name}: invalid config. Provide either {connectionString}, {host,port,database,user,password}, or a pg ClientConfig (e.g., Cloud SQL connector with \\`stream\\`).`\n    );\n  }\n};\nvar PGFilterTranslator = class extends BaseFilterTranslator {\n  getSupportedOperators() {\n    return {\n      ...BaseFilterTranslator.DEFAULT_OPERATORS,\n      custom: [\"$contains\", \"$size\"]\n    };\n  }\n  translate(filter) {\n    if (this.isEmpty(filter)) {\n      return filter;\n    }\n    this.validateFilter(filter);\n    return this.translateNode(filter);\n  }\n  translateNode(node, currentPath = \"\") {\n    const withPath = (result2) => currentPath ? { [currentPath]: result2 } : result2;\n    if (this.isPrimitive(node)) {\n      return withPath({ $eq: this.normalizeComparisonValue(node) });\n    }\n    if (Array.isArray(node)) {\n      return withPath({ $in: this.normalizeArrayValues(node) });\n    }\n    if (node instanceof RegExp) {\n      return withPath(this.translateRegexPattern(node.source, node.flags));\n    }\n    const entries = Object.entries(node);\n    const result = {};\n    if (node && \"$options\" in node && !(\"$regex\" in node)) {\n      throw new Error(\"$options is not valid without $regex\");\n    }\n    if (node && \"$regex\" in node) {\n      const options = node.$options || \"\";\n      return withPath(this.translateRegexPattern(node.$regex, options));\n    }\n    for (const [key, value] of entries) {\n      if (key === \"$options\") continue;\n      const newPath = currentPath ? `${currentPath}.${key}` : key;\n      if (this.isLogicalOperator(key)) {\n        result[key] = Array.isArray(value) ? value.map((filter) => this.translateNode(filter)) : this.translateNode(value);\n      } else if (this.isOperator(key)) {\n        if (this.isArrayOperator(key) && !Array.isArray(value) && key !== \"$elemMatch\") {\n          result[key] = [value];\n        } else if (this.isBasicOperator(key) && Array.isArray(value)) {\n          result[key] = JSON.stringify(value);\n        } else {\n          result[key] = value;\n        }\n      } else if (typeof value === \"object\" && value !== null) {\n        const hasOperators = Object.keys(value).some((k) => this.isOperator(k));\n        if (hasOperators) {\n          result[newPath] = this.translateNode(value);\n        } else {\n          Object.assign(result, this.translateNode(value, newPath));\n        }\n      } else {\n        result[newPath] = this.translateNode(value);\n      }\n    }\n    return result;\n  }\n  translateRegexPattern(pattern, options = \"\") {\n    if (!options) return { $regex: pattern };\n    const flags = options.split(\"\").filter((f) => \"imsux\".includes(f)).join(\"\");\n    return { $regex: flags ? `(?${flags})${pattern}` : pattern };\n  }\n};\nvar createBasicOperator = (symbol) => {\n  return (key, paramIndex) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `CASE \n        WHEN $${paramIndex}::text IS NULL THEN metadata#>>'{${jsonPathKey}}' IS ${symbol === \"=\" ? \"\" : \"NOT\"} NULL\n        ELSE metadata#>>'{${jsonPathKey}}' ${symbol} $${paramIndex}::text\n      END`,\n      needsValue: true\n    };\n  };\n};\nvar createNumericOperator = (symbol) => {\n  return (key, paramIndex, value) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    const isNumeric = typeof value === \"number\" || typeof value === \"string\" && !isNaN(Number(value)) && value.trim() !== \"\";\n    if (isNumeric) {\n      return {\n        sql: `(metadata#>>'{${jsonPathKey}}')::numeric ${symbol} $${paramIndex}::numeric`,\n        needsValue: true\n      };\n    } else {\n      return {\n        sql: `metadata#>>'{${jsonPathKey}}' ${symbol} $${paramIndex}::text`,\n        needsValue: true\n      };\n    }\n  };\n};\nfunction buildElemMatchConditions(value, paramIndex) {\n  if (typeof value !== \"object\" || Array.isArray(value)) {\n    throw new Error(\"$elemMatch requires an object with conditions\");\n  }\n  const conditions = [];\n  const values = [];\n  Object.entries(value).forEach(([field, val]) => {\n    const nextParamIndex = paramIndex + values.length;\n    let paramOperator;\n    let paramKey;\n    let paramValue;\n    if (field.startsWith(\"$\")) {\n      paramOperator = field;\n      paramKey = \"\";\n      paramValue = val;\n    } else if (typeof val === \"object\" && !Array.isArray(val)) {\n      const [op, opValue] = Object.entries(val || {})[0] || [];\n      paramOperator = op;\n      paramKey = field;\n      paramValue = opValue;\n    } else {\n      paramOperator = \"$eq\";\n      paramKey = field;\n      paramValue = val;\n    }\n    const operatorFn = FILTER_OPERATORS[paramOperator];\n    if (!operatorFn) {\n      throw new Error(`Invalid operator: ${paramOperator}`);\n    }\n    const result = operatorFn(paramKey, nextParamIndex, paramValue);\n    const sql = result.sql.replaceAll(\"metadata#>>\", \"elem#>>\");\n    conditions.push(sql);\n    if (result.needsValue) {\n      values.push(paramValue);\n    }\n  });\n  return {\n    sql: conditions.join(\" AND \"),\n    values\n  };\n}\nvar FILTER_OPERATORS = {\n  $eq: createBasicOperator(\"=\"),\n  $ne: createBasicOperator(\"!=\"),\n  $gt: createNumericOperator(\">\"),\n  $gte: createNumericOperator(\">=\"),\n  $lt: createNumericOperator(\"<\"),\n  $lte: createNumericOperator(\"<=\"),\n  // Array Operators\n  $in: (key, paramIndex) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `(\n        CASE\n          WHEN jsonb_typeof(metadata->'${jsonPathKey}') = 'array' THEN\n            EXISTS (\n              SELECT 1 FROM jsonb_array_elements_text(metadata->'${jsonPathKey}') as elem\n              WHERE elem = ANY($${paramIndex}::text[])\n            )\n          ELSE metadata#>>'{${jsonPathKey}}' = ANY($${paramIndex}::text[])\n        END\n      )`,\n      needsValue: true\n    };\n  },\n  $nin: (key, paramIndex) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `(\n        CASE\n          WHEN jsonb_typeof(metadata->'${jsonPathKey}') = 'array' THEN\n            NOT EXISTS (\n              SELECT 1 FROM jsonb_array_elements_text(metadata->'${jsonPathKey}') as elem\n              WHERE elem = ANY($${paramIndex}::text[])\n            )\n          ELSE metadata#>>'{${jsonPathKey}}' != ALL($${paramIndex}::text[])\n        END\n      )`,\n      needsValue: true\n    };\n  },\n  $all: (key, paramIndex) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `CASE WHEN array_length($${paramIndex}::text[], 1) IS NULL THEN false \n            ELSE (metadata#>'{${jsonPathKey}}')::jsonb ?& $${paramIndex}::text[] END`,\n      needsValue: true\n    };\n  },\n  $elemMatch: (key, paramIndex, value) => {\n    const { sql, values } = buildElemMatchConditions(value, paramIndex);\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `(\n        CASE\n          WHEN jsonb_typeof(metadata->'${jsonPathKey}') = 'array' THEN\n            EXISTS (\n              SELECT 1 \n              FROM jsonb_array_elements(metadata->'${jsonPathKey}') as elem\n              WHERE ${sql}\n            )\n          ELSE FALSE\n        END\n      )`,\n      needsValue: true,\n      transformValue: () => values\n    };\n  },\n  // Element Operators\n  $exists: (key) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `metadata ? '${jsonPathKey}'`,\n      needsValue: false\n    };\n  },\n  // Logical Operators\n  $and: (key) => ({ sql: `(${key})`, needsValue: false }),\n  $or: (key) => ({ sql: `(${key})`, needsValue: false }),\n  $not: (key) => ({ sql: `NOT (${key})`, needsValue: false }),\n  $nor: (key) => ({ sql: `NOT (${key})`, needsValue: false }),\n  // Regex Operators\n  $regex: (key, paramIndex) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `metadata#>>'{${jsonPathKey}}' ~ $${paramIndex}`,\n      needsValue: true\n    };\n  },\n  $contains: (key, paramIndex, value) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    let sql;\n    if (Array.isArray(value)) {\n      sql = `(metadata->'${jsonPathKey}') ?& $${paramIndex}`;\n    } else if (typeof value === \"string\") {\n      sql = `metadata->>'${jsonPathKey}' ILIKE '%' || $${paramIndex} || '%' ESCAPE '\\\\'`;\n    } else {\n      sql = `metadata->>'${jsonPathKey}' = $${paramIndex}`;\n    }\n    return {\n      sql,\n      needsValue: true,\n      transformValue: () => Array.isArray(value) ? value.map(String) : typeof value === \"string\" ? escapeLikePattern(value) : value\n    };\n  },\n  /**\n   * $objectContains: Postgres-only operator for true JSONB object containment.\n   * Usage: { field: { $objectContains: { ...subobject } } }\n   */\n  // $objectContains: (key, paramIndex) => ({\n  //   sql: `metadata @> $${paramIndex}::jsonb`,\n  //   needsValue: true,\n  //   transformValue: value => {\n  //     const parts = key.split('.');\n  //     return JSON.stringify(parts.reduceRight((value, key) => ({ [key]: value }), value));\n  //   },\n  // }),\n  $size: (key, paramIndex) => {\n    const jsonPathKey = parseJsonPathKey(key);\n    return {\n      sql: `(\n      CASE\n        WHEN jsonb_typeof(metadata#>'{${jsonPathKey}}') = 'array' THEN \n          jsonb_array_length(metadata#>'{${jsonPathKey}}') = $${paramIndex}\n        ELSE FALSE\n      END\n    )`,\n      needsValue: true\n    };\n  }\n};\nvar parseJsonPathKey = (key) => {\n  const parsedKey = key !== \"\" ? parseFieldKey(key) : \"\";\n  return parsedKey.replace(/\\./g, \",\");\n};\nfunction escapeLikePattern(str) {\n  return str.replace(/([%_\\\\])/g, \"\\\\$1\");\n}\nfunction buildDeleteFilterQuery(filter) {\n  const values = [];\n  function buildCondition(key, value, parentPath) {\n    if ([\"$and\", \"$or\", \"$not\", \"$nor\"].includes(key)) {\n      return handleLogicalOperator(key, value);\n    }\n    if (!value || typeof value !== \"object\") {\n      values.push(value);\n      return `metadata#>>'{${parseJsonPathKey(key)}}' = $${values.length}`;\n    }\n    const [[operator, operatorValue] = []] = Object.entries(value);\n    if (operator === \"$not\") {\n      const entries = Object.entries(operatorValue);\n      const conditions2 = entries.map(([nestedOp, nestedValue]) => {\n        if (!FILTER_OPERATORS[nestedOp]) {\n          throw new Error(`Invalid operator in $not condition: ${nestedOp}`);\n        }\n        const operatorFn2 = FILTER_OPERATORS[nestedOp];\n        const operatorResult2 = operatorFn2(key, values.length + 1, nestedValue);\n        if (operatorResult2.needsValue) {\n          values.push(nestedValue);\n        }\n        return operatorResult2.sql;\n      }).join(\" AND \");\n      return `NOT (${conditions2})`;\n    }\n    const operatorFn = FILTER_OPERATORS[operator];\n    const operatorResult = operatorFn(key, values.length + 1, operatorValue);\n    if (operatorResult.needsValue) {\n      const transformedValue = operatorResult.transformValue ? operatorResult.transformValue() : operatorValue;\n      if (Array.isArray(transformedValue) && operator === \"$elemMatch\") {\n        values.push(...transformedValue);\n      } else {\n        values.push(transformedValue);\n      }\n    }\n    return operatorResult.sql;\n  }\n  function handleLogicalOperator(key, value, parentPath) {\n    if (key === \"$not\") {\n      const entries = Object.entries(value);\n      const conditions3 = entries.map(([fieldKey, fieldValue]) => buildCondition(fieldKey, fieldValue)).join(\" AND \");\n      return `NOT (${conditions3})`;\n    }\n    if (!value || value.length === 0) {\n      switch (key) {\n        case \"$and\":\n        case \"$nor\":\n          return \"true\";\n        // Empty $and/$nor match everything\n        case \"$or\":\n          return \"false\";\n        // Empty $or matches nothing\n        default:\n          return \"true\";\n      }\n    }\n    const joinOperator = key === \"$or\" || key === \"$nor\" ? \"OR\" : \"AND\";\n    const conditions2 = value.map((f) => {\n      const entries = Object.entries(f || {});\n      if (entries.length === 0) return \"\";\n      const [firstKey, firstValue] = entries[0] || [];\n      if ([\"$and\", \"$or\", \"$not\", \"$nor\"].includes(firstKey)) {\n        return buildCondition(firstKey, firstValue);\n      }\n      return entries.map(([k, v]) => buildCondition(k, v)).join(` ${joinOperator} `);\n    });\n    const joined = conditions2.join(` ${joinOperator} `);\n    const operatorFn = FILTER_OPERATORS[key];\n    return operatorFn(joined, 0, value).sql;\n  }\n  if (!filter) {\n    return { sql: \"\", values };\n  }\n  const conditions = Object.entries(filter).map(([key, value]) => buildCondition(key, value)).filter(Boolean).join(\" AND \");\n  return { sql: conditions ? `WHERE ${conditions}` : \"\", values };\n}\nfunction buildFilterQuery(filter, minScore, topK) {\n  const values = [minScore, topK];\n  function buildCondition(key, value, parentPath) {\n    if ([\"$and\", \"$or\", \"$not\", \"$nor\"].includes(key)) {\n      return handleLogicalOperator(key, value);\n    }\n    if (!value || typeof value !== \"object\") {\n      values.push(value);\n      return `metadata#>>'{${parseJsonPathKey(key)}}' = $${values.length}`;\n    }\n    const [[operator, operatorValue] = []] = Object.entries(value);\n    if (operator === \"$not\") {\n      const entries = Object.entries(operatorValue);\n      const conditions2 = entries.map(([nestedOp, nestedValue]) => {\n        if (!FILTER_OPERATORS[nestedOp]) {\n          throw new Error(`Invalid operator in $not condition: ${nestedOp}`);\n        }\n        const operatorFn2 = FILTER_OPERATORS[nestedOp];\n        const operatorResult2 = operatorFn2(key, values.length + 1, nestedValue);\n        if (operatorResult2.needsValue) {\n          values.push(nestedValue);\n        }\n        return operatorResult2.sql;\n      }).join(\" AND \");\n      return `NOT (${conditions2})`;\n    }\n    const operatorFn = FILTER_OPERATORS[operator];\n    const operatorResult = operatorFn(key, values.length + 1, operatorValue);\n    if (operatorResult.needsValue) {\n      const transformedValue = operatorResult.transformValue ? operatorResult.transformValue() : operatorValue;\n      if (Array.isArray(transformedValue) && operator === \"$elemMatch\") {\n        values.push(...transformedValue);\n      } else {\n        values.push(transformedValue);\n      }\n    }\n    return operatorResult.sql;\n  }\n  function handleLogicalOperator(key, value, parentPath) {\n    if (key === \"$not\") {\n      const entries = Object.entries(value);\n      const conditions3 = entries.map(([fieldKey, fieldValue]) => buildCondition(fieldKey, fieldValue)).join(\" AND \");\n      return `NOT (${conditions3})`;\n    }\n    if (!value || value.length === 0) {\n      switch (key) {\n        case \"$and\":\n        case \"$nor\":\n          return \"true\";\n        // Empty $and/$nor match everything\n        case \"$or\":\n          return \"false\";\n        // Empty $or matches nothing\n        default:\n          return \"true\";\n      }\n    }\n    const joinOperator = key === \"$or\" || key === \"$nor\" ? \"OR\" : \"AND\";\n    const conditions2 = value.map((f) => {\n      const entries = Object.entries(f || {});\n      if (entries.length === 0) return \"\";\n      const [firstKey, firstValue] = entries[0] || [];\n      if ([\"$and\", \"$or\", \"$not\", \"$nor\"].includes(firstKey)) {\n        return buildCondition(firstKey, firstValue);\n      }\n      return entries.map(([k, v]) => buildCondition(k, v)).join(` ${joinOperator} `);\n    });\n    const joined = conditions2.join(` ${joinOperator} `);\n    const operatorFn = FILTER_OPERATORS[key];\n    return operatorFn(joined, 0, value).sql;\n  }\n  if (!filter) {\n    return { sql: \"\", values };\n  }\n  const conditions = Object.entries(filter).map(([key, value]) => buildCondition(key, value)).filter(Boolean).join(\" AND \");\n  return { sql: conditions ? `WHERE ${conditions}` : \"\", values };\n}\n\n// src/vector/index.ts\nvar PgVector = class extends MastraVector {\n  pool;\n  describeIndexCache = /* @__PURE__ */ new Map();\n  createdIndexes = /* @__PURE__ */ new Map();\n  mutexesByName = /* @__PURE__ */ new Map();\n  schema;\n  setupSchemaPromise = null;\n  installVectorExtensionPromise = null;\n  vectorExtensionInstalled = void 0;\n  vectorExtensionSchema = null;\n  schemaSetupComplete = void 0;\n  cacheWarmupPromise = null;\n  constructor(config) {\n    try {\n      validateConfig(\"PgVector\", config);\n      super();\n      this.schema = config.schemaName;\n      let poolConfig;\n      if (isConnectionStringConfig(config)) {\n        poolConfig = {\n          connectionString: config.connectionString,\n          ssl: config.ssl,\n          max: config.max ?? 20,\n          idleTimeoutMillis: config.idleTimeoutMillis ?? 3e4,\n          connectionTimeoutMillis: 2e3,\n          ...config.pgPoolOptions\n        };\n      } else if (isCloudSqlConfig(config)) {\n        poolConfig = {\n          ...config,\n          max: config.max ?? 20,\n          idleTimeoutMillis: config.idleTimeoutMillis ?? 3e4,\n          connectionTimeoutMillis: 2e3,\n          ...config.pgPoolOptions\n        };\n      } else if (isHostConfig(config)) {\n        poolConfig = {\n          host: config.host,\n          port: config.port,\n          database: config.database,\n          user: config.user,\n          password: config.password,\n          ssl: config.ssl,\n          max: config.max ?? 20,\n          idleTimeoutMillis: config.idleTimeoutMillis ?? 3e4,\n          connectionTimeoutMillis: 2e3,\n          ...config.pgPoolOptions\n        };\n      } else {\n        throw new Error(\"PgVector: invalid configuration provided\");\n      }\n      const basePool = new pg.Pool(poolConfig);\n      const telemetry = this.__getTelemetry();\n      this.pool = telemetry?.traceClass(basePool, {\n        spanNamePrefix: \"pg-vector\",\n        attributes: {\n          \"vector.type\": \"postgres\"\n        }\n      }) ?? basePool;\n      this.cacheWarmupPromise = (async () => {\n        try {\n          const existingIndexes = await this.listIndexes();\n          await Promise.all(\n            existingIndexes.map(async (indexName) => {\n              const info = await this.getIndexInfo({ indexName });\n              const key = await this.getIndexCacheKey({\n                indexName,\n                metric: info.metric,\n                dimension: info.dimension,\n                type: info.type\n              });\n              this.createdIndexes.set(indexName, key);\n            })\n          );\n        } catch (error) {\n          this.logger?.debug(\"Cache warming skipped or failed\", { error });\n        }\n      })();\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_INITIALIZATION_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            schemaName: \"schemaName\" in config ? config.schemaName ?? \"\" : \"\"\n          }\n        },\n        error\n      );\n    }\n  }\n  getMutexByName(indexName) {\n    if (!this.mutexesByName.has(indexName)) this.mutexesByName.set(indexName, new Mutex());\n    return this.mutexesByName.get(indexName);\n  }\n  /**\n   * Detects which schema contains the vector extension\n   */\n  async detectVectorExtensionSchema(client) {\n    try {\n      const result = await client.query(`\n        SELECT n.nspname as schema_name\n        FROM pg_extension e\n        JOIN pg_namespace n ON e.extnamespace = n.oid\n        WHERE e.extname = 'vector'\n        LIMIT 1;\n      `);\n      if (result.rows.length > 0) {\n        this.vectorExtensionSchema = result.rows[0].schema_name;\n        this.logger.debug(\"Vector extension found in schema\", { schema: this.vectorExtensionSchema });\n        return this.vectorExtensionSchema;\n      }\n      return null;\n    } catch (error) {\n      this.logger.debug(\"Could not detect vector extension schema\", { error });\n      return null;\n    }\n  }\n  /**\n   * Gets the properly qualified vector type name\n   */\n  getVectorTypeName() {\n    if (this.vectorExtensionSchema) {\n      if (this.vectorExtensionSchema === \"pg_catalog\") {\n        return \"vector\";\n      }\n      if (this.vectorExtensionSchema === (this.schema || \"public\")) {\n        return \"vector\";\n      }\n      const validatedSchema = parseSqlIdentifier(this.vectorExtensionSchema, \"vector extension schema\");\n      return `${validatedSchema}.vector`;\n    }\n    return \"vector\";\n  }\n  getTableName(indexName) {\n    const parsedIndexName = parseSqlIdentifier(indexName, \"index name\");\n    const quotedIndexName = `\"${parsedIndexName}\"`;\n    const quotedSchemaName = this.getSchemaName();\n    const quotedVectorName = `\"${parsedIndexName}_vector_idx\"`;\n    return {\n      tableName: quotedSchemaName ? `${quotedSchemaName}.${quotedIndexName}` : quotedIndexName,\n      vectorIndexName: quotedVectorName\n    };\n  }\n  getSchemaName() {\n    return this.schema ? `\"${parseSqlIdentifier(this.schema, \"schema name\")}\"` : void 0;\n  }\n  transformFilter(filter) {\n    const translator = new PGFilterTranslator();\n    return translator.translate(filter);\n  }\n  async getIndexInfo({ indexName }) {\n    if (!this.describeIndexCache.has(indexName)) {\n      this.describeIndexCache.set(indexName, await this.describeIndex({ indexName }));\n    }\n    return this.describeIndexCache.get(indexName);\n  }\n  async query({\n    indexName,\n    queryVector,\n    topK = 10,\n    filter,\n    includeVector = false,\n    minScore = -1,\n    ef,\n    probes\n  }) {\n    try {\n      if (!Number.isInteger(topK) || topK <= 0) {\n        throw new Error(\"topK must be a positive integer\");\n      }\n      if (!Array.isArray(queryVector) || !queryVector.every((x) => typeof x === \"number\" && Number.isFinite(x))) {\n        throw new Error(\"queryVector must be an array of finite numbers\");\n      }\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_QUERY_INVALID_INPUT\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.USER,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    }\n    const client = await this.pool.connect();\n    try {\n      await client.query(\"BEGIN\");\n      const vectorStr = `[${queryVector.join(\",\")}]`;\n      const translatedFilter = this.transformFilter(filter);\n      const { sql: filterQuery, values: filterValues } = buildFilterQuery(translatedFilter, minScore, topK);\n      const indexInfo = await this.getIndexInfo({ indexName });\n      if (indexInfo.type === \"hnsw\") {\n        const calculatedEf = ef ?? Math.max(topK, (indexInfo?.config?.m ?? 16) * topK);\n        const searchEf = Math.min(1e3, Math.max(1, calculatedEf));\n        await client.query(`SET LOCAL hnsw.ef_search = ${searchEf}`);\n      }\n      if (indexInfo.type === \"ivfflat\" && probes) {\n        await client.query(`SET LOCAL ivfflat.probes = ${probes}`);\n      }\n      const { tableName } = this.getTableName(indexName);\n      const vectorType = this.getVectorTypeName();\n      const query = `\n        WITH vector_scores AS (\n          SELECT\n            vector_id as id,\n            1 - (embedding <=> '${vectorStr}'::${vectorType}) as score,\n            metadata\n            ${includeVector ? \", embedding\" : \"\"}\n          FROM ${tableName}\n          ${filterQuery}\n        )\n        SELECT *\n        FROM vector_scores\n        WHERE score > $1\n        ORDER BY score DESC\n        LIMIT $2`;\n      const result = await client.query(query, filterValues);\n      await client.query(\"COMMIT\");\n      return result.rows.map(({ id, score, metadata, embedding }) => ({\n        id,\n        score,\n        metadata,\n        ...includeVector && embedding && { vector: JSON.parse(embedding) }\n      }));\n    } catch (error) {\n      await client.query(\"ROLLBACK\");\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_QUERY_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  async upsert({\n    indexName,\n    vectors,\n    metadata,\n    ids,\n    deleteFilter\n  }) {\n    const { tableName } = this.getTableName(indexName);\n    const client = await this.pool.connect();\n    try {\n      await client.query(\"BEGIN\");\n      if (deleteFilter) {\n        this.logger?.debug(`Deleting vectors matching filter before upsert`, { indexName, deleteFilter });\n        const translatedFilter = this.transformFilter(deleteFilter);\n        const { sql: filterQuery, values: filterValues } = buildDeleteFilterQuery(translatedFilter);\n        const whereClause = filterQuery.trim().replace(/^WHERE\\s+/i, \"\");\n        if (whereClause) {\n          const deleteQuery = `DELETE FROM ${tableName} WHERE ${whereClause}`;\n          const result = await client.query(deleteQuery, filterValues);\n          this.logger?.debug(`Deleted ${result.rowCount || 0} vectors before upsert`, {\n            indexName,\n            deletedCount: result.rowCount || 0\n          });\n        }\n      }\n      const vectorIds = ids || vectors.map(() => crypto.randomUUID());\n      const vectorType = this.getVectorTypeName();\n      for (let i = 0; i < vectors.length; i++) {\n        const query = `\n          INSERT INTO ${tableName} (vector_id, embedding, metadata)\n          VALUES ($1, $2::${vectorType}, $3::jsonb)\n          ON CONFLICT (vector_id)\n          DO UPDATE SET\n            embedding = $2::${vectorType},\n            metadata = $3::jsonb\n          RETURNING embedding::text\n        `;\n        await client.query(query, [vectorIds[i], `[${vectors[i]?.join(\",\")}]`, JSON.stringify(metadata?.[i] || {})]);\n      }\n      await client.query(\"COMMIT\");\n      this.logger?.debug(`Upserted ${vectors.length} vectors to ${indexName}`, {\n        indexName,\n        vectorCount: vectors.length,\n        hadDeleteFilter: !!deleteFilter\n      });\n      return vectorIds;\n    } catch (error) {\n      await client.query(\"ROLLBACK\");\n      if (error instanceof Error && error.message?.includes(\"expected\") && error.message?.includes(\"dimensions\")) {\n        const match = error.message.match(/expected (\\d+) dimensions, not (\\d+)/);\n        if (match) {\n          const [, expected, actual] = match;\n          const mastraError2 = new MastraError(\n            {\n              id: \"MASTRA_STORAGE_PG_VECTOR_UPSERT_INVALID_INPUT\",\n              domain: ErrorDomain.MASTRA_VECTOR,\n              category: ErrorCategory.USER,\n              text: `Vector dimension mismatch: Index \"${indexName}\" expects ${expected} dimensions but got ${actual} dimensions. Either use a matching embedding model or delete and recreate the index with the new dimension.`,\n              details: {\n                indexName,\n                expected: expected ?? \"\",\n                actual: actual ?? \"\"\n              }\n            },\n            error\n          );\n          this.logger?.trackException(mastraError2);\n          throw mastraError2;\n        }\n      }\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_UPSERT_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  hasher = xxhash();\n  async getIndexCacheKey({\n    indexName,\n    dimension,\n    metric,\n    type\n  }) {\n    const input = indexName + dimension + metric + (type || \"ivfflat\");\n    return (await this.hasher).h32(input);\n  }\n  cachedIndexExists(indexName, newKey) {\n    const existingIndexCacheKey = this.createdIndexes.get(indexName);\n    return existingIndexCacheKey && existingIndexCacheKey === newKey;\n  }\n  async setupSchema(client) {\n    if (!this.schema || this.schemaSetupComplete) {\n      return;\n    }\n    if (!this.setupSchemaPromise) {\n      this.setupSchemaPromise = (async () => {\n        try {\n          const schemaCheck = await client.query(\n            `\n            SELECT EXISTS (\n              SELECT 1 FROM information_schema.schemata \n              WHERE schema_name = $1\n            )\n          `,\n            [this.schema]\n          );\n          const schemaExists = schemaCheck.rows[0].exists;\n          if (!schemaExists) {\n            try {\n              await client.query(`CREATE SCHEMA IF NOT EXISTS ${this.getSchemaName()}`);\n              this.logger.info(`Schema \"${this.schema}\" created successfully`);\n            } catch (error) {\n              this.logger.error(`Failed to create schema \"${this.schema}\"`, { error });\n              throw new Error(\n                `Unable to create schema \"${this.schema}\". This requires CREATE privilege on the database. Either create the schema manually or grant CREATE privilege to the user.`\n              );\n            }\n          }\n          this.schemaSetupComplete = true;\n          this.logger.debug(`Schema \"${this.schema}\" is ready for use`);\n        } catch (error) {\n          this.schemaSetupComplete = void 0;\n          this.setupSchemaPromise = null;\n          throw error;\n        } finally {\n          this.setupSchemaPromise = null;\n        }\n      })();\n    }\n    await this.setupSchemaPromise;\n  }\n  async createIndex({\n    indexName,\n    dimension,\n    metric = \"cosine\",\n    indexConfig = {},\n    buildIndex = true\n  }) {\n    const { tableName } = this.getTableName(indexName);\n    try {\n      if (!indexName.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)) {\n        throw new Error(\"Invalid index name format\");\n      }\n      if (!Number.isInteger(dimension) || dimension <= 0) {\n        throw new Error(\"Dimension must be a positive integer\");\n      }\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_CREATE_INDEX_INVALID_INPUT\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.USER,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    }\n    const indexCacheKey = await this.getIndexCacheKey({ indexName, dimension, type: indexConfig.type, metric });\n    if (this.cachedIndexExists(indexName, indexCacheKey)) {\n      return;\n    }\n    const mutex = this.getMutexByName(`create-${indexName}`);\n    await mutex.runExclusive(async () => {\n      if (this.cachedIndexExists(indexName, indexCacheKey)) {\n        return;\n      }\n      const client = await this.pool.connect();\n      try {\n        await this.setupSchema(client);\n        await this.installVectorExtension(client);\n        if (this.schema && this.vectorExtensionSchema && this.schema !== this.vectorExtensionSchema && this.vectorExtensionSchema !== \"pg_catalog\") {\n          await client.query(`SET search_path TO ${this.getSchemaName()}, \"${this.vectorExtensionSchema}\"`);\n        }\n        const vectorType = this.getVectorTypeName();\n        await client.query(`\n          CREATE TABLE IF NOT EXISTS ${tableName} (\n            id SERIAL PRIMARY KEY,\n            vector_id TEXT UNIQUE NOT NULL,\n            embedding ${vectorType}(${dimension}),\n            metadata JSONB DEFAULT '{}'::jsonb\n          );\n        `);\n        this.createdIndexes.set(indexName, indexCacheKey);\n        if (buildIndex) {\n          await this.setupIndex({ indexName, metric, indexConfig }, client);\n        }\n      } catch (error) {\n        this.createdIndexes.delete(indexName);\n        throw error;\n      } finally {\n        client.release();\n      }\n    }).catch((error) => {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_CREATE_INDEX_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    });\n  }\n  async buildIndex({ indexName, metric = \"cosine\", indexConfig }) {\n    const client = await this.pool.connect();\n    try {\n      await this.setupIndex({ indexName, metric, indexConfig }, client);\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_BUILD_INDEX_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  async setupIndex({ indexName, metric, indexConfig }, client) {\n    const mutex = this.getMutexByName(`build-${indexName}`);\n    await mutex.runExclusive(async () => {\n      const isConfigEmpty = !indexConfig || Object.keys(indexConfig).length === 0 || !indexConfig.type && !indexConfig.ivf && !indexConfig.hnsw;\n      const indexType = isConfigEmpty ? \"ivfflat\" : indexConfig.type || \"ivfflat\";\n      const { tableName, vectorIndexName } = this.getTableName(indexName);\n      let existingIndexInfo = null;\n      let dimension = 0;\n      try {\n        existingIndexInfo = await this.getIndexInfo({ indexName });\n        dimension = existingIndexInfo.dimension;\n        if (isConfigEmpty && existingIndexInfo.metric === metric) {\n          if (existingIndexInfo.type === \"flat\") {\n            this.logger?.debug(`No index exists for ${vectorIndexName}, will create default ivfflat index`);\n          } else {\n            this.logger?.debug(\n              `Index ${vectorIndexName} already exists (type: ${existingIndexInfo.type}, metric: ${existingIndexInfo.metric}), preserving existing configuration`\n            );\n            const cacheKey = await this.getIndexCacheKey({\n              indexName,\n              dimension,\n              type: existingIndexInfo.type,\n              metric: existingIndexInfo.metric\n            });\n            this.createdIndexes.set(indexName, cacheKey);\n            return;\n          }\n        }\n        let configMatches = existingIndexInfo.metric === metric && existingIndexInfo.type === indexType;\n        if (indexType === \"hnsw\") {\n          configMatches = configMatches && existingIndexInfo.config.m === (indexConfig.hnsw?.m ?? 8) && existingIndexInfo.config.efConstruction === (indexConfig.hnsw?.efConstruction ?? 32);\n        } else if (indexType === \"flat\") {\n          configMatches = configMatches && existingIndexInfo.type === \"flat\";\n        } else if (indexType === \"ivfflat\" && indexConfig.ivf?.lists) {\n          configMatches = configMatches && existingIndexInfo.config.lists === indexConfig.ivf?.lists;\n        }\n        if (configMatches) {\n          this.logger?.debug(`Index ${vectorIndexName} already exists with same configuration, skipping recreation`);\n          const cacheKey = await this.getIndexCacheKey({\n            indexName,\n            dimension,\n            type: existingIndexInfo.type,\n            metric: existingIndexInfo.metric\n          });\n          this.createdIndexes.set(indexName, cacheKey);\n          return;\n        }\n        this.logger?.info(`Index ${vectorIndexName} configuration changed, rebuilding index`);\n        await client.query(`DROP INDEX IF EXISTS ${vectorIndexName}`);\n        this.describeIndexCache.delete(indexName);\n      } catch {\n        this.logger?.debug(`Index ${indexName} doesn't exist yet, will create it`);\n      }\n      if (indexType === \"flat\") {\n        this.describeIndexCache.delete(indexName);\n        return;\n      }\n      const metricOp = metric === \"cosine\" ? \"vector_cosine_ops\" : metric === \"euclidean\" ? \"vector_l2_ops\" : \"vector_ip_ops\";\n      let indexSQL;\n      if (indexType === \"hnsw\") {\n        const m = indexConfig.hnsw?.m ?? 8;\n        const efConstruction = indexConfig.hnsw?.efConstruction ?? 32;\n        indexSQL = `\n          CREATE INDEX IF NOT EXISTS ${vectorIndexName} \n          ON ${tableName} \n          USING hnsw (embedding ${metricOp})\n          WITH (\n            m = ${m},\n            ef_construction = ${efConstruction}\n          )\n        `;\n      } else {\n        let lists;\n        if (indexConfig.ivf?.lists) {\n          lists = indexConfig.ivf.lists;\n        } else {\n          const size = (await client.query(`SELECT COUNT(*) FROM ${tableName}`)).rows[0].count;\n          lists = Math.max(100, Math.min(4e3, Math.floor(Math.sqrt(size) * 2)));\n        }\n        indexSQL = `\n          CREATE INDEX IF NOT EXISTS ${vectorIndexName}\n          ON ${tableName}\n          USING ivfflat (embedding ${metricOp})\n          WITH (lists = ${lists});\n        `;\n      }\n      await client.query(indexSQL);\n    });\n  }\n  async installVectorExtension(client) {\n    if (this.vectorExtensionInstalled) {\n      return;\n    }\n    if (!this.installVectorExtensionPromise) {\n      this.installVectorExtensionPromise = (async () => {\n        try {\n          const existingSchema = await this.detectVectorExtensionSchema(client);\n          if (existingSchema) {\n            this.vectorExtensionInstalled = true;\n            this.vectorExtensionSchema = existingSchema;\n            this.logger.info(`Vector extension already installed in schema: ${existingSchema}`);\n            return;\n          }\n          try {\n            if (this.schema && this.schema !== \"public\") {\n              try {\n                await client.query(`CREATE EXTENSION IF NOT EXISTS vector SCHEMA ${this.getSchemaName()}`);\n                this.vectorExtensionInstalled = true;\n                this.vectorExtensionSchema = this.schema;\n                this.logger.info(`Vector extension installed in schema: ${this.schema}`);\n                return;\n              } catch (schemaError) {\n                this.logger.debug(`Could not install vector extension in schema ${this.schema}, trying public schema`, {\n                  error: schemaError\n                });\n              }\n            }\n            await client.query(\"CREATE EXTENSION IF NOT EXISTS vector\");\n            const installedSchema = await this.detectVectorExtensionSchema(client);\n            if (installedSchema) {\n              this.vectorExtensionInstalled = true;\n              this.vectorExtensionSchema = installedSchema;\n              this.logger.info(`Vector extension installed in schema: ${installedSchema}`);\n            }\n          } catch (error) {\n            this.logger.warn(\n              \"Could not install vector extension. This requires superuser privileges. If the extension is already installed, you can ignore this warning.\",\n              { error }\n            );\n            const existingSchema2 = await this.detectVectorExtensionSchema(client);\n            if (existingSchema2) {\n              this.vectorExtensionInstalled = true;\n              this.vectorExtensionSchema = existingSchema2;\n              this.logger.info(`Vector extension found in schema: ${existingSchema2}`);\n            }\n          }\n        } catch (error) {\n          this.logger.error(\"Error setting up vector extension\", { error });\n          this.vectorExtensionInstalled = void 0;\n          this.installVectorExtensionPromise = null;\n          throw error;\n        } finally {\n          this.installVectorExtensionPromise = null;\n        }\n      })();\n    }\n    await this.installVectorExtensionPromise;\n  }\n  async listIndexes() {\n    const client = await this.pool.connect();\n    try {\n      const mastraTablesQuery = `\n        SELECT DISTINCT t.table_name\n        FROM information_schema.tables t\n        WHERE t.table_schema = $1\n        AND EXISTS (\n          SELECT 1\n          FROM information_schema.columns c\n          WHERE c.table_schema = t.table_schema\n          AND c.table_name = t.table_name\n          AND c.column_name = 'vector_id'\n          AND c.data_type = 'text'\n        )\n        AND EXISTS (\n          SELECT 1\n          FROM information_schema.columns c\n          WHERE c.table_schema = t.table_schema\n          AND c.table_name = t.table_name\n          AND c.column_name = 'embedding'\n          AND c.udt_name = 'vector'\n        )\n        AND EXISTS (\n          SELECT 1\n          FROM information_schema.columns c\n          WHERE c.table_schema = t.table_schema\n          AND c.table_name = t.table_name\n          AND c.column_name = 'metadata'\n          AND c.data_type = 'jsonb'\n        );\n      `;\n      const mastraTables = await client.query(mastraTablesQuery, [this.schema || \"public\"]);\n      return mastraTables.rows.map((row) => row.table_name);\n    } catch (e) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_LIST_INDEXES_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        e\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  /**\n   * Retrieves statistics about a vector index.\n   *\n   * @param {string} indexName - The name of the index to describe\n   * @returns A promise that resolves to the index statistics including dimension, count and metric\n   */\n  async describeIndex({ indexName }) {\n    const client = await this.pool.connect();\n    try {\n      const { tableName } = this.getTableName(indexName);\n      const tableExistsQuery = `\n        SELECT 1\n        FROM information_schema.columns\n        WHERE table_schema = $1\n          AND table_name = $2\n          AND udt_name = 'vector'\n        LIMIT 1;\n      `;\n      const tableExists = await client.query(tableExistsQuery, [this.schema || \"public\", indexName]);\n      if (tableExists.rows.length === 0) {\n        throw new Error(`Vector table ${tableName} does not exist`);\n      }\n      const dimensionQuery = `\n                SELECT atttypmod as dimension\n                FROM pg_attribute\n                WHERE attrelid = $1::regclass\n                AND attname = 'embedding';\n            `;\n      const countQuery = `\n                SELECT COUNT(*) as count\n                FROM ${tableName};\n            `;\n      const indexQuery = `\n            SELECT\n                am.amname as index_method,\n                pg_get_indexdef(i.indexrelid) as index_def,\n                opclass.opcname as operator_class\n            FROM pg_index i\n            JOIN pg_class c ON i.indexrelid = c.oid\n            JOIN pg_am am ON c.relam = am.oid\n            JOIN pg_opclass opclass ON i.indclass[0] = opclass.oid\n            JOIN pg_namespace n ON c.relnamespace = n.oid\n            WHERE c.relname = $1\n            AND n.nspname = $2;\n            `;\n      const [dimResult, countResult, indexResult] = await Promise.all([\n        client.query(dimensionQuery, [tableName]),\n        client.query(countQuery),\n        client.query(indexQuery, [`${indexName}_vector_idx`, this.schema || \"public\"])\n      ]);\n      const { index_method, index_def, operator_class } = indexResult.rows[0] || {\n        index_method: \"flat\",\n        index_def: \"\",\n        operator_class: \"cosine\"\n      };\n      const metric = operator_class.includes(\"l2\") ? \"euclidean\" : operator_class.includes(\"ip\") ? \"dotproduct\" : \"cosine\";\n      const config = {};\n      if (index_method === \"hnsw\") {\n        const m = index_def.match(/m\\s*=\\s*'?(\\d+)'?/)?.[1];\n        const efConstruction = index_def.match(/ef_construction\\s*=\\s*'?(\\d+)'?/)?.[1];\n        if (m) config.m = parseInt(m);\n        if (efConstruction) config.efConstruction = parseInt(efConstruction);\n      } else if (index_method === \"ivfflat\") {\n        const lists = index_def.match(/lists\\s*=\\s*'?(\\d+)'?/)?.[1];\n        if (lists) config.lists = parseInt(lists);\n      }\n      return {\n        dimension: dimResult.rows[0].dimension,\n        count: parseInt(countResult.rows[0].count),\n        metric,\n        type: index_method,\n        config\n      };\n    } catch (e) {\n      await client.query(\"ROLLBACK\");\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_DESCRIBE_INDEX_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        e\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  async deleteIndex({ indexName }) {\n    const client = await this.pool.connect();\n    try {\n      const { tableName } = this.getTableName(indexName);\n      await client.query(`DROP TABLE IF EXISTS ${tableName} CASCADE`);\n      this.createdIndexes.delete(indexName);\n    } catch (error) {\n      await client.query(\"ROLLBACK\");\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_INDEX_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  async truncateIndex({ indexName }) {\n    const client = await this.pool.connect();\n    try {\n      const { tableName } = this.getTableName(indexName);\n      await client.query(`TRUNCATE ${tableName}`);\n    } catch (e) {\n      await client.query(\"ROLLBACK\");\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_TRUNCATE_INDEX_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        e\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client.release();\n    }\n  }\n  async disconnect() {\n    if (this.cacheWarmupPromise) {\n      try {\n        await this.cacheWarmupPromise;\n      } catch {\n      }\n    }\n    await this.pool.end();\n  }\n  /**\n   * Updates a vector by its ID with the provided vector and/or metadata.\n   * @param indexName - The name of the index containing the vector.\n   * @param id - The ID of the vector to update.\n   * @param update - An object containing the vector and/or metadata to update.\n   * @param update.vector - An optional array of numbers representing the new vector.\n   * @param update.metadata - An optional record containing the new metadata.\n   * @returns A promise that resolves when the update is complete.\n   * @throws Will throw an error if no updates are provided or if the update operation fails.\n   */\n  async updateVector({ indexName, id, filter, update }) {\n    let client;\n    try {\n      if (!update.vector && !update.metadata) {\n        throw new Error(\"No updates provided\");\n      }\n      if (!id && !filter) {\n        throw new MastraError({\n          id: \"MASTRA_STORAGE_PG_VECTOR_UPDATE_MISSING_PARAMS\",\n          text: \"Either id or filter must be provided\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.USER,\n          details: { indexName }\n        });\n      }\n      if (id && filter) {\n        throw new MastraError({\n          id: \"MASTRA_STORAGE_PG_VECTOR_UPDATE_CONFLICTING_PARAMS\",\n          text: \"Cannot provide both id and filter - they are mutually exclusive\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.USER,\n          details: { indexName }\n        });\n      }\n      client = await this.pool.connect();\n      const { tableName } = this.getTableName(indexName);\n      const vectorType = this.getVectorTypeName();\n      let updateParts = [];\n      let values = [];\n      let valueIndex = 1;\n      if (update.vector) {\n        updateParts.push(`embedding = $${valueIndex}::${vectorType}`);\n        values.push(`[${update.vector.join(\",\")}]`);\n        valueIndex++;\n      }\n      if (update.metadata) {\n        updateParts.push(`metadata = $${valueIndex}::jsonb`);\n        values.push(JSON.stringify(update.metadata));\n        valueIndex++;\n      }\n      if (updateParts.length === 0) {\n        return;\n      }\n      let whereClause;\n      let whereValues;\n      if (id) {\n        whereClause = `vector_id = $${valueIndex}`;\n        whereValues = [id];\n      } else {\n        if (!filter || Object.keys(filter).length === 0) {\n          throw new MastraError({\n            id: \"MASTRA_STORAGE_PG_VECTOR_UPDATE_EMPTY_FILTER\",\n            text: \"Cannot update with empty filter\",\n            domain: ErrorDomain.MASTRA_VECTOR,\n            category: ErrorCategory.USER,\n            details: { indexName }\n          });\n        }\n        const translatedFilter = this.transformFilter(filter);\n        const { sql: filterQuery, values: filterValues } = buildDeleteFilterQuery(translatedFilter);\n        whereClause = filterQuery.trim().replace(/^WHERE\\s+/i, \"\");\n        if (!whereClause) {\n          throw new MastraError({\n            id: \"MASTRA_STORAGE_PG_VECTOR_UPDATE_INVALID_FILTER\",\n            text: \"Filter produced empty WHERE clause\",\n            domain: ErrorDomain.MASTRA_VECTOR,\n            category: ErrorCategory.USER,\n            details: { indexName, filter: JSON.stringify(filter) }\n          });\n        }\n        whereClause = whereClause.replace(/\\$(\\d+)/g, (match, num) => {\n          const newIndex = parseInt(num) + valueIndex - 1;\n          return `$${newIndex}`;\n        });\n        whereValues = filterValues;\n      }\n      const query = `\n        UPDATE ${tableName}\n        SET ${updateParts.join(\", \")}\n        WHERE ${whereClause}\n      `;\n      const result = await client.query(query, [...values, ...whereValues]);\n      this.logger?.info(`Updated ${result.rowCount || 0} vectors in ${indexName}`, {\n        indexName,\n        id: id ? id : void 0,\n        filter: filter ? filter : void 0,\n        updatedCount: result.rowCount || 0\n      });\n    } catch (error) {\n      if (error instanceof MastraError) {\n        throw error;\n      }\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_UPDATE_VECTOR_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName,\n            ...id && { id },\n            ...filter && { filter: JSON.stringify(filter) }\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client?.release();\n    }\n  }\n  /**\n   * Deletes a vector by its ID.\n   * @param indexName - The name of the index containing the vector.\n   * @param id - The ID of the vector to delete.\n   * @returns A promise that resolves when the deletion is complete.\n   * @throws Will throw an error if the deletion operation fails.\n   */\n  async deleteVector({ indexName, id }) {\n    let client;\n    try {\n      client = await this.pool.connect();\n      const { tableName } = this.getTableName(indexName);\n      const query = `\n        DELETE FROM ${tableName}\n        WHERE vector_id = $1\n      `;\n      await client.query(query, [id]);\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_VECTOR_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName,\n            id\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client?.release();\n    }\n  }\n  /**\n   * Delete vectors matching a metadata filter.\n   * @param indexName - The name of the index containing the vectors.\n   * @param filter - The filter to match vectors for deletion.\n   * @returns A promise that resolves when the deletion is complete.\n   * @throws Will throw an error if the deletion operation fails.\n   */\n  async deleteVectors({ indexName, filter, ids }) {\n    let client;\n    try {\n      client = await this.pool.connect();\n      const { tableName } = this.getTableName(indexName);\n      if (!filter && !ids) {\n        throw new MastraError({\n          id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_MISSING_PARAMS\",\n          text: \"Either filter or ids must be provided\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.USER,\n          details: { indexName }\n        });\n      }\n      if (filter && ids) {\n        throw new MastraError({\n          id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_CONFLICTING_PARAMS\",\n          text: \"Cannot provide both filter and ids - they are mutually exclusive\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.USER,\n          details: { indexName }\n        });\n      }\n      let query;\n      let values;\n      if (ids) {\n        if (ids.length === 0) {\n          throw new MastraError({\n            id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_EMPTY_IDS\",\n            text: \"Cannot delete with empty ids array\",\n            domain: ErrorDomain.MASTRA_VECTOR,\n            category: ErrorCategory.USER,\n            details: { indexName }\n          });\n        }\n        const placeholders = ids.map((_, i) => `$${i + 1}`).join(\", \");\n        query = `DELETE FROM ${tableName} WHERE vector_id IN (${placeholders})`;\n        values = ids;\n      } else {\n        if (!filter || Object.keys(filter).length === 0) {\n          throw new MastraError({\n            id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_EMPTY_FILTER\",\n            text: \"Cannot delete with empty filter. Use deleteIndex to delete all vectors.\",\n            domain: ErrorDomain.MASTRA_VECTOR,\n            category: ErrorCategory.USER,\n            details: { indexName }\n          });\n        }\n        const translatedFilter = this.transformFilter(filter);\n        const { sql: filterQuery, values: filterValues } = buildDeleteFilterQuery(translatedFilter);\n        const whereClause = filterQuery.trim().replace(/^WHERE\\s+/i, \"\");\n        if (!whereClause) {\n          throw new MastraError({\n            id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_INVALID_FILTER\",\n            text: \"Filter produced empty WHERE clause\",\n            domain: ErrorDomain.MASTRA_VECTOR,\n            category: ErrorCategory.USER,\n            details: { indexName, filter: JSON.stringify(filter) }\n          });\n        }\n        query = `DELETE FROM ${tableName} WHERE ${whereClause}`;\n        values = filterValues;\n      }\n      const result = await client.query(query, values);\n      this.logger?.info(`Deleted ${result.rowCount || 0} vectors from ${indexName}`, {\n        indexName,\n        filter: filter ? filter : void 0,\n        ids: ids ? ids : void 0,\n        deletedCount: result.rowCount || 0\n      });\n    } catch (error) {\n      if (error instanceof MastraError) {\n        throw error;\n      }\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_VECTOR_DELETE_VECTORS_FAILED\",\n          domain: ErrorDomain.MASTRA_VECTOR,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName,\n            ...filter && { filter: JSON.stringify(filter) },\n            ...ids && { idsCount: ids.length }\n          }\n        },\n        error\n      );\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    } finally {\n      client?.release();\n    }\n  }\n};\nfunction getSchemaName(schema) {\n  return schema ? `\"${parseSqlIdentifier(schema, \"schema name\")}\"` : void 0;\n}\nfunction getTableName({ indexName, schemaName }) {\n  const parsedIndexName = parseSqlIdentifier(indexName, \"index name\");\n  const quotedIndexName = `\"${parsedIndexName}\"`;\n  const quotedSchemaName = schemaName;\n  return quotedSchemaName ? `${quotedSchemaName}.${quotedIndexName}` : quotedIndexName;\n}\nfunction buildDateRangeFilter(dateRange, fieldName) {\n  const filters = {};\n  if (dateRange?.start) {\n    filters[`${fieldName}_gte`] = dateRange.start;\n  }\n  if (dateRange?.end) {\n    filters[`${fieldName}_lte`] = dateRange.end;\n  }\n  return filters;\n}\nfunction prepareWhereClause(filters, _schema) {\n  const conditions = [];\n  const args = [];\n  let paramIndex = 1;\n  Object.entries(filters).forEach(([key, value]) => {\n    if (value === void 0) return;\n    if (key.endsWith(\"_gte\")) {\n      const fieldName = key.slice(0, -4);\n      conditions.push(`\"${parseSqlIdentifier(fieldName, \"field name\")}\" >= $${paramIndex++}`);\n      args.push(value instanceof Date ? value.toISOString() : value);\n    } else if (key.endsWith(\"_lte\")) {\n      const fieldName = key.slice(0, -4);\n      conditions.push(`\"${parseSqlIdentifier(fieldName, \"field name\")}\" <= $${paramIndex++}`);\n      args.push(value instanceof Date ? value.toISOString() : value);\n    } else if (value === null) {\n      conditions.push(`\"${parseSqlIdentifier(key, \"field name\")}\" IS NULL`);\n    } else {\n      conditions.push(`\"${parseSqlIdentifier(key, \"field name\")}\" = $${paramIndex++}`);\n      args.push(value instanceof Date ? value.toISOString() : value);\n    }\n  });\n  return {\n    sql: conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\",\n    args\n  };\n}\nfunction transformFromSqlRow({\n  tableName,\n  sqlRow\n}) {\n  const schema = TABLE_SCHEMAS[tableName];\n  const result = {};\n  Object.entries(sqlRow).forEach(([key, value]) => {\n    const columnSchema = schema?.[key];\n    if (columnSchema?.type === \"jsonb\" && typeof value === \"string\") {\n      try {\n        result[key] = JSON.parse(value);\n      } catch {\n        result[key] = value;\n      }\n    } else if (columnSchema?.type === \"timestamp\" && value && typeof value === \"string\") {\n      result[key] = new Date(value);\n    } else if (columnSchema?.type === \"timestamp\" && value instanceof Date) {\n      result[key] = value;\n    } else if (columnSchema?.type === \"boolean\") {\n      result[key] = Boolean(value);\n    } else {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\n// src/storage/domains/legacy-evals/index.ts\nfunction transformEvalRow(row) {\n  let testInfoValue = null;\n  if (row.test_info) {\n    try {\n      testInfoValue = typeof row.test_info === \"string\" ? JSON.parse(row.test_info) : row.test_info;\n    } catch (e) {\n      console.warn(\"Failed to parse test_info:\", e);\n    }\n  }\n  return {\n    agentName: row.agent_name,\n    input: row.input,\n    output: row.output,\n    result: row.result,\n    metricName: row.metric_name,\n    instructions: row.instructions,\n    testInfo: testInfoValue,\n    globalRunId: row.global_run_id,\n    runId: row.run_id,\n    createdAt: row.created_atZ || row.created_at\n  };\n}\nvar LegacyEvalsPG = class extends LegacyEvalsStorage {\n  client;\n  schema;\n  constructor({ client, schema }) {\n    super();\n    this.client = client;\n    this.schema = schema;\n  }\n  /** @deprecated use getEvals instead */\n  async getEvalsByAgentName(agentName, type) {\n    try {\n      const baseQuery = `SELECT * FROM ${getTableName({ indexName: TABLE_EVALS, schemaName: getSchemaName(this.schema) })} WHERE agent_name = $1`;\n      const typeCondition = type === \"test\" ? \" AND test_info IS NOT NULL AND test_info->>'testPath' IS NOT NULL\" : type === \"live\" ? \" AND (test_info IS NULL OR test_info->>'testPath' IS NULL)\" : \"\";\n      const query = `${baseQuery}${typeCondition} ORDER BY created_at DESC`;\n      const rows = await this.client.manyOrNone(query, [agentName]);\n      return rows?.map((row) => transformEvalRow(row)) ?? [];\n    } catch (error) {\n      if (error instanceof Error && error.message.includes(\"relation\") && error.message.includes(\"does not exist\")) {\n        return [];\n      }\n      console.error(\"Failed to get evals for the specified agent: \" + error?.message);\n      throw error;\n    }\n  }\n  async getEvals(options = {}) {\n    const tableName = getTableName({ indexName: TABLE_EVALS, schemaName: getSchemaName(this.schema) });\n    const { agentName, type, page = 0, perPage = 100, dateRange } = options;\n    const fromDate = dateRange?.start;\n    const toDate = dateRange?.end;\n    const conditions = [];\n    const queryParams = [];\n    let paramIndex = 1;\n    if (agentName) {\n      conditions.push(`agent_name = $${paramIndex++}`);\n      queryParams.push(agentName);\n    }\n    if (type === \"test\") {\n      conditions.push(`(test_info IS NOT NULL AND test_info->>'testPath' IS NOT NULL)`);\n    } else if (type === \"live\") {\n      conditions.push(`(test_info IS NULL OR test_info->>'testPath' IS NULL)`);\n    }\n    if (fromDate) {\n      conditions.push(`created_at >= $${paramIndex++}`);\n      queryParams.push(fromDate);\n    }\n    if (toDate) {\n      conditions.push(`created_at <= $${paramIndex++}`);\n      queryParams.push(toDate);\n    }\n    const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(\" AND \")}` : \"\";\n    const countQuery = `SELECT COUNT(*) FROM ${tableName} ${whereClause}`;\n    try {\n      const countResult = await this.client.one(countQuery, queryParams);\n      const total = parseInt(countResult.count, 10);\n      const currentOffset = page * perPage;\n      if (total === 0) {\n        return {\n          evals: [],\n          total: 0,\n          page,\n          perPage,\n          hasMore: false\n        };\n      }\n      const dataQuery = `SELECT * FROM ${tableName} ${whereClause} ORDER BY created_at DESC LIMIT $${paramIndex++} OFFSET $${paramIndex++}`;\n      const rows = await this.client.manyOrNone(dataQuery, [...queryParams, perPage, currentOffset]);\n      return {\n        evals: rows?.map((row) => transformEvalRow(row)) ?? [],\n        total,\n        page,\n        perPage,\n        hasMore: currentOffset + (rows?.length ?? 0) < total\n      };\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_EVALS_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            agentName: agentName || \"all\",\n            type: type || \"all\",\n            page,\n            perPage\n          }\n        },\n        error\n      );\n      this.logger?.error?.(mastraError.toString());\n      this.logger?.trackException(mastraError);\n      throw mastraError;\n    }\n  }\n};\nvar MemoryPG = class extends MemoryStorage {\n  client;\n  schema;\n  operations;\n  constructor({\n    client,\n    schema,\n    operations\n  }) {\n    super();\n    this.client = client;\n    this.schema = schema;\n    this.operations = operations;\n  }\n  /**\n   * Normalizes message row from database by applying createdAtZ fallback\n   */\n  normalizeMessageRow(row) {\n    return {\n      id: row.id,\n      content: row.content,\n      role: row.role,\n      type: row.type,\n      createdAt: row.createdAtZ || row.createdAt,\n      threadId: row.threadId,\n      resourceId: row.resourceId\n    };\n  }\n  async getThreadById({ threadId }) {\n    try {\n      const tableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n      const thread = await this.client.oneOrNone(\n        `SELECT * FROM ${tableName} WHERE id = $1`,\n        [threadId]\n      );\n      if (!thread) {\n        return null;\n      }\n      return {\n        id: thread.id,\n        resourceId: thread.resourceId,\n        title: thread.title,\n        metadata: typeof thread.metadata === \"string\" ? JSON.parse(thread.metadata) : thread.metadata,\n        createdAt: thread.createdAtZ || thread.createdAt,\n        updatedAt: thread.updatedAtZ || thread.updatedAt\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_THREAD_BY_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * @deprecated use getThreadsByResourceIdPaginated instead\n   */\n  async getThreadsByResourceId(args) {\n    const resourceId = args.resourceId;\n    const orderBy = this.castThreadOrderBy(args.orderBy);\n    const sortDirection = this.castThreadSortDirection(args.sortDirection);\n    try {\n      const tableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n      const baseQuery = `FROM ${tableName} WHERE \"resourceId\" = $1`;\n      const queryParams = [resourceId];\n      const dataQuery = `SELECT id, \"resourceId\", title, metadata, \"createdAt\", \"updatedAt\" ${baseQuery} ORDER BY \"${orderBy}\" ${sortDirection}`;\n      const rows = await this.client.manyOrNone(dataQuery, queryParams);\n      return (rows || []).map((thread) => ({\n        ...thread,\n        metadata: typeof thread.metadata === \"string\" ? JSON.parse(thread.metadata) : thread.metadata,\n        createdAt: thread.createdAt,\n        updatedAt: thread.updatedAt\n      }));\n    } catch (error) {\n      this.logger.error(`Error getting threads for resource ${resourceId}:`, error);\n      return [];\n    }\n  }\n  async getThreadsByResourceIdPaginated(args) {\n    const { resourceId, page = 0, perPage: perPageInput } = args;\n    const orderBy = this.castThreadOrderBy(args.orderBy);\n    const sortDirection = this.castThreadSortDirection(args.sortDirection);\n    try {\n      const tableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n      const baseQuery = `FROM ${tableName} WHERE \"resourceId\" = $1`;\n      const queryParams = [resourceId];\n      const perPage = perPageInput !== void 0 ? perPageInput : 100;\n      const currentOffset = page * perPage;\n      const countQuery = `SELECT COUNT(*) ${baseQuery}`;\n      const countResult = await this.client.one(countQuery, queryParams);\n      const total = parseInt(countResult.count, 10);\n      if (total === 0) {\n        return {\n          threads: [],\n          total: 0,\n          page,\n          perPage,\n          hasMore: false\n        };\n      }\n      const dataQuery = `SELECT id, \"resourceId\", title, metadata, \"createdAt\", \"updatedAt\" ${baseQuery} ORDER BY \"${orderBy}\" ${sortDirection} LIMIT $2 OFFSET $3`;\n      const rows = await this.client.manyOrNone(dataQuery, [...queryParams, perPage, currentOffset]);\n      const threads = (rows || []).map((thread) => ({\n        ...thread,\n        metadata: typeof thread.metadata === \"string\" ? JSON.parse(thread.metadata) : thread.metadata,\n        createdAt: thread.createdAt,\n        // Assuming already Date objects or ISO strings\n        updatedAt: thread.updatedAt\n      }));\n      return {\n        threads,\n        total,\n        page,\n        perPage,\n        hasMore: currentOffset + threads.length < total\n      };\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_THREADS_BY_RESOURCE_ID_PAGINATED_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            resourceId,\n            page\n          }\n        },\n        error\n      );\n      this.logger?.error?.(mastraError.toString());\n      this.logger?.trackException(mastraError);\n      return { threads: [], total: 0, page, perPage: perPageInput || 100, hasMore: false };\n    }\n  }\n  async saveThread({ thread }) {\n    try {\n      const tableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n      await this.client.none(\n        `INSERT INTO ${tableName} (\n          id,\n          \"resourceId\",\n          title,\n          metadata,\n          \"createdAt\",\n          \"createdAtZ\",\n          \"updatedAt\",\n          \"updatedAtZ\"\n        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8)\n        ON CONFLICT (id) DO UPDATE SET\n          \"resourceId\" = EXCLUDED.\"resourceId\",\n          title = EXCLUDED.title,\n          metadata = EXCLUDED.metadata,\n          \"createdAt\" = EXCLUDED.\"createdAt\",\n          \"createdAtZ\" = EXCLUDED.\"createdAtZ\",\n          \"updatedAt\" = EXCLUDED.\"updatedAt\",\n          \"updatedAtZ\" = EXCLUDED.\"updatedAtZ\"`,\n        [\n          thread.id,\n          thread.resourceId,\n          thread.title,\n          thread.metadata ? JSON.stringify(thread.metadata) : null,\n          thread.createdAt,\n          thread.createdAt,\n          thread.updatedAt,\n          thread.updatedAt\n        ]\n      );\n      return thread;\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_SAVE_THREAD_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId: thread.id\n          }\n        },\n        error\n      );\n    }\n  }\n  async updateThread({\n    id,\n    title,\n    metadata\n  }) {\n    const threadTableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n    const existingThread = await this.getThreadById({ threadId: id });\n    if (!existingThread) {\n      throw new MastraError({\n        id: \"MASTRA_STORAGE_PG_STORE_UPDATE_THREAD_FAILED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.USER,\n        text: `Thread ${id} not found`,\n        details: {\n          threadId: id,\n          title\n        }\n      });\n    }\n    const mergedMetadata = {\n      ...existingThread.metadata,\n      ...metadata\n    };\n    try {\n      const thread = await this.client.one(\n        `UPDATE ${threadTableName}\n                    SET \n                        title = $1,\n                        metadata = $2,\n                        \"updatedAt\" = $3,\n                        \"updatedAtZ\" = $3\n                    WHERE id = $4\n                    RETURNING *\n                `,\n        [title, mergedMetadata, (/* @__PURE__ */ new Date()).toISOString(), id]\n      );\n      return {\n        id: thread.id,\n        resourceId: thread.resourceId,\n        title: thread.title,\n        metadata: typeof thread.metadata === \"string\" ? JSON.parse(thread.metadata) : thread.metadata,\n        createdAt: thread.createdAtZ || thread.createdAt,\n        updatedAt: thread.updatedAtZ || thread.updatedAt\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_UPDATE_THREAD_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId: id,\n            title\n          }\n        },\n        error\n      );\n    }\n  }\n  async deleteThread({ threadId }) {\n    try {\n      const tableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n      const threadTableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n      await this.client.tx(async (t) => {\n        await t.none(`DELETE FROM ${tableName} WHERE thread_id = $1`, [threadId]);\n        await t.none(`DELETE FROM ${threadTableName} WHERE id = $1`, [threadId]);\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_DELETE_THREAD_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId\n          }\n        },\n        error\n      );\n    }\n  }\n  async _getIncludedMessages({\n    threadId,\n    selectBy,\n    orderByStatement\n  }) {\n    if (!threadId.trim()) throw new Error(\"threadId must be a non-empty string\");\n    const include = selectBy?.include;\n    if (!include) return null;\n    const unionQueries = [];\n    const params = [];\n    let paramIdx = 1;\n    const tableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n    for (const inc of include) {\n      const { id, withPreviousMessages = 0, withNextMessages = 0 } = inc;\n      const searchId = inc.threadId || threadId;\n      unionQueries.push(\n        `\n            SELECT * FROM (\n              WITH ordered_messages AS (\n                SELECT \n                  *,\n                  ROW_NUMBER() OVER (${orderByStatement}) as row_num\n                FROM ${tableName}\n                WHERE thread_id = $${paramIdx}\n              )\n              SELECT\n                m.id,\n                m.content,\n                m.role,\n                m.type,\n                m.\"createdAt\",\n                m.\"createdAtZ\",\n                m.thread_id AS \"threadId\",\n                m.\"resourceId\"\n              FROM ordered_messages m\n              WHERE m.id = $${paramIdx + 1}\n              OR EXISTS (\n                SELECT 1 FROM ordered_messages target\n                WHERE target.id = $${paramIdx + 1}\n                AND (\n                  -- Get previous messages based on the max withPreviousMessages\n                  (m.row_num <= target.row_num + $${paramIdx + 2} AND m.row_num > target.row_num)\n                  OR\n                  -- Get next messages based on the max withNextMessages\n                  (m.row_num >= target.row_num - $${paramIdx + 3} AND m.row_num < target.row_num)\n                )\n              )\n            ) AS query_${paramIdx}\n            `\n        // Keep ASC for final sorting after fetching context\n      );\n      params.push(searchId, id, withPreviousMessages, withNextMessages);\n      paramIdx += 4;\n    }\n    const finalQuery = unionQueries.join(\" UNION ALL \") + ' ORDER BY \"createdAt\" ASC';\n    const includedRows = await this.client.manyOrNone(finalQuery, params);\n    const seen = /* @__PURE__ */ new Set();\n    const dedupedRows = includedRows.filter((row) => {\n      if (seen.has(row.id)) return false;\n      seen.add(row.id);\n      return true;\n    });\n    return dedupedRows;\n  }\n  parseRow(row) {\n    const normalized = this.normalizeMessageRow(row);\n    let content = normalized.content;\n    try {\n      content = JSON.parse(normalized.content);\n    } catch {\n    }\n    return {\n      id: normalized.id,\n      content,\n      role: normalized.role,\n      createdAt: new Date(normalized.createdAt),\n      threadId: normalized.threadId,\n      resourceId: normalized.resourceId,\n      ...normalized.type && normalized.type !== \"v2\" ? { type: normalized.type } : {}\n    };\n  }\n  async getMessages(args) {\n    const { threadId, resourceId, format, selectBy } = args;\n    const selectStatement = `SELECT id, content, role, type, \"createdAt\", \"createdAtZ\", thread_id AS \"threadId\", \"resourceId\"`;\n    const orderByStatement = `ORDER BY \"createdAt\" DESC`;\n    const limit = resolveMessageLimit({ last: selectBy?.last, defaultLimit: 40 });\n    try {\n      if (!threadId.trim()) throw new Error(\"threadId must be a non-empty string\");\n      let rows = [];\n      const include = selectBy?.include || [];\n      if (include?.length) {\n        const includeMessages = await this._getIncludedMessages({ threadId, selectBy, orderByStatement });\n        if (includeMessages) {\n          rows.push(...includeMessages);\n        }\n      }\n      const excludeIds = rows.map((m) => m.id);\n      const tableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n      const excludeIdsParam = excludeIds.map((_, idx) => `$${idx + 2}`).join(\", \");\n      let query = `${selectStatement} FROM ${tableName} WHERE thread_id = $1 \n        ${excludeIds.length ? `AND id NOT IN (${excludeIdsParam})` : \"\"}\n        ${orderByStatement}\n        LIMIT $${excludeIds.length + 2}\n        `;\n      const queryParams = [threadId, ...excludeIds, limit];\n      const remainingRows = await this.client.manyOrNone(query, queryParams);\n      rows.push(...remainingRows);\n      const fetchedMessages = (rows || []).map((row) => {\n        const message = this.normalizeMessageRow(row);\n        if (typeof message.content === \"string\") {\n          try {\n            message.content = JSON.parse(message.content);\n          } catch {\n          }\n        }\n        if (message.type === \"v2\") delete message.type;\n        return message;\n      });\n      const sortedMessages = fetchedMessages.sort(\n        (a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n      );\n      return format === \"v2\" ? sortedMessages.map(\n        (m) => ({ ...m, content: m.content || { format: 2, parts: [{ type: \"text\", text: \"\" }] } })\n      ) : sortedMessages;\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_MESSAGES_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId,\n            resourceId: resourceId ?? \"\"\n          }\n        },\n        error\n      );\n      this.logger?.error?.(mastraError.toString());\n      this.logger?.trackException(mastraError);\n      return [];\n    }\n  }\n  async getMessagesById({\n    messageIds,\n    format\n  }) {\n    if (messageIds.length === 0) return [];\n    const selectStatement = `SELECT id, content, role, type, \"createdAt\", \"createdAtZ\", thread_id AS \"threadId\", \"resourceId\"`;\n    try {\n      const tableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n      const query = `\n        ${selectStatement} FROM ${tableName} \n        WHERE id IN (${messageIds.map((_, i) => `$${i + 1}`).join(\", \")})\n        ORDER BY \"createdAt\" DESC\n      `;\n      const resultRows = await this.client.manyOrNone(query, messageIds);\n      const list = new MessageList().add(\n        resultRows.map((row) => this.parseRow(row)),\n        \"memory\"\n      );\n      if (format === `v1`) return list.get.all.v1();\n      return list.get.all.v2();\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_MESSAGES_BY_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            messageIds: JSON.stringify(messageIds)\n          }\n        },\n        error\n      );\n      this.logger?.error?.(mastraError.toString());\n      this.logger?.trackException(mastraError);\n      return [];\n    }\n  }\n  async getMessagesPaginated(args) {\n    const { threadId, resourceId, format, selectBy } = args;\n    const { page = 0, perPage: perPageInput, dateRange } = selectBy?.pagination || {};\n    const fromDate = dateRange?.start;\n    const toDate = dateRange?.end;\n    const selectStatement = `SELECT id, content, role, type, \"createdAt\", \"createdAtZ\", thread_id AS \"threadId\", \"resourceId\"`;\n    const orderByStatement = `ORDER BY \"createdAt\" DESC`;\n    const messages = [];\n    try {\n      if (!threadId.trim()) throw new Error(\"threadId must be a non-empty string\");\n      if (selectBy?.include?.length) {\n        const includeMessages = await this._getIncludedMessages({ threadId, selectBy, orderByStatement });\n        if (includeMessages) {\n          messages.push(...includeMessages);\n        }\n      }\n      const perPage = perPageInput !== void 0 ? perPageInput : resolveMessageLimit({ last: selectBy?.last, defaultLimit: 40 });\n      const currentOffset = page * perPage;\n      const conditions = [`thread_id = $1`];\n      const queryParams = [threadId];\n      let paramIndex = 2;\n      if (fromDate) {\n        conditions.push(`\"createdAt\" >= $${paramIndex++}`);\n        queryParams.push(fromDate);\n      }\n      if (toDate) {\n        conditions.push(`\"createdAt\" <= $${paramIndex++}`);\n        queryParams.push(toDate);\n      }\n      const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(\" AND \")}` : \"\";\n      const tableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n      const countQuery = `SELECT COUNT(*) FROM ${tableName} ${whereClause}`;\n      const countResult = await this.client.one(countQuery, queryParams);\n      const total = parseInt(countResult.count, 10);\n      if (total === 0 && messages.length === 0) {\n        return {\n          messages: [],\n          total: 0,\n          page,\n          perPage,\n          hasMore: false\n        };\n      }\n      const excludeIds = messages.map((m) => m.id);\n      const excludeIdsParam = excludeIds.map((_, idx) => `$${idx + paramIndex}`).join(\", \");\n      paramIndex += excludeIds.length;\n      const dataQuery = `${selectStatement} FROM ${tableName} ${whereClause} ${excludeIds.length ? `AND id NOT IN (${excludeIdsParam})` : \"\"}${orderByStatement} LIMIT $${paramIndex++} OFFSET $${paramIndex++}`;\n      const rows = await this.client.manyOrNone(dataQuery, [...queryParams, ...excludeIds, perPage, currentOffset]);\n      messages.push(...rows || []);\n      const messagesWithParsedContent = messages.map((row) => {\n        const message = this.normalizeMessageRow(row);\n        if (typeof message.content === \"string\") {\n          try {\n            return { ...message, content: JSON.parse(message.content) };\n          } catch {\n            return message;\n          }\n        }\n        return message;\n      });\n      const list = new MessageList().add(messagesWithParsedContent, \"memory\");\n      let messagesToReturn = format === `v2` ? list.get.all.v2() : list.get.all.v1();\n      messagesToReturn = messagesToReturn.sort(\n        (a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\n      );\n      return {\n        messages: messagesToReturn,\n        total,\n        page,\n        perPage,\n        hasMore: currentOffset + rows.length < total\n      };\n    } catch (error) {\n      const mastraError = new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_MESSAGES_PAGINATED_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId,\n            resourceId: resourceId ?? \"\",\n            page\n          }\n        },\n        error\n      );\n      this.logger?.error?.(mastraError.toString());\n      this.logger?.trackException(mastraError);\n      return { messages: [], total: 0, page, perPage: perPageInput || 40, hasMore: false };\n    }\n  }\n  async saveMessages({\n    messages,\n    format\n  }) {\n    if (messages.length === 0) return messages;\n    const threadId = messages[0]?.threadId;\n    if (!threadId) {\n      throw new MastraError({\n        id: \"MASTRA_STORAGE_PG_STORE_SAVE_MESSAGES_FAILED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.THIRD_PARTY,\n        text: `Thread ID is required`\n      });\n    }\n    const thread = await this.getThreadById({ threadId });\n    if (!thread) {\n      throw new MastraError({\n        id: \"MASTRA_STORAGE_PG_STORE_SAVE_MESSAGES_FAILED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.THIRD_PARTY,\n        text: `Thread ${threadId} not found`,\n        details: {\n          threadId\n        }\n      });\n    }\n    try {\n      const tableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n      await this.client.tx(async (t) => {\n        const messageInserts = messages.map((message) => {\n          if (!message.threadId) {\n            throw new Error(\n              `Expected to find a threadId for message, but couldn't find one. An unexpected error has occurred.`\n            );\n          }\n          if (!message.resourceId) {\n            throw new Error(\n              `Expected to find a resourceId for message, but couldn't find one. An unexpected error has occurred.`\n            );\n          }\n          return t.none(\n            `INSERT INTO ${tableName} (id, thread_id, content, \"createdAt\", \"createdAtZ\", role, type, \"resourceId\") \n             VALUES ($1, $2, $3, $4, $5, $6, $7, $8)\n             ON CONFLICT (id) DO UPDATE SET\n              thread_id = EXCLUDED.thread_id,\n              content = EXCLUDED.content,\n              role = EXCLUDED.role,\n              type = EXCLUDED.type,\n              \"resourceId\" = EXCLUDED.\"resourceId\"`,\n            [\n              message.id,\n              message.threadId,\n              typeof message.content === \"string\" ? message.content : JSON.stringify(message.content),\n              message.createdAt || (/* @__PURE__ */ new Date()).toISOString(),\n              message.createdAt || (/* @__PURE__ */ new Date()).toISOString(),\n              message.role,\n              message.type || \"v2\",\n              message.resourceId\n            ]\n          );\n        });\n        const threadTableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n        const threadUpdate = t.none(\n          `UPDATE ${threadTableName} \n                        SET \n                            \"updatedAt\" = $1,\n                            \"updatedAtZ\" = $1\n                        WHERE id = $2\n                    `,\n          [(/* @__PURE__ */ new Date()).toISOString(), threadId]\n        );\n        await Promise.all([...messageInserts, threadUpdate]);\n      });\n      const messagesWithParsedContent = messages.map((message) => {\n        if (typeof message.content === \"string\") {\n          try {\n            return { ...message, content: JSON.parse(message.content) };\n          } catch {\n            return message;\n          }\n        }\n        return message;\n      });\n      const list = new MessageList().add(messagesWithParsedContent, \"memory\");\n      if (format === `v2`) return list.get.all.v2();\n      return list.get.all.v1();\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_SAVE_MESSAGES_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            threadId\n          }\n        },\n        error\n      );\n    }\n  }\n  async updateMessages({\n    messages\n  }) {\n    if (messages.length === 0) {\n      return [];\n    }\n    const messageIds = messages.map((m) => m.id);\n    const selectQuery = `SELECT id, content, role, type, \"createdAt\", \"createdAtZ\", thread_id AS \"threadId\", \"resourceId\" FROM ${getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) })} WHERE id IN ($1:list)`;\n    const existingMessagesDb = await this.client.manyOrNone(selectQuery, [messageIds]);\n    if (existingMessagesDb.length === 0) {\n      return [];\n    }\n    const existingMessages = existingMessagesDb.map((msg) => {\n      if (typeof msg.content === \"string\") {\n        try {\n          msg.content = JSON.parse(msg.content);\n        } catch {\n        }\n      }\n      return msg;\n    });\n    const threadIdsToUpdate = /* @__PURE__ */ new Set();\n    await this.client.tx(async (t) => {\n      const queries = [];\n      const columnMapping = {\n        threadId: \"thread_id\"\n      };\n      for (const existingMessage of existingMessages) {\n        const updatePayload = messages.find((m) => m.id === existingMessage.id);\n        if (!updatePayload) continue;\n        const { id, ...fieldsToUpdate } = updatePayload;\n        if (Object.keys(fieldsToUpdate).length === 0) continue;\n        threadIdsToUpdate.add(existingMessage.threadId);\n        if (updatePayload.threadId && updatePayload.threadId !== existingMessage.threadId) {\n          threadIdsToUpdate.add(updatePayload.threadId);\n        }\n        const setClauses = [];\n        const values = [];\n        let paramIndex = 1;\n        const updatableFields = { ...fieldsToUpdate };\n        if (updatableFields.content) {\n          const newContent = {\n            ...existingMessage.content,\n            ...updatableFields.content,\n            // Deep merge metadata if it exists on both\n            ...existingMessage.content?.metadata && updatableFields.content.metadata ? {\n              metadata: {\n                ...existingMessage.content.metadata,\n                ...updatableFields.content.metadata\n              }\n            } : {}\n          };\n          setClauses.push(`content = $${paramIndex++}`);\n          values.push(newContent);\n          delete updatableFields.content;\n        }\n        for (const key in updatableFields) {\n          if (Object.prototype.hasOwnProperty.call(updatableFields, key)) {\n            const dbColumn = columnMapping[key] || key;\n            setClauses.push(`\"${dbColumn}\" = $${paramIndex++}`);\n            values.push(updatableFields[key]);\n          }\n        }\n        if (setClauses.length > 0) {\n          values.push(id);\n          const sql = `UPDATE ${getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) })} SET ${setClauses.join(\", \")} WHERE id = $${paramIndex}`;\n          queries.push(t.none(sql, values));\n        }\n      }\n      if (threadIdsToUpdate.size > 0) {\n        queries.push(\n          t.none(\n            `UPDATE ${getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) })} SET \"updatedAt\" = NOW(), \"updatedAtZ\" = NOW() WHERE id IN ($1:list)`,\n            [Array.from(threadIdsToUpdate)]\n          )\n        );\n      }\n      if (queries.length > 0) {\n        await t.batch(queries);\n      }\n    });\n    const updatedMessages = await this.client.manyOrNone(selectQuery, [messageIds]);\n    return (updatedMessages || []).map((row) => {\n      const message = this.normalizeMessageRow(row);\n      if (typeof message.content === \"string\") {\n        try {\n          return { ...message, content: JSON.parse(message.content) };\n        } catch {\n        }\n      }\n      return message;\n    });\n  }\n  async deleteMessages(messageIds) {\n    if (!messageIds || messageIds.length === 0) {\n      return;\n    }\n    try {\n      const messageTableName = getTableName({ indexName: TABLE_MESSAGES, schemaName: getSchemaName(this.schema) });\n      const threadTableName = getTableName({ indexName: TABLE_THREADS, schemaName: getSchemaName(this.schema) });\n      await this.client.tx(async (t) => {\n        const placeholders = messageIds.map((_, idx) => `$${idx + 1}`).join(\",\");\n        const messages = await t.manyOrNone(\n          `SELECT DISTINCT thread_id FROM ${messageTableName} WHERE id IN (${placeholders})`,\n          messageIds\n        );\n        const threadIds = messages?.map((msg) => msg.thread_id).filter(Boolean) || [];\n        await t.none(`DELETE FROM ${messageTableName} WHERE id IN (${placeholders})`, messageIds);\n        if (threadIds.length > 0) {\n          const updatePromises = threadIds.map(\n            (threadId) => t.none(`UPDATE ${threadTableName} SET \"updatedAt\" = NOW(), \"updatedAtZ\" = NOW() WHERE id = $1`, [threadId])\n          );\n          await Promise.all(updatePromises);\n        }\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_DELETE_MESSAGES_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: { messageIds: messageIds.join(\", \") }\n        },\n        error\n      );\n    }\n  }\n  async getResourceById({ resourceId }) {\n    const tableName = getTableName({ indexName: TABLE_RESOURCES, schemaName: getSchemaName(this.schema) });\n    const result = await this.client.oneOrNone(\n      `SELECT * FROM ${tableName} WHERE id = $1`,\n      [resourceId]\n    );\n    if (!result) {\n      return null;\n    }\n    return {\n      id: result.id,\n      createdAt: result.createdAtZ || result.createdAt,\n      updatedAt: result.updatedAtZ || result.updatedAt,\n      workingMemory: result.workingMemory,\n      metadata: typeof result.metadata === \"string\" ? JSON.parse(result.metadata) : result.metadata\n    };\n  }\n  async saveResource({ resource }) {\n    await this.operations.insert({\n      tableName: TABLE_RESOURCES,\n      record: {\n        ...resource,\n        metadata: JSON.stringify(resource.metadata)\n      }\n    });\n    return resource;\n  }\n  async updateResource({\n    resourceId,\n    workingMemory,\n    metadata\n  }) {\n    const existingResource = await this.getResourceById({ resourceId });\n    if (!existingResource) {\n      const newResource = {\n        id: resourceId,\n        workingMemory,\n        metadata: metadata || {},\n        createdAt: /* @__PURE__ */ new Date(),\n        updatedAt: /* @__PURE__ */ new Date()\n      };\n      return this.saveResource({ resource: newResource });\n    }\n    const updatedResource = {\n      ...existingResource,\n      workingMemory: workingMemory !== void 0 ? workingMemory : existingResource.workingMemory,\n      metadata: {\n        ...existingResource.metadata,\n        ...metadata\n      },\n      updatedAt: /* @__PURE__ */ new Date()\n    };\n    const tableName = getTableName({ indexName: TABLE_RESOURCES, schemaName: getSchemaName(this.schema) });\n    const updates = [];\n    const values = [];\n    let paramIndex = 1;\n    if (workingMemory !== void 0) {\n      updates.push(`\"workingMemory\" = $${paramIndex}`);\n      values.push(workingMemory);\n      paramIndex++;\n    }\n    if (metadata) {\n      updates.push(`metadata = $${paramIndex}`);\n      values.push(JSON.stringify(updatedResource.metadata));\n      paramIndex++;\n    }\n    updates.push(`\"updatedAt\" = $${paramIndex}`);\n    values.push(updatedResource.updatedAt.toISOString());\n    updates.push(`\"updatedAtZ\" = $${paramIndex++}`);\n    values.push(updatedResource.updatedAt.toISOString());\n    paramIndex++;\n    values.push(resourceId);\n    await this.client.none(`UPDATE ${tableName} SET ${updates.join(\", \")} WHERE id = $${paramIndex}`, values);\n    return updatedResource;\n  }\n};\nvar ObservabilityPG = class extends ObservabilityStorage {\n  client;\n  operations;\n  schema;\n  constructor({\n    client,\n    operations,\n    schema\n  }) {\n    super();\n    this.client = client;\n    this.operations = operations;\n    this.schema = schema;\n  }\n  get aiTracingStrategy() {\n    return {\n      preferred: \"batch-with-updates\",\n      supported: [\"batch-with-updates\", \"insert-only\"]\n    };\n  }\n  async createAISpan(span) {\n    try {\n      const startedAt = span.startedAt instanceof Date ? span.startedAt.toISOString() : span.startedAt;\n      const endedAt = span.endedAt instanceof Date ? span.endedAt.toISOString() : span.endedAt;\n      const record = {\n        ...span,\n        startedAt,\n        endedAt,\n        startedAtZ: startedAt,\n        endedAtZ: endedAt\n        // Note: createdAt/updatedAt will be set by database triggers\n      };\n      return this.operations.insert({ tableName: TABLE_AI_SPANS, record });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_CREATE_AI_SPAN_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER,\n          details: {\n            spanId: span.spanId,\n            traceId: span.traceId,\n            spanType: span.spanType,\n            spanName: span.name\n          }\n        },\n        error\n      );\n    }\n  }\n  async getAITrace(traceId) {\n    try {\n      const tableName = getTableName({\n        indexName: TABLE_AI_SPANS,\n        schemaName: getSchemaName(this.schema)\n      });\n      const spans = await this.client.manyOrNone(\n        `SELECT\n          \"traceId\", \"spanId\", \"parentSpanId\", \"name\", \"scope\", \"spanType\",\n          \"attributes\", \"metadata\", \"links\", \"input\", \"output\", \"error\", \"isEvent\",\n          \"startedAtZ\" as \"startedAt\", \"endedAtZ\" as \"endedAt\",\n          \"createdAtZ\" as \"createdAt\", \"updatedAtZ\" as \"updatedAt\"\n        FROM ${tableName}\n        WHERE \"traceId\" = $1\n        ORDER BY \"startedAtZ\" DESC`,\n        [traceId]\n      );\n      if (!spans || spans.length === 0) {\n        return null;\n      }\n      return {\n        traceId,\n        spans: spans.map(\n          (span) => transformFromSqlRow({\n            tableName: TABLE_AI_SPANS,\n            sqlRow: span\n          })\n        )\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_GET_AI_TRACE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER,\n          details: {\n            traceId\n          }\n        },\n        error\n      );\n    }\n  }\n  async updateAISpan({\n    spanId,\n    traceId,\n    updates\n  }) {\n    try {\n      const data = { ...updates };\n      if (data.endedAt instanceof Date) {\n        data.endedAt = data.endedAt.toISOString();\n      }\n      if (data.startedAt instanceof Date) {\n        data.startedAt = data.startedAt.toISOString();\n      }\n      await this.operations.update({\n        tableName: TABLE_AI_SPANS,\n        keys: { spanId, traceId },\n        data\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_UPDATE_AI_SPAN_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER,\n          details: {\n            spanId,\n            traceId\n          }\n        },\n        error\n      );\n    }\n  }\n  async getAITracesPaginated({\n    filters,\n    pagination\n  }) {\n    const page = pagination?.page ?? 0;\n    const perPage = pagination?.perPage ?? 10;\n    const { entityId, entityType, ...actualFilters } = filters || {};\n    const filtersWithDateRange = {\n      ...actualFilters,\n      ...buildDateRangeFilter(pagination?.dateRange, \"startedAtZ\"),\n      parentSpanId: null\n      // Only get root spans for traces\n    };\n    const whereClause = prepareWhereClause(filtersWithDateRange);\n    let actualWhereClause = whereClause.sql;\n    let currentParamIndex = whereClause.args.length + 1;\n    if (entityId && entityType) {\n      let name = \"\";\n      if (entityType === \"workflow\") {\n        name = `workflow run: '${entityId}'`;\n      } else if (entityType === \"agent\") {\n        name = `agent run: '${entityId}'`;\n      } else {\n        const error = new MastraError({\n          id: \"PG_STORE_GET_AI_TRACES_PAGINATED_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER,\n          details: {\n            entityType\n          },\n          text: `Cannot filter by entity type: ${entityType}`\n        });\n        this.logger?.trackException(error);\n        throw error;\n      }\n      whereClause.args.push(name);\n      const statement = `\"name\" = $${currentParamIndex++}`;\n      if (actualWhereClause) {\n        actualWhereClause += ` AND ${statement}`;\n      } else {\n        actualWhereClause = ` WHERE ${statement}`;\n      }\n    }\n    const tableName = getTableName({\n      indexName: TABLE_AI_SPANS,\n      schemaName: getSchemaName(this.schema)\n    });\n    try {\n      const countResult = await this.client.oneOrNone(\n        `SELECT COUNT(*) FROM ${tableName}${actualWhereClause}`,\n        whereClause.args\n      );\n      const count = Number(countResult?.count ?? 0);\n      if (count === 0) {\n        return {\n          pagination: {\n            total: 0,\n            page,\n            perPage,\n            hasMore: false\n          },\n          spans: []\n        };\n      }\n      const spans = await this.client.manyOrNone(\n        `SELECT\n          \"traceId\", \"spanId\", \"parentSpanId\", \"name\", \"scope\", \"spanType\",\n          \"attributes\", \"metadata\", \"links\", \"input\", \"output\", \"error\", \"isEvent\",\n          \"startedAtZ\" as \"startedAt\", \"endedAtZ\" as \"endedAt\",\n          \"createdAtZ\" as \"createdAt\", \"updatedAtZ\" as \"updatedAt\"\n        FROM ${tableName}${actualWhereClause}\n        ORDER BY \"startedAtZ\" DESC\n        LIMIT $${currentParamIndex} OFFSET $${currentParamIndex + 1}`,\n        [...whereClause.args, perPage, page * perPage]\n      );\n      return {\n        pagination: {\n          total: count,\n          page,\n          perPage,\n          hasMore: spans.length === perPage\n        },\n        spans: spans.map(\n          (span) => transformFromSqlRow({\n            tableName: TABLE_AI_SPANS,\n            sqlRow: span\n          })\n        )\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_GET_AI_TRACES_PAGINATED_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER\n        },\n        error\n      );\n    }\n  }\n  async batchCreateAISpans(args) {\n    try {\n      const records = args.records.map((record) => {\n        const startedAt = record.startedAt instanceof Date ? record.startedAt.toISOString() : record.startedAt;\n        const endedAt = record.endedAt instanceof Date ? record.endedAt.toISOString() : record.endedAt;\n        return {\n          ...record,\n          startedAt,\n          endedAt,\n          startedAtZ: startedAt,\n          endedAtZ: endedAt\n          // Note: createdAt/updatedAt will be set by database triggers\n        };\n      });\n      return this.operations.batchInsert({\n        tableName: TABLE_AI_SPANS,\n        records\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_BATCH_CREATE_AI_SPANS_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER\n        },\n        error\n      );\n    }\n  }\n  async batchUpdateAISpans(args) {\n    try {\n      return this.operations.batchUpdate({\n        tableName: TABLE_AI_SPANS,\n        updates: args.records.map((record) => {\n          const data = {\n            ...record.updates\n          };\n          if (data.endedAt instanceof Date) {\n            const endedAt = data.endedAt.toISOString();\n            data.endedAt = endedAt;\n            data.endedAtZ = endedAt;\n          }\n          if (data.startedAt instanceof Date) {\n            const startedAt = data.startedAt.toISOString();\n            data.startedAt = startedAt;\n            data.startedAtZ = startedAt;\n          }\n          return {\n            keys: { spanId: record.spanId, traceId: record.traceId },\n            data\n          };\n        })\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_BATCH_UPDATE_AI_SPANS_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER\n        },\n        error\n      );\n    }\n  }\n  async batchDeleteAITraces(args) {\n    try {\n      const tableName = getTableName({\n        indexName: TABLE_AI_SPANS,\n        schemaName: getSchemaName(this.schema)\n      });\n      const placeholders = args.traceIds.map((_, i) => `$${i + 1}`).join(\", \");\n      await this.client.none(`DELETE FROM ${tableName} WHERE \"traceId\" IN (${placeholders})`, args.traceIds);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"PG_STORE_BATCH_DELETE_AI_TRACES_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER\n        },\n        error\n      );\n    }\n  }\n};\nvar StoreOperationsPG = class extends StoreOperations {\n  client;\n  schemaName;\n  setupSchemaPromise = null;\n  schemaSetupComplete = void 0;\n  constructor({ client, schemaName }) {\n    super();\n    this.client = client;\n    this.schemaName = schemaName;\n  }\n  async hasColumn(table, column) {\n    const schema = this.schemaName || \"public\";\n    const result = await this.client.oneOrNone(\n      `SELECT 1 FROM information_schema.columns WHERE table_schema = $1 AND table_name = $2 AND (column_name = $3 OR column_name = $4)`,\n      [schema, table, column, column.toLowerCase()]\n    );\n    return !!result;\n  }\n  /**\n   * Prepares values for insertion, handling JSONB columns by stringifying them\n   */\n  prepareValuesForInsert(record, tableName) {\n    return Object.entries(record).map(([key, value]) => {\n      const schema = TABLE_SCHEMAS[tableName];\n      const columnSchema = schema?.[key];\n      if (columnSchema?.type === \"jsonb\" && value !== null && value !== void 0) {\n        return JSON.stringify(value);\n      }\n      return value;\n    });\n  }\n  /**\n   * Adds timestamp Z columns to a record if timestamp columns exist\n   */\n  addTimestampZColumns(record) {\n    if (record.createdAt) {\n      record.createdAtZ = record.createdAt;\n    }\n    if (record.created_at) {\n      record.created_atZ = record.created_at;\n    }\n    if (record.updatedAt) {\n      record.updatedAtZ = record.updatedAt;\n    }\n  }\n  /**\n   * Prepares a value for database operations, handling Date objects and JSON serialization\n   * This is schema-aware and only stringifies objects for JSONB columns\n   */\n  prepareValue(value, columnName, tableName) {\n    if (value === null || value === void 0) {\n      return value;\n    }\n    if (value instanceof Date) {\n      return value.toISOString();\n    }\n    const schema = TABLE_SCHEMAS[tableName];\n    const columnSchema = schema?.[columnName];\n    if (columnSchema?.type === \"jsonb\") {\n      return JSON.stringify(value);\n    }\n    if (typeof value === \"object\") {\n      return JSON.stringify(value);\n    }\n    return value;\n  }\n  async setupSchema() {\n    if (!this.schemaName || this.schemaSetupComplete) {\n      return;\n    }\n    const schemaName = getSchemaName(this.schemaName);\n    if (!this.setupSchemaPromise) {\n      this.setupSchemaPromise = (async () => {\n        try {\n          const schemaExists = await this.client.oneOrNone(\n            `\n                SELECT EXISTS (\n                  SELECT 1 FROM information_schema.schemata\n                  WHERE schema_name = $1\n                )\n              `,\n            [this.schemaName]\n          );\n          if (!schemaExists?.exists) {\n            try {\n              await this.client.none(`CREATE SCHEMA IF NOT EXISTS ${schemaName}`);\n              this.logger.info(`Schema \"${this.schemaName}\" created successfully`);\n            } catch (error) {\n              this.logger.error(`Failed to create schema \"${this.schemaName}\"`, { error });\n              throw new Error(\n                `Unable to create schema \"${this.schemaName}\". This requires CREATE privilege on the database. Either create the schema manually or grant CREATE privilege to the user.`\n              );\n            }\n          }\n          this.schemaSetupComplete = true;\n          this.logger.debug(`Schema \"${schemaName}\" is ready for use`);\n        } catch (error) {\n          this.schemaSetupComplete = void 0;\n          this.setupSchemaPromise = null;\n          throw error;\n        } finally {\n          this.setupSchemaPromise = null;\n        }\n      })();\n    }\n    await this.setupSchemaPromise;\n  }\n  async insert({ tableName, record }) {\n    try {\n      this.addTimestampZColumns(record);\n      const schemaName = getSchemaName(this.schemaName);\n      const columns = Object.keys(record).map((col) => parseSqlIdentifier(col, \"column name\"));\n      const values = this.prepareValuesForInsert(record, tableName);\n      const placeholders = values.map((_, i) => `$${i + 1}`).join(\", \");\n      await this.client.none(\n        `INSERT INTO ${getTableName({ indexName: tableName, schemaName })} (${columns.map((c) => `\"${c}\"`).join(\", \")}) VALUES (${placeholders})`,\n        values\n      );\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_INSERT_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  async clearTable({ tableName }) {\n    try {\n      const schemaName = getSchemaName(this.schemaName);\n      const tableNameWithSchema = getTableName({ indexName: tableName, schemaName });\n      await this.client.none(`TRUNCATE TABLE ${tableNameWithSchema} CASCADE`);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_CLEAR_TABLE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  getDefaultValue(type) {\n    switch (type) {\n      case \"timestamp\":\n        return \"DEFAULT NOW()\";\n      case \"jsonb\":\n        return \"DEFAULT '{}'::jsonb\";\n      default:\n        return super.getDefaultValue(type);\n    }\n  }\n  async createTable({\n    tableName,\n    schema\n  }) {\n    try {\n      const timeZColumnNames = Object.entries(schema).filter(([_, def]) => def.type === \"timestamp\").map(([name]) => name);\n      const timeZColumns = Object.entries(schema).filter(([_, def]) => def.type === \"timestamp\").map(([name]) => {\n        const parsedName = parseSqlIdentifier(name, \"column name\");\n        return `\"${parsedName}Z\" TIMESTAMPTZ DEFAULT NOW()`;\n      });\n      const columns = Object.entries(schema).map(([name, def]) => {\n        const parsedName = parseSqlIdentifier(name, \"column name\");\n        const constraints = [];\n        if (def.primaryKey) constraints.push(\"PRIMARY KEY\");\n        if (!def.nullable) constraints.push(\"NOT NULL\");\n        return `\"${parsedName}\" ${def.type.toUpperCase()} ${constraints.join(\" \")}`;\n      });\n      if (this.schemaName) {\n        await this.setupSchema();\n      }\n      const finalColumns = [...columns, ...timeZColumns].join(\",\\n\");\n      const constraintPrefix = this.schemaName ? `${this.schemaName}_` : \"\";\n      const sql = `\n            CREATE TABLE IF NOT EXISTS ${getTableName({ indexName: tableName, schemaName: getSchemaName(this.schemaName) })} (\n              ${finalColumns}\n            );\n            ${tableName === TABLE_WORKFLOW_SNAPSHOT ? `\n            DO $$ BEGIN\n              IF NOT EXISTS (\n                SELECT 1 FROM pg_constraint WHERE conname = '${constraintPrefix}mastra_workflow_snapshot_workflow_name_run_id_key'\n              ) AND NOT EXISTS (\n                SELECT 1 FROM pg_indexes WHERE indexname = '${constraintPrefix}mastra_workflow_snapshot_workflow_name_run_id_key'\n              ) THEN\n                ALTER TABLE ${getTableName({ indexName: tableName, schemaName: getSchemaName(this.schemaName) })}\n                ADD CONSTRAINT ${constraintPrefix}mastra_workflow_snapshot_workflow_name_run_id_key\n                UNIQUE (workflow_name, run_id);\n              END IF;\n            END $$;\n            ` : \"\"}\n          `;\n      await this.client.none(sql);\n      await this.alterTable({\n        tableName,\n        schema,\n        ifNotExists: timeZColumnNames\n      });\n      if (tableName === TABLE_AI_SPANS) {\n        await this.setupTimestampTriggers(tableName);\n      }\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_CREATE_TABLE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Set up timestamp triggers for a table to automatically manage createdAt/updatedAt\n   */\n  async setupTimestampTriggers(tableName) {\n    const schemaName = getSchemaName(this.schemaName);\n    const fullTableName = getTableName({ indexName: tableName, schemaName });\n    const functionName = `${schemaName}.trigger_set_timestamps`;\n    try {\n      const triggerSQL = `\n        -- Create or replace the trigger function in the schema\n        CREATE OR REPLACE FUNCTION ${functionName}()\n        RETURNS TRIGGER AS $$\n        BEGIN\n            IF TG_OP = 'INSERT' THEN\n                NEW.\"createdAt\" = NOW();\n                NEW.\"updatedAt\" = NOW();\n                NEW.\"createdAtZ\" = NOW();\n                NEW.\"updatedAtZ\" = NOW();\n            ELSIF TG_OP = 'UPDATE' THEN\n                NEW.\"updatedAt\" = NOW();\n                NEW.\"updatedAtZ\" = NOW();\n                -- Prevent createdAt from being changed\n                NEW.\"createdAt\" = OLD.\"createdAt\";\n                NEW.\"createdAtZ\" = OLD.\"createdAtZ\";\n            END IF;\n            RETURN NEW;\n        END;\n        $$ LANGUAGE plpgsql;\n\n        -- Drop existing trigger if it exists\n        DROP TRIGGER IF EXISTS ${tableName}_timestamps ON ${fullTableName};\n\n        -- Create the trigger\n        CREATE TRIGGER ${tableName}_timestamps\n            BEFORE INSERT OR UPDATE ON ${fullTableName}\n            FOR EACH ROW\n            EXECUTE FUNCTION ${functionName}();\n      `;\n      await this.client.none(triggerSQL);\n      this.logger?.debug?.(`Set up timestamp triggers for table ${fullTableName}`);\n    } catch (error) {\n      this.logger?.warn?.(`Failed to set up timestamp triggers for ${fullTableName}:`, error);\n    }\n  }\n  /**\n   * Alters table schema to add columns if they don't exist\n   * @param tableName Name of the table\n   * @param schema Schema of the table\n   * @param ifNotExists Array of column names to add if they don't exist\n   */\n  async alterTable({\n    tableName,\n    schema,\n    ifNotExists\n  }) {\n    const fullTableName = getTableName({ indexName: tableName, schemaName: getSchemaName(this.schemaName) });\n    try {\n      for (const columnName of ifNotExists) {\n        if (schema[columnName]) {\n          const columnDef = schema[columnName];\n          const sqlType = this.getSqlType(columnDef.type);\n          const nullable = columnDef.nullable === false ? \"NOT NULL\" : \"\";\n          const defaultValue = columnDef.nullable === false ? this.getDefaultValue(columnDef.type) : \"\";\n          const parsedColumnName = parseSqlIdentifier(columnName, \"column name\");\n          const alterSql = `ALTER TABLE ${fullTableName} ADD COLUMN IF NOT EXISTS \"${parsedColumnName}\" ${sqlType} ${nullable} ${defaultValue}`.trim();\n          await this.client.none(alterSql);\n          if (sqlType === \"TIMESTAMP\") {\n            const alterSql2 = `ALTER TABLE ${fullTableName} ADD COLUMN IF NOT EXISTS \"${parsedColumnName}Z\" TIMESTAMPTZ DEFAULT NOW()`.trim();\n            await this.client.none(alterSql2);\n          }\n          this.logger?.debug?.(`Ensured column ${parsedColumnName} exists in table ${fullTableName}`);\n        }\n      }\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_ALTER_TABLE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  async load({ tableName, keys }) {\n    try {\n      const keyEntries = Object.entries(keys).map(([key, value]) => [parseSqlIdentifier(key, \"column name\"), value]);\n      const conditions = keyEntries.map(([key], index) => `\"${key}\" = $${index + 1}`).join(\" AND \");\n      const values = keyEntries.map(([_, value]) => value);\n      const result = await this.client.oneOrNone(\n        `SELECT * FROM ${getTableName({ indexName: tableName, schemaName: getSchemaName(this.schemaName) })} WHERE ${conditions} ORDER BY \"createdAt\" DESC LIMIT 1`,\n        values\n      );\n      if (!result) {\n        return null;\n      }\n      if (tableName === TABLE_WORKFLOW_SNAPSHOT) {\n        const snapshot = result;\n        if (typeof snapshot.snapshot === \"string\") {\n          snapshot.snapshot = JSON.parse(snapshot.snapshot);\n        }\n        return snapshot;\n      }\n      return result;\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_LOAD_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  async batchInsert({ tableName, records }) {\n    try {\n      await this.client.query(\"BEGIN\");\n      for (const record of records) {\n        await this.insert({ tableName, record });\n      }\n      await this.client.query(\"COMMIT\");\n    } catch (error) {\n      await this.client.query(\"ROLLBACK\");\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_BATCH_INSERT_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName,\n            numberOfRecords: records.length\n          }\n        },\n        error\n      );\n    }\n  }\n  async dropTable({ tableName }) {\n    try {\n      const schemaName = getSchemaName(this.schemaName);\n      const tableNameWithSchema = getTableName({ indexName: tableName, schemaName });\n      await this.client.none(`DROP TABLE IF EXISTS ${tableNameWithSchema}`);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_DROP_TABLE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Create a new index on a table\n   */\n  async createIndex(options) {\n    try {\n      const {\n        name,\n        table,\n        columns,\n        unique = false,\n        concurrent = true,\n        where,\n        method = \"btree\",\n        opclass,\n        storage,\n        tablespace\n      } = options;\n      const schemaName = this.schemaName || \"public\";\n      const fullTableName = getTableName({\n        indexName: table,\n        schemaName: getSchemaName(this.schemaName)\n      });\n      const indexExists = await this.client.oneOrNone(\n        `SELECT 1 FROM pg_indexes\n         WHERE indexname = $1\n         AND schemaname = $2`,\n        [name, schemaName]\n      );\n      if (indexExists) {\n        return;\n      }\n      const uniqueStr = unique ? \"UNIQUE \" : \"\";\n      const concurrentStr = concurrent ? \"CONCURRENTLY \" : \"\";\n      const methodStr = method !== \"btree\" ? `USING ${method} ` : \"\";\n      const columnsStr = columns.map((col) => {\n        if (col.includes(\" DESC\") || col.includes(\" ASC\")) {\n          const [colName, ...modifiers] = col.split(\" \");\n          if (!colName) {\n            throw new Error(`Invalid column specification: ${col}`);\n          }\n          const quotedCol2 = `\"${parseSqlIdentifier(colName, \"column name\")}\" ${modifiers.join(\" \")}`;\n          return opclass ? `${quotedCol2} ${opclass}` : quotedCol2;\n        }\n        const quotedCol = `\"${parseSqlIdentifier(col, \"column name\")}\"`;\n        return opclass ? `${quotedCol} ${opclass}` : quotedCol;\n      }).join(\", \");\n      const whereStr = where ? ` WHERE ${where}` : \"\";\n      const tablespaceStr = tablespace ? ` TABLESPACE ${tablespace}` : \"\";\n      let withStr = \"\";\n      if (storage && Object.keys(storage).length > 0) {\n        const storageParams = Object.entries(storage).map(([key, value]) => `${key} = ${value}`).join(\", \");\n        withStr = ` WITH (${storageParams})`;\n      }\n      const sql = `CREATE ${uniqueStr}INDEX ${concurrentStr}${name} ON ${fullTableName} ${methodStr}(${columnsStr})${withStr}${tablespaceStr}${whereStr}`;\n      await this.client.none(sql);\n    } catch (error) {\n      if (error instanceof Error && error.message.includes(\"CONCURRENTLY\")) {\n        const retryOptions = { ...options, concurrent: false };\n        return this.createIndex(retryOptions);\n      }\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_INDEX_CREATE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName: options.name,\n            tableName: options.table\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Drop an existing index\n   */\n  async dropIndex(indexName) {\n    try {\n      const schemaName = this.schemaName || \"public\";\n      const indexExists = await this.client.oneOrNone(\n        `SELECT 1 FROM pg_indexes\n         WHERE indexname = $1\n         AND schemaname = $2`,\n        [indexName, schemaName]\n      );\n      if (!indexExists) {\n        return;\n      }\n      const sql = `DROP INDEX IF EXISTS ${getSchemaName(this.schemaName)}.${indexName}`;\n      await this.client.none(sql);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_INDEX_DROP_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * List indexes for a specific table or all tables\n   */\n  async listIndexes(tableName) {\n    try {\n      const schemaName = this.schemaName || \"public\";\n      let query;\n      let params;\n      if (tableName) {\n        query = `\n          SELECT\n            i.indexname as name,\n            i.tablename as table,\n            i.indexdef as definition,\n            ix.indisunique as is_unique,\n            pg_size_pretty(pg_relation_size(c.oid)) as size,\n            array_agg(a.attname ORDER BY array_position(ix.indkey, a.attnum)) as columns\n          FROM pg_indexes i\n          JOIN pg_class c ON c.relname = i.indexname AND c.relnamespace = (SELECT oid FROM pg_namespace WHERE nspname = i.schemaname)\n          JOIN pg_index ix ON ix.indexrelid = c.oid\n          JOIN pg_attribute a ON a.attrelid = ix.indrelid AND a.attnum = ANY(ix.indkey)\n          WHERE i.schemaname = $1\n          AND i.tablename = $2\n          GROUP BY i.indexname, i.tablename, i.indexdef, ix.indisunique, c.oid\n        `;\n        params = [schemaName, tableName];\n      } else {\n        query = `\n          SELECT\n            i.indexname as name,\n            i.tablename as table,\n            i.indexdef as definition,\n            ix.indisunique as is_unique,\n            pg_size_pretty(pg_relation_size(c.oid)) as size,\n            array_agg(a.attname ORDER BY array_position(ix.indkey, a.attnum)) as columns\n          FROM pg_indexes i\n          JOIN pg_class c ON c.relname = i.indexname AND c.relnamespace = (SELECT oid FROM pg_namespace WHERE nspname = i.schemaname)\n          JOIN pg_index ix ON ix.indexrelid = c.oid\n          JOIN pg_attribute a ON a.attrelid = ix.indrelid AND a.attnum = ANY(ix.indkey)\n          WHERE i.schemaname = $1\n          GROUP BY i.indexname, i.tablename, i.indexdef, ix.indisunique, c.oid\n        `;\n        params = [schemaName];\n      }\n      const results = await this.client.manyOrNone(query, params);\n      return results.map((row) => {\n        let columns = [];\n        if (typeof row.columns === \"string\" && row.columns.startsWith(\"{\") && row.columns.endsWith(\"}\")) {\n          const arrayContent = row.columns.slice(1, -1);\n          columns = arrayContent ? arrayContent.split(\",\") : [];\n        } else if (Array.isArray(row.columns)) {\n          columns = row.columns;\n        }\n        return {\n          name: row.name,\n          table: row.table,\n          columns,\n          unique: row.is_unique || false,\n          size: row.size || \"0\",\n          definition: row.definition || \"\"\n        };\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_INDEX_LIST_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: tableName ? {\n            tableName\n          } : {}\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Returns definitions for automatic performance indexes\n   * These composite indexes cover both filtering and sorting in single index\n   */\n  getAutomaticIndexDefinitions() {\n    const schemaPrefix = this.schemaName ? `${this.schemaName}_` : \"\";\n    return [\n      // Composite index for threads (filter + sort)\n      {\n        name: `${schemaPrefix}mastra_threads_resourceid_createdat_idx`,\n        table: TABLE_THREADS,\n        columns: [\"resourceId\", \"createdAt DESC\"]\n      },\n      // Composite index for messages (filter + sort)\n      {\n        name: `${schemaPrefix}mastra_messages_thread_id_createdat_idx`,\n        table: TABLE_MESSAGES,\n        columns: [\"thread_id\", \"createdAt DESC\"]\n      },\n      // Composite index for traces (filter + sort)\n      {\n        name: `${schemaPrefix}mastra_traces_name_starttime_idx`,\n        table: TABLE_TRACES,\n        columns: [\"name\", \"startTime DESC\"]\n      },\n      // Composite index for evals (filter + sort)\n      {\n        name: `${schemaPrefix}mastra_evals_agent_name_created_at_idx`,\n        table: TABLE_EVALS,\n        columns: [\"agent_name\", \"created_at DESC\"]\n      },\n      // Composite index for scores (filter + sort)\n      {\n        name: `${schemaPrefix}mastra_scores_trace_id_span_id_created_at_idx`,\n        table: TABLE_SCORERS,\n        columns: [\"traceId\", \"spanId\", \"createdAt DESC\"]\n      },\n      // AI Spans indexes for optimal trace querying\n      {\n        name: `${schemaPrefix}mastra_ai_spans_traceid_startedat_idx`,\n        table: TABLE_AI_SPANS,\n        columns: [\"traceId\", \"startedAt DESC\"]\n      },\n      {\n        name: `${schemaPrefix}mastra_ai_spans_parentspanid_startedat_idx`,\n        table: TABLE_AI_SPANS,\n        columns: [\"parentSpanId\", \"startedAt DESC\"]\n      },\n      {\n        name: `${schemaPrefix}mastra_ai_spans_name_idx`,\n        table: TABLE_AI_SPANS,\n        columns: [\"name\"]\n      },\n      {\n        name: `${schemaPrefix}mastra_ai_spans_spantype_startedat_idx`,\n        table: TABLE_AI_SPANS,\n        columns: [\"spanType\", \"startedAt DESC\"]\n      }\n    ];\n  }\n  /**\n   * Creates automatic indexes for optimal query performance\n   * Uses getAutomaticIndexDefinitions() to determine which indexes to create\n   */\n  async createAutomaticIndexes() {\n    try {\n      const indexes = this.getAutomaticIndexDefinitions();\n      for (const indexOptions of indexes) {\n        try {\n          await this.createIndex(indexOptions);\n        } catch (error) {\n          this.logger?.warn?.(`Failed to create index ${indexOptions.name}:`, error);\n        }\n      }\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_CREATE_PERFORMANCE_INDEXES_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Get detailed statistics for a specific index\n   */\n  async describeIndex(indexName) {\n    try {\n      const schemaName = this.schemaName || \"public\";\n      const query = `\n        SELECT\n          i.indexname as name,\n          i.tablename as table,\n          i.indexdef as definition,\n          ix.indisunique as is_unique,\n          pg_size_pretty(pg_relation_size(c.oid)) as size,\n          array_agg(a.attname ORDER BY array_position(ix.indkey, a.attnum)) as columns,\n          am.amname as method,\n          s.idx_scan as scans,\n          s.idx_tup_read as tuples_read,\n          s.idx_tup_fetch as tuples_fetched\n        FROM pg_indexes i\n        JOIN pg_class c ON c.relname = i.indexname AND c.relnamespace = (SELECT oid FROM pg_namespace WHERE nspname = i.schemaname)\n        JOIN pg_index ix ON ix.indexrelid = c.oid\n        JOIN pg_attribute a ON a.attrelid = ix.indrelid AND a.attnum = ANY(ix.indkey)\n        JOIN pg_am am ON c.relam = am.oid\n        LEFT JOIN pg_stat_user_indexes s ON s.indexrelname = i.indexname AND s.schemaname = i.schemaname\n        WHERE i.schemaname = $1\n        AND i.indexname = $2\n        GROUP BY i.indexname, i.tablename, i.indexdef, ix.indisunique, c.oid, am.amname, s.idx_scan, s.idx_tup_read, s.idx_tup_fetch\n      `;\n      const result = await this.client.oneOrNone(query, [schemaName, indexName]);\n      if (!result) {\n        throw new Error(`Index \"${indexName}\" not found in schema \"${schemaName}\"`);\n      }\n      let columns = [];\n      if (typeof result.columns === \"string\" && result.columns.startsWith(\"{\") && result.columns.endsWith(\"}\")) {\n        const arrayContent = result.columns.slice(1, -1);\n        columns = arrayContent ? arrayContent.split(\",\") : [];\n      } else if (Array.isArray(result.columns)) {\n        columns = result.columns;\n      }\n      return {\n        name: result.name,\n        table: result.table,\n        columns,\n        unique: result.is_unique || false,\n        size: result.size || \"0\",\n        definition: result.definition || \"\",\n        method: result.method || \"btree\",\n        scans: parseInt(result.scans) || 0,\n        tuples_read: parseInt(result.tuples_read) || 0,\n        tuples_fetched: parseInt(result.tuples_fetched) || 0\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_INDEX_DESCRIBE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            indexName\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Update a single record in the database\n   */\n  async update({\n    tableName,\n    keys,\n    data\n  }) {\n    try {\n      const setColumns = [];\n      const setValues = [];\n      let paramIndex = 1;\n      Object.entries(data).forEach(([key, value]) => {\n        const parsedKey = parseSqlIdentifier(key, \"column name\");\n        setColumns.push(`\"${parsedKey}\" = $${paramIndex++}`);\n        setValues.push(this.prepareValue(value, key, tableName));\n      });\n      const whereConditions = [];\n      const whereValues = [];\n      Object.entries(keys).forEach(([key, value]) => {\n        const parsedKey = parseSqlIdentifier(key, \"column name\");\n        whereConditions.push(`\"${parsedKey}\" = $${paramIndex++}`);\n        whereValues.push(this.prepareValue(value, key, tableName));\n      });\n      const tableName_ = getTableName({\n        indexName: tableName,\n        schemaName: getSchemaName(this.schemaName)\n      });\n      const sql = `UPDATE ${tableName_} SET ${setColumns.join(\", \")} WHERE ${whereConditions.join(\" AND \")}`;\n      const values = [...setValues, ...whereValues];\n      await this.client.none(sql, values);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_UPDATE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Update multiple records in a single batch transaction\n   */\n  async batchUpdate({\n    tableName,\n    updates\n  }) {\n    try {\n      await this.client.query(\"BEGIN\");\n      for (const { keys, data } of updates) {\n        await this.update({ tableName, keys, data });\n      }\n      await this.client.query(\"COMMIT\");\n    } catch (error) {\n      await this.client.query(\"ROLLBACK\");\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_BATCH_UPDATE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName,\n            numberOfRecords: updates.length\n          }\n        },\n        error\n      );\n    }\n  }\n  /**\n   * Delete multiple records by keys\n   */\n  async batchDelete({ tableName, keys }) {\n    try {\n      if (keys.length === 0) {\n        return;\n      }\n      const tableName_ = getTableName({\n        indexName: tableName,\n        schemaName: getSchemaName(this.schemaName)\n      });\n      await this.client.tx(async (t) => {\n        for (const keySet of keys) {\n          const conditions = [];\n          const values = [];\n          let paramIndex = 1;\n          Object.entries(keySet).forEach(([key, value]) => {\n            const parsedKey = parseSqlIdentifier(key, \"column name\");\n            conditions.push(`\"${parsedKey}\" = $${paramIndex++}`);\n            values.push(value);\n          });\n          const sql = `DELETE FROM ${tableName_} WHERE ${conditions.join(\" AND \")}`;\n          await t.none(sql, values);\n        }\n      });\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_BATCH_DELETE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            tableName,\n            numberOfRecords: keys.length\n          }\n        },\n        error\n      );\n    }\n  }\n};\nfunction transformScoreRow(row) {\n  const data = {\n    ...row,\n    input: row.input !== null ? safelyParseJSON(row.input) : void 0,\n    scorer: row.scorer !== null ? safelyParseJSON(row.scorer) : void 0,\n    preprocessStepResult: row.preprocessStepResult !== null ? safelyParseJSON(row.preprocessStepResult) : void 0,\n    analyzeStepResult: row.analyzeStepResult !== null ? safelyParseJSON(row.analyzeStepResult) : void 0,\n    output: row.output !== null ? safelyParseJSON(row.output) : void 0,\n    additionalContext: row.additionalContext !== null ? safelyParseJSON(row.additionalContext) : void 0,\n    runtimeContext: row.runtimeContext !== null ? safelyParseJSON(row.runtimeContext) : void 0,\n    entity: row.entity !== null ? safelyParseJSON(row.entity) : void 0,\n    createdAt: row.createdAtZ || row.createdAt,\n    updatedAt: row.updatedAtZ || row.updatedAt\n  };\n  const result = {};\n  for (const key in SCORERS_SCHEMA) {\n    result[key] = data[key];\n  }\n  return result;\n}\nvar ScoresPG = class extends ScoresStorage {\n  client;\n  operations;\n  schema;\n  constructor({\n    client,\n    operations,\n    schema\n  }) {\n    super();\n    this.client = client;\n    this.operations = operations;\n    this.schema = schema;\n  }\n  async getScoreById({ id }) {\n    try {\n      const result = await this.client.oneOrNone(\n        `SELECT * FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE id = $1`,\n        [id]\n      );\n      return result ? transformScoreRow(result) : null;\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_SCORE_BY_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async getScoresByScorerId({\n    scorerId,\n    pagination,\n    entityId,\n    entityType,\n    source\n  }) {\n    try {\n      const conditions = [`\"scorerId\" = $1`];\n      const queryParams = [scorerId];\n      let paramIndex = 2;\n      if (entityId) {\n        conditions.push(`\"entityId\" = $${paramIndex++}`);\n        queryParams.push(entityId);\n      }\n      if (entityType) {\n        conditions.push(`\"entityType\" = $${paramIndex++}`);\n        queryParams.push(entityType);\n      }\n      if (source) {\n        conditions.push(`\"source\" = $${paramIndex++}`);\n        queryParams.push(source);\n      }\n      const whereClause = conditions.join(\" AND \");\n      const total = await this.client.oneOrNone(\n        `SELECT COUNT(*) FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE ${whereClause}`,\n        queryParams\n      );\n      if (total?.count === \"0\" || !total?.count) {\n        return {\n          pagination: {\n            total: 0,\n            page: pagination.page,\n            perPage: pagination.perPage,\n            hasMore: false\n          },\n          scores: []\n        };\n      }\n      const result = await this.client.manyOrNone(\n        `SELECT * FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE ${whereClause} ORDER BY \"createdAt\" DESC LIMIT $${paramIndex++} OFFSET $${paramIndex++}`,\n        [...queryParams, pagination.perPage, pagination.page * pagination.perPage]\n      );\n      return {\n        pagination: {\n          total: Number(total?.count) || 0,\n          page: pagination.page,\n          perPage: pagination.perPage,\n          hasMore: Number(total?.count) > (pagination.page + 1) * pagination.perPage\n        },\n        scores: result.map(transformScoreRow)\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_SCORES_BY_SCORER_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async saveScore(score) {\n    let parsedScore;\n    try {\n      parsedScore = saveScorePayloadSchema.parse(score);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_SAVE_SCORE_FAILED_INVALID_SCORE_PAYLOAD\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER,\n          details: {\n            scorer: score.scorer.name,\n            entityId: score.entityId,\n            entityType: score.entityType,\n            traceId: score.traceId || \"\",\n            spanId: score.spanId || \"\"\n          }\n        },\n        error\n      );\n    }\n    try {\n      const id = crypto.randomUUID();\n      const {\n        scorer,\n        preprocessStepResult,\n        analyzeStepResult,\n        metadata,\n        input,\n        output,\n        additionalContext,\n        runtimeContext,\n        entity,\n        ...rest\n      } = parsedScore;\n      await this.operations.insert({\n        tableName: TABLE_SCORERS,\n        record: {\n          id,\n          ...rest,\n          input: JSON.stringify(input) || \"\",\n          output: JSON.stringify(output) || \"\",\n          scorer: scorer ? JSON.stringify(scorer) : null,\n          preprocessStepResult: preprocessStepResult ? JSON.stringify(preprocessStepResult) : null,\n          analyzeStepResult: analyzeStepResult ? JSON.stringify(analyzeStepResult) : null,\n          metadata: metadata ? JSON.stringify(metadata) : null,\n          additionalContext: additionalContext ? JSON.stringify(additionalContext) : null,\n          runtimeContext: runtimeContext ? JSON.stringify(runtimeContext) : null,\n          entity: entity ? JSON.stringify(entity) : null,\n          createdAt: (/* @__PURE__ */ new Date()).toISOString(),\n          updatedAt: (/* @__PURE__ */ new Date()).toISOString()\n        }\n      });\n      const scoreFromDb = await this.getScoreById({ id });\n      return { score: scoreFromDb };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_SAVE_SCORE_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async getScoresByRunId({\n    runId,\n    pagination\n  }) {\n    try {\n      const total = await this.client.oneOrNone(\n        `SELECT COUNT(*) FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE \"runId\" = $1`,\n        [runId]\n      );\n      if (total?.count === \"0\" || !total?.count) {\n        return {\n          pagination: {\n            total: 0,\n            page: pagination.page,\n            perPage: pagination.perPage,\n            hasMore: false\n          },\n          scores: []\n        };\n      }\n      const result = await this.client.manyOrNone(\n        `SELECT * FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE \"runId\" = $1 LIMIT $2 OFFSET $3`,\n        [runId, pagination.perPage, pagination.page * pagination.perPage]\n      );\n      return {\n        pagination: {\n          total: Number(total?.count) || 0,\n          page: pagination.page,\n          perPage: pagination.perPage,\n          hasMore: Number(total?.count) > (pagination.page + 1) * pagination.perPage\n        },\n        scores: result.map(transformScoreRow)\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_SCORES_BY_RUN_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async getScoresByEntityId({\n    entityId,\n    entityType,\n    pagination\n  }) {\n    try {\n      const total = await this.client.oneOrNone(\n        `SELECT COUNT(*) FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE \"entityId\" = $1 AND \"entityType\" = $2`,\n        [entityId, entityType]\n      );\n      if (total?.count === \"0\" || !total?.count) {\n        return {\n          pagination: {\n            total: 0,\n            page: pagination.page,\n            perPage: pagination.perPage,\n            hasMore: false\n          },\n          scores: []\n        };\n      }\n      const result = await this.client.manyOrNone(\n        `SELECT * FROM ${getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema })} WHERE \"entityId\" = $1 AND \"entityType\" = $2 LIMIT $3 OFFSET $4`,\n        [entityId, entityType, pagination.perPage, pagination.page * pagination.perPage]\n      );\n      return {\n        pagination: {\n          total: Number(total?.count) || 0,\n          page: pagination.page,\n          perPage: pagination.perPage,\n          hasMore: Number(total?.count) > (pagination.page + 1) * pagination.perPage\n        },\n        scores: result.map(transformScoreRow)\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_SCORES_BY_ENTITY_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async getScoresBySpan({\n    traceId,\n    spanId,\n    pagination\n  }) {\n    try {\n      const tableName = getTableName({ indexName: TABLE_SCORERS, schemaName: this.schema });\n      const countSQLResult = await this.client.oneOrNone(\n        `SELECT COUNT(*) as count FROM ${tableName} WHERE \"traceId\" = $1 AND \"spanId\" = $2`,\n        [traceId, spanId]\n      );\n      const total = Number(countSQLResult?.count ?? 0);\n      const result = await this.client.manyOrNone(\n        `SELECT * FROM ${tableName} WHERE \"traceId\" = $1 AND \"spanId\" = $2 ORDER BY \"createdAt\" DESC LIMIT $3 OFFSET $4`,\n        [traceId, spanId, pagination.perPage + 1, pagination.page * pagination.perPage]\n      );\n      const hasMore = result.length > pagination.perPage;\n      const scores = result.slice(0, pagination.perPage).map((row) => transformScoreRow(row)) ?? [];\n      return {\n        scores,\n        pagination: {\n          total,\n          page: pagination.page,\n          perPage: pagination.perPage,\n          hasMore\n        }\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_SCORES_BY_SPAN_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n};\nvar TracesPG = class extends TracesStorage {\n  client;\n  operations;\n  schema;\n  constructor({\n    client,\n    operations,\n    schema\n  }) {\n    super();\n    this.client = client;\n    this.operations = operations;\n    this.schema = schema;\n  }\n  async getTraces(args) {\n    if (args.fromDate || args.toDate) {\n      args.dateRange = {\n        start: args.fromDate,\n        end: args.toDate\n      };\n    }\n    try {\n      const result = await this.getTracesPaginated(args);\n      return result.traces;\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_TRACES_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async getTracesPaginated(args) {\n    const { name, scope, page = 0, perPage = 100, attributes, filters, dateRange } = args;\n    const fromDate = dateRange?.start;\n    const toDate = dateRange?.end;\n    const currentOffset = page * perPage;\n    const queryParams = [];\n    const conditions = [];\n    let paramIndex = 1;\n    if (name) {\n      conditions.push(`name LIKE $${paramIndex++}`);\n      queryParams.push(`${name}%`);\n    }\n    if (scope) {\n      conditions.push(`scope = $${paramIndex++}`);\n      queryParams.push(scope);\n    }\n    if (attributes) {\n      Object.entries(attributes).forEach(([key, value]) => {\n        const parsedKey = parseFieldKey(key);\n        conditions.push(`attributes->>'${parsedKey}' = $${paramIndex++}`);\n        queryParams.push(value);\n      });\n    }\n    if (filters) {\n      Object.entries(filters).forEach(([key, value]) => {\n        const parsedKey = parseFieldKey(key);\n        conditions.push(`\"${parsedKey}\" = $${paramIndex++}`);\n        queryParams.push(value);\n      });\n    }\n    if (fromDate) {\n      conditions.push(`\"createdAt\" >= $${paramIndex++}`);\n      queryParams.push(fromDate);\n    }\n    if (toDate) {\n      conditions.push(`\"createdAt\" <= $${paramIndex++}`);\n      queryParams.push(toDate);\n    }\n    const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(\" AND \")}` : \"\";\n    try {\n      const countResult = await this.client.oneOrNone(\n        `SELECT COUNT(*) FROM ${getTableName({ indexName: TABLE_TRACES, schemaName: getSchemaName(this.schema) })} ${whereClause}`,\n        queryParams\n      );\n      const total = Number(countResult?.count ?? 0);\n      if (total === 0) {\n        return {\n          traces: [],\n          total: 0,\n          page,\n          perPage,\n          hasMore: false\n        };\n      }\n      const dataResult = await this.client.manyOrNone(\n        `SELECT * FROM ${getTableName({ indexName: TABLE_TRACES, schemaName: getSchemaName(this.schema) })} ${whereClause} ORDER BY \"startTime\" DESC LIMIT $${paramIndex++} OFFSET $${paramIndex++}`,\n        [...queryParams, perPage, currentOffset]\n      );\n      const traces = dataResult.map((row) => ({\n        id: row.id,\n        parentSpanId: row.parentSpanId,\n        traceId: row.traceId,\n        name: row.name,\n        scope: row.scope,\n        kind: row.kind,\n        status: safelyParseJSON(row.status),\n        events: safelyParseJSON(row.events),\n        links: safelyParseJSON(row.links),\n        attributes: safelyParseJSON(row.attributes),\n        startTime: row.startTime,\n        endTime: row.endTime,\n        other: safelyParseJSON(row.other),\n        createdAt: row.createdAtZ || row.createdAt\n      }));\n      return {\n        traces,\n        total,\n        page,\n        perPage,\n        hasMore: currentOffset + traces.length < total\n      };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_TRACES_PAGINATED_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async batchTraceInsert({ records }) {\n    this.logger.debug(\"Batch inserting traces\", { count: records.length });\n    await this.operations.batchInsert({\n      tableName: TABLE_TRACES,\n      records\n    });\n  }\n};\nfunction parseWorkflowRun(row) {\n  let parsedSnapshot = row.snapshot;\n  if (typeof parsedSnapshot === \"string\") {\n    try {\n      parsedSnapshot = JSON.parse(row.snapshot);\n    } catch (e) {\n      console.warn(`Failed to parse snapshot for workflow ${row.workflow_name}: ${e}`);\n    }\n  }\n  return {\n    workflowName: row.workflow_name,\n    runId: row.run_id,\n    snapshot: parsedSnapshot,\n    resourceId: row.resourceId,\n    createdAt: new Date(row.createdAtZ || row.createdAt),\n    updatedAt: new Date(row.updatedAtZ || row.updatedAt)\n  };\n}\nvar WorkflowsPG = class extends WorkflowsStorage {\n  client;\n  operations;\n  schema;\n  constructor({\n    client,\n    operations,\n    schema\n  }) {\n    super();\n    this.client = client;\n    this.operations = operations;\n    this.schema = schema;\n  }\n  updateWorkflowResults({\n    // workflowName,\n    // runId,\n    // stepId,\n    // result,\n    // runtimeContext,\n  }) {\n    throw new Error(\"Method not implemented.\");\n  }\n  updateWorkflowState({\n    // workflowName,\n    // runId,\n    // opts,\n  }) {\n    throw new Error(\"Method not implemented.\");\n  }\n  async persistWorkflowSnapshot({\n    workflowName,\n    runId,\n    resourceId,\n    snapshot\n  }) {\n    try {\n      const now = (/* @__PURE__ */ new Date()).toISOString();\n      await this.client.none(\n        `INSERT INTO ${getTableName({ indexName: TABLE_WORKFLOW_SNAPSHOT, schemaName: this.schema })} (workflow_name, run_id, \"resourceId\", snapshot, \"createdAt\", \"updatedAt\")\n                 VALUES ($1, $2, $3, $4, $5, $6)\n                 ON CONFLICT (workflow_name, run_id) DO UPDATE\n                 SET \"resourceId\" = $3, snapshot = $4, \"updatedAt\" = $6`,\n        [workflowName, runId, resourceId, JSON.stringify(snapshot), now, now]\n      );\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_PERSIST_WORKFLOW_SNAPSHOT_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async loadWorkflowSnapshot({\n    workflowName,\n    runId\n  }) {\n    try {\n      const result = await this.operations.load({\n        tableName: TABLE_WORKFLOW_SNAPSHOT,\n        keys: { workflow_name: workflowName, run_id: runId }\n      });\n      return result ? result.snapshot : null;\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_LOAD_WORKFLOW_SNAPSHOT_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  async getWorkflowRunById({\n    runId,\n    workflowName\n  }) {\n    try {\n      const conditions = [];\n      const values = [];\n      let paramIndex = 1;\n      if (runId) {\n        conditions.push(`run_id = $${paramIndex}`);\n        values.push(runId);\n        paramIndex++;\n      }\n      if (workflowName) {\n        conditions.push(`workflow_name = $${paramIndex}`);\n        values.push(workflowName);\n        paramIndex++;\n      }\n      const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(\" AND \")}` : \"\";\n      const query = `\n          SELECT * FROM ${getTableName({ indexName: TABLE_WORKFLOW_SNAPSHOT, schemaName: this.schema })}\n          ${whereClause}\n          ORDER BY \"createdAt\" DESC LIMIT 1\n        `;\n      const queryValues = values;\n      const result = await this.client.oneOrNone(query, queryValues);\n      if (!result) {\n        return null;\n      }\n      return parseWorkflowRun(result);\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_WORKFLOW_RUN_BY_ID_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            runId,\n            workflowName: workflowName || \"\"\n          }\n        },\n        error\n      );\n    }\n  }\n  async getWorkflowRuns({\n    workflowName,\n    fromDate,\n    toDate,\n    limit,\n    offset,\n    resourceId,\n    status\n  } = {}) {\n    try {\n      const conditions = [];\n      const values = [];\n      let paramIndex = 1;\n      if (workflowName) {\n        conditions.push(`workflow_name = $${paramIndex}`);\n        values.push(workflowName);\n        paramIndex++;\n      }\n      if (status) {\n        conditions.push(`snapshot::jsonb ->> 'status' = $${paramIndex}`);\n        values.push(status);\n        paramIndex++;\n      }\n      if (resourceId) {\n        const hasResourceId = await this.operations.hasColumn(TABLE_WORKFLOW_SNAPSHOT, \"resourceId\");\n        if (hasResourceId) {\n          conditions.push(`\"resourceId\" = $${paramIndex}`);\n          values.push(resourceId);\n          paramIndex++;\n        } else {\n          console.warn(`[${TABLE_WORKFLOW_SNAPSHOT}] resourceId column not found. Skipping resourceId filter.`);\n        }\n      }\n      if (fromDate) {\n        conditions.push(`\"createdAt\" >= $${paramIndex}`);\n        values.push(fromDate);\n        paramIndex++;\n      }\n      if (toDate) {\n        conditions.push(`\"createdAt\" <= $${paramIndex}`);\n        values.push(toDate);\n        paramIndex++;\n      }\n      const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(\" AND \")}` : \"\";\n      let total = 0;\n      if (limit !== void 0 && offset !== void 0) {\n        const countResult = await this.client.one(\n          `SELECT COUNT(*) as count FROM ${getTableName({ indexName: TABLE_WORKFLOW_SNAPSHOT, schemaName: this.schema })} ${whereClause}`,\n          values\n        );\n        total = Number(countResult.count);\n      }\n      const query = `\n          SELECT * FROM ${getTableName({ indexName: TABLE_WORKFLOW_SNAPSHOT, schemaName: this.schema })}\n          ${whereClause}\n          ORDER BY \"createdAt\" DESC\n          ${limit !== void 0 && offset !== void 0 ? ` LIMIT $${paramIndex} OFFSET $${paramIndex + 1}` : \"\"}\n        `;\n      const queryValues = limit !== void 0 && offset !== void 0 ? [...values, limit, offset] : values;\n      const result = await this.client.manyOrNone(query, queryValues);\n      const runs = (result || []).map((row) => {\n        return parseWorkflowRun(row);\n      });\n      return { runs, total: total || runs.length };\n    } catch (error) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_GET_WORKFLOW_RUNS_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY,\n          details: {\n            workflowName: workflowName || \"all\"\n          }\n        },\n        error\n      );\n    }\n  }\n};\n\n// src/storage/index.ts\nvar PostgresStore = class extends MastraStorage {\n  #db;\n  #pgp;\n  #config;\n  schema;\n  isConnected = false;\n  stores;\n  constructor(config) {\n    try {\n      validateConfig(\"PostgresStore\", config);\n      super({ name: \"PostgresStore\" });\n      this.schema = config.schemaName || \"public\";\n      if (isConnectionStringConfig(config)) {\n        this.#config = {\n          connectionString: config.connectionString,\n          max: config.max,\n          idleTimeoutMillis: config.idleTimeoutMillis,\n          ssl: config.ssl\n        };\n      } else if (isCloudSqlConfig(config)) {\n        this.#config = {\n          ...config,\n          max: config.max,\n          idleTimeoutMillis: config.idleTimeoutMillis\n        };\n      } else if (isHostConfig(config)) {\n        this.#config = {\n          host: config.host,\n          port: config.port,\n          database: config.database,\n          user: config.user,\n          password: config.password,\n          ssl: config.ssl,\n          max: config.max,\n          idleTimeoutMillis: config.idleTimeoutMillis\n        };\n      } else {\n        throw new Error(\n          \"PostgresStore: invalid config. Provide either {connectionString}, {host,port,database,user,password}, or a pg ClientConfig (e.g., Cloud SQL connector with `stream`).\"\n        );\n      }\n      this.stores = {};\n    } catch (e) {\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_PG_STORE_INITIALIZATION_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.USER\n        },\n        e\n      );\n    }\n  }\n  async init() {\n    if (this.isConnected) {\n      return;\n    }\n    try {\n      this.isConnected = true;\n      this.#pgp = pgPromise();\n      this.#db = this.#pgp(this.#config);\n      const operations = new StoreOperationsPG({ client: this.#db, schemaName: this.schema });\n      const scores = new ScoresPG({ client: this.#db, operations, schema: this.schema });\n      const traces = new TracesPG({ client: this.#db, operations, schema: this.schema });\n      const workflows = new WorkflowsPG({ client: this.#db, operations, schema: this.schema });\n      const legacyEvals = new LegacyEvalsPG({ client: this.#db, schema: this.schema });\n      const memory = new MemoryPG({ client: this.#db, schema: this.schema, operations });\n      const observability = new ObservabilityPG({ client: this.#db, operations, schema: this.schema });\n      this.stores = {\n        operations,\n        scores,\n        traces,\n        workflows,\n        legacyEvals,\n        memory,\n        observability\n      };\n      await super.init();\n      try {\n        await operations.createAutomaticIndexes();\n      } catch (indexError) {\n        console.warn(\"Failed to create indexes:\", indexError);\n      }\n    } catch (error) {\n      this.isConnected = false;\n      throw new MastraError(\n        {\n          id: \"MASTRA_STORAGE_POSTGRES_STORE_INIT_FAILED\",\n          domain: ErrorDomain.STORAGE,\n          category: ErrorCategory.THIRD_PARTY\n        },\n        error\n      );\n    }\n  }\n  get db() {\n    if (!this.#db) {\n      throw new Error(`PostgresStore: Store is not initialized, please call \"init()\" first.`);\n    }\n    return this.#db;\n  }\n  get pgp() {\n    if (!this.#pgp) {\n      throw new Error(`PostgresStore: Store is not initialized, please call \"init()\" first.`);\n    }\n    return this.#pgp;\n  }\n  get supports() {\n    return {\n      selectByIncludeResourceScope: true,\n      resourceWorkingMemory: true,\n      hasColumn: true,\n      createTable: true,\n      deleteMessages: true,\n      aiTracing: true,\n      indexManagement: true,\n      getScoresBySpan: true\n    };\n  }\n  /** @deprecated use getEvals instead */\n  async getEvalsByAgentName(agentName, type) {\n    return this.stores.legacyEvals.getEvalsByAgentName(agentName, type);\n  }\n  async getEvals(options = {}) {\n    return this.stores.legacyEvals.getEvals(options);\n  }\n  /**\n   * @deprecated use getTracesPaginated instead\n   */\n  async getTraces(args) {\n    return this.stores.traces.getTraces(args);\n  }\n  async getTracesPaginated(args) {\n    return this.stores.traces.getTracesPaginated(args);\n  }\n  async batchTraceInsert({ records }) {\n    return this.stores.traces.batchTraceInsert({ records });\n  }\n  async createTable({\n    tableName,\n    schema\n  }) {\n    return this.stores.operations.createTable({ tableName, schema });\n  }\n  async alterTable({\n    tableName,\n    schema,\n    ifNotExists\n  }) {\n    return this.stores.operations.alterTable({ tableName, schema, ifNotExists });\n  }\n  async clearTable({ tableName }) {\n    return this.stores.operations.clearTable({ tableName });\n  }\n  async dropTable({ tableName }) {\n    return this.stores.operations.dropTable({ tableName });\n  }\n  async insert({ tableName, record }) {\n    return this.stores.operations.insert({ tableName, record });\n  }\n  async batchInsert({ tableName, records }) {\n    return this.stores.operations.batchInsert({ tableName, records });\n  }\n  async load({ tableName, keys }) {\n    return this.stores.operations.load({ tableName, keys });\n  }\n  /**\n   * Memory\n   */\n  async getThreadById({ threadId }) {\n    return this.stores.memory.getThreadById({ threadId });\n  }\n  /**\n   * @deprecated use getThreadsByResourceIdPaginated instead\n   */\n  async getThreadsByResourceId(args) {\n    return this.stores.memory.getThreadsByResourceId(args);\n  }\n  async getThreadsByResourceIdPaginated(args) {\n    return this.stores.memory.getThreadsByResourceIdPaginated(args);\n  }\n  async saveThread({ thread }) {\n    return this.stores.memory.saveThread({ thread });\n  }\n  async updateThread({\n    id,\n    title,\n    metadata\n  }) {\n    return this.stores.memory.updateThread({ id, title, metadata });\n  }\n  async deleteThread({ threadId }) {\n    return this.stores.memory.deleteThread({ threadId });\n  }\n  async getMessages(args) {\n    return this.stores.memory.getMessages(args);\n  }\n  async getMessagesById({\n    messageIds,\n    format\n  }) {\n    return this.stores.memory.getMessagesById({ messageIds, format });\n  }\n  async getMessagesPaginated(args) {\n    return this.stores.memory.getMessagesPaginated(args);\n  }\n  async saveMessages(args) {\n    return this.stores.memory.saveMessages(args);\n  }\n  async updateMessages({\n    messages\n  }) {\n    return this.stores.memory.updateMessages({ messages });\n  }\n  async deleteMessages(messageIds) {\n    return this.stores.memory.deleteMessages(messageIds);\n  }\n  async getResourceById({ resourceId }) {\n    return this.stores.memory.getResourceById({ resourceId });\n  }\n  async saveResource({ resource }) {\n    return this.stores.memory.saveResource({ resource });\n  }\n  async updateResource({\n    resourceId,\n    workingMemory,\n    metadata\n  }) {\n    return this.stores.memory.updateResource({ resourceId, workingMemory, metadata });\n  }\n  /**\n   * Workflows\n   */\n  async updateWorkflowResults({\n    workflowName,\n    runId,\n    stepId,\n    result,\n    runtimeContext\n  }) {\n    return this.stores.workflows.updateWorkflowResults({ workflowName, runId, stepId, result, runtimeContext });\n  }\n  async updateWorkflowState({\n    workflowName,\n    runId,\n    opts\n  }) {\n    return this.stores.workflows.updateWorkflowState({ workflowName, runId, opts });\n  }\n  async persistWorkflowSnapshot({\n    workflowName,\n    runId,\n    resourceId,\n    snapshot\n  }) {\n    return this.stores.workflows.persistWorkflowSnapshot({ workflowName, runId, resourceId, snapshot });\n  }\n  async loadWorkflowSnapshot({\n    workflowName,\n    runId\n  }) {\n    return this.stores.workflows.loadWorkflowSnapshot({ workflowName, runId });\n  }\n  async getWorkflowRuns(args = {}) {\n    return this.stores.workflows.getWorkflowRuns(args);\n  }\n  async getWorkflowRunById({\n    runId,\n    workflowName\n  }) {\n    return this.stores.workflows.getWorkflowRunById({ runId, workflowName });\n  }\n  async close() {\n    this.pgp.end();\n  }\n  /**\n   * AI Tracing / Observability\n   */\n  async createAISpan(span) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.createAISpan(span);\n  }\n  async updateAISpan({\n    spanId,\n    traceId,\n    updates\n  }) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.updateAISpan({ spanId, traceId, updates });\n  }\n  async getAITrace(traceId) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.getAITrace(traceId);\n  }\n  async getAITracesPaginated(args) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.getAITracesPaginated(args);\n  }\n  async batchCreateAISpans(args) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.batchCreateAISpans(args);\n  }\n  async batchUpdateAISpans(args) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.batchUpdateAISpans(args);\n  }\n  async batchDeleteAITraces(args) {\n    if (!this.stores.observability) {\n      throw new MastraError({\n        id: \"PG_STORE_OBSERVABILITY_NOT_INITIALIZED\",\n        domain: ErrorDomain.STORAGE,\n        category: ErrorCategory.SYSTEM,\n        text: \"Observability storage is not initialized\"\n      });\n    }\n    return this.stores.observability.batchDeleteAITraces(args);\n  }\n  /**\n   * Scorers\n   */\n  async getScoreById({ id }) {\n    return this.stores.scores.getScoreById({ id });\n  }\n  async getScoresByScorerId({\n    scorerId,\n    pagination,\n    entityId,\n    entityType,\n    source\n  }) {\n    return this.stores.scores.getScoresByScorerId({ scorerId, pagination, entityId, entityType, source });\n  }\n  async saveScore(score) {\n    return this.stores.scores.saveScore(score);\n  }\n  async getScoresByRunId({\n    runId,\n    pagination\n  }) {\n    return this.stores.scores.getScoresByRunId({ runId, pagination });\n  }\n  async getScoresByEntityId({\n    entityId,\n    entityType,\n    pagination\n  }) {\n    return this.stores.scores.getScoresByEntityId({\n      entityId,\n      entityType,\n      pagination\n    });\n  }\n  async getScoresBySpan({\n    traceId,\n    spanId,\n    pagination\n  }) {\n    return this.stores.scores.getScoresBySpan({ traceId, spanId, pagination });\n  }\n};\n\n// src/vector/prompt.ts\nvar PGVECTOR_PROMPT = `When querying PG Vector, you can ONLY use the operators listed below. Any other operators will be rejected.\nImportant: Don't explain how to construct the filter - use the specified operators and fields to search the content and return relevant results.\nIf a user tries to give an explicit operator that is not supported, reject the filter entirely and let them know that the operator is not supported.\n\nBasic Comparison Operators:\n- $eq: Exact match (default when using field: value)\n  Example: { \"category\": \"electronics\" }\n- $ne: Not equal\n  Example: { \"category\": { \"$ne\": \"electronics\" } }\n- $gt: Greater than\n  Example: { \"price\": { \"$gt\": 100 } }\n- $gte: Greater than or equal\n  Example: { \"price\": { \"$gte\": 100 } }\n- $lt: Less than\n  Example: { \"price\": { \"$lt\": 100 } }\n- $lte: Less than or equal\n  Example: { \"price\": { \"$lte\": 100 } }\n\nArray Operators:\n- $in: Match any value in array\n  Example: { \"category\": { \"$in\": [\"electronics\", \"books\"] } }\n- $nin: Does not match any value in array\n  Example: { \"category\": { \"$nin\": [\"electronics\", \"books\"] } }\n- $all: Match all values in array\n  Example: { \"tags\": { \"$all\": [\"premium\", \"sale\"] } }\n- $elemMatch: Match array elements that meet all specified conditions\n  Example: { \"items\": { \"$elemMatch\": { \"price\": { \"$gt\": 100 } } } }\n- $contains: Check if array contains value\n  Example: { \"tags\": { \"$contains\": \"premium\" } }\n\nLogical Operators:\n- $and: Logical AND (implicit when using multiple conditions)\n  Example: { \"$and\": [{ \"price\": { \"$gt\": 100 } }, { \"category\": \"electronics\" }] }\n- $or: Logical OR\n  Example: { \"$or\": [{ \"price\": { \"$lt\": 50 } }, { \"category\": \"books\" }] }\n- $not: Logical NOT\n  Example: { \"$not\": { \"category\": \"electronics\" } }\n- $nor: Logical NOR\n  Example: { \"$nor\": [{ \"price\": { \"$lt\": 50 } }, { \"category\": \"books\" }] }\n\nElement Operators:\n- $exists: Check if field exists\n  Example: { \"rating\": { \"$exists\": true } }\n\nSpecial Operators:\n- $size: Array length check\n  Example: { \"tags\": { \"$size\": 2 } }\n\nRestrictions:\n- Regex patterns are not supported\n- Direct RegExp patterns will throw an error\n- Nested fields are supported using dot notation\n- Multiple conditions on the same field are supported with both implicit and explicit $and\n- Array operations work on array fields only\n- Basic operators handle array values as JSON strings\n- Empty arrays in conditions are handled gracefully\n- Only logical operators ($and, $or, $not, $nor) can be used at the top level\n- All other operators must be used within a field condition\n  Valid: { \"field\": { \"$gt\": 100 } }\n  Valid: { \"$and\": [...] }\n  Invalid: { \"$gt\": 100 }\n  Invalid: { \"$contains\": \"value\" }\n- Logical operators must contain field conditions, not direct operators\n  Valid: { \"$and\": [{ \"field\": { \"$gt\": 100 } }] }\n  Invalid: { \"$and\": [{ \"$gt\": 100 }] }\n- $not operator:\n  - Must be an object\n  - Cannot be empty\n  - Can be used at field level or top level\n  - Valid: { \"$not\": { \"field\": \"value\" } }\n  - Valid: { \"field\": { \"$not\": { \"$eq\": \"value\" } } }\n- Other logical operators ($and, $or, $nor):\n  - Can only be used at top level or nested within other logical operators\n  - Can not be used on a field level, or be nested inside a field\n  - Can not be used inside an operator\n  - Valid: { \"$and\": [{ \"field\": { \"$gt\": 100 } }] }\n  - Valid: { \"$or\": [{ \"$and\": [{ \"field\": { \"$gt\": 100 } }] }] }\n  - Invalid: { \"field\": { \"$and\": [{ \"$gt\": 100 }] } }\n  - Invalid: { \"field\": { \"$or\": [{ \"$gt\": 100 }] } }\n  - Invalid: { \"field\": { \"$gt\": { \"$and\": [{...}] } } }\n- $elemMatch requires an object with conditions\n  Valid: { \"array\": { \"$elemMatch\": { \"field\": \"value\" } } }\n  Invalid: { \"array\": { \"$elemMatch\": \"value\" } }\n\nExample Complex Query:\n{\n  \"$and\": [\n    { \"category\": { \"$in\": [\"electronics\", \"computers\"] } },\n    { \"price\": { \"$gte\": 100, \"$lte\": 1000 } },\n    { \"tags\": { \"$all\": [\"premium\"] } },\n    { \"rating\": { \"$exists\": true, \"$gt\": 4 } },\n    { \"$or\": [\n      { \"stock\": { \"$gt\": 0 } },\n      { \"preorder\": true }\n    ]}\n  ]\n}`;\n\nexport { PGVECTOR_PROMPT, PgVector, PostgresStore };\n//# sourceMappingURL=index.js.map\n//# sourceMappingURL=index.js.map"],"names":["types","types_1","require$$0","assert","require$$1","require$$2","global","PromiseAdapter","ColorConsole","npm","isNull","addReadProp","messageGap","InternalError","addInspection","utils","DatabasePool","InnerState","ServerFormatting","queryResultErrorCode","errorMessages","QueryResultError","getIndexPos","parsingErrorCode","SQLParsingError","error","parser","lib","QueryFileError","PreparedStatementError","ParameterizedQueryError","require$$3","errors","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","QueryFile","PreparedStatement","ParameterizedQuery","queryResult","parsePromise","Column","TableName","_TN","ColumnSet","concat","insert","sql","update","values","sets","Events","SpecialQuery","ConnectionContext","onError","stream","require$$10","BatchError","batch","errorReasons","PageError","page","SequenceError","sequence","main","require$$11","require$$12","require$$13","require$$14","require$$15","require$$17","require$$18"],"mappings":"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SAAS,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5E,CAAC;AACD;AACA,SAAS,aAAa,CAAC,IAAI,EAAE;AAC7B,IAAI,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,GAAG,GAAG;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,GAAG,EAAE,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE;AACrB,QAAQ,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;AACnC,QAAQ,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;AAC3B,YAAY,UAAU,CAAC,GAAG,CAAC,CAAC;AAC5B,YAAY,OAAO,MAAM,CAAC;AAC1B,QAAA,CAAS;AACT,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AACvC,YAAY,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;AACrC,QAAA,CAAS;AACT,QAAQ,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AACpC,IAAA,CAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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AE,EAAEJ,UAAa;AACrB,IAAI,KAAK,EAAE0B,OAAmB;AAC9B,IAAI,UAAU,EAAEE,UAAwB;AACxC,IAAI,QAAQ,EAAEC,QAAsB;AACpC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eACA,MAAM,MAAM,SAASjB,YAAU,CAAC;AAChC;AACA,IAAI,WAAW,CAAC,GAAG,EAAE;AACrB,QAAQ,KAAK,EAAE,CAAC;AAChB;AACA,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACrC,YAAY,MAAM,IAAI,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;AAC1C,YAAY,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAClC,YAAY,IAAI,KAAK,IAAI,IAAI,EAAE;AAC/B,gBAAgB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AACpC,YAAA,CAAa;AACb,YAAY,IAAI,KAAK,IAAI,IAAI,EAAE;AAC/B,gBAAgB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AACpC,YAAA,CAAa;AACb,QAAA,CAAS,MAAM;AACf,YAAY,GAAG,GAAGd,QAAM,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,MAA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AAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AAChE,IAAA,CAAK;AACL,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE;AACvB,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,GAAGA,KAAG,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AAChE,IAAA,CAAK;AACL,IAAI,IAAI,MAAM,IAAI,IAAI,EAAE;AACxB,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,kBAAkB,CAAC,CAAC;AAC9C,IAAA,CAAK;AACL,IAAI,IAAI,MAAM,IAAI,IAAI,EAAE;AACxB,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,kBAAkB,CAAC,CAAC;AAC9C,IAAA,CAAK;AACL,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;AAC3B,IAAI,OAAO,KAAK,CAAC,IAAI,CAACA,KAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AAClC,CAAC,CAAC;AACF;AACAA,KAAG,CAAC,KAAK,CAAC,aAAa,CAACmC,QAAM,EAAE,YAAY;AAC5C,IAAI,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC3B,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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AAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACrE,IAAI,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,WAAW,GAAG,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;AACjF,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAsC,WAAS,CAAC,SAAS,CAAC,MAAM,GAAG,UAAU,OAAO,EAAE;AAChD,IAAI,IAAI,EAAE,GAAG,OAAO,CAAC;AACrB,IAAI,IAAI,EAAE,EAAE,YAAYA,WAAS,CAAC,EAAE;AACpC,QAAQ,EAAE,GAAG,IAAIA,WAAS,CAAC,OAAO,CAAC,CAAC;AACpC,IAAA,CAAK;AACL;AACA,IAAI,OAAO,IAAIA,WAAS,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;AAC/E,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,WAAS,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,OAAO,EAAE;AAC/C,IAAI,IAAI,EAAE,GAAG,OAAO,CAAC;AACrB,IAAI,IAAI,EAAE,EAAE,YAAYA,WAAS,CAAC,EAAE;AACpC,QAAQ,EAAE,GAAG,IAAIA,WAAS,CAAC,OAAO,CAAC,CAAC;AACpC,IAAA,CAAK;AACL,IAAI,MAAM,QAAQ,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,CAAC;AACnC,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,KAAK;AACrC,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB,QAAQ,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;AAC/B,IAAA,CAAK,CAAC,CAAC;AACP,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI;AAC5B,QAAQ,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,EAAE;AAChC,YAAY,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACvC,QAAA,CAAS,MAAM;AACf,YAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACzB,QAAA,CAAS;AACT,IAAA,CAAK,CAAC,CAAC;AACP,IAAI,OAAO,IAAIA,WAAS,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;AACpD,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,WAAS,CAAC,SAAS,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AAChD,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;AAC9B,QAAQ,OAAO,MAAM,CAAC;AACtB,IAAA,CAAK;AACL,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC;AACtB,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI;AAC9B,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;AACrC,QAAQ,IAAI,CAAC,CAAC,IAAI,EAAE;AACpB,YAAY,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AACpD,QAAA,CAAS,MAAM;AACf,YAAY,IAAI,CAAC,CAAC,MAAM,IAAI,KAAK,IAAI,CAAC,EAAE;AACxC,gBAAgB,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;AACzC,YAAA,CAAa;AACb,QAAA,CAAS;AACT,IAAA,CAAK,CAAC,CAAC;AACP,IAAI,OAAO,MAAM,CAAC;AAClB,CAAC,CAAC;AACF;AACA,SAAS,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE;AACjC,IAAI,MAAM,CAAC,GAAG;AACd,QAAQ,MAAM;AACd,QAAQ,IAAI,EAAE,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI;AACxC,KAAK,CAAC;AACN,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI,MAAM,CAAC;AAChC,IAAI,IAAI,CAAC,CAAC,MAAM,EAAE;AAClB,QAAQ,CAAC,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACjC,IAAA,CAAK,MAAM;AACX,QAAQ,CAAC,CAAC,KAAK,GAAG,KAAK,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC;AAC3D,IAAA,CAAK;AACL,IAAI,OAAO,CAAC,CAAC;AACb,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,WAAS,CAAC,SAAS,CAAC,QAAQ,GAAG,UAAU,KAAK,EAAE;AAChD,IAAI,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC5C,IAAI,MAAM,IAAI,GAAGtC,KAAG,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC;AAC5C,QAAQ,IAAI,GAAGA,KAAG,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;AAC9C,QAAQ,KAAK,GAAG;AAChB,YAAY,aAAa;AACzB,SAAS,CAAC;AACV,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;AACpB,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;AAClD,IAAA,CAAK;AACL,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AAC7B,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,CAAC;AACxC,QAAQ,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI;AAClC,YAAY,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACtC,QAAA,CAAS,CAAC,CAAC;AACX,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;AAC/B,IAAA,CAAK,MAAM;AACX,QAAQ,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,CAAC;AACzC,IAAA,CAAK;AACL,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;AAC3B,IAAI,OAAO,KAAK,CAAC,IAAI,CAACA,KAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AAClC,CAAC,CAAC;AACF;AACAA,KAAG,CAAC,KAAK,CAAC,aAAa,CAACsC,WAAS,EAAE,YAAY;AAC/C,IAAI,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC3B,CAAC,CAAC,CAAC;AACH;IACA,SAAc,GAAG,YAACA,WAAS,CAAC;;;;;;;;;;;AC/nB5B,MAAM,YAACR,WAAS,CAAC,GAAGrC,SAA2B,CAAC;AAChD;AACA,MAAMO,KAAG,GAAG;AACZ,IAAI,UAAU,EAAEL,UAA2B;AAC3C,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS4C,QAAM,CAAC,OAAO,EAAE,MAAM,EAAE;AACjC,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AACjC,QAAQ,MAAM,IAAI,SAAS,CAAC,yCAAyC,CAAC,CAAC;AACvE,IAAA,CAAK;AACL,IAAI,MAAM,SAAS,GAAG,CAAC,MAAM,CAAC,CAAC;AAC/B,IAAI,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,KAAK;AAC1C,QAAQ,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;AACnC;AACA,YAAY,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5B,QAAA,CAAS;AACT,QAAQ,IAAI,CAAC,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;AACxC,YAAY,IAAI,CAAC,YAAYT,WAAS,EAAE;AACxC;AACA,gBAAgB,OAAO,KAAK,CAAC,CAAC,CAAC9B,KAAG,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;AACpE,YAAA,CAAa;AACb,YAAY,IAAI,OAAO,IAAI,CAAC,EAAE;AAC9B;AACA,gBAAgB,IAAI,GAAG,GAAG,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAK,QAAQ,GAAG,CAAC,CAAC,OAAO,GAAG,EAAE,CAAC;AACtF,gBAAgB,GAAG,GAAG,GAAG,CAAC,MAAM,KAAK,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,GAAG,CAAC;AACrF,gBAAgB,OAAO,KAAK,CAACA,KAAG,CAAC,UAAU,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;AAC/E,YAAA,CAAa;AACb,QAAA,CAAS;AACT,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACpE,IAAA,CAAK,CAAC,CAAC;AACP;AACA,IAAI,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACxC,CAAC;AACD;AACA,SAAS,KAAK,CAAC,CAAC,EAAE;AAClB;AACA,IAAI,OAAO,CAAC,CAAC,OAAO,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;AAC7C,CAAC;AACD;AACA,IAAA,QAAc,GAAG,SAACuC,QAAM,CAAC;;;;;;;;;;;AC1EzB,MAAM,YAACH,WAAS,CAAC,GAAG3C,SAAwB,CAAC;AAC7C,MAAM,YAAC6C,WAAS,CAAC,GAAG3C,SAAwB,CAAC;AAC7C;AACA,MAAMK,KAAG,GAAG;AACZ,IAAI,UAAU,EAAEJ,UAA2B;AAC3C,IAAI,KAAK,EAAE0B,OAAsB;AACjC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASkB,QAAM,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE;AAC9C;AACA,IAAI,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;AAC3C,QAAQ,MAAM,IAAI,SAAS,CAAC,uCAAuC,CAAC,CAAC;AACrE,IAAA,CAAK;AACL;AACA,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACxC;AACA,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACjC,QAAQ,MAAM,IAAI,SAAS,CAAC,gDAAgD,CAAC,CAAC;AAC9E,IAAA,CAAK;AACL;AACA,IAAI,IAAI,OAAO,YAAYF,WAAS,EAAE;AACtC,QAAQ,IAAItC,KAAG,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;AACrC,YAAY,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;AAClC,QAAA,CAAS;AACT,IAAA,CAAK,MAAM;AACX,QAAQ,IAAI,OAAO,IAAIA,KAAG,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;AAClD,YAAY,MAAM,IAAI,SAAS,CAAC,oEAAoE,CAAC,CAAC;AACtG,QAAA,CAAS;AACT,QAAQ,OAAO,GAAG,IAAIsC,WAAS,CAAC,OAAO,IAAI,IAAI,CAAC,CAAC;AACjD,IAAA,CAAK;AACL;AACA,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE;AACjC,QAAQ,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;AAC1E,IAAA,CAAK;AACL;AACA,IAAI,IAAI,CAAC,KAAK,EAAE;AAChB,QAAQ,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;AAClD,IAAA,CAAK;AACL;AACA,IAAI,IAAI,EAAE,KAAK,YAAYF,WAAS,CAAC,EAAE;AACvC,QAAQ,KAAK,GAAG,IAAIA,WAAS,CAAC,KAAK,CAAC,CAAC;AACrC,IAAA,CAAK;AACL;AACA,IAAI,IAAI,KAAK,GAAG,MAAM,GAAGK,KAAG,CAAC,OAAO,GAAGA,KAAG,CAAC,OAAO,CAAC;AACnD,IAAI,MAAM,SAAS,GAAG,CAAC,MAAM,CAAC,CAAC;AAC/B;AACA,IAAI,MAAM,MAAM,GAAGzC,KAAG,CAAC,UAAU,CAAC,EAAE,CAAC,MAAM,CAAC;AAC5C,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,SAAS,CAAC,CAAC;AAClE;AACA,IAAI,IAAI,OAAO,EAAE;AACjB,QAAQ,OAAO,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,KAAK;AAC9C,YAAY,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,KAAK,QAAQ,EAAE;AAC7C,gBAAgB,MAAM,IAAI,KAAK,CAAC,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5E,YAAA,CAAa;AACb,YAAY,OAAO,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,GAAG,GAAG,CAAC;AACxF,QAAA,CAAS,CAAC,CAAC,IAAI,EAAE,CAAC;AAClB,IAAA,CAAK;AACL,IAAI,OAAO,KAAK,GAAG,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,GAAG,GAAG,CAAC;AAC3F,CAAC;AACD;AACA,MAAMyC,KAAG,GAAG;AACZ,IAAI,OAAO,EAAE,6BAA6B;AAC1C,IAAI,OAAO,EAAE,6BAA6B;AAC1C,CAAC,CAAC;AACF;IACA,QAAc,GAAG,SAACD,QAAM,CAAC;;;;;;;;;;;AC7IzB,MAAM,SAAC9C,QAAM,CAAC,GAAGD,QAAuB,CAAC;AACzC,MAAM,YAAC2C,WAAS,CAAC,GAAGzC,SAAwB,CAAC;AAC7C,MAAM,YAAC2C,WAAS,CAAC,GAAG1C,SAAwB,CAAC;AAC7C;AACA,MAAMI,KAAG,GAAG;AACZ,IAAI,UAAU,EAAEsB,UAA2B;AAC3C,IAAI,KAAK,EAAEE,OAAsB;AACjC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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IAAI,MAAM,KAAK,SAAS,EAAE;AAC9C,wBAAwB,IAAI,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;AAC5C,oBAAA,CAAqB;AACrB,gBAAA,CAAiB;AACjB,YAAA,CAAa;AACb,QAAA,CAAS;AACT,IAAA,CAAK,CAAC,CAAC;AACP,IAAI,OAAO,IAAI,CAAC;AAChB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,OAAO,CAAC,GAAG,EAAE,OAAO,EAAE,EAAE,EAAE;AACnC,IAAI,IAAI,CAACA,KAAG,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE;AAChC,QAAQ,MAAM,IAAI,SAAS,CAAC,oDAAoD,CAAC,CAAC;AAClF,IAAA,CAAK;AACL,IAAI,OAAO,GAAGN,QAAM,CAAC,OAAO,EAAE,CAAC,WAAW,EAAE,cAAc,CAAC,CAAC,CAAC;AAC7D,IAAI,EAAE,GAAG,CAAC,OAAO,EAAE,KAAK,UAAU,IAAI,EAAE,GAAG,IAAI,CAAC;AAChD,IAAI,OAAO,QAAQ,CAAC,GAAG,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AAC1C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,QAAQ,CAAC,IAAI,EAAE;AACxB;AACA,IAAI,IAAI,CAAC,IAA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,IAAII,KAAG,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAC/E,YAAA,CAAa;AACb,QAAA,CAAS;AACT,IAAA,CAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,OAAO,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE;AAC/C,QAAQ,IAAI,OAAO,OAAO,CAAC,OAAO,KAAK,UAAU,EAAE;AACnD,YAAY,IAAI;AAChB,gBAAgB,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;AACrD,YAAA,CAAa,CAAC,OAAO,CAAC,EAAE;AACxB;AACA;AACA,gBAAgB,OAAO,CAAC,YAAY,KAAK,GAAG,CAAC,GAAG,IAAIA,KAAG,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAC/E,YAAA,CAAa;AACb,QAAA,CAAS;AACT,IAAA,CAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE;AAClC,QAAQ,IAAI,OAAO,OAAO,CAAC,IAAI,KAAK,UAAU,EAAE;AAChD,YAAY,IAAI;AAChB,gBAAgB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACtC,YAAA,CAAa,CAAC,OAAO,CAAC,EAAE;AACxB;AACA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M,CAAC,UAAU,CAAC,CAAC;AACjE;AACA,IAAI,OAAO;AACX,QAAQ,IAAI,EAAE,OAAO,EAAE,QAAQ;AAC/B,KAAK,CAAC;AACN,CAAC;;;;;;;;;;;AC/UD,MAAM,CAAC,MAAM,CAAC,GAAGP,MAAmB,CAAC;AACrC,MAAM,SAACC,QAAM,CAAC,GAAGC,QAAmB,CAAC;AACrC,MAAM,CAAC,WAAW,EAAE,gBAAgB,EAAE,WAAW,CAAC,GAAGC,YAA0B,CAAC;AAChF,MAAM,CAAC,iBAAiB,CAAC,GAAG0B,OAAoB,CAAC;AACjD,MAAM,eAACf,cAAY,CAAC,GAAGiB,YAA0B,CAAC;AAClD,MAAM,cAACS,aAAW,CAAC,GAAGR,aAAyB,CAAC;AAChD;AACA,MAAMzB,KAAG,GAAG;AACZ,IAAI,KAAK,EAAE0B,OAAkB;AAC7B,IAAI,QAAQ,EAAEC,OAAyB;AACvC,IAAI,OAAO,EAAEC,OAAoB;AACjC,IAAI,KAAK,EAAEC,KAAkB;AAC7B,IAAI,IAAI,EAAEqB,IAAiB;AAC3B,IAAI,IAAI,EAAES,IAAiB;AAC3B,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE;AAClC;AACA,IAAI,MAAM,MAAM,GAAG,IAAI;AACvB,QAAQ,EAAE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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,GAAG,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE;AACxD,YAAY,MAAM,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAEA,aAAW,CAAC,GAAG,CAAC,CAAC;AAC3E,YAAY,OAAO,SAAS,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;AAC7C,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,IAAI,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE;AAC5C,YAAY,OAAO,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAEA,aAAW,CAAC,IAAI,CAAC,CAAC;AACzE,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,SAAS,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE;AAC9D,YAAY,MAAM,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAEA,aAAW,CAAC,GAAG,GAAGA,aAAW,CAAC,IAAI,CAAC,CAAC;AAC9F,YAAY,OAAO,SAAS,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;AAC7C,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,UAAU,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE;AAClD,YAAY,OAAO,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAEA,aAAW,CAAC,IAAI,GAAGA,aAAW,CAAC,IAAI,CAAC,CAAC;AAC5F,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,GAAG,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE;AAC3C,YAAY,OAAO,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAEA,aAAW,CAAC,GAAG,CAAC,CAAC;AACxE,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,GAAG,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE;AACxD,YAAY,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;AACpD,iBAAiB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;AACrD,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,IAAI,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE;AACzD,YAAY,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,CAAC;AACpD,iBAAiB,IAAI,CAAC,IAAI,IAAI;AAC9B,oBAAoB,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;AAC9C,oBAAoB,OAAO,IAAI,CAAC;AAChC,gBAAA,CAAiB,CAAC,CAAC;AACnB,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,IAAI,GAAG,YAAY;AAC/B,YAAY,MAAM,IAAI,GAAGjC,KAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AAC1D,YAAYN,QAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;AAC1C,YAAY,OAAO,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AACzD,QAAA,CAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,GAAG,CAAC,MAAM,GAAG,YAAY;AACjC,YAAY,MAAM,IAAI,GAAGM,KAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AAC1D,YAAYN,QAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAA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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66]}