{"version":3,"file":"hono-logger.mjs","sources":["../../node_modules/hono/dist/utils/color.js","../../node_modules/hono/dist/middleware/logger/index.js"],"sourcesContent":["// src/utils/color.ts\nfunction getColorEnabled() {\n  const { process, Deno } = globalThis;\n  const isNoColor = typeof Deno?.noColor === \"boolean\" ? Deno.noColor : process !== void 0 ? (\n    // eslint-disable-next-line no-unsafe-optional-chaining\n    \"NO_COLOR\" in process?.env\n  ) : false;\n  return !isNoColor;\n}\nasync function getColorEnabledAsync() {\n  const { navigator } = globalThis;\n  const cfWorkers = \"cloudflare:workers\";\n  const isNoColor = navigator !== void 0 && navigator.userAgent === \"Cloudflare-Workers\" ? await (async () => {\n    try {\n      return \"NO_COLOR\" in ((await import(cfWorkers)).env ?? {});\n    } catch {\n      return false;\n    }\n  })() : !getColorEnabled();\n  return !isNoColor;\n}\nexport {\n  getColorEnabled,\n  getColorEnabledAsync\n};\n","// src/middleware/logger/index.ts\nimport { getColorEnabledAsync } from \"../../utils/color.js\";\nvar humanize = (times) => {\n  const [delimiter, separator] = [\",\", \".\"];\n  const orderTimes = times.map((v) => v.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + delimiter));\n  return orderTimes.join(separator);\n};\nvar time = (start) => {\n  const delta = Date.now() - start;\n  return humanize([delta < 1e3 ? delta + \"ms\" : Math.round(delta / 1e3) + \"s\"]);\n};\nvar colorStatus = async (status) => {\n  const colorEnabled = await getColorEnabledAsync();\n  if (colorEnabled) {\n    switch (status / 100 | 0) {\n      case 5:\n        return `\\x1B[31m${status}\\x1B[0m`;\n      case 4:\n        return `\\x1B[33m${status}\\x1B[0m`;\n      case 3:\n        return `\\x1B[36m${status}\\x1B[0m`;\n      case 2:\n        return `\\x1B[32m${status}\\x1B[0m`;\n    }\n  }\n  return `${status}`;\n};\nasync function log(fn, prefix, method, path, status = 0, elapsed) {\n  const out = prefix === \"<--\" /* Incoming */ ? `${prefix} ${method} ${path}` : `${prefix} ${method} ${path} ${await colorStatus(status)} ${elapsed}`;\n  fn(out);\n}\nvar logger = (fn = console.log) => {\n  return async function logger2(c, next) {\n    const { method, url } = c.req;\n    const path = url.slice(url.indexOf(\"/\", 8));\n    await log(fn, \"<--\" /* Incoming */, method, path);\n    const start = Date.now();\n    await next();\n    await log(fn, \"-->\" /* Outgoing */, method, path, c.res.status, time(start));\n  };\n};\nexport {\n  logger\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1]}