{"version":3,"file":"hono-cors.mjs","sources":["../../node_modules/hono/dist/middleware/cors/index.js"],"sourcesContent":["// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}